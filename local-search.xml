<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Python é¢è¯•ç®—æ³•é¢˜ç›®æŒ‰ç…§è¾“å…¥çš„æ•°å­—åˆ†å‰²å­—æ¯</title>
    <link href="/2025/07/22/python%E9%9D%A2%E8%AF%95%E7%AE%97%E6%B3%95%E9%A2%98%E7%9B%AE/"/>
    <url>/2025/07/22/python%E9%9D%A2%E8%AF%95%E7%AE%97%E6%B3%95%E9%A2%98%E7%9B%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="Python-é¢è¯•ç®—æ³•é¢˜ç›®æŒ‰ç…§è¾“å…¥çš„æ•°å­—åˆ†å‰²å­—æ¯"><a href="#Python-é¢è¯•ç®—æ³•é¢˜ç›®æŒ‰ç…§è¾“å…¥çš„æ•°å­—åˆ†å‰²å­—æ¯" class="headerlink" title="Python é¢è¯•ç®—æ³•é¢˜ç›®æŒ‰ç…§è¾“å…¥çš„æ•°å­—åˆ†å‰²å­—æ¯"></a>Python é¢è¯•ç®—æ³•é¢˜ç›®æŒ‰ç…§è¾“å…¥çš„æ•°å­—åˆ†å‰²å­—æ¯</h1><hr><h2 id="é¢˜ç›®ä»‹ç»ï¼š"><a href="#é¢˜ç›®ä»‹ç»ï¼š" class="headerlink" title="é¢˜ç›®ä»‹ç»ï¼š"></a>é¢˜ç›®ä»‹ç»ï¼š</h2><p>ç»™å‡ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç„¶åè¾“å…¥ä¸€ä¸ªæ•°å­—é•¿åº¦ï¼Œæ ¹æ®è¾“å…¥çš„æ•°å­—é•¿åº¦å¯¹å­—ç¬¦ä¸²è¿›è¡Œåˆ†å‰²ï¼Œå¦‚æœæŒ‰ç…§æ•°å­—é•¿åº¦åˆ†å‰²å‡ºçš„ä¿¡æ¯é‡Œé¢å«æœ‰é‡å¤é¡¹åˆ™èˆå¼ƒåªä¿ç•™å…¶ä¸­ä¸€ä¸ªå³å¯ï¼Œè¾“å‡ºçš„æ—¶å€™éœ€è¦ä¿ç•™åŸæœ‰çš„é¡ºåºã€‚</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs text">s = &#x27;AAABCADDE&#x27;<br>k = 3<br><br>é‚£ä¹ˆæˆ‘ä»¬æ‰“å°å‡ºæ¥çš„å°±æ˜¯ u1 = &#x27;A&#x27; u2=&#x27;BCA&#x27; u3=&#x27;DE&#x27;<br></code></pre></td></tr></table></figure><hr><h2 id="ä»£ç å®ç°ï¼š"><a href="#ä»£ç å®ç°ï¼š" class="headerlink" title="ä»£ç å®ç°ï¼š"></a>ä»£ç å®ç°ï¼š</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> math<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">merge_the_tools</span>(<span class="hljs-params">string, k</span>):<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> string:<br>        <span class="hljs-keyword">return</span><br>    result = <span class="hljs-string">&#x27;&#x27;</span><br>    <br>    <span class="hljs-keyword">for</span> i, ch <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(string):<br>        <span class="hljs-keyword">if</span> i &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> i % k == <span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">if</span> result:<br>                <span class="hljs-built_in">print</span>(result)<br>            result = <span class="hljs-string">&#x27;&#x27;</span><br><br>        <span class="hljs-keyword">if</span> ch <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> result:<br>            result += ch<br>            <br>    <span class="hljs-keyword">if</span> result:<br>        <span class="hljs-built_in">print</span>(result)<br>            <br>            <br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    string, k = <span class="hljs-built_in">input</span>(), <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    merge_the_tools(string,k)<br></code></pre></td></tr></table></figure><hr><h2 id="ä»£ç è§£é‡Šï¼š"><a href="#ä»£ç è§£é‡Šï¼š" class="headerlink" title="ä»£ç è§£é‡Šï¼š"></a>ä»£ç è§£é‡Šï¼š</h2><p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ†æå¦‚æœå½“å‰é•¿åº¦å’Œè¾“å…¥çš„é•¿åº¦ä¸€è‡´ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯¹è¾“å…¥çš„æ•°å­—å’Œé•¿åº¦å–ä½™ä¸º0çš„æ—¶å€™è¡¨ç¤ºæˆ‘ä»¬å·²ç»å–å€¼å¤Ÿäº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦åœ¨ä½™æ•°ä¸º0çš„æ—¶å€™è¾“å‡ºä¿¡æ¯å³å¯ï¼Œç„¶åæ¸…ç©ºå·²ç»å­˜å‚¨çš„ä¿¡æ¯ï¼Œç»§ç»­ä¸Šé¢çš„é€»è¾‘</p><p>åœ¨è¿™é‡Œæˆ‘ä½¿ç”¨äº†<code>enumerate</code> å‡½æ•°å¯ä»¥å°†éå†å‡ºæ¥çš„ä¿¡æ¯åŒ…å«æ•°å­—ç´¢å¼•ä¿¡æ¯ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ç´¢å¼•ä¿¡æ¯æ¥è¿›è¡Œå–ä½™çš„æ“ä½œï¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">for</span> i, ch <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(string):<br>       <span class="hljs-keyword">if</span> i &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> i % k == <span class="hljs-number">0</span>:<br>           <span class="hljs-keyword">if</span> result:<br>               <span class="hljs-built_in">print</span>(result)<br>           result = <span class="hljs-string">&#x27;&#x27;</span><br></code></pre></td></tr></table></figure><p>é‚£ä¹ˆæˆ‘ä»¬åªéœ€åœ¨ä½™æ•°ä¸æ˜¯0çš„æƒ…å†µä¸‹å°†æˆ‘ä»¬çš„ä¿¡æ¯æ·»åŠ åˆ°<code>result</code>ä¸­ï¼Œè¿™æ—¶å€™ä½ åªéœ€è¦åˆ¤æ–­ä¹‹å‰æ˜¯å¦å­˜åœ¨ç›¸åŒçš„ä¿¡æ¯å³å¯ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">if</span> ch <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> result:<br>           result += ch<br></code></pre></td></tr></table></figure><p>é‚£ä¹ˆå¦‚æœå­˜åœ¨æç«¯æƒ…å†µï¼Œä½ åªæœ‰3ä¸ªæ•°å­—ï¼Œä½†æ˜¯ä½ è¾“å…¥äº†5æ­¤æ—¶ä¸Šé¢çš„éƒ½ä¸é€‚ç”¨ï¼Œé‚£ä¹ˆä½ åªéœ€è¦åˆ¤æ–­å½“å‰resultä¸æ˜¯ç©ºï¼Œç›´æ¥å°†è¾“å‡ºçš„ä¿¡æ¯æ‰“å°å‡ºæ¥å³å¯ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">if</span> result:<br>       <span class="hljs-built_in">print</span>(result)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>é¢è¯•é¢˜ç›®æœé›†</category>
      
      <category>Python ç®—æ³•é¢˜ç›®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Redis é¡¹ç›®å®æˆ˜åˆ†æ</title>
    <link href="/2025/07/22/redis%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E5%88%86%E6%9E%90/"/>
    <url>/2025/07/22/redis%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E5%88%86%E6%9E%90/</url>
    
    <content type="html"><![CDATA[<h1 id="Redis-é¡¹ç›®å®æˆ˜åˆ†æ"><a href="#Redis-é¡¹ç›®å®æˆ˜åˆ†æ" class="headerlink" title="Redis é¡¹ç›®å®æˆ˜åˆ†æ"></a>Redis é¡¹ç›®å®æˆ˜åˆ†æ</h1><hr><h2 id="1-1-é¡¹ç›®å®æˆ˜ä¸€ï¼šç™¾ä¸‡-PV-æ–°é—»ç½‘ç«™ç¼“å­˜æ¶æ„"><a href="#1-1-é¡¹ç›®å®æˆ˜ä¸€ï¼šç™¾ä¸‡-PV-æ–°é—»ç½‘ç«™ç¼“å­˜æ¶æ„" class="headerlink" title="1.1 é¡¹ç›®å®æˆ˜ä¸€ï¼šç™¾ä¸‡ PV æ–°é—»ç½‘ç«™ç¼“å­˜æ¶æ„"></a>1.1 é¡¹ç›®å®æˆ˜ä¸€ï¼šç™¾ä¸‡ PV æ–°é—»ç½‘ç«™ç¼“å­˜æ¶æ„</h2><h3 id="âœ…-èƒŒæ™¯"><a href="#âœ…-èƒŒæ™¯" class="headerlink" title="âœ… èƒŒæ™¯"></a>âœ… èƒŒæ™¯</h3><p>æŸæ–°é—»ç½‘ç«™æ—¥å‡è®¿é—®é‡è¾¾ç™¾ä¸‡çº§ï¼Œæ–‡ç« è®¿é—®é‡æä¸å‡è¡¡ï¼ˆ80&#x2F;20 æ³•åˆ™ï¼‰ï¼Œå¯¹çƒ­ç‚¹æ–‡ç« è®¿é—®é¢‘ç¹ï¼Œéœ€è®¾è®¡é«˜æ€§èƒ½ç¼“å­˜æ–¹æ¡ˆã€‚</p><h3 id="ğŸ“Œ-å…³é”®ç›®æ ‡"><a href="#ğŸ“Œ-å…³é”®ç›®æ ‡" class="headerlink" title="ğŸ“Œ å…³é”®ç›®æ ‡"></a>ğŸ“Œ å…³é”®ç›®æ ‡</h3><ul><li>ç¼“å­˜çƒ­ç‚¹æ–°é—»ï¼Œå‡è½» DB å‹åŠ›</li><li>é¡µé¢ç¼“å­˜ + æ•°æ®ç¼“å­˜ç»“åˆ</li><li>ç¼“å­˜è¿‡æœŸä¸æ›´æ–°æœºåˆ¶</li></ul><hr><h3 id="ğŸ“¦-æ¶æ„è®¾è®¡"><a href="#ğŸ“¦-æ¶æ„è®¾è®¡" class="headerlink" title="ğŸ“¦ æ¶æ„è®¾è®¡"></a>ğŸ“¦ æ¶æ„è®¾è®¡</h3><table><thead><tr><th>ç¼“å­˜å±‚</th><th>è¯´æ˜</th><th>æŠ€æœ¯é€‰å‹</th></tr></thead><tbody><tr><td>é¡µé¢ç¼“å­˜</td><td>å¯¹é™æ€é¡µé¢ç›´æ¥ç¼“å­˜</td><td>Nginx + Redis</td></tr><tr><td>æ•°æ®ç¼“å­˜</td><td>æŸ¥è¯¢ DB å‰å…ˆæŸ¥ Redis</td><td>Redis</td></tr><tr><td>çƒ­ç‚¹é¢„çƒ­</td><td>å‘å¸ƒæ–‡ç« æ—¶æå‰ç¼“å­˜çƒ­ç‚¹</td><td>åå°ç®¡ç†é€»è¾‘</td></tr></tbody></table><hr><h3 id="ğŸ§ -ä»£ç ç¤ºä¾‹ï¼ˆPythonï¼Œä½¿ç”¨-Flask-æ¡†æ¶ï¼‰"><a href="#ğŸ§ -ä»£ç ç¤ºä¾‹ï¼ˆPythonï¼Œä½¿ç”¨-Flask-æ¡†æ¶ï¼‰" class="headerlink" title="ğŸ§  ä»£ç ç¤ºä¾‹ï¼ˆPythonï¼Œä½¿ç”¨ Flask æ¡†æ¶ï¼‰"></a>ğŸ§  ä»£ç ç¤ºä¾‹ï¼ˆPythonï¼Œä½¿ç”¨ Flask æ¡†æ¶ï¼‰</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, jsonify<br><span class="hljs-keyword">import</span> redis<br><span class="hljs-keyword">import</span> time<br><br>app = Flask(__name__)<br>r = redis.Redis(host=<span class="hljs-string">&#x27;localhost&#x27;</span>, port=<span class="hljs-number">6379</span>, decode_responses=<span class="hljs-literal">True</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_article_from_db</span>(<span class="hljs-params">article_id</span>):<br>    <span class="hljs-comment"># æ¨¡æ‹Ÿæ•°æ®åº“æŸ¥è¯¢</span><br>    time.sleep(<span class="hljs-number">0.5</span>)<br>    <span class="hljs-keyword">return</span> &#123;<span class="hljs-string">&quot;id&quot;</span>: article_id, <span class="hljs-string">&quot;title&quot;</span>: <span class="hljs-string">f&quot;æ–‡ç« <span class="hljs-subst">&#123;article_id&#125;</span>&quot;</span>, <span class="hljs-string">&quot;content&quot;</span>: <span class="hljs-string">&quot;è¿™æ˜¯ä¸€ç¯‡å†…å®¹ä¸°å¯Œçš„æ–‡ç« ã€‚&quot;</span>&#125;<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/article/&lt;int:article_id&gt;&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_article</span>(<span class="hljs-params">article_id</span>):<br>    key = <span class="hljs-string">f&quot;article:<span class="hljs-subst">&#123;article_id&#125;</span>&quot;</span><br>    article = r.get(key)<br>    <span class="hljs-keyword">if</span> article:<br>        <span class="hljs-keyword">return</span> jsonify(&#123;<span class="hljs-string">&quot;source&quot;</span>: <span class="hljs-string">&quot;cache&quot;</span>, <span class="hljs-string">&quot;data&quot;</span>: <span class="hljs-built_in">eval</span>(article)&#125;)<br><br>    <span class="hljs-comment"># ç¼“å­˜æœªå‘½ä¸­ï¼Œè®¿é—® DB</span><br>    article = get_article_from_db(article_id)<br>    r.setex(key, <span class="hljs-number">300</span>, <span class="hljs-built_in">str</span>(article))  <span class="hljs-comment"># ç¼“å­˜ 5 åˆ†é’Ÿ</span><br>    <span class="hljs-keyword">return</span> jsonify(&#123;<span class="hljs-string">&quot;source&quot;</span>: <span class="hljs-string">&quot;db&quot;</span>, <span class="hljs-string">&quot;data&quot;</span>: article&#125;)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure><hr><h3 id="ğŸ’¡-ç¼“å­˜æ›´æ–°ç­–ç•¥"><a href="#ğŸ’¡-ç¼“å­˜æ›´æ–°ç­–ç•¥" class="headerlink" title="ğŸ’¡ ç¼“å­˜æ›´æ–°ç­–ç•¥"></a>ğŸ’¡ ç¼“å­˜æ›´æ–°ç­–ç•¥</h3><ul><li>å‘å¸ƒ&#x2F;ä¿®æ”¹æ–‡ç« åï¼Œåå°è‡ªåŠ¨åˆ·æ–° Redis ä¸­å¯¹åº”çš„ keyã€‚</li><li>å¯¹çƒ­ç‚¹æ–‡ç« åˆ—è¡¨å®šæ—¶è¿›è¡Œé¢„çƒ­ï¼ˆjob è„šæœ¬è‡ªåŠ¨æ‰§è¡Œï¼‰ã€‚</li></ul><hr><h2 id="1-2-é¡¹ç›®å®æˆ˜äºŒï¼šé«˜å¹¶å‘ç”µå•†æŠ¢è´­ç³»ç»Ÿ"><a href="#1-2-é¡¹ç›®å®æˆ˜äºŒï¼šé«˜å¹¶å‘ç”µå•†æŠ¢è´­ç³»ç»Ÿ" class="headerlink" title="1.2 é¡¹ç›®å®æˆ˜äºŒï¼šé«˜å¹¶å‘ç”µå•†æŠ¢è´­ç³»ç»Ÿ"></a>1.2 é¡¹ç›®å®æˆ˜äºŒï¼šé«˜å¹¶å‘ç”µå•†æŠ¢è´­ç³»ç»Ÿ</h2><h3 id="âœ…-èƒŒæ™¯-1"><a href="#âœ…-èƒŒæ™¯-1" class="headerlink" title="âœ… èƒŒæ™¯"></a>âœ… èƒŒæ™¯</h3><p>ç§’æ€æ´»åŠ¨ä¸­ï¼Œç”¨æˆ·ç¬é—´æ¶Œå…¥ï¼Œéœ€è¦ä¿éšœå•†å“ä¸è¢«è¶…å–ã€æœåŠ¡ä¸è¢«æ‰“å®ã€‚</p><hr><h3 id="ğŸ“Œ-æŠ€æœ¯å…³é”®ç‚¹"><a href="#ğŸ“Œ-æŠ€æœ¯å…³é”®ç‚¹" class="headerlink" title="ğŸ“Œ æŠ€æœ¯å…³é”®ç‚¹"></a>ğŸ“Œ æŠ€æœ¯å…³é”®ç‚¹</h3><table><thead><tr><th>é—®é¢˜</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>åº“å­˜æ‰£å‡ä¸€è‡´æ€§</td><td>Redis åŸå­æ“ä½œ</td></tr><tr><td>æ¥å£å¹‚ç­‰æ€§</td><td>é˜²æ­¢é‡å¤è¯·æ±‚</td></tr><tr><td>å¹¶å‘æ§åˆ¶</td><td>é™æµ + æ’é˜Ÿæœºåˆ¶</td></tr></tbody></table><hr><h3 id="ğŸ§ -ç¤ºä¾‹ä»£ç ï¼šRedis-åŸå­æ‰£åº“å­˜ï¼ˆPythonï¼‰"><a href="#ğŸ§ -ç¤ºä¾‹ä»£ç ï¼šRedis-åŸå­æ‰£åº“å­˜ï¼ˆPythonï¼‰" class="headerlink" title="ğŸ§  ç¤ºä¾‹ä»£ç ï¼šRedis åŸå­æ‰£åº“å­˜ï¼ˆPythonï¼‰"></a>ğŸ§  ç¤ºä¾‹ä»£ç ï¼šRedis åŸå­æ‰£åº“å­˜ï¼ˆPythonï¼‰</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, request, jsonify<br><span class="hljs-keyword">import</span> redis<br><br>app = Flask(__name__)<br>r = redis.Redis(host=<span class="hljs-string">&#x27;localhost&#x27;</span>, port=<span class="hljs-number">6379</span>, decode_responses=<span class="hljs-literal">True</span>)<br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/buy&quot;</span>, methods=[<span class="hljs-string">&quot;POST&quot;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">buy_item</span>():<br>    user_id = request.form[<span class="hljs-string">&quot;user_id&quot;</span>]<br>    product_id = request.form[<span class="hljs-string">&quot;product_id&quot;</span>]<br>    key = <span class="hljs-string">f&quot;stock:<span class="hljs-subst">&#123;product_id&#125;</span>&quot;</span><br>    user_key = <span class="hljs-string">f&quot;purchased:<span class="hljs-subst">&#123;product_id&#125;</span>:<span class="hljs-subst">&#123;user_id&#125;</span>&quot;</span><br><br>    <span class="hljs-comment"># é¿å…é‡å¤ä¸‹å•</span><br>    <span class="hljs-keyword">if</span> r.exists(user_key):<br>        <span class="hljs-keyword">return</span> jsonify(&#123;<span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;fail&quot;</span>, <span class="hljs-string">&quot;msg&quot;</span>: <span class="hljs-string">&quot;é‡å¤ä¸‹å•&quot;</span>&#125;)<br><br>    <span class="hljs-comment"># æ‰£å‡åº“å­˜</span><br>    <span class="hljs-keyword">with</span> r.pipeline() <span class="hljs-keyword">as</span> pipe:<br>        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>            <span class="hljs-keyword">try</span>:<br>                pipe.watch(key)<br>                stock = <span class="hljs-built_in">int</span>(pipe.get(key) <span class="hljs-keyword">or</span> <span class="hljs-number">0</span>)<br>                <span class="hljs-keyword">if</span> stock &gt; <span class="hljs-number">0</span>:<br>                    pipe.multi()<br>                    pipe.decr(key)<br>                    pipe.<span class="hljs-built_in">set</span>(user_key, <span class="hljs-number">1</span>)<br>                    pipe.expire(user_key, <span class="hljs-number">3600</span>)<br>                    pipe.execute()<br>                    <span class="hljs-keyword">return</span> jsonify(&#123;<span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;success&quot;</span>, <span class="hljs-string">&quot;msg&quot;</span>: <span class="hljs-string">&quot;è´­ä¹°æˆåŠŸ&quot;</span>&#125;)<br>                <span class="hljs-keyword">else</span>:<br>                    pipe.unwatch()<br>                    <span class="hljs-keyword">return</span> jsonify(&#123;<span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;fail&quot;</span>, <span class="hljs-string">&quot;msg&quot;</span>: <span class="hljs-string">&quot;å·²å”®ç½„&quot;</span>&#125;)<br>            <span class="hljs-keyword">except</span> redis.WatchError:<br>                <span class="hljs-keyword">continue</span><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    r.<span class="hljs-built_in">set</span>(<span class="hljs-string">&quot;stock:1001&quot;</span>, <span class="hljs-number">100</span>)  <span class="hljs-comment"># åˆå§‹åŒ–åº“å­˜</span><br>    app.run()<br></code></pre></td></tr></table></figure><hr><h2 id="1-3-é¡¹ç›®å®æˆ˜ä¸‰ï¼šæ¶ˆæ¯ä¸­å¿ƒä¸å»¶æ—¶ä»»åŠ¡ç³»ç»Ÿ"><a href="#1-3-é¡¹ç›®å®æˆ˜ä¸‰ï¼šæ¶ˆæ¯ä¸­å¿ƒä¸å»¶æ—¶ä»»åŠ¡ç³»ç»Ÿ" class="headerlink" title="1.3 é¡¹ç›®å®æˆ˜ä¸‰ï¼šæ¶ˆæ¯ä¸­å¿ƒä¸å»¶æ—¶ä»»åŠ¡ç³»ç»Ÿ"></a>1.3 é¡¹ç›®å®æˆ˜ä¸‰ï¼šæ¶ˆæ¯ä¸­å¿ƒä¸å»¶æ—¶ä»»åŠ¡ç³»ç»Ÿ</h2><h3 id="âœ…-èƒŒæ™¯-2"><a href="#âœ…-èƒŒæ™¯-2" class="headerlink" title="âœ… èƒŒæ™¯"></a>âœ… èƒŒæ™¯</h3><p>ç”µå•†å¹³å°éœ€è¦ç»™ç”¨æˆ·å‘é€çŸ­ä¿¡&#x2F;ç«™å†…ä¿¡&#x2F;æ¨é€ç­‰æ¶ˆæ¯ï¼ŒåŒæ—¶æ”¯æŒå»¶è¿Ÿé€šçŸ¥ï¼ˆå¦‚ï¼š1 å°æ—¶åæé†’ä»˜æ¬¾ï¼‰ã€‚</p><hr><h3 id="ğŸ“Œ-æŠ€æœ¯è®¾è®¡"><a href="#ğŸ“Œ-æŠ€æœ¯è®¾è®¡" class="headerlink" title="ğŸ“Œ æŠ€æœ¯è®¾è®¡"></a>ğŸ“Œ æŠ€æœ¯è®¾è®¡</h3><table><thead><tr><th>åŠŸèƒ½</th><th>æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>å»¶æ—¶æ¶ˆæ¯è°ƒåº¦</td><td>Redis ZSET</td></tr><tr><td>å¤šçº§ä¼˜å…ˆé˜Ÿåˆ—</td><td>é˜Ÿåˆ—ä¼˜å…ˆçº§åˆ’åˆ†</td></tr><tr><td>å¤±è´¥é‡è¯•æœºåˆ¶</td><td>å¤±è´¥ä»»åŠ¡é‡æ–°å…¥é˜Ÿ</td></tr></tbody></table><hr><h3 id="ğŸ§ -å»¶æ—¶é˜Ÿåˆ—å®ç°ï¼ˆZSETï¼‰"><a href="#ğŸ§ -å»¶æ—¶é˜Ÿåˆ—å®ç°ï¼ˆZSETï¼‰" class="headerlink" title="ğŸ§  å»¶æ—¶é˜Ÿåˆ—å®ç°ï¼ˆZSETï¼‰"></a>ğŸ§  å»¶æ—¶é˜Ÿåˆ—å®ç°ï¼ˆZSETï¼‰</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> redis<br><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">import</span> json<br><br>r = redis.Redis(host=<span class="hljs-string">&#x27;localhost&#x27;</span>, port=<span class="hljs-number">6379</span>, decode_responses=<span class="hljs-literal">True</span>)<br>DELAY_QUEUE = <span class="hljs-string">&quot;delay:queue&quot;</span><br><br><span class="hljs-comment"># æ¨é€å»¶æ—¶ä»»åŠ¡</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">push_delay_task</span>(<span class="hljs-params">task_id, delay_seconds</span>):<br>    timestamp = <span class="hljs-built_in">int</span>(time.time() + delay_seconds)<br>    task_data = &#123;<span class="hljs-string">&quot;id&quot;</span>: task_id, <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;sms&quot;</span>, <span class="hljs-string">&quot;msg&quot;</span>: <span class="hljs-string">&quot;è¯·å°½å¿«å®Œæˆæ”¯ä»˜&quot;</span>&#125;<br>    r.zadd(DELAY_QUEUE, &#123;json.dumps(task_data): timestamp&#125;)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æ¨é€ä»»åŠ¡æˆåŠŸ&quot;</span>)<br><br><span class="hljs-comment"># æ¶ˆè´¹ä»»åŠ¡</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">consume_delay_task</span>():<br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        now = <span class="hljs-built_in">int</span>(time.time())<br>        items = r.zrangebyscore(DELAY_QUEUE, <span class="hljs-number">0</span>, now, start=<span class="hljs-number">0</span>, num=<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> items:<br>            time.sleep(<span class="hljs-number">1</span>)<br>            <span class="hljs-keyword">continue</span><br>        <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> items:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å¤„ç†ä»»åŠ¡ï¼š&quot;</span>, item)<br>            r.zrem(DELAY_QUEUE, item)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    <span class="hljs-comment"># ç¤ºä¾‹ï¼šæ¨é€ä»»åŠ¡</span><br>    push_delay_task(<span class="hljs-string">&quot;task_001&quot;</span>, delay_seconds=<span class="hljs-number">10</span>)<br><br>    <span class="hljs-comment"># æ¶ˆè´¹ä»»åŠ¡</span><br>    consume_delay_task()<br></code></pre></td></tr></table></figure><hr><h2 id="ğŸ”š-é™„å½•"><a href="#ğŸ”š-é™„å½•" class="headerlink" title="ğŸ”š é™„å½•"></a>ğŸ”š é™„å½•</h2><h3 id="âœ…-Redis-å‘½ä»¤é€ŸæŸ¥è¡¨ï¼ˆéƒ¨åˆ†ï¼‰"><a href="#âœ…-Redis-å‘½ä»¤é€ŸæŸ¥è¡¨ï¼ˆéƒ¨åˆ†ï¼‰" class="headerlink" title="âœ… Redis å‘½ä»¤é€ŸæŸ¥è¡¨ï¼ˆéƒ¨åˆ†ï¼‰"></a>âœ… Redis å‘½ä»¤é€ŸæŸ¥è¡¨ï¼ˆéƒ¨åˆ†ï¼‰</h3><table><thead><tr><th>åŠŸèƒ½</th><th>å‘½ä»¤</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>è®¾ç½®é”®å€¼</td><td><code>SET</code></td><td><code>SET user:1 &quot;Tom&quot;</code></td></tr><tr><td>è·å–é”®å€¼</td><td><code>GET</code></td><td><code>GET user:1</code></td></tr><tr><td>å¢åŠ æ•°å€¼</td><td><code>INCR</code></td><td><code>INCR page:view</code></td></tr><tr><td>æœ‰åºé›†åˆåŠ åˆ†</td><td><code>ZINCRBY</code></td><td><code>ZINCRBY rank 10 &quot;user1&quot;</code></td></tr></tbody></table><hr><h3 id="ğŸ”-Redis-å¯è§†åŒ–å·¥å…·æ¨è"><a href="#ğŸ”-Redis-å¯è§†åŒ–å·¥å…·æ¨è" class="headerlink" title="ğŸ” Redis å¯è§†åŒ–å·¥å…·æ¨è"></a>ğŸ” Redis å¯è§†åŒ–å·¥å…·æ¨è</h3><table><thead><tr><th>å·¥å…·</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>RedisInsight</td><td>å›¾å½¢åŒ–åˆ†æã€é”®ç©ºé—´ç®¡ç†</td></tr><tr><td>RDM</td><td>è·¨å¹³å°ã€æ”¯æŒ SSH è¿æ¥</td></tr><tr><td>Medis</td><td>macOS ä¼˜é›… Redis GUI</td></tr></tbody></table><hr><h3 id="âš -Redis-å®æˆ˜å‘ç‚¹ä¸å»ºè®®"><a href="#âš -Redis-å®æˆ˜å‘ç‚¹ä¸å»ºè®®" class="headerlink" title="âš  Redis å®æˆ˜å‘ç‚¹ä¸å»ºè®®"></a>âš  Redis å®æˆ˜å‘ç‚¹ä¸å»ºè®®</h3><ul><li><strong>çƒ­ç‚¹ key åˆ†å¸ƒä¸å‡</strong>ï¼šå¼•å…¥æœ¬åœ°ç¼“å­˜æˆ–æŒ‰ç”¨æˆ·æ‰“æ•£ keyã€‚</li><li><strong>keys å‘½ä»¤é€ æˆé˜»å¡</strong>ï¼šé¿å…çº¿ä¸Šä½¿ç”¨ï¼Œæ›¿æ¢ä¸º <code>scan</code>ã€‚</li><li><strong>AOF æ—¥å¿—è†¨èƒ€</strong>ï¼šå®šæœŸé‡å†™ï¼ˆrewriteï¼‰ã€‚</li><li><strong>æ…¢æŸ¥è¯¢æ‹–å®ä¸»çº¿ç¨‹</strong>ï¼šå¼€å¯ <code>slowlog</code> å¹¶ç›‘æ§ã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>Redis</category>
      
      <category>Redis æ•™ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Redis ç¼“å­˜åº”ç”¨ä¸çƒ­ç‚¹</title>
    <link href="/2025/07/17/redis%E7%BC%93%E5%AD%98%E5%BA%94%E7%94%A8%E4%B8%8E%E7%83%AD%E7%82%B9/"/>
    <url>/2025/07/17/redis%E7%BC%93%E5%AD%98%E5%BA%94%E7%94%A8%E4%B8%8E%E7%83%AD%E7%82%B9/</url>
    
    <content type="html"><![CDATA[<h1 id="Redis-ç¼“å­˜åº”ç”¨ä¸çƒ­ç‚¹é—®é¢˜å®æˆ˜"><a href="#Redis-ç¼“å­˜åº”ç”¨ä¸çƒ­ç‚¹é—®é¢˜å®æˆ˜" class="headerlink" title="Redis ç¼“å­˜åº”ç”¨ä¸çƒ­ç‚¹é—®é¢˜å®æˆ˜"></a>Redis ç¼“å­˜åº”ç”¨ä¸çƒ­ç‚¹é—®é¢˜å®æˆ˜</h1><hr><h2 id="1-1-ç¼“å­˜è¯»å†™æµç¨‹ï¼šCache-Asideï¼ˆæ—è·¯ç¼“å­˜æ¨¡å¼ï¼‰"><a href="#1-1-ç¼“å­˜è¯»å†™æµç¨‹ï¼šCache-Asideï¼ˆæ—è·¯ç¼“å­˜æ¨¡å¼ï¼‰" class="headerlink" title="1.1 ç¼“å­˜è¯»å†™æµç¨‹ï¼šCache Asideï¼ˆæ—è·¯ç¼“å­˜æ¨¡å¼ï¼‰"></a>1.1 ç¼“å­˜è¯»å†™æµç¨‹ï¼šCache Asideï¼ˆæ—è·¯ç¼“å­˜æ¨¡å¼ï¼‰</h2><h3 id="ğŸ“Œ-å·¥ä½œæµç¨‹ï¼š"><a href="#ğŸ“Œ-å·¥ä½œæµç¨‹ï¼š" class="headerlink" title="ğŸ“Œ å·¥ä½œæµç¨‹ï¼š"></a>ğŸ“Œ å·¥ä½œæµç¨‹ï¼š</h3><ol><li>å…ˆä»ç¼“å­˜æŸ¥è¯¢æ•°æ®ï¼›</li><li>å¦‚æœæ²¡æœ‰å‘½ä¸­ï¼ˆcache missï¼‰ï¼Œä»æ•°æ®åº“åŠ è½½ï¼›</li><li>å°†æ•°æ®å†™å…¥ç¼“å­˜ï¼›</li><li>è¿”å›æ•°æ®ç»™ä¸šåŠ¡ï¼›</li><li>æ›´æ–°æ•°æ®æ—¶ï¼Œå…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†åˆ é™¤ç¼“å­˜ã€‚</li></ol><h3 id="âœ…-Python-ç¤ºä¾‹ï¼š"><a href="#âœ…-Python-ç¤ºä¾‹ï¼š" class="headerlink" title="âœ… Python ç¤ºä¾‹ï¼š"></a>âœ… Python ç¤ºä¾‹ï¼š</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> redis<br><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> wraps<br><br>r = redis.Redis(host=<span class="hljs-string">&#x27;localhost&#x27;</span>, port=<span class="hljs-number">6379</span>, db=<span class="hljs-number">0</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">cache_aside</span>(<span class="hljs-params">key_prefix, ttl=<span class="hljs-number">300</span></span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decorator</span>(<span class="hljs-params">func</span>):<br><span class="hljs-meta">        @wraps(<span class="hljs-params">func</span>)</span><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kwargs</span>):<br>            cache_key = <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;key_prefix&#125;</span>:<span class="hljs-subst">&#123;args[<span class="hljs-number">0</span>]&#125;</span>&quot;</span><br>            result = r.get(cache_key)<br>            <span class="hljs-keyword">if</span> result:<br>                <span class="hljs-keyword">return</span> result.decode(<span class="hljs-string">&#x27;utf-8&#x27;</span>)<br>            result = func(*args, **kwargs)<br>            <span class="hljs-keyword">if</span> result:<br>                r.setex(cache_key, ttl, result)<br>            <span class="hljs-keyword">return</span> result<br>        <span class="hljs-keyword">return</span> wrapper<br>    <span class="hljs-keyword">return</span> decorator<br><br><span class="hljs-comment"># æ¨¡æ‹Ÿæ•°æ®åº“è®¿é—®</span><br><span class="hljs-meta">@cache_aside(<span class="hljs-params"><span class="hljs-string">&quot;user_info&quot;</span>, ttl=<span class="hljs-number">60</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_user_from_db</span>(<span class="hljs-params">user_id</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;è®¿é—®æ•°æ®åº“...&quot;</span>)<br>    time.sleep(<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;user_<span class="hljs-subst">&#123;user_id&#125;</span>_data&quot;</span><br></code></pre></td></tr></table></figure><hr><h2 id="1-2-çƒ­é”®ï¼ˆHot-Keyï¼‰å®æˆ˜åˆ†æ"><a href="#1-2-çƒ­é”®ï¼ˆHot-Keyï¼‰å®æˆ˜åˆ†æ" class="headerlink" title="1.2 çƒ­é”®ï¼ˆHot Keyï¼‰å®æˆ˜åˆ†æ"></a>1.2 çƒ­é”®ï¼ˆHot Keyï¼‰å®æˆ˜åˆ†æ</h2><h3 id="ğŸ”¥-ä»€ä¹ˆæ˜¯çƒ­é”®ï¼Ÿ"><a href="#ğŸ”¥-ä»€ä¹ˆæ˜¯çƒ­é”®ï¼Ÿ" class="headerlink" title="ğŸ”¥ ä»€ä¹ˆæ˜¯çƒ­é”®ï¼Ÿ"></a>ğŸ”¥ ä»€ä¹ˆæ˜¯çƒ­é”®ï¼Ÿ</h3><p>çƒ­é”®æ˜¯æŒ‡<strong>è®¿é—®é¢‘ç‡æé«˜çš„æŸä¸ª key</strong>ï¼Œå¸¸è§äºä»¥ä¸‹åœºæ™¯ï¼š</p><ul><li>çˆ†æ¬¾å•†å“è¯¦æƒ…é¡µ</li><li>æ˜æ˜Ÿè´¦å·ä¿¡æ¯</li><li>çƒ­ç‚¹æ–°é—»æ¨é€</li><li>ç”¨æˆ·ä¸ªæ€§åŒ–é¦–é¡µ</li></ul><hr><h3 id="ğŸ”-çƒ­é”®æ£€æµ‹æ–¹æ³•"><a href="#ğŸ”-çƒ­é”®æ£€æµ‹æ–¹æ³•" class="headerlink" title="ğŸ” çƒ­é”®æ£€æµ‹æ–¹æ³•"></a>ğŸ” çƒ­é”®æ£€æµ‹æ–¹æ³•</h3><h4 id="æ–¹æ³•ä¸€ï¼šä½¿ç”¨-MONITORï¼ˆå¼€å‘ç¯å¢ƒä½¿ç”¨ï¼‰"><a href="#æ–¹æ³•ä¸€ï¼šä½¿ç”¨-MONITORï¼ˆå¼€å‘ç¯å¢ƒä½¿ç”¨ï¼‰" class="headerlink" title="æ–¹æ³•ä¸€ï¼šä½¿ç”¨ MONITORï¼ˆå¼€å‘ç¯å¢ƒä½¿ç”¨ï¼‰"></a>æ–¹æ³•ä¸€ï¼šä½¿ç”¨ MONITORï¼ˆå¼€å‘ç¯å¢ƒä½¿ç”¨ï¼‰</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">redis-cli MONITOR<br></code></pre></td></tr></table></figure><p>è¾“å‡ºå°†å±•ç¤ºæ‰€æœ‰å‘½ä»¤ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs accesslog"><span class="hljs-string">&quot;<span class="hljs-keyword">GET</span>&quot;</span> <span class="hljs-string">&quot;product:123&quot;</span><br><span class="hljs-string">&quot;<span class="hljs-keyword">GET</span>&quot;</span> <span class="hljs-string">&quot;product:123&quot;</span><br><span class="hljs-string">&quot;<span class="hljs-keyword">GET</span>&quot;</span> <span class="hljs-string">&quot;product:123&quot;</span><br></code></pre></td></tr></table></figure><p>å¯ä»¥è§‚å¯Ÿæ˜¯å¦æœ‰å•ä¸€ key é«˜é¢‘å‡ºç°ã€‚</p><h4 id="æ–¹æ³•äºŒï¼šä½¿ç”¨-slowlog-æ£€æµ‹æ…¢æŸ¥è¯¢"><a href="#æ–¹æ³•äºŒï¼šä½¿ç”¨-slowlog-æ£€æµ‹æ…¢æŸ¥è¯¢" class="headerlink" title="æ–¹æ³•äºŒï¼šä½¿ç”¨ slowlog æ£€æµ‹æ…¢æŸ¥è¯¢"></a>æ–¹æ³•äºŒï¼šä½¿ç”¨ <code>slowlog</code> æ£€æµ‹æ…¢æŸ¥è¯¢</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">127.0.0.1:6379&gt; SLOWLOG GET<br></code></pre></td></tr></table></figure><p>é…åˆç›‘æ§è®°å½•å‘½ä¸­é¢‘ç‡è¾ƒé«˜çš„ keyã€‚</p><h4 id="æ–¹æ³•ä¸‰ï¼šæ¥å…¥-APM-å·¥å…·ï¼ˆä¼ä¸šæ¨èï¼‰"><a href="#æ–¹æ³•ä¸‰ï¼šæ¥å…¥-APM-å·¥å…·ï¼ˆä¼ä¸šæ¨èï¼‰" class="headerlink" title="æ–¹æ³•ä¸‰ï¼šæ¥å…¥ APM å·¥å…·ï¼ˆä¼ä¸šæ¨èï¼‰"></a>æ–¹æ³•ä¸‰ï¼šæ¥å…¥ APM å·¥å…·ï¼ˆä¼ä¸šæ¨èï¼‰</h4><ul><li>SkyWalking</li><li>Pinpoint</li><li>ELKï¼ˆæ—¥å¿—èšåˆï¼‰+ Kibana åˆ†æçƒ­ç‚¹ key è®¿é—®æ—¥å¿—</li></ul><hr><h3 id="ğŸ› ï¸-ä¼ä¸šè§£å†³æ–¹æ¡ˆ"><a href="#ğŸ› ï¸-ä¼ä¸šè§£å†³æ–¹æ¡ˆ" class="headerlink" title="ğŸ› ï¸ ä¼ä¸šè§£å†³æ–¹æ¡ˆ"></a>ğŸ› ï¸ ä¼ä¸šè§£å†³æ–¹æ¡ˆ</h3><table><thead><tr><th>é—®é¢˜</th><th>è§£å†³æ–¹å¼</th></tr></thead><tbody><tr><td>Redis å•ç‚¹è¿‡è½½</td><td>æœ¬åœ°ç¼“å­˜ + Redis ä¸¤çº§ç»“æ„ï¼ˆå¦‚ Guava + Redisï¼‰</td></tr><tr><td>çƒ­ç‚¹ key TTL åŒæ­¥è¿‡æœŸ</td><td>TTL éšæœºåŒ–ï¼Œé¿å…é›ªå´©</td></tr><tr><td>çƒ­ç‚¹æ•°æ®åº“ç©¿é€</td><td>æ·»åŠ äº’æ–¥é”ï¼Œæ‰“æ•£è¯·æ±‚ï¼ŒåŠ è½½ä¸­ç»™é»˜è®¤å€¼</td></tr><tr><td>å¹¶å‘ç¼“å­˜ç©¿é€</td><td>å¼‚æ­¥åˆ·æ–°ç¼“å­˜ï¼Œä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨é˜²ç©¿é€</td></tr></tbody></table><hr><h3 id="âœ…-Python-ç¤ºä¾‹ï¼šå¼‚æ­¥ç¼“å­˜åˆ·æ–°-TTL-æ‰“æ•£"><a href="#âœ…-Python-ç¤ºä¾‹ï¼šå¼‚æ­¥ç¼“å­˜åˆ·æ–°-TTL-æ‰“æ•£" class="headerlink" title="âœ… Python ç¤ºä¾‹ï¼šå¼‚æ­¥ç¼“å­˜åˆ·æ–° + TTL æ‰“æ•£"></a>âœ… Python ç¤ºä¾‹ï¼šå¼‚æ­¥ç¼“å­˜åˆ·æ–° + TTL æ‰“æ•£</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> redis<br><span class="hljs-keyword">import</span> random<br><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">from</span> threading <span class="hljs-keyword">import</span> Thread<br><br>r = redis.Redis()<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_data_with_hotkey</span>(<span class="hljs-params">key</span>):<br>    value = r.get(key)<br>    <span class="hljs-keyword">if</span> value:<br>        <span class="hljs-keyword">return</span> value.decode(<span class="hljs-string">&#x27;utf-8&#x27;</span>)<br><br>    <span class="hljs-comment"># åŠ äº’æ–¥é”é˜²æ­¢å‡»ç©¿ï¼ˆç®€åŒ–ï¼‰</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> r.setnx(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;key&#125;</span>:lock&quot;</span>, <span class="hljs-number">1</span>):<br>        time.sleep(<span class="hljs-number">0.1</span>)  <span class="hljs-comment"># æ‰“æ•£è¯·æ±‚</span><br>        <span class="hljs-keyword">return</span> get_data_with_hotkey(key)<br><br>    <span class="hljs-comment"># æ¨¡æ‹Ÿæ•°æ®åº“</span><br>    value = <span class="hljs-string">f&quot;data_from_db_<span class="hljs-subst">&#123;key&#125;</span>&quot;</span><br>    ttl = <span class="hljs-number">60</span> + random.randint(<span class="hljs-number">0</span>, <span class="hljs-number">30</span>)  <span class="hljs-comment"># TTL éšæœºæ‰“æ•£</span><br>    r.setex(key, ttl, value)<br>    r.delete(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;key&#125;</span>:lock&quot;</span>)<br>    <span class="hljs-keyword">return</span> value<br></code></pre></td></tr></table></figure><hr><h2 id="1-3-å¤§é”®ï¼ˆBig-Keyï¼‰é—®é¢˜åˆ†æ"><a href="#1-3-å¤§é”®ï¼ˆBig-Keyï¼‰é—®é¢˜åˆ†æ" class="headerlink" title="1.3 å¤§é”®ï¼ˆBig Keyï¼‰é—®é¢˜åˆ†æ"></a>1.3 å¤§é”®ï¼ˆBig Keyï¼‰é—®é¢˜åˆ†æ</h2><h3 id="ğŸ§±-ä»€ä¹ˆæ˜¯å¤§é”®ï¼Ÿ"><a href="#ğŸ§±-ä»€ä¹ˆæ˜¯å¤§é”®ï¼Ÿ" class="headerlink" title="ğŸ§± ä»€ä¹ˆæ˜¯å¤§é”®ï¼Ÿ"></a>ğŸ§± ä»€ä¹ˆæ˜¯å¤§é”®ï¼Ÿ</h3><p>å•ä¸ª Redis key å¯¹åº”çš„æ•°æ®é‡éå¸¸å¤§ï¼š</p><ul><li>è¶…é•¿å­—ç¬¦ä¸²ï¼ˆå¤§ HTML é¡µé¢ï¼‰</li><li>æ•°ä¸‡ä¸ªæˆå‘˜çš„ Setã€ZSetã€Hash</li><li>å• key å ç”¨å†…å­˜è¶…è¿‡ 1MB ç”šè‡³æ›´å¤š</li></ul><hr><h3 id="ğŸ“ˆ-æ’æŸ¥å¤§é”®çš„æ–¹æ³•"><a href="#ğŸ“ˆ-æ’æŸ¥å¤§é”®çš„æ–¹æ³•" class="headerlink" title="ğŸ“ˆ æ’æŸ¥å¤§é”®çš„æ–¹æ³•"></a>ğŸ“ˆ æ’æŸ¥å¤§é”®çš„æ–¹æ³•</h3><h4 id="æ–¹æ³•ä¸€ï¼šMEMORY-USAGE-key"><a href="#æ–¹æ³•ä¸€ï¼šMEMORY-USAGE-key" class="headerlink" title="æ–¹æ³•ä¸€ï¼šMEMORY USAGE key"></a>æ–¹æ³•ä¸€ï¼š<code>MEMORY USAGE key</code></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">127.0.0.1:6379&gt; MEMORY USAGE large_key<br></code></pre></td></tr></table></figure><p>è¿”å›è¯¥ key å ç”¨çš„å­—èŠ‚æ•°ã€‚</p><h4 id="æ–¹æ³•äºŒï¼šç»“åˆ-RANDOMKEYã€DUMP-å’Œ-RESTORE-æ£€æµ‹"><a href="#æ–¹æ³•äºŒï¼šç»“åˆ-RANDOMKEYã€DUMP-å’Œ-RESTORE-æ£€æµ‹" class="headerlink" title="æ–¹æ³•äºŒï¼šç»“åˆ RANDOMKEYã€DUMP å’Œ RESTORE æ£€æµ‹"></a>æ–¹æ³•äºŒï¼šç»“åˆ RANDOMKEYã€DUMP å’Œ RESTORE æ£€æµ‹</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">127.0.0.1:6379&gt; RANDOMKEY<br>127.0.0.1:6379&gt; DUMP large_key<br></code></pre></td></tr></table></figure><p>å¯¹ä¸ç¡®å®šçš„ key è¿›è¡ŒæŠ½æ ·åˆ†æã€‚</p><h4 id="æ–¹æ³•ä¸‰ï¼šä½¿ç”¨è„šæœ¬æˆ–ç›‘æ§å·¥å…·å®šæœŸå·¡æ£€"><a href="#æ–¹æ³•ä¸‰ï¼šä½¿ç”¨è„šæœ¬æˆ–ç›‘æ§å·¥å…·å®šæœŸå·¡æ£€" class="headerlink" title="æ–¹æ³•ä¸‰ï¼šä½¿ç”¨è„šæœ¬æˆ–ç›‘æ§å·¥å…·å®šæœŸå·¡æ£€"></a>æ–¹æ³•ä¸‰ï¼šä½¿ç”¨è„šæœ¬æˆ–ç›‘æ§å·¥å…·å®šæœŸå·¡æ£€</h4><hr><h3 id="ğŸ’¡-å¤§é”®é—®é¢˜çš„å½±å“"><a href="#ğŸ’¡-å¤§é”®é—®é¢˜çš„å½±å“" class="headerlink" title="ğŸ’¡ å¤§é”®é—®é¢˜çš„å½±å“"></a>ğŸ’¡ å¤§é”®é—®é¢˜çš„å½±å“</h3><table><thead><tr><th>é—®é¢˜</th><th>æè¿°</th></tr></thead><tbody><tr><td>é˜»å¡ä¸»çº¿ç¨‹</td><td>Redis æ˜¯å•çº¿ç¨‹ï¼Œå¤§é”®æ“ä½œæ—¶é—´é•¿ä¼šé˜»å¡</td></tr><tr><td>å“¨å…µä¸»ä»åˆ‡æ¢å¤±è´¥</td><td>å¤§ key åŒæ­¥æ—¶é—´è¿‡é•¿å¯¼è‡´ä¸»ä»å¤±æ•ˆ</td></tr><tr><td>é›†ç¾¤æŠ–åŠ¨</td><td>æŸèŠ‚ç‚¹é¢‘ç¹æ“ä½œå¤§ key å¯¼è‡´å“åº”ç¼“æ…¢</td></tr></tbody></table><hr><h3 id="ğŸ§©-ä¼ä¸šçº§å¤„ç†å»ºè®®"><a href="#ğŸ§©-ä¼ä¸šçº§å¤„ç†å»ºè®®" class="headerlink" title="ğŸ§© ä¼ä¸šçº§å¤„ç†å»ºè®®"></a>ğŸ§© ä¼ä¸šçº§å¤„ç†å»ºè®®</h3><table><thead><tr><th>åœºæ™¯</th><th>å»ºè®®</th></tr></thead><tbody><tr><td>HTML é¡µé¢çš„ç¼“å­˜</td><td>åˆ‡ç‰‡æˆ–åˆ†é¡µå­˜å‚¨ä¸ºå¤šä¸ª key</td></tr><tr><td>Hash è¶…å¤§</td><td>ä½¿ç”¨åµŒå¥—ç»“æ„å­˜å‚¨å¤šä¸ªå° Hashï¼Œæ§åˆ¶å­—æ®µæ•° &lt; 5000</td></tr><tr><td>Set&#x2F;ZSet</td><td>åˆ†ç‰‡ç®¡ç†ï¼Œæ”¯æŒåˆ†é¡µè¯»å–</td></tr><tr><td>æ‰€æœ‰å¤§ key</td><td>è®¾ç½®åˆç†çš„ TTL é˜²æ­¢ç¼“å­˜æ±¡æŸ“</td></tr></tbody></table><hr><h3 id="âœ…-Python-ç¤ºä¾‹ï¼šè‡ªåŠ¨æ£€æµ‹å¤§é”®"><a href="#âœ…-Python-ç¤ºä¾‹ï¼šè‡ªåŠ¨æ£€æµ‹å¤§é”®" class="headerlink" title="âœ… Python ç¤ºä¾‹ï¼šè‡ªåŠ¨æ£€æµ‹å¤§é”®"></a>âœ… Python ç¤ºä¾‹ï¼šè‡ªåŠ¨æ£€æµ‹å¤§é”®</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> redis<br><br>r = redis.Redis()<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">scan_big_keys</span>(<span class="hljs-params">threshold=<span class="hljs-number">1024</span> * <span class="hljs-number">100</span></span>):  <span class="hljs-comment"># 100KB</span><br>    cursor = <span class="hljs-number">0</span><br>    big_keys = []<br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        cursor, keys = r.scan(cursor, count=<span class="hljs-number">100</span>)<br>        <span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> keys:<br>            usage = r.memory_usage(key)<br>            <span class="hljs-keyword">if</span> usage <span class="hljs-keyword">and</span> usage &gt; threshold:<br>                big_keys.append((key.decode(), usage))<br>        <span class="hljs-keyword">if</span> cursor == <span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">break</span><br>    <span class="hljs-keyword">return</span> big_keys<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    results = scan_big_keys()<br>    <span class="hljs-keyword">for</span> k, v <span class="hljs-keyword">in</span> results:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å¤§é”®: <span class="hljs-subst">&#123;k&#125;</span>, å¤§å°: <span class="hljs-subst">&#123;v / <span class="hljs-number">1024</span>:<span class="hljs-number">.2</span>f&#125;</span> KB&quot;</span>)<br></code></pre></td></tr></table></figure><hr><h2 id="âœ…-æ€»ç»“ï¼šç¼“å­˜ä¼˜åŒ–-Checklist"><a href="#âœ…-æ€»ç»“ï¼šç¼“å­˜ä¼˜åŒ–-Checklist" class="headerlink" title="âœ… æ€»ç»“ï¼šç¼“å­˜ä¼˜åŒ– Checklist"></a>âœ… æ€»ç»“ï¼šç¼“å­˜ä¼˜åŒ– Checklist</h2><ul><li><input checked="" disabled="" type="checkbox"> ä½¿ç”¨ Cache Aside å®ç°é«˜å¯ç”¨ç¼“å­˜é€»è¾‘</li><li><input checked="" disabled="" type="checkbox"> æ£€æµ‹å¹¶æ‰“æ•£çƒ­é”®ï¼Œé˜²æ­¢ Redis è¢«æ‰“çˆ†</li><li><input checked="" disabled="" type="checkbox"> é¿å…å¤§é”®ï¼šåˆ†é¡µã€å°é›†åˆåˆ†æ‹†ã€åˆç† TTL</li><li><input checked="" disabled="" type="checkbox"> ä½¿ç”¨ç›‘æ§å·¥å…·å®šæ—¶å‘ç°å¤§é”®&#x2F;çƒ­é”®</li><li><input checked="" disabled="" type="checkbox"> åˆ©ç”¨ APM + æ—¥å¿—ç³»ç»Ÿå®šä½ç¼“å­˜å¼‚å¸¸ç‚¹</li></ul>]]></content>
    
    
    <categories>
      
      <category>Redis</category>
      
      <category>Redis æ•™ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Redis ç›‘æ§ä¸è°ƒä¼˜</title>
    <link href="/2025/07/17/redis%E7%9B%91%E6%8E%A7%E4%B8%8E%E8%B0%83%E4%BC%98/"/>
    <url>/2025/07/17/redis%E7%9B%91%E6%8E%A7%E4%B8%8E%E8%B0%83%E4%BC%98/</url>
    
    <content type="html"><![CDATA[<h1 id="Redis-è¿ç»´ç›‘æ§ä¸è°ƒä¼˜"><a href="#Redis-è¿ç»´ç›‘æ§ä¸è°ƒä¼˜" class="headerlink" title="Redis è¿ç»´ç›‘æ§ä¸è°ƒä¼˜"></a>Redis è¿ç»´ç›‘æ§ä¸è°ƒä¼˜</h1><h2 id="1-1-Redis-é…ç½®ä¼˜åŒ–"><a href="#1-1-Redis-é…ç½®ä¼˜åŒ–" class="headerlink" title="1.1 Redis é…ç½®ä¼˜åŒ–"></a>1.1 Redis é…ç½®ä¼˜åŒ–</h2><h3 id="ğŸ¯-å¸¸è§ä¼˜åŒ–ç›®æ ‡"><a href="#ğŸ¯-å¸¸è§ä¼˜åŒ–ç›®æ ‡" class="headerlink" title="ğŸ¯ å¸¸è§ä¼˜åŒ–ç›®æ ‡"></a>ğŸ¯ å¸¸è§ä¼˜åŒ–ç›®æ ‡</h3><ul><li><strong>æå‡æ€§èƒ½</strong></li><li><strong>é™ä½å†…å­˜å ç”¨</strong></li><li><strong>é¿å…æœåŠ¡é›ªå´©</strong></li></ul><h3 id="ğŸ§ -å†…å­˜ç®¡ç†å‚æ•°è°ƒä¼˜"><a href="#ğŸ§ -å†…å­˜ç®¡ç†å‚æ•°è°ƒä¼˜" class="headerlink" title="ğŸ§  å†…å­˜ç®¡ç†å‚æ•°è°ƒä¼˜"></a>ğŸ§  å†…å­˜ç®¡ç†å‚æ•°è°ƒä¼˜</h3><h4 id="maxmemory"><a href="#maxmemory" class="headerlink" title="maxmemory"></a><code>maxmemory</code></h4><p>è®¾ç½® Redis ä½¿ç”¨çš„æœ€å¤§å†…å­˜ã€‚</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-comment"># redis.conf ç¤ºä¾‹</span><br>maxmemory 1gb<br></code></pre></td></tr></table></figure><blockquote><p>Redis å†…å­˜ä½¿ç”¨è¶…è¿‡è¯¥é™åˆ¶åï¼Œæ‰ä¼šè§¦å‘æ¸…é™¤ç­–ç•¥ã€‚</p></blockquote><h4 id="maxmemory-policy"><a href="#maxmemory-policy" class="headerlink" title="maxmemory-policy"></a><code>maxmemory-policy</code></h4><p>å®šä¹‰å†…å­˜æ·˜æ±°ç­–ç•¥ï¼š</p><table><thead><tr><th>ç­–ç•¥</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>noeviction</td><td>è¾¾åˆ°å†…å­˜åæ‹’ç»å†™å…¥</td></tr><tr><td>allkeys-lru</td><td>æ‰€æœ‰ key ä¸­æ·˜æ±°æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„</td></tr><tr><td>volatile-lru</td><td>è®¾ç½®äº† TTL çš„ key ä¸­æ·˜æ±°æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„</td></tr><tr><td>allkeys-random</td><td>éšæœºæ·˜æ±°æ‰€æœ‰ key</td></tr><tr><td>volatile-ttl</td><td>TTL æœ€çŸ­çš„ key è¢«æ·˜æ±°</td></tr></tbody></table><h4 id="Python-ç¤ºä¾‹ï¼ˆè®¾ç½®é…ç½®å¹¶è¿æ¥ï¼‰ï¼š"><a href="#Python-ç¤ºä¾‹ï¼ˆè®¾ç½®é…ç½®å¹¶è¿æ¥ï¼‰ï¼š" class="headerlink" title="Python ç¤ºä¾‹ï¼ˆè®¾ç½®é…ç½®å¹¶è¿æ¥ï¼‰ï¼š"></a>Python ç¤ºä¾‹ï¼ˆè®¾ç½®é…ç½®å¹¶è¿æ¥ï¼‰ï¼š</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> redis<br><br>r = redis.StrictRedis(host=<span class="hljs-string">&#x27;localhost&#x27;</span>, port=<span class="hljs-number">6379</span>, db=<span class="hljs-number">0</span>)<br>r.config_set(<span class="hljs-string">&#x27;maxmemory&#x27;</span>, <span class="hljs-string">&#x27;100mb&#x27;</span>)<br>r.config_set(<span class="hljs-string">&#x27;maxmemory-policy&#x27;</span>, <span class="hljs-string">&#x27;allkeys-lru&#x27;</span>)<br></code></pre></td></tr></table></figure><hr><h3 id="ğŸ§¨-TTL-åˆç†è®¾ç½®"><a href="#ğŸ§¨-TTL-åˆç†è®¾ç½®" class="headerlink" title="ğŸ§¨ TTL åˆç†è®¾ç½®"></a>ğŸ§¨ TTL åˆç†è®¾ç½®</h3><p>è®¾ç½®è¿‡æœŸæ—¶é—´é¿å…å†…å­˜æ³„æ¼ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># è®¾ç½® key åœ¨ 30 ç§’åè¿‡æœŸ</span><br>r.<span class="hljs-built_in">set</span>(<span class="hljs-string">&#x27;session:user:1&#x27;</span>, <span class="hljs-string">&#x27;data&#x27;</span>, ex=<span class="hljs-number">30</span>)<br></code></pre></td></tr></table></figure><hr><h2 id="1-2-æ€§èƒ½ç›‘æ§"><a href="#1-2-æ€§èƒ½ç›‘æ§" class="headerlink" title="1.2 æ€§èƒ½ç›‘æ§"></a>1.2 æ€§èƒ½ç›‘æ§</h2><h3 id="ğŸ”-ä½¿ç”¨-INFO-å‘½ä»¤å…¨é¢æŸ¥çœ‹çŠ¶æ€"><a href="#ğŸ”-ä½¿ç”¨-INFO-å‘½ä»¤å…¨é¢æŸ¥çœ‹çŠ¶æ€" class="headerlink" title="ğŸ” ä½¿ç”¨ INFO å‘½ä»¤å…¨é¢æŸ¥çœ‹çŠ¶æ€"></a>ğŸ” ä½¿ç”¨ <code>INFO</code> å‘½ä»¤å…¨é¢æŸ¥çœ‹çŠ¶æ€</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">redis-cli INFO memory<br>redis-cli INFO clients<br></code></pre></td></tr></table></figure><h4 id="Python-ç¤ºä¾‹ï¼š"><a href="#Python-ç¤ºä¾‹ï¼š" class="headerlink" title="Python ç¤ºä¾‹ï¼š"></a>Python ç¤ºä¾‹ï¼š</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">info = r.info()<br><span class="hljs-built_in">print</span>(info[<span class="hljs-string">&#x27;used_memory_human&#x27;</span>])  <span class="hljs-comment"># å½“å‰ä½¿ç”¨å†…å­˜</span><br></code></pre></td></tr></table></figure><hr><h3 id="ğŸ”-ä½¿ç”¨-MONITOR-å®æ—¶æŸ¥çœ‹è¯·æ±‚"><a href="#ğŸ”-ä½¿ç”¨-MONITOR-å®æ—¶æŸ¥çœ‹è¯·æ±‚" class="headerlink" title="ğŸ” ä½¿ç”¨ MONITOR å®æ—¶æŸ¥çœ‹è¯·æ±‚"></a>ğŸ” ä½¿ç”¨ <code>MONITOR</code> å®æ—¶æŸ¥çœ‹è¯·æ±‚</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">redis-cli MONITOR<br></code></pre></td></tr></table></figure><p>é€‚ç”¨äºè°ƒè¯•ï¼Œä½†å¯¹æ€§èƒ½æœ‰å½±å“ï¼Œä¸å»ºè®®çº¿ä¸Šä½¿ç”¨ã€‚</p><hr><h3 id="ğŸ¢-SLOWLOG-åˆ†ææ…¢å‘½ä»¤"><a href="#ğŸ¢-SLOWLOG-åˆ†ææ…¢å‘½ä»¤" class="headerlink" title="ğŸ¢ SLOWLOG åˆ†ææ…¢å‘½ä»¤"></a>ğŸ¢ <code>SLOWLOG</code> åˆ†ææ…¢å‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">redis-cli SLOWLOG get<br></code></pre></td></tr></table></figure><h4 id="Python-ç¤ºä¾‹ï¼š-1"><a href="#Python-ç¤ºä¾‹ï¼š-1" class="headerlink" title="Python ç¤ºä¾‹ï¼š"></a>Python ç¤ºä¾‹ï¼š</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">slowlogs = r.slowlog_get()<br><span class="hljs-keyword">for</span> log <span class="hljs-keyword">in</span> slowlogs:<br>    <span class="hljs-built_in">print</span>(log)<br></code></pre></td></tr></table></figure><hr><h3 id="ğŸ“ˆ-æ¥å…¥-Prometheus-Grafanaï¼ˆå›¾è¡¨å¯è§†åŒ–ï¼‰"><a href="#ğŸ“ˆ-æ¥å…¥-Prometheus-Grafanaï¼ˆå›¾è¡¨å¯è§†åŒ–ï¼‰" class="headerlink" title="ğŸ“ˆ æ¥å…¥ Prometheus + Grafanaï¼ˆå›¾è¡¨å¯è§†åŒ–ï¼‰"></a>ğŸ“ˆ æ¥å…¥ Prometheus + Grafanaï¼ˆå›¾è¡¨å¯è§†åŒ–ï¼‰</h3><ol><li><p>å®‰è£… <a href="https://github.com/oliver006/redis_exporter"><code>redis_exporter</code></a></p></li><li><p>å¯åŠ¨ Redis Exporterï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./redis_exporter -redis.addr=redis://localhost:6379<br></code></pre></td></tr></table></figure></li><li><p>åœ¨ Prometheus ä¸­æ·»åŠ  jobï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">&#x27;redis&#x27;</span><br>  <span class="hljs-attr">static_configs:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span> [<span class="hljs-string">&#x27;localhost:9121&#x27;</span>]<br></code></pre></td></tr></table></figure></li><li><p>åœ¨ Grafana ä¸­å¯¼å…¥ Redis Dashboard æ¨¡æ¿ï¼ˆIDï¼š763ï¼‰</p></li></ol><hr><h2 id="1-3-å®¹ç¾ä¸é«˜å¯ç”¨"><a href="#1-3-å®¹ç¾ä¸é«˜å¯ç”¨" class="headerlink" title="1.3 å®¹ç¾ä¸é«˜å¯ç”¨"></a>1.3 å®¹ç¾ä¸é«˜å¯ç”¨</h2><h3 id="ğŸ’¡-ä¸»ä»å¤åˆ¶-å“¨å…µæ¨¡å¼"><a href="#ğŸ’¡-ä¸»ä»å¤åˆ¶-å“¨å…µæ¨¡å¼" class="headerlink" title="ğŸ’¡ ä¸»ä»å¤åˆ¶ + å“¨å…µæ¨¡å¼"></a>ğŸ’¡ ä¸»ä»å¤åˆ¶ + å“¨å…µæ¨¡å¼</h3><h4 id="Redis-ä¸»ä»å¤åˆ¶ç»“æ„å›¾ï¼š"><a href="#Redis-ä¸»ä»å¤åˆ¶ç»“æ„å›¾ï¼š" class="headerlink" title="Redis ä¸»ä»å¤åˆ¶ç»“æ„å›¾ï¼š"></a>Redis ä¸»ä»å¤åˆ¶ç»“æ„å›¾ï¼š</h4><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">       +---------+<br>       |<span class="hljs-string"> Master  </span>|<br>       +---------+<br>        /       \<br>       /         \<br>+----------+  +----------+<br>|<span class="hljs-string"> Replica1 </span>|<span class="hljs-string">  </span>|<span class="hljs-string"> Replica2 </span>|<br>+----------+  +----------+<br></code></pre></td></tr></table></figure><h4 id="å¯ç”¨ä¸»ä»å¤åˆ¶é…ç½®ï¼š"><a href="#å¯ç”¨ä¸»ä»å¤åˆ¶é…ç½®ï¼š" class="headerlink" title="å¯ç”¨ä¸»ä»å¤åˆ¶é…ç½®ï¼š"></a>å¯ç”¨ä¸»ä»å¤åˆ¶é…ç½®ï¼š</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># slave.conf</span><br>replicaof 127.0.0.1 6379<br></code></pre></td></tr></table></figure><h4 id="å“¨å…µé…ç½®ç¤ºä¾‹ï¼š"><a href="#å“¨å…µé…ç½®ç¤ºä¾‹ï¼š" class="headerlink" title="å“¨å…µé…ç½®ç¤ºä¾‹ï¼š"></a>å“¨å…µé…ç½®ç¤ºä¾‹ï¼š</h4><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-comment"># sentinel.conf</span><br>sentinel monitor mymaster 127.0.0.1 6379 2<br>sentinel down-after-milliseconds mymaster 5000<br>sentinel failover-timeout mymaster 10000<br>sentinel parallel-syncs mymaster 1<br></code></pre></td></tr></table></figure><hr><h3 id="ğŸ§°-å¯åŠ¨æ–¹å¼ï¼š"><a href="#ğŸ§°-å¯åŠ¨æ–¹å¼ï¼š" class="headerlink" title="ğŸ§° å¯åŠ¨æ–¹å¼ï¼š"></a>ğŸ§° å¯åŠ¨æ–¹å¼ï¼š</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">redis-sentinel sentinel.conf<br></code></pre></td></tr></table></figure><hr><h3 id="â¤ï¸â€ğŸ”¥-Keepalived-VIP-é«˜å¯ç”¨éƒ¨ç½²ï¼ˆå®æˆ˜æ¨èï¼‰"><a href="#â¤ï¸â€ğŸ”¥-Keepalived-VIP-é«˜å¯ç”¨éƒ¨ç½²ï¼ˆå®æˆ˜æ¨èï¼‰" class="headerlink" title="â¤ï¸â€ğŸ”¥ Keepalived + VIP é«˜å¯ç”¨éƒ¨ç½²ï¼ˆå®æˆ˜æ¨èï¼‰"></a>â¤ï¸â€ğŸ”¥ Keepalived + VIP é«˜å¯ç”¨éƒ¨ç½²ï¼ˆå®æˆ˜æ¨èï¼‰</h3><ul><li>Redis Master è®¾ç½®è™šæ‹Ÿ IP (VIP)</li><li>Keepalived ç›‘æ§ä¸»èŠ‚ç‚¹</li><li>ä¸»æŒ‚æ—¶è‡ªåŠ¨åˆ‡æ¢åˆ°å‰¯æœ¬ï¼Œå¹¶ç»‘å®š VIP</li></ul><hr><h2 id="é™„åŠ ï¼šå¤šæ´»å®¹ç¾æ¶æ„æ¢ç´¢"><a href="#é™„åŠ ï¼šå¤šæ´»å®¹ç¾æ¶æ„æ¢ç´¢" class="headerlink" title="é™„åŠ ï¼šå¤šæ´»å®¹ç¾æ¶æ„æ¢ç´¢"></a>é™„åŠ ï¼šå¤šæ´»å®¹ç¾æ¶æ„æ¢ç´¢</h2><blockquote><p>Redis åŸç”Ÿä¸æ”¯æŒå¤šæ´»ï¼Œä½†ä¼ä¸šå¯ç»“åˆä¸€è‡´æ€§å“ˆå¸Œã€Kafka + Redis æ¶ˆè´¹æ¨¡å‹ç­‰æ–¹å¼ï¼Œå®ç°å¼±ä¸€è‡´æ€§ä¸‹çš„å¤šæœºçƒ­å¤‡ã€‚</p></blockquote><hr><h2 id="âœ…-æ€»ç»“"><a href="#âœ…-æ€»ç»“" class="headerlink" title="âœ… æ€»ç»“"></a>âœ… æ€»ç»“</h2><table><thead><tr><th>æ¨¡å—</th><th>å·¥å…·ä¸å‘½ä»¤</th><th>å®æˆ˜æŠ€å·§</th></tr></thead><tbody><tr><td>å†…å­˜ä¼˜åŒ–</td><td><code>maxmemory</code>, <code>maxmemory-policy</code></td><td>è®¾ç½® LRUã€åˆç†è®¾ç½® TTL</td></tr><tr><td>æ€§èƒ½ç›‘æ§</td><td><code>info</code>, <code>monitor</code>, <code>slowlog</code></td><td>æ¥å…¥ Prometheusï¼Œæ­é… Grafana</td></tr><tr><td>é«˜å¯ç”¨</td><td>ä¸»ä»ã€å“¨å…µã€keepalived</td><td>æ•…éšœåˆ‡æ¢ã€VIP è‡ªåŠ¨æ¢å¤</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>Redis</category>
      
      <category>Redis æ•™ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Redis ä¼ä¸šçº§åº”ç”¨</title>
    <link href="/2025/07/16/redis%E5%BA%94%E7%94%A8%E5%AE%9E%E6%88%98/"/>
    <url>/2025/07/16/redis%E5%BA%94%E7%94%A8%E5%AE%9E%E6%88%98/</url>
    
    <content type="html"><![CDATA[<h1 id="ä¼ä¸šçº§-Redis-åº”ç”¨å®æˆ˜-ğŸš€"><a href="#ä¼ä¸šçº§-Redis-åº”ç”¨å®æˆ˜-ğŸš€" class="headerlink" title="ä¼ä¸šçº§ Redis åº”ç”¨å®æˆ˜ ğŸš€"></a>ä¼ä¸šçº§ Redis åº”ç”¨å®æˆ˜ ğŸš€</h1><h2 id="1-1-å»¶æ—¶ä»»åŠ¡é˜Ÿåˆ—ï¼ˆDelay-Queueï¼‰"><a href="#1-1-å»¶æ—¶ä»»åŠ¡é˜Ÿåˆ—ï¼ˆDelay-Queueï¼‰" class="headerlink" title="1.1 å»¶æ—¶ä»»åŠ¡é˜Ÿåˆ—ï¼ˆDelay Queueï¼‰"></a>1.1 å»¶æ—¶ä»»åŠ¡é˜Ÿåˆ—ï¼ˆDelay Queueï¼‰</h2><h3 id="ğŸ§©-åº”ç”¨åœºæ™¯ï¼š"><a href="#ğŸ§©-åº”ç”¨åœºæ™¯ï¼š" class="headerlink" title="ğŸ§© åº”ç”¨åœºæ™¯ï¼š"></a>ğŸ§© åº”ç”¨åœºæ™¯ï¼š</h3><ul><li>ç”µå•†ï¼šè®¢å•æ”¯ä»˜è¶…æ—¶è‡ªåŠ¨å–æ¶ˆã€é€¾æœŸæé†’</li><li>é€šçŸ¥ç³»ç»Ÿï¼šå‘é€å»¶æ—¶æ¶ˆæ¯</li><li>ç¼“å­˜å¤±æ•ˆå¤„ç†è¡¥å¿ä»»åŠ¡ç­‰</li></ul><h3 id="âš™ï¸-åŸç†è®¾è®¡ï¼š"><a href="#âš™ï¸-åŸç†è®¾è®¡ï¼š" class="headerlink" title="âš™ï¸ åŸç†è®¾è®¡ï¼š"></a>âš™ï¸ åŸç†è®¾è®¡ï¼š</h3><ul><li>åˆ©ç”¨ ZSETï¼ˆæœ‰åºé›†åˆï¼‰ï¼Œscore å­˜å‚¨ä»»åŠ¡æ‰§è¡Œæ—¶é—´æˆ³</li><li>é€šè¿‡ <code>ZRANGEBYSCORE(min, now)</code> æ‹‰å–åˆ°æœŸä»»åŠ¡</li><li>æ¶ˆè´¹å <code>ZREM</code> åˆ é™¤ä»»åŠ¡</li><li>æ‰¹é‡æŸ¥è¯¢ + é™æµæ§åˆ¶ + æ‹†åˆ†æ§½ä½ä¼˜åŒ–è½®è¯¢æ€§èƒ½</li></ul><h3 id="âœ…-Python-ç¤ºä¾‹ï¼š"><a href="#âœ…-Python-ç¤ºä¾‹ï¼š" class="headerlink" title="âœ… Python ç¤ºä¾‹ï¼š"></a>âœ… Python ç¤ºä¾‹ï¼š</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> time, redis<br><br>r = redis.Redis(decode_responses=<span class="hljs-literal">True</span>)<br>DELAY_QUEUE = <span class="hljs-string">&quot;delay:zset&quot;</span><br><br><span class="hljs-comment"># æ·»åŠ å»¶æ—¶ä»»åŠ¡</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">enqueue</span>(<span class="hljs-params">task_id, delay_seconds</span>):<br>    score = <span class="hljs-built_in">int</span>(time.time()) + delay_seconds<br>    r.zadd(DELAY_QUEUE, &#123;task_id: score&#125;)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;[åŠ å…¥å»¶æ—¶ä»»åŠ¡] <span class="hljs-subst">&#123;task_id&#125;</span>, æ‰§è¡Œæ—¶é—´æˆ³ <span class="hljs-subst">&#123;score&#125;</span>&quot;</span>)<br><br><span class="hljs-comment"># æ‹‰å–å¹¶æ¶ˆè´¹å»¶è¿Ÿä»»åŠ¡</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">process_due</span>(<span class="hljs-params">max_items=<span class="hljs-number">10</span></span>):<br>    now = <span class="hljs-built_in">int</span>(time.time())<br>    tasks = r.zrangebyscore(DELAY_QUEUE, <span class="hljs-number">0</span>, now, <span class="hljs-number">0</span>, max_items)<br>    <span class="hljs-keyword">for</span> task <span class="hljs-keyword">in</span> tasks:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;[å¤„ç†ä»»åŠ¡] <span class="hljs-subst">&#123;task&#125;</span>&quot;</span>)<br>        r.zrem(DELAY_QUEUE, task)<br><br><span class="hljs-comment"># ä¼ä¸šä¼˜åŒ–å»ºè®®ï¼š</span><br><span class="hljs-comment"># - åˆ†ç‰‡ ZSET é™ä½æ‰«æå‹åŠ›</span><br><span class="hljs-comment"># - å¤šè¿›ç¨‹åŠ é”ç«æŠ¢ä»»åŠ¡</span><br><span class="hljs-comment"># - æ—¶é—´è½®ç»“æ„æˆ– Redis Streams å»¶æ—¶ä»£æ›¿</span><br></code></pre></td></tr></table></figure><p>ğŸ’¡ Tipsï¼šé¿å…è½®è¯¢æ­»å¾ªç¯ï¼Œä½¿ç”¨ LIMIT + <code>sleep</code> æˆ– <code>BLPOP</code> æ··åˆæ‰§è¡Œç­–ç•¥ ([MoldStud][1], [Medium][2], [Medium][3])ã€‚</p><hr><h2 id="1-2-åˆ†å¸ƒå¼é”ï¼ˆDistributed-Lockï¼‰"><a href="#1-2-åˆ†å¸ƒå¼é”ï¼ˆDistributed-Lockï¼‰" class="headerlink" title="1.2 åˆ†å¸ƒå¼é”ï¼ˆDistributed Lockï¼‰"></a>1.2 åˆ†å¸ƒå¼é”ï¼ˆDistributed Lockï¼‰</h2><h3 id="ğŸ§ -ä¸ºä»€ä¹ˆéœ€è¦ï¼š"><a href="#ğŸ§ -ä¸ºä»€ä¹ˆéœ€è¦ï¼š" class="headerlink" title="ğŸ§  ä¸ºä»€ä¹ˆéœ€è¦ï¼š"></a>ğŸ§  ä¸ºä»€ä¹ˆéœ€è¦ï¼š</h3><ul><li>åˆ†å¸ƒå¼ç¯å¢ƒä¸­é˜²æ­¢å¹¶å‘è®¿é—®ç›¸åŒèµ„æºï¼Œå¦‚è®¢å•å¹‚ç­‰æ“ä½œã€èµ„é‡‘æ‰£æ¬¾ç­‰ã€‚</li></ul><h3 id="âœ…-å•èŠ‚ç‚¹é”æ–¹æ¡ˆï¼ˆæ¨èç”¨äºæ•ˆç‡ä¼˜åŒ–ç±»åœºæ™¯ï¼‰"><a href="#âœ…-å•èŠ‚ç‚¹é”æ–¹æ¡ˆï¼ˆæ¨èç”¨äºæ•ˆç‡ä¼˜åŒ–ç±»åœºæ™¯ï¼‰" class="headerlink" title="âœ… å•èŠ‚ç‚¹é”æ–¹æ¡ˆï¼ˆæ¨èç”¨äºæ•ˆç‡ä¼˜åŒ–ç±»åœºæ™¯ï¼‰"></a>âœ… å•èŠ‚ç‚¹é”æ–¹æ¡ˆï¼ˆæ¨èç”¨äºæ•ˆç‡ä¼˜åŒ–ç±»åœºæ™¯ï¼‰</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python">lock_key = <span class="hljs-string">&quot;lock:order:123&quot;</span><br>lock_val = <span class="hljs-built_in">str</span>(uuid.uuid4())<br><br><span class="hljs-comment"># è·å–é”</span><br>r.<span class="hljs-built_in">set</span>(lock_key, lock_val, nx=<span class="hljs-literal">True</span>, ex=<span class="hljs-number">5</span>)<br><br><span class="hljs-comment"># é‡Šæ”¾é”ï¼Œç¡®ä¿åªæœ‰æŒæœ‰è€…èƒ½åˆ </span><br>unlock_script = <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">if redis.call(&#x27;get&#x27;, KEYS[1]) == ARGV[1] then</span><br><span class="hljs-string">    return redis.call(&#x27;del&#x27;, KEYS[1])</span><br><span class="hljs-string">else</span><br><span class="hljs-string">    return 0</span><br><span class="hljs-string">end</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br>r.<span class="hljs-built_in">eval</span>(unlock_script, <span class="hljs-number">1</span>, lock_key, lock_val)<br></code></pre></td></tr></table></figure><h3 id="ğŸ”-RedLock-ç®—æ³•ï¼ˆå¤šèŠ‚ç‚¹ä¸€è‡´æ€§æ–¹æ¡ˆï¼‰"><a href="#ğŸ”-RedLock-ç®—æ³•ï¼ˆå¤šèŠ‚ç‚¹ä¸€è‡´æ€§æ–¹æ¡ˆï¼‰" class="headerlink" title="ğŸ” RedLock ç®—æ³•ï¼ˆå¤šèŠ‚ç‚¹ä¸€è‡´æ€§æ–¹æ¡ˆï¼‰"></a>ğŸ” RedLock ç®—æ³•ï¼ˆå¤šèŠ‚ç‚¹ä¸€è‡´æ€§æ–¹æ¡ˆï¼‰</h3><ul><li>åœ¨å¤šä¸ªç‹¬ç«‹ä¸»èŠ‚ç‚¹ä¸Šä¾æ¬¡ç”³è¯·é”</li><li>è‹¥æˆåŠŸè·å¾—å¤šæ•°é”ä¸”æ€»è€—æ—¶å°äº TTLï¼Œåˆ™è®¤ä¸ºè·å–æˆåŠŸ</li><li>åŠŸèƒ½æ›´å¼ºä½†å¤æ‚åº¦é«˜ï¼Œä¾èµ–åŒæ­¥æ—¶é—´ä¸ç½‘ç»œä¸€è‡´æ€§ï¼Œé€‚åˆå¼ºä¸€è‡´åœºæ™¯&#x20;</li></ul><h3 id="âš ï¸-æ³¨æ„äº‹é¡¹ä¸é£é™©"><a href="#âš ï¸-æ³¨æ„äº‹é¡¹ä¸é£é™©" class="headerlink" title="âš ï¸ æ³¨æ„äº‹é¡¹ä¸é£é™©"></a>âš ï¸ æ³¨æ„äº‹é¡¹ä¸é£é™©</h3><table><thead><tr><th>é—®é¢˜</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>é•¿äº‹åŠ¡</td><td>TTL è®¾ç½®éœ€ç•¥å¤§äºä¸šåŠ¡å¤„ç†æ—¶é—´</td></tr><tr><td>æ­»é”</td><td>ä½¿ç”¨ Lua è§£é”ï¼Œé¿å…è¯¯åˆ å…¶ä»–å®¢æˆ·ç«¯é”</td></tr><tr><td>Redlock é£é™©</td><td>Timing assumptions ä¸å¯é æ—¶å¯èƒ½å¤±æ•ˆ ([martin.kleppmann.com][4])</td></tr></tbody></table><hr><h2 id="1-3-Redis-åšæ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMQï¼‰"><a href="#1-3-Redis-åšæ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMQï¼‰" class="headerlink" title="1.3 Redis åšæ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMQï¼‰"></a>1.3 Redis åšæ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMQï¼‰</h2><h3 id="ğŸ“¥-List-é˜»å¡å¼¹å‡ºï¼ˆBLPOP-RPOPï¼‰"><a href="#ğŸ“¥-List-é˜»å¡å¼¹å‡ºï¼ˆBLPOP-RPOPï¼‰" class="headerlink" title="ğŸ“¥ List + é˜»å¡å¼¹å‡ºï¼ˆBLPOP&#x2F;RPOPï¼‰"></a>ğŸ“¥ List + é˜»å¡å¼¹å‡ºï¼ˆBLPOP&#x2F;RPOPï¼‰</h3><ul><li>ç®€å•åœºæ™¯é€‚ç”¨ï¼Œå•æ¶ˆè´¹è€…æˆ–å°‘é‡æ¶ˆè´¹è€…</li><li>æ”¯æŒä¼˜å…ˆé˜Ÿåˆ—ç»“æ„ä¹Ÿå¯ç”¨å¤šä¸ª list æ¨¡æ‹Ÿå¤šä¸ªä¼˜å…ˆçº§&#x20;</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">QUEUE = <span class="hljs-string">&quot;mq:list&quot;</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">produce</span>(<span class="hljs-params">msg</span>):<br>    r.lpush(QUEUE, msg)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">consume</span>():<br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        item = r.brpop(QUEUE, timeout=<span class="hljs-number">5</span>)<br>        <span class="hljs-keyword">if</span> item:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å¤„ç†:&quot;</span>, item[<span class="hljs-number">1</span>])<br></code></pre></td></tr></table></figure><h3 id="ğŸ”„-Redis-Stream-æ¶ˆè´¹ç»„ï¼ˆ-5-0ï¼‰"><a href="#ğŸ”„-Redis-Stream-æ¶ˆè´¹ç»„ï¼ˆ-5-0ï¼‰" class="headerlink" title="ğŸ”„ Redis Stream æ¶ˆè´¹ç»„ï¼ˆ&gt;&#x3D;5.0ï¼‰"></a>ğŸ”„ Redis Stream æ¶ˆè´¹ç»„ï¼ˆ&gt;&#x3D;5.0ï¼‰</h3><ul><li>æ”¯æŒæŒä¹…æ¶ˆæ¯ã€æ¶ˆè´¹ç¡®è®¤ã€å¤±è´¥é‡è¯•ã€å¤šä¸ªæ¶ˆè´¹è€…ç»„</li><li>ç»æµæ›¿ä»£ Kafka çš„é«˜æ€§èƒ½åœºæ™¯</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">r.xadd(<span class="hljs-string">&quot;stream&quot;</span>, &#123;<span class="hljs-string">&quot;event&quot;</span>: <span class="hljs-string">&quot;login&quot;</span>, <span class="hljs-string">&quot;user&quot;</span>: <span class="hljs-string">&quot;alice&quot;</span>&#125;)<br>r.xgroup_create(<span class="hljs-string">&quot;stream&quot;</span>, <span class="hljs-string">&quot;grp&quot;</span>, mkstream=<span class="hljs-literal">True</span>)<br>r.xreadgroup(<span class="hljs-string">&quot;grp&quot;</span>, <span class="hljs-string">&quot;consumer1&quot;</span>, &#123;<span class="hljs-string">&quot;stream&quot;</span>: <span class="hljs-string">&quot;&gt;&quot;</span>&#125;, count=<span class="hljs-number">1</span>, block=<span class="hljs-number">2000</span>)<br></code></pre></td></tr></table></figure><p>ğŸ” Stream æ¨¡æ‹Ÿ Kafka ç‰¹æ€§ + Python ç¤ºä¾‹è¯´æ˜åœºæ™¯ ã€‚</p><hr><h2 id="1-4-å®æ—¶ç»Ÿè®¡ç³»ç»Ÿ"><a href="#1-4-å®æ—¶ç»Ÿè®¡ç³»ç»Ÿ" class="headerlink" title="1.4 å®æ—¶ç»Ÿè®¡ç³»ç»Ÿ"></a>1.4 å®æ—¶ç»Ÿè®¡ç³»ç»Ÿ</h2><h3 id="ğŸ¯-UV-PV-å»é‡ç»Ÿè®¡ï¼ˆHyperLogLogï¼‰"><a href="#ğŸ¯-UV-PV-å»é‡ç»Ÿè®¡ï¼ˆHyperLogLogï¼‰" class="headerlink" title="ğŸ¯ UV&#x2F;PV å»é‡ç»Ÿè®¡ï¼ˆHyperLogLogï¼‰"></a>ğŸ¯ UV&#x2F;PV å»é‡ç»Ÿè®¡ï¼ˆHyperLogLogï¼‰</h3><ul><li>UVï¼ˆç‹¬ç«‹è®¿å®¢ï¼‰å»é‡èƒ½åŠ›å¼ºï¼Œå†…å­˜ä»… ~12KB</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">r.pfadd(<span class="hljs-string">&quot;uv:202507&quot;</span>, <span class="hljs-string">&quot;user123&quot;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;UV ä¼°è®¡å€¼:&quot;</span>, r.pfcount(<span class="hljs-string">&quot;uv:202507&quot;</span>))<br></code></pre></td></tr></table></figure><h3 id="ğŸ§®-åœ¨çº¿ç”¨æˆ·å¸ƒé˜µï¼ˆBitMapï¼‰"><a href="#ğŸ§®-åœ¨çº¿ç”¨æˆ·å¸ƒé˜µï¼ˆBitMapï¼‰" class="headerlink" title="ğŸ§® åœ¨çº¿ç”¨æˆ·å¸ƒé˜µï¼ˆBitMapï¼‰"></a>ğŸ§® åœ¨çº¿ç”¨æˆ·å¸ƒé˜µï¼ˆBitMapï¼‰</h3><ul><li>é«˜æ•ˆå­˜å‚¨ç”¨æˆ·çŠ¶æ€ï¼Œæ”¯æŒå¿«é€Ÿç»Ÿè®¡</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">r.setbit(<span class="hljs-string">&quot;online&quot;</span>, user_id, <span class="hljs-number">1</span>)<br>r.bitcount(<span class="hljs-string">&quot;online&quot;</span>)<br></code></pre></td></tr></table></figure><hr><h2 id="âœ…-æ€»ç»“ä¸å»ºè®®"><a href="#âœ…-æ€»ç»“ä¸å»ºè®®" class="headerlink" title="âœ… æ€»ç»“ä¸å»ºè®®"></a>âœ… æ€»ç»“ä¸å»ºè®®</h2><ul><li>ä½¿ç”¨å‰æ¨èè¯„ä¼°ä¸šåŠ¡ä¸¥è‹›ç¨‹åº¦é€‰é”ç­–ç•¥</li><li>å»¶æ—¶é˜Ÿåˆ—å°½é‡é…åˆåˆ†å¸ƒå¼é”é¿å…é‡å¤å¤„ç†</li><li>æ¶ˆæ¯é˜Ÿåˆ—æ ¹æ®æ¶ˆè´¹æ¨¡å‹é€‰æ‹© List æˆ– Stream</li><li>ç»Ÿè®¡ç±»ä»»åŠ¡æ¨è HyperLogLog å’Œ BitMap å­˜å‚¨ç»“æ„</li><li>å¼ºè°ƒç›‘æ§é”çŠ¶æ€ä¸å»¶æ—¶é˜Ÿåˆ—å¤„ç†æ•ˆç‡ï¼ˆPrometheus + Redis Insightï¼‰</li></ul>]]></content>
    
    
    <categories>
      
      <category>Redis</category>
      
      <category>Redis æ•™ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Redis è¿›é˜¶ä¸æŒä¹…åŒ–å®æˆ˜æ•™ç¨‹</title>
    <link href="/2025/07/15/redis%E6%8C%81%E4%B9%85%E5%8C%96/"/>
    <url>/2025/07/15/redis%E6%8C%81%E4%B9%85%E5%8C%96/</url>
    
    <content type="html"><![CDATA[<h1 id="Redis-è¿›é˜¶ä¸æŒä¹…åŒ–æœºåˆ¶"><a href="#Redis-è¿›é˜¶ä¸æŒä¹…åŒ–æœºåˆ¶" class="headerlink" title="Redis è¿›é˜¶ä¸æŒä¹…åŒ–æœºåˆ¶"></a>Redis è¿›é˜¶ä¸æŒä¹…åŒ–æœºåˆ¶</h1><h2 id="1-1-æŒä¹…åŒ–æœºåˆ¶"><a href="#1-1-æŒä¹…åŒ–æœºåˆ¶" class="headerlink" title="1.1 æŒä¹…åŒ–æœºåˆ¶"></a>1.1 æŒä¹…åŒ–æœºåˆ¶</h2><p>Redis æä¾›ä¸‰ç§æŒä¹…åŒ–æœºåˆ¶ï¼š</p><h3 id="âœ…-1-RDBï¼ˆå¿«ç…§ï¼‰æŒä¹…åŒ–"><a href="#âœ…-1-RDBï¼ˆå¿«ç…§ï¼‰æŒä¹…åŒ–" class="headerlink" title="âœ… 1. RDBï¼ˆå¿«ç…§ï¼‰æŒä¹…åŒ–"></a>âœ… 1. RDBï¼ˆå¿«ç…§ï¼‰æŒä¹…åŒ–</h3><p>RDB å°† Redis åœ¨æŸä¸ªæ—¶é—´ç‚¹çš„æ•°æ®ä¿å­˜æˆäºŒè¿›åˆ¶æ–‡ä»¶ <code>dump.rdb</code>ã€‚</p><h3 id="ğŸ§©-ç‰¹ç‚¹ï¼š"><a href="#ğŸ§©-ç‰¹ç‚¹ï¼š" class="headerlink" title="ğŸ§© ç‰¹ç‚¹ï¼š"></a>ğŸ§© ç‰¹ç‚¹ï¼š</h3><ul><li>å¯åŠ¨æ¢å¤é€Ÿåº¦å¿«</li><li>æ€§èƒ½å¥½ï¼Œé€‚åˆå†·å¤‡ä»½</li><li>ä½†æ–­ç”µä¼šä¸¢å¤±æœ€åä¸€æ¬¡å¿«ç…§ä¹‹åçš„æ•°æ®</li></ul><h3 id="ğŸ’¡-é…ç½®ï¼ˆredis-confï¼‰ï¼š"><a href="#ğŸ’¡-é…ç½®ï¼ˆredis-confï¼‰ï¼š" class="headerlink" title="ğŸ’¡ é…ç½®ï¼ˆredis.confï¼‰ï¼š"></a>ğŸ’¡ é…ç½®ï¼ˆ<code>redis.conf</code>ï¼‰ï¼š</h3><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ini">save 900 1     <span class="hljs-comment"># 900ç§’å†…è‡³å°‘1ä¸ªkeyå˜åŒ–ï¼Œè§¦å‘å¿«ç…§</span><br>save 300 10    <span class="hljs-comment"># 5åˆ†é’Ÿå†…è‡³å°‘10ä¸ªkeyå˜åŒ–</span><br>save 60 10000  <span class="hljs-comment"># 60ç§’å†…è¶…è¿‡10000ä¸ªkeyå˜åŒ–</span><br></code></pre></td></tr></table></figure><h3 id="ğŸ“Œ-Python-ç¤ºä¾‹ï¼ˆæ¨¡æ‹Ÿå†™æ•°æ®-å¼ºåˆ¶è§¦å‘-RDBï¼‰ï¼š"><a href="#ğŸ“Œ-Python-ç¤ºä¾‹ï¼ˆæ¨¡æ‹Ÿå†™æ•°æ®-å¼ºåˆ¶è§¦å‘-RDBï¼‰ï¼š" class="headerlink" title="ğŸ“Œ Python ç¤ºä¾‹ï¼ˆæ¨¡æ‹Ÿå†™æ•°æ® + å¼ºåˆ¶è§¦å‘ RDBï¼‰ï¼š"></a>ğŸ“Œ Python ç¤ºä¾‹ï¼ˆæ¨¡æ‹Ÿå†™æ•°æ® + å¼ºåˆ¶è§¦å‘ RDBï¼‰ï¼š</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> redis<br><br>r = redis.Redis(host=<span class="hljs-string">&#x27;localhost&#x27;</span>, port=<span class="hljs-number">6379</span>, decode_responses=<span class="hljs-literal">True</span>)<br><br><span class="hljs-comment"># å†™å…¥å¤§é‡æ•°æ®</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1000</span>):<br>    r.<span class="hljs-built_in">set</span>(<span class="hljs-string">f&quot;user:<span class="hljs-subst">&#123;i&#125;</span>&quot;</span>, <span class="hljs-string">f&quot;value-<span class="hljs-subst">&#123;i&#125;</span>&quot;</span>)<br><br><span class="hljs-comment"># æ‰‹åŠ¨è§¦å‘RDBä¿å­˜ï¼ˆéœ€å¼€å¯redis-cliï¼‰</span><br><span class="hljs-comment"># å‘½ä»¤è¡Œè¾“å…¥ SAVE</span><br></code></pre></td></tr></table></figure><hr><h3 id="âœ…-2-AOFï¼ˆAppend-Only-Fileï¼‰æŒä¹…åŒ–"><a href="#âœ…-2-AOFï¼ˆAppend-Only-Fileï¼‰æŒä¹…åŒ–" class="headerlink" title="âœ… 2. AOFï¼ˆAppend Only Fileï¼‰æŒä¹…åŒ–"></a>âœ… 2. AOFï¼ˆAppend Only Fileï¼‰æŒä¹…åŒ–</h3><p>è®°å½•æ¯ä¸€ä¸ªå†™å‘½ä»¤ï¼Œå¹¶åœ¨é‡å¯æ—¶é‡æ–°æ‰§è¡Œã€‚</p><h3 id="ğŸ§©-ç‰¹ç‚¹ï¼š-1"><a href="#ğŸ§©-ç‰¹ç‚¹ï¼š-1" class="headerlink" title="ğŸ§© ç‰¹ç‚¹ï¼š"></a>ğŸ§© ç‰¹ç‚¹ï¼š</h3><ul><li>æ•°æ®æ›´ä¸æ˜“ä¸¢å¤±</li><li>æ–‡ä»¶ä½“ç§¯å¤§</li><li>æ¢å¤é€Ÿåº¦æ…¢äº RDB</li></ul><h3 id="ğŸ’¡-é…ç½®ï¼ˆredis-confï¼‰ï¼š-1"><a href="#ğŸ’¡-é…ç½®ï¼ˆredis-confï¼‰ï¼š-1" class="headerlink" title="ğŸ’¡ é…ç½®ï¼ˆredis.confï¼‰ï¼š"></a>ğŸ’¡ é…ç½®ï¼ˆ<code>redis.conf</code>ï¼‰ï¼š</h3><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ini">appendonly yes<br>appendfilename &quot;appendonly.aof&quot;<br>appendfsync everysec    <span class="hljs-comment"># æ¨èï¼šæ¯ç§’åŒæ­¥</span><br></code></pre></td></tr></table></figure><h3 id="ğŸ“Œ-Python-ç¤ºä¾‹ï¼š"><a href="#ğŸ“Œ-Python-ç¤ºä¾‹ï¼š" class="headerlink" title="ğŸ“Œ Python ç¤ºä¾‹ï¼š"></a>ğŸ“Œ Python ç¤ºä¾‹ï¼š</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> redis<br><br>r = redis.Redis()<br>r.<span class="hljs-built_in">set</span>(<span class="hljs-string">&quot;product:1001&quot;</span>, <span class="hljs-string">&quot;iPhone15&quot;</span>)<br>r.<span class="hljs-built_in">set</span>(<span class="hljs-string">&quot;stock:1001&quot;</span>, <span class="hljs-number">50</span>)<br></code></pre></td></tr></table></figure><p>è¿™äº›å‘½ä»¤éƒ½ä¼šè¿½åŠ åˆ° AOF æ–‡ä»¶ä¸­ã€‚</p><hr><h3 id="âœ…-3-æ··åˆæŒä¹…åŒ–ï¼ˆRDB-AOFï¼‰"><a href="#âœ…-3-æ··åˆæŒä¹…åŒ–ï¼ˆRDB-AOFï¼‰" class="headerlink" title="âœ… 3. æ··åˆæŒä¹…åŒ–ï¼ˆRDB + AOFï¼‰"></a>âœ… 3. æ··åˆæŒä¹…åŒ–ï¼ˆRDB + AOFï¼‰</h3><p>Redis 4.0 èµ·æ”¯æŒæ··åˆæ–¹å¼ï¼Œåœ¨ AOF æ–‡ä»¶ä¸­å…ˆå†™å…¥ RDB å†å†™å‘½ä»¤ã€‚</p><h3 id="ğŸ“Œ-å¼€å¯æ–¹å¼ï¼š"><a href="#ğŸ“Œ-å¼€å¯æ–¹å¼ï¼š" class="headerlink" title="ğŸ“Œ å¼€å¯æ–¹å¼ï¼š"></a>ğŸ“Œ å¼€å¯æ–¹å¼ï¼š</h3><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini">aof-use-rdb-preamble yes<br></code></pre></td></tr></table></figure><h3 id="ğŸ¯-å®æˆ˜å»ºè®®ï¼š"><a href="#ğŸ¯-å®æˆ˜å»ºè®®ï¼š" class="headerlink" title="ğŸ¯ å®æˆ˜å»ºè®®ï¼š"></a>ğŸ¯ å®æˆ˜å»ºè®®ï¼š</h3><p>ä¼ä¸šä¸­å¯é€‰ <strong>æ··åˆæŒä¹…åŒ–</strong>ï¼Œåœ¨å®¹ç¾ä¸æ€§èƒ½é—´åšå¹³è¡¡ã€‚</p><hr><h2 id="1-2-ä¸»ä»å¤åˆ¶ï¼ˆReplicationï¼‰"><a href="#1-2-ä¸»ä»å¤åˆ¶ï¼ˆReplicationï¼‰" class="headerlink" title="1.2 ä¸»ä»å¤åˆ¶ï¼ˆReplicationï¼‰"></a>1.2 ä¸»ä»å¤åˆ¶ï¼ˆReplicationï¼‰</h2><p>Redis æ”¯æŒä¸€ä¸»å¤šä»ç»“æ„ï¼Œä»èŠ‚ç‚¹å®æ—¶åŒæ­¥ä¸»èŠ‚ç‚¹æ•°æ®ã€‚</p><hr><h3 id="ğŸ§©-ä¼˜åŠ¿ï¼š"><a href="#ğŸ§©-ä¼˜åŠ¿ï¼š" class="headerlink" title="ğŸ§© ä¼˜åŠ¿ï¼š"></a>ğŸ§© ä¼˜åŠ¿ï¼š</h3><ul><li>è¯»å†™åˆ†ç¦»ï¼Œå‡è½»ä¸»èŠ‚ç‚¹å‹åŠ›</li><li>ç¾å¤‡å†—ä½™ï¼Œå®¹ç¾æ¢å¤å¿«</li></ul><hr><h3 id="ğŸ’¡-ä¸»ä»é…ç½®ï¼š"><a href="#ğŸ’¡-ä¸»ä»é…ç½®ï¼š" class="headerlink" title="ğŸ’¡ ä¸»ä»é…ç½®ï¼š"></a>ğŸ’¡ ä¸»ä»é…ç½®ï¼š</h3><p><strong>ä¸»èŠ‚ç‚¹æ— éœ€é…ç½®ï¼Œå­èŠ‚ç‚¹é…ç½®å¦‚ä¸‹ï¼š</strong></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini">replicaof 127.0.0.1 6379   <span class="hljs-comment"># æŒ‡å®šä¸»èŠ‚ç‚¹IPå’Œç«¯å£</span><br></code></pre></td></tr></table></figure><h3 id="ğŸ“Œ-Python-ç¤ºä¾‹ï¼š-1"><a href="#ğŸ“Œ-Python-ç¤ºä¾‹ï¼š-1" class="headerlink" title="ğŸ“Œ Python ç¤ºä¾‹ï¼š"></a>ğŸ“Œ Python ç¤ºä¾‹ï¼š</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> redis<br><br><span class="hljs-comment"># å†™æ•°æ®åˆ°ä¸»èŠ‚ç‚¹</span><br>master = redis.Redis(host=<span class="hljs-string">&#x27;localhost&#x27;</span>, port=<span class="hljs-number">6379</span>)<br>master.<span class="hljs-built_in">set</span>(<span class="hljs-string">&quot;user:1&quot;</span>, <span class="hljs-string">&quot;Alice&quot;</span>)<br><br><span class="hljs-comment"># è¯»æ•°æ®ä»ä»èŠ‚ç‚¹ï¼ˆä¸»ä»åŒæ­¥å®Œæˆåï¼‰</span><br>slave = redis.Redis(host=<span class="hljs-string">&#x27;localhost&#x27;</span>, port=<span class="hljs-number">6380</span>)<br><span class="hljs-built_in">print</span>(slave.get(<span class="hljs-string">&quot;user:1&quot;</span>))<br></code></pre></td></tr></table></figure><hr><h2 id="1-3-Redis-å“¨å…µæ¨¡å¼ï¼ˆSentinelï¼‰"><a href="#1-3-Redis-å“¨å…µæ¨¡å¼ï¼ˆSentinelï¼‰" class="headerlink" title="1.3 Redis å“¨å…µæ¨¡å¼ï¼ˆSentinelï¼‰"></a>1.3 Redis å“¨å…µæ¨¡å¼ï¼ˆSentinelï¼‰</h2><p>Redis Sentinel ç”¨äº<strong>ç›‘æ§ä¸»ä»ç»“æ„</strong>ã€<strong>è‡ªåŠ¨ä¸»ä»åˆ‡æ¢</strong>ã€‚</p><hr><h3 id="ğŸ§©-å·¥ä½œæœºåˆ¶ï¼š"><a href="#ğŸ§©-å·¥ä½œæœºåˆ¶ï¼š" class="headerlink" title="ğŸ§© å·¥ä½œæœºåˆ¶ï¼š"></a>ğŸ§© å·¥ä½œæœºåˆ¶ï¼š</h3><ul><li>èŠ‚ç‚¹æ•…éšœæ—¶è‡ªåŠ¨åˆ‡æ¢ä¸»èŠ‚ç‚¹</li><li>é€šçŸ¥å®¢æˆ·ç«¯æ–°çš„ä¸»èŠ‚ç‚¹åœ°å€</li></ul><h3 id="ğŸ’¡-sentinel-conf-ç¤ºä¾‹ï¼š"><a href="#ğŸ’¡-sentinel-conf-ç¤ºä¾‹ï¼š" class="headerlink" title="ğŸ’¡ sentinel.conf ç¤ºä¾‹ï¼š"></a>ğŸ’¡ sentinel.conf ç¤ºä¾‹ï¼š</h3><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ini">sentinel monitor mymaster 127.0.0.1 6379 2<br>sentinel down-after-milliseconds mymaster 5000<br>sentinel failover-timeout mymaster 10000<br>sentinel parallel-syncs mymaster 1<br></code></pre></td></tr></table></figure><hr><h3 id="ğŸ“Œ-å¯åŠ¨å“¨å…µï¼š"><a href="#ğŸ“Œ-å¯åŠ¨å“¨å…µï¼š" class="headerlink" title="ğŸ“Œ å¯åŠ¨å“¨å…µï¼š"></a>ğŸ“Œ å¯åŠ¨å“¨å…µï¼š</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">redis-sentinel sentinel.conf<br></code></pre></td></tr></table></figure><hr><h3 id="ğŸ“Œ-Python-ç¤ºä¾‹ï¼ˆæ„ŸçŸ¥ä¸»èŠ‚ç‚¹ï¼‰ï¼š"><a href="#ğŸ“Œ-Python-ç¤ºä¾‹ï¼ˆæ„ŸçŸ¥ä¸»èŠ‚ç‚¹ï¼‰ï¼š" class="headerlink" title="ğŸ“Œ Python ç¤ºä¾‹ï¼ˆæ„ŸçŸ¥ä¸»èŠ‚ç‚¹ï¼‰ï¼š"></a>ğŸ“Œ Python ç¤ºä¾‹ï¼ˆæ„ŸçŸ¥ä¸»èŠ‚ç‚¹ï¼‰ï¼š</h3><p>å»ºè®®ä½¿ç”¨ <code>redis.sentinel.Sentinel</code> æ¨¡å—ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> redis.sentinel <span class="hljs-keyword">import</span> Sentinel<br><br>sentinel = Sentinel([(<span class="hljs-string">&#x27;localhost&#x27;</span>, <span class="hljs-number">26379</span>)], socket_timeout=<span class="hljs-number">0.1</span>)<br>master = sentinel.master_for(<span class="hljs-string">&#x27;mymaster&#x27;</span>, socket_timeout=<span class="hljs-number">0.1</span>)<br><br>master.<span class="hljs-built_in">set</span>(<span class="hljs-string">&quot;key&quot;</span>, <span class="hljs-string">&quot;value&quot;</span>)<br><span class="hljs-built_in">print</span>(master.get(<span class="hljs-string">&quot;key&quot;</span>))<br></code></pre></td></tr></table></figure><hr><h2 id="1-4-Redis-é›†ç¾¤æ¨¡å¼ï¼ˆClusterï¼‰"><a href="#1-4-Redis-é›†ç¾¤æ¨¡å¼ï¼ˆClusterï¼‰" class="headerlink" title="1.4 Redis é›†ç¾¤æ¨¡å¼ï¼ˆClusterï¼‰"></a>1.4 Redis é›†ç¾¤æ¨¡å¼ï¼ˆClusterï¼‰</h2><p>Redis Cluster æ˜¯å®˜æ–¹æä¾›çš„<strong>åˆ†å¸ƒå¼æ–¹æ¡ˆ</strong>ã€‚</p><hr><h3 id="ğŸ§©-ç‰¹ç‚¹ï¼š-2"><a href="#ğŸ§©-ç‰¹ç‚¹ï¼š-2" class="headerlink" title="ğŸ§© ç‰¹ç‚¹ï¼š"></a>ğŸ§© ç‰¹ç‚¹ï¼š</h3><ul><li>åˆ†ç‰‡å­˜å‚¨æ•°æ®ï¼ˆå“ˆå¸Œæ§½ slotï¼‰</li><li>è‡ªå¸¦å®¹é”™ã€ä¸»ä»ã€å¤åˆ¶æœºåˆ¶</li><li>æœ€å°‘éœ€è¦ 6 ä¸ªèŠ‚ç‚¹ï¼ˆ3 ä¸» 3 ä»ï¼‰</li></ul><hr><h3 id="ğŸ’¡-æ­å»º-Redis-Clusterï¼š"><a href="#ğŸ’¡-æ­å»º-Redis-Clusterï¼š" class="headerlink" title="ğŸ’¡ æ­å»º Redis Clusterï¼š"></a>ğŸ’¡ æ­å»º Redis Clusterï¼š</h3><ul><li>æ¯ä¸ªèŠ‚ç‚¹é…ç½®ï¼š</li></ul><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs ini">port 7000<br>cluster-enabled yes<br>cluster-config-file nodes.conf<br>cluster-node-timeout 5000<br>appendonly yes<br></code></pre></td></tr></table></figure><ul><li>åˆ›å»ºé›†ç¾¤å‘½ä»¤ï¼š</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">redis-cli --cluster create \<br>127.0.0.1:7000 127.0.0.1:7001 127.0.0.1:7002 \<br>127.0.0.1:7003 127.0.0.1:7004 127.0.0.1:7005 \<br>--cluster-replicas 1<br></code></pre></td></tr></table></figure><hr><h3 id="ğŸ“Œ-Python-ä½¿ç”¨-redis-py-clusterï¼š"><a href="#ğŸ“Œ-Python-ä½¿ç”¨-redis-py-clusterï¼š" class="headerlink" title="ğŸ“Œ Python ä½¿ç”¨ redis-py-clusterï¼š"></a>ğŸ“Œ Python ä½¿ç”¨ <code>redis-py-cluster</code>ï¼š</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip install redis-py-cluster<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> rediscluster <span class="hljs-keyword">import</span> RedisCluster<br><br>startup_nodes = [&#123;<span class="hljs-string">&quot;host&quot;</span>: <span class="hljs-string">&quot;127.0.0.1&quot;</span>, <span class="hljs-string">&quot;port&quot;</span>: <span class="hljs-string">&quot;7000&quot;</span>&#125;]<br>rc = RedisCluster(startup_nodes=startup_nodes, decode_responses=<span class="hljs-literal">True</span>)<br><br>rc.<span class="hljs-built_in">set</span>(<span class="hljs-string">&quot;user:200&quot;</span>, <span class="hljs-string">&quot;Tom&quot;</span>)<br><span class="hljs-built_in">print</span>(rc.get(<span class="hljs-string">&quot;user:200&quot;</span>))<br></code></pre></td></tr></table></figure><hr><h3 id="ğŸ“Œ-Redis-å“ˆå¸Œæ§½ï¼ˆHash-Slotï¼‰è¯¦è§£"><a href="#ğŸ“Œ-Redis-å“ˆå¸Œæ§½ï¼ˆHash-Slotï¼‰è¯¦è§£" class="headerlink" title="ğŸ“Œ Redis å“ˆå¸Œæ§½ï¼ˆHash Slotï¼‰è¯¦è§£"></a>ğŸ“Œ Redis å“ˆå¸Œæ§½ï¼ˆHash Slotï¼‰è¯¦è§£</h3><h4 id="ğŸ“Œ-ä»€ä¹ˆæ˜¯å“ˆå¸Œæ§½ï¼Ÿ"><a href="#ğŸ“Œ-ä»€ä¹ˆæ˜¯å“ˆå¸Œæ§½ï¼Ÿ" class="headerlink" title="ğŸ“Œ ä»€ä¹ˆæ˜¯å“ˆå¸Œæ§½ï¼Ÿ"></a>ğŸ“Œ ä»€ä¹ˆæ˜¯å“ˆå¸Œæ§½ï¼Ÿ</h4><p>åœ¨ Redis çš„ <strong>é›†ç¾¤æ¨¡å¼ï¼ˆClusterï¼‰</strong> ä¸­ï¼Œä¸ºäº†å®ç°æ•°æ®çš„åˆ†å¸ƒå¼å­˜å‚¨ï¼Œå¼•å…¥äº†ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µ â€”â€” <strong>å“ˆå¸Œæ§½ï¼ˆHash Slotï¼‰</strong>ã€‚</p><ul><li>Redis é›†ç¾¤æ€»å…±æœ‰ <strong>16384 ä¸ªå“ˆå¸Œæ§½</strong>ï¼ˆç¼–å·èŒƒå›´ 0ï½16383ï¼‰</li><li>æ‰€æœ‰çš„ key é€šè¿‡å“ˆå¸Œç®—æ³•æ˜ å°„åˆ°è¿™ 16384 ä¸ªæ§½ä½ä¸­</li><li>æ¯ä¸ªèŠ‚ç‚¹è´Ÿè´£ä¸€å®šæ•°é‡çš„å“ˆå¸Œæ§½ï¼ˆä¾‹å¦‚ï¼š3 ä¸ªèŠ‚ç‚¹ï¼Œæ¯ä¸ªå¤§çº¦ 5461 ä¸ªæ§½ï¼‰</li></ul><p>âš ï¸ <strong>æ³¨æ„</strong>ï¼šå“ˆå¸Œæ§½ä¸æ˜¯é”®ï¼Œè€Œæ˜¯é”®åˆ†å¸ƒåˆ°èŠ‚ç‚¹çš„æ¡¥æ¢ã€‚</p><hr><h4 id="ğŸ§®-å“ˆå¸Œæ§½æ˜¯å¦‚ä½•è®¡ç®—çš„ï¼Ÿ"><a href="#ğŸ§®-å“ˆå¸Œæ§½æ˜¯å¦‚ä½•è®¡ç®—çš„ï¼Ÿ" class="headerlink" title="ğŸ§® å“ˆå¸Œæ§½æ˜¯å¦‚ä½•è®¡ç®—çš„ï¼Ÿ"></a>ğŸ§® å“ˆå¸Œæ§½æ˜¯å¦‚ä½•è®¡ç®—çš„ï¼Ÿ</h4><p>Redis ä½¿ç”¨ CRC16 ç®—æ³•è®¡ç®— key çš„å“ˆå¸Œå€¼ï¼Œå¹¶å¯¹ 16384 å–æ¨¡ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">hash_slot = CRC16(key) % 16384<br></code></pre></td></tr></table></figure><p>ğŸ” ç¤ºä¾‹ï¼ˆä½¿ç”¨ <code>redis-cli</code>ï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">127.0.0.1:7000&gt; CLUSTER KEYSLOT mykey<br>15495<br></code></pre></td></tr></table></figure><p>è¡¨ç¤ºï¼š<code>mykey</code> è¢«æ˜ å°„åˆ° <strong>å“ˆå¸Œæ§½ 15495</strong>ã€‚</p><hr><h4 id="ğŸ¯-ä¸ºä»€ä¹ˆå¼•å…¥å“ˆå¸Œæ§½ï¼Ÿ"><a href="#ğŸ¯-ä¸ºä»€ä¹ˆå¼•å…¥å“ˆå¸Œæ§½ï¼Ÿ" class="headerlink" title="ğŸ¯ ä¸ºä»€ä¹ˆå¼•å…¥å“ˆå¸Œæ§½ï¼Ÿ"></a>ğŸ¯ ä¸ºä»€ä¹ˆå¼•å…¥å“ˆå¸Œæ§½ï¼Ÿ</h4><p>ä¼ ç»Ÿçš„ Redis æ— æ³•åˆ†å¸ƒå¼éƒ¨ç½²ï¼Œå•ç‚¹æ•°æ®é‡å¤§å®¹æ˜“ç“¶é¢ˆã€‚</p><p>å“ˆå¸Œæ§½çš„å¼•å…¥å¯ä»¥è§£å†³ï¼š</p><ol><li><strong>å‡åŒ€åˆ†å¸ƒ</strong>ï¼šæ•°æ®æ ¹æ®å“ˆå¸Œæ§½å‡åŒ€åœ°åˆ†å¸ƒåˆ°ä¸åŒèŠ‚ç‚¹</li><li><strong>æ°´å¹³æ‰©å®¹</strong>ï¼šå¯ä»¥åŠ¨æ€è¿ç§»æ§½ä½å®ç°èŠ‚ç‚¹æ‰©å±•</li><li><strong>æ•…éšœè½¬ç§»</strong>ï¼šæŸä¸ªèŠ‚ç‚¹å®•æœºï¼Œæ§½ä½è¿ç§»è‡³å…¶ä»–èŠ‚ç‚¹</li></ol><hr><h4 id="ğŸ—ï¸-é›†ç¾¤æ¶æ„ä¸­çš„å“ˆå¸Œæ§½åˆ†é…"><a href="#ğŸ—ï¸-é›†ç¾¤æ¶æ„ä¸­çš„å“ˆå¸Œæ§½åˆ†é…" class="headerlink" title="ğŸ—ï¸ é›†ç¾¤æ¶æ„ä¸­çš„å“ˆå¸Œæ§½åˆ†é…"></a>ğŸ—ï¸ é›†ç¾¤æ¶æ„ä¸­çš„å“ˆå¸Œæ§½åˆ†é…</h4><p>ä¸€ä¸ªæ ‡å‡† Redis é›†ç¾¤ï¼š</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs crmsh"><span class="hljs-keyword">Node</span> A:<span class="hljs-title"> 0</span> - <span class="hljs-number">5460</span><br><span class="hljs-keyword">Node</span> B:<span class="hljs-title"> 5461</span> - <span class="hljs-number">10922</span><br><span class="hljs-keyword">Node</span> C:<span class="hljs-title"> 10923</span> - <span class="hljs-number">16383</span><br></code></pre></td></tr></table></figure><p>å½“æ’å…¥ä¸€ä¸ª key æ—¶ï¼š</p><ul><li>Redis é€šè¿‡ CRC16 è®¡ç®— key æ˜ å°„çš„ slot</li><li>å°†è¯¥é”®å€¼å¯¹å­˜å…¥è´Ÿè´£è¯¥æ§½çš„èŠ‚ç‚¹</li></ul><hr><h4 id="ğŸ”-é›†ç¾¤é‡åˆ†ç‰‡ï¼ˆé‡æ–°åˆ†é…æ§½ï¼‰"><a href="#ğŸ”-é›†ç¾¤é‡åˆ†ç‰‡ï¼ˆé‡æ–°åˆ†é…æ§½ï¼‰" class="headerlink" title="ğŸ” é›†ç¾¤é‡åˆ†ç‰‡ï¼ˆé‡æ–°åˆ†é…æ§½ï¼‰"></a>ğŸ” é›†ç¾¤é‡åˆ†ç‰‡ï¼ˆé‡æ–°åˆ†é…æ§½ï¼‰</h4><p>å½“æ–°å¢èŠ‚ç‚¹ Dï¼ŒRedis æ”¯æŒå°†éƒ¨åˆ†æ§½ä» A&#x2F;B&#x2F;C è¿ç§»è‡³ Dï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">redis-cli --cluster reshard 127.0.0.1:7000<br></code></pre></td></tr></table></figure><p>ç³»ç»Ÿä¼šæç¤ºä½ ï¼š</p><ul><li>è¿ç§»å¤šå°‘ä¸ªæ§½ï¼ˆå¦‚ 2000ï¼‰</li><li>æºèŠ‚ç‚¹</li><li>ç›®æ ‡èŠ‚ç‚¹</li></ul><p>è¿ç§»å®Œæˆåï¼Œæ–°èŠ‚ç‚¹å¼€å§‹æ¥æ”¶è¯·æ±‚ã€‚</p><hr><h4 id="ğŸ§ -å“ˆå¸Œæ ‡ç­¾ï¼ˆHash-Tagsï¼‰"><a href="#ğŸ§ -å“ˆå¸Œæ ‡ç­¾ï¼ˆHash-Tagsï¼‰" class="headerlink" title="ğŸ§  å“ˆå¸Œæ ‡ç­¾ï¼ˆHash Tagsï¼‰"></a>ğŸ§  å“ˆå¸Œæ ‡ç­¾ï¼ˆHash Tagsï¼‰</h4><p>ä¸ºäº†ç¡®ä¿å¤šä¸ª key åœ¨åŒä¸€ä¸ªæ§½ä¸­ï¼ˆä¿è¯åŸå­æ€§æ“ä½œï¼‰ï¼ŒRedis æä¾›äº† <strong>Hash Tag</strong>ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs text">&#123;user1000&#125;.name<br>&#123;user1000&#125;.email<br></code></pre></td></tr></table></figure><p>ä»¥ä¸Šä¸¤ä¸ª key çš„æ§½æ˜¯ä¸€æ ·çš„ï¼Œå› ä¸º Redis åªå¯¹ <strong>èŠ±æ‹¬å·ä¸­çš„å†…å®¹</strong>è¿›è¡Œ CRC16 è®¡ç®—ã€‚</p><p>ğŸ“Œ å¸¸ç”¨äºï¼š</p><ul><li>Lua è„šæœ¬æ“ä½œå¤šä¸ª key</li><li>pipeline æˆ–äº‹åŠ¡ä¸­ key ä¿è¯åœ¨ä¸€ä¸ªèŠ‚ç‚¹ä¸Š</li></ul><hr><h4 id="ğŸ› ï¸-Python-ç¤ºä¾‹"><a href="#ğŸ› ï¸-Python-ç¤ºä¾‹" class="headerlink" title="ğŸ› ï¸ Python ç¤ºä¾‹"></a>ğŸ› ï¸ Python ç¤ºä¾‹</h4><p>æˆ‘ä»¬ä½¿ç”¨ <code>crcmod</code> æ¨¡æ‹Ÿ Redis çš„ CRC16 ç®—æ³•è®¡ç®—å“ˆå¸Œæ§½ã€‚</p><h5 id="âœ…-å®‰è£…ä¾èµ–"><a href="#âœ…-å®‰è£…ä¾èµ–" class="headerlink" title="âœ… å®‰è£…ä¾èµ–"></a>âœ… å®‰è£…ä¾èµ–</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip install crcmod<br></code></pre></td></tr></table></figure><h5 id="âœ…-Python-ç¤ºä¾‹ä»£ç "><a href="#âœ…-Python-ç¤ºä¾‹ä»£ç " class="headerlink" title="âœ… Python ç¤ºä¾‹ä»£ç "></a>âœ… Python ç¤ºä¾‹ä»£ç </h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> crcmod<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_redis_slot</span>(<span class="hljs-params">key: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>    <span class="hljs-comment"># è·å– &#123;&#125; ä¸­å†…å®¹ä½œä¸ºè®¡ç®—å­—æ®µ</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;&#123;&quot;</span> <span class="hljs-keyword">in</span> key <span class="hljs-keyword">and</span> <span class="hljs-string">&quot;&#125;&quot;</span> <span class="hljs-keyword">in</span> key:<br>        key = key[key.find(<span class="hljs-string">&quot;&#123;&quot;</span>) + <span class="hljs-number">1</span>:key.find(<span class="hljs-string">&quot;&#125;&quot;</span>)]<br>    crc16 = crcmod.predefined.mkPredefinedCrcFun(<span class="hljs-string">&quot;crc-16&quot;</span>)<br>    <span class="hljs-keyword">return</span> crc16(key.encode()) % <span class="hljs-number">16384</span><br><br><span class="hljs-comment"># ç¤ºä¾‹</span><br>keys = [<span class="hljs-string">&quot;user:1001&quot;</span>, <span class="hljs-string">&quot;&#123;user1001&#125;.name&quot;</span>, <span class="hljs-string">&quot;&#123;user1001&#125;.email&quot;</span>]<br><span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> keys:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Key: <span class="hljs-subst">&#123;k&#125;</span>, Slot: <span class="hljs-subst">&#123;get_redis_slot(k)&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure><h5 id="âœ…-è¾“å‡ºç»“æœç¤ºä¾‹"><a href="#âœ…-è¾“å‡ºç»“æœç¤ºä¾‹" class="headerlink" title="âœ… è¾“å‡ºç»“æœç¤ºä¾‹"></a>âœ… è¾“å‡ºç»“æœç¤ºä¾‹</h5><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">Key:</span> <span class="hljs-string">user:1001,</span> <span class="hljs-attr">Slot:</span> <span class="hljs-number">5796</span><br><span class="hljs-attr">Key:</span> &#123;<span class="hljs-string">user1001</span>&#125;<span class="hljs-string">.name,</span> <span class="hljs-attr">Slot:</span> <span class="hljs-number">5796</span><br><span class="hljs-attr">Key:</span> &#123;<span class="hljs-string">user1001</span>&#125;<span class="hljs-string">.email,</span> <span class="hljs-attr">Slot:</span> <span class="hljs-number">5796</span><br></code></pre></td></tr></table></figure><p>ğŸ“Œ ä½ å¯ä»¥çœ‹åˆ°ï¼Œ<code>&#123;user1001&#125;.xxx</code> çš„æ§½å€¼ç›¸åŒï¼Œä¾¿äºæ”¾åœ¨ä¸€ä¸ªèŠ‚ç‚¹ä¸Šã€‚</p><hr><h4 id="â—-æ³¨æ„äº‹é¡¹"><a href="#â—-æ³¨æ„äº‹é¡¹" class="headerlink" title="â— æ³¨æ„äº‹é¡¹"></a>â— æ³¨æ„äº‹é¡¹</h4><table><thead><tr><th>åœºæ™¯</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>äº‹åŠ¡ï¼ˆMULTI&#x2F;EXECï¼‰</td><td>æ‰€æœ‰ key å¿…é¡»åœ¨ä¸€ä¸ªæ§½å†…ï¼Œå¦åˆ™æ‰§è¡Œå¤±è´¥</td></tr><tr><td>Lua è„šæœ¬</td><td>åŒæ ·å—é™äºæ§½</td></tr><tr><td>pipeline æ‰¹é‡æ“ä½œ</td><td>å»ºè®®ä½¿ç”¨å“ˆå¸Œæ ‡ç­¾ç¡®ä¿ key è½å…¥åŒä¸€ä¸ªæ§½</td></tr><tr><td>æ‹“å±•èŠ‚ç‚¹</td><td>ä½¿ç”¨ <code>redis-cli --cluster reshard</code> æ“ä½œæ§½</td></tr></tbody></table><hr><h4 id="âœ…-ä½¿ç”¨å»ºè®®"><a href="#âœ…-ä½¿ç”¨å»ºè®®" class="headerlink" title="âœ… ä½¿ç”¨å»ºè®®"></a>âœ… ä½¿ç”¨å»ºè®®</h4><ul><li>åœ¨è®¾è®¡ key æ—¶ï¼Œåˆç†ä½¿ç”¨å“ˆå¸Œæ ‡ç­¾ <code>&#123;&#125;</code></li><li>é¿å…åœ¨ä¸€ä¸ªæ“ä½œä¸­è·¨æ§½è®¿é—®å¤šä¸ª key</li><li>å®šæœŸç›‘æ§å“ˆå¸Œæ§½çš„åˆ†å¸ƒæƒ…å†µï¼ˆå¯ä½¿ç”¨ RedisInsight ç­‰å·¥å…·ï¼‰</li><li>åšå¥½æ•°æ®è¿ç§»&#x2F;èŠ‚ç‚¹æ‰©å®¹å‰çš„é¢„æ¡ˆï¼ˆå¤‡ä»½ã€éªŒè¯ï¼‰</li></ul><hr><h3 id="ğŸ“¦-ä¼ä¸šå®æˆ˜å»ºè®®ï¼š"><a href="#ğŸ“¦-ä¼ä¸šå®æˆ˜å»ºè®®ï¼š" class="headerlink" title="ğŸ“¦ ä¼ä¸šå®æˆ˜å»ºè®®ï¼š"></a>ğŸ“¦ ä¼ä¸šå®æˆ˜å»ºè®®ï¼š</h3><table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ¨¡å¼</th></tr></thead><tbody><tr><td>é«˜æ€§èƒ½ç¼“å­˜</td><td>RDB + AOF æ··åˆæŒä¹…åŒ–</td></tr><tr><td>å¼¹æ€§è¯»å†™åˆ†ç¦»</td><td>ä¸»ä»å¤åˆ¶</td></tr><tr><td>é«˜å¯ç”¨éƒ¨ç½²</td><td>Sentinel å“¨å…µæ¨¡å¼</td></tr><tr><td>æµ·é‡åˆ†å¸ƒå¼å­˜å‚¨</td><td>Cluster é›†ç¾¤æ¨¡å¼</td></tr></tbody></table><hr><h2 id="ğŸ§ -æ€»ç»“"><a href="#ğŸ§ -æ€»ç»“" class="headerlink" title="ğŸ§  æ€»ç»“"></a>ğŸ§  æ€»ç»“</h2><p>Redis çš„è¿›é˜¶ä½¿ç”¨ä¸ä¼ä¸šçº§éƒ¨ç½²ç­–ç•¥ï¼ŒåŒ…æ‹¬ï¼š</p><ul><li>RDBã€AOF ä¸æ··åˆæŒä¹…åŒ–çš„å–èˆä¸é…ç½®</li><li>ä¸»ä»æ¶æ„å®ç°è¯»å†™åˆ†ç¦»</li><li>å“¨å…µæ¨¡å¼ä¿è¯é«˜å¯ç”¨</li><li>é›†ç¾¤æ¨¡å¼è§£å†³æµ·é‡æ•°æ®æ°´å¹³æ‰©å±•</li></ul><p>âœ… å»ºè®®é…åˆ Prometheus + Grafana è¿›è¡Œç›‘æ§éƒ¨ç½²<br>âœ… æŒä¹…åŒ–ç­–ç•¥å¯æ ¹æ®ä¸šåŠ¡æ•°æ®å®‰å…¨çº§åˆ«åŠ¨æ€è°ƒæ•´</p>]]></content>
    
    
    <categories>
      
      <category>Redis</category>
      
      <category>Redis æ•™ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Redis å®æˆ˜æ•™ç¨‹</title>
    <link href="/2025/07/11/redis%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B/"/>
    <url>/2025/07/11/redis%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="Redis-å®æˆ˜åŸºç¡€ç¯‡"><a href="#Redis-å®æˆ˜åŸºç¡€ç¯‡" class="headerlink" title="Redis å®æˆ˜åŸºç¡€ç¯‡"></a>Redis å®æˆ˜åŸºç¡€ç¯‡</h1><h2 id="1-1-ç¼“å­˜åº”ç”¨ï¼ˆCacheï¼‰"><a href="#1-1-ç¼“å­˜åº”ç”¨ï¼ˆCacheï¼‰" class="headerlink" title="1.1 ç¼“å­˜åº”ç”¨ï¼ˆCacheï¼‰"></a>1.1 ç¼“å­˜åº”ç”¨ï¼ˆCacheï¼‰</h2><h3 id="ğŸ“Œ-ç¼“å­˜è¯»å†™æµç¨‹ï¼šCache-Aside-æ¨¡å¼ï¼ˆæ—è·¯ç¼“å­˜ï¼‰"><a href="#ğŸ“Œ-ç¼“å­˜è¯»å†™æµç¨‹ï¼šCache-Aside-æ¨¡å¼ï¼ˆæ—è·¯ç¼“å­˜ï¼‰" class="headerlink" title="ğŸ“Œ ç¼“å­˜è¯»å†™æµç¨‹ï¼šCache Aside æ¨¡å¼ï¼ˆæ—è·¯ç¼“å­˜ï¼‰"></a>ğŸ“Œ ç¼“å­˜è¯»å†™æµç¨‹ï¼šCache Aside æ¨¡å¼ï¼ˆæ—è·¯ç¼“å­˜ï¼‰</h3><blockquote><p><strong>æµç¨‹ç®€ä»‹</strong>ï¼š</p><ul><li>è¯»æ•°æ®æ—¶ï¼Œå…ˆæŸ¥ç¼“å­˜ï¼Œç¼“å­˜æœªå‘½ä¸­å†æŸ¥æ•°æ®åº“ï¼Œå¹¶å†™å…¥ç¼“å­˜ã€‚</li><li>å†™æ•°æ®æ—¶ï¼Œå…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†åˆ é™¤ç¼“å­˜ã€‚</li></ul></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> redis<br><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Optional</span><br><br>r = redis.Redis(host=<span class="hljs-string">&#x27;localhost&#x27;</span>, port=<span class="hljs-number">6379</span>, db=<span class="hljs-number">0</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_from_db</span>(<span class="hljs-params">user_id: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">dict</span>:<br>    <span class="hljs-string">&quot;&quot;&quot;æ¨¡æ‹Ÿä»æ•°æ®åº“è¯»å–æ•°æ®&quot;&quot;&quot;</span><br>    time.sleep(<span class="hljs-number">1</span>)  <span class="hljs-comment"># æ¨¡æ‹Ÿå»¶è¿Ÿ</span><br>    <span class="hljs-keyword">return</span> &#123;<span class="hljs-string">&quot;user_id&quot;</span>: user_id, <span class="hljs-string">&quot;username&quot;</span>: <span class="hljs-string">f&quot;user_<span class="hljs-subst">&#123;user_id&#125;</span>&quot;</span>, <span class="hljs-string">&quot;email&quot;</span>: <span class="hljs-string">f&quot;user<span class="hljs-subst">&#123;user_id&#125;</span>@test.com&quot;</span>&#125;<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_user</span>(<span class="hljs-params">user_id: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">dict</span>:<br>    key = <span class="hljs-string">f&quot;user:<span class="hljs-subst">&#123;user_id&#125;</span>&quot;</span><br>    user = r.get(key)<br>    <span class="hljs-keyword">if</span> user:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;âœ… ç¼“å­˜å‘½ä¸­&quot;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">eval</span>(user)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;âŒ ç¼“å­˜æœªå‘½ä¸­ï¼Œä»æ•°æ®åº“æŸ¥è¯¢&quot;</span>)<br>        user = get_from_db(user_id)<br>        r.setex(key, <span class="hljs-number">300</span>, <span class="hljs-built_in">str</span>(user))  <span class="hljs-comment"># ç¼“å­˜5åˆ†é’Ÿ</span><br>        <span class="hljs-keyword">return</span> user<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">update_user</span>(<span class="hljs-params">user_id: <span class="hljs-built_in">str</span>, new_data: <span class="hljs-built_in">dict</span></span>):<br>    <span class="hljs-comment"># å…ˆæ›´æ–°æ•°æ®åº“ï¼ˆæ­¤å¤„ç•¥ï¼‰</span><br>    <span class="hljs-comment"># åˆ é™¤ç¼“å­˜</span><br>    r.delete(<span class="hljs-string">f&quot;user:<span class="hljs-subst">&#123;user_id&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure><hr><h3 id="âš ï¸-ç¼“å­˜ä¸‰å¤§é—®é¢˜ä¸åº”å¯¹ç­–ç•¥"><a href="#âš ï¸-ç¼“å­˜ä¸‰å¤§é—®é¢˜ä¸åº”å¯¹ç­–ç•¥" class="headerlink" title="âš ï¸ ç¼“å­˜ä¸‰å¤§é—®é¢˜ä¸åº”å¯¹ç­–ç•¥"></a>âš ï¸ ç¼“å­˜ä¸‰å¤§é—®é¢˜ä¸åº”å¯¹ç­–ç•¥</h3><h4 id="1ï¸âƒ£-ç¼“å­˜å‡»ç©¿ï¼ˆä¸€ä¸ªçƒ­ç‚¹keyçªç„¶å¤±æ•ˆï¼‰"><a href="#1ï¸âƒ£-ç¼“å­˜å‡»ç©¿ï¼ˆä¸€ä¸ªçƒ­ç‚¹keyçªç„¶å¤±æ•ˆï¼‰" class="headerlink" title="1ï¸âƒ£ ç¼“å­˜å‡»ç©¿ï¼ˆä¸€ä¸ªçƒ­ç‚¹keyçªç„¶å¤±æ•ˆï¼‰"></a>1ï¸âƒ£ ç¼“å­˜å‡»ç©¿ï¼ˆä¸€ä¸ªçƒ­ç‚¹keyçªç„¶å¤±æ•ˆï¼‰</h4><ul><li>æ–¹æ¡ˆï¼šåŠ äº’æ–¥é”é˜²æ­¢é«˜å¹¶å‘åŒæ—¶æ‰“åˆ°DBï¼Œæˆ–è®¾ç½® <strong>æ°¸ä¸è¿‡æœŸ + åå°å®šæ—¶åˆ·æ–°</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_user_with_lock</span>(<span class="hljs-params">user_id: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">dict</span>:<br>    key = <span class="hljs-string">f&quot;user:<span class="hljs-subst">&#123;user_id&#125;</span>&quot;</span><br>    user = r.get(key)<br>    <span class="hljs-keyword">if</span> user:<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">eval</span>(user)<br>    <br>    lock_key = <span class="hljs-string">f&quot;lock:<span class="hljs-subst">&#123;user_id&#125;</span>&quot;</span><br>    <span class="hljs-keyword">if</span> r.<span class="hljs-built_in">set</span>(lock_key, <span class="hljs-string">&quot;1&quot;</span>, nx=<span class="hljs-literal">True</span>, ex=<span class="hljs-number">5</span>):  <span class="hljs-comment"># åˆ†å¸ƒå¼é”</span><br>        user = get_from_db(user_id)<br>        r.setex(key, <span class="hljs-number">300</span>, <span class="hljs-built_in">str</span>(user))<br>        r.delete(lock_key)<br>        <span class="hljs-keyword">return</span> user<br>    <span class="hljs-keyword">else</span>:<br>        time.sleep(<span class="hljs-number">0.1</span>)<br>        <span class="hljs-keyword">return</span> get_user_with_lock(user_id)<br></code></pre></td></tr></table></figure><h4 id="2ï¸âƒ£-ç¼“å­˜é›ªå´©ï¼ˆå¤§é‡keyåŒæ—¶è¿‡æœŸï¼‰"><a href="#2ï¸âƒ£-ç¼“å­˜é›ªå´©ï¼ˆå¤§é‡keyåŒæ—¶è¿‡æœŸï¼‰" class="headerlink" title="2ï¸âƒ£ ç¼“å­˜é›ªå´©ï¼ˆå¤§é‡keyåŒæ—¶è¿‡æœŸï¼‰"></a>2ï¸âƒ£ ç¼“å­˜é›ªå´©ï¼ˆå¤§é‡keyåŒæ—¶è¿‡æœŸï¼‰</h4><ul><li>æ–¹æ¡ˆï¼šè®¾ç½®è¿‡æœŸæ—¶é—´éšæœºå€¼ï¼Œé”™å³°ç¼“å­˜å¤±æ•ˆ</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> random<br><br>r.setex(<span class="hljs-string">&quot;key&quot;</span>, <span class="hljs-number">300</span> + random.randint(<span class="hljs-number">0</span>, <span class="hljs-number">60</span>), <span class="hljs-string">&quot;value&quot;</span>)<br></code></pre></td></tr></table></figure><h4 id="3ï¸âƒ£-ç¼“å­˜ç©¿é€ï¼ˆè¯·æ±‚ä¸å­˜åœ¨çš„æ•°æ®ï¼‰"><a href="#3ï¸âƒ£-ç¼“å­˜ç©¿é€ï¼ˆè¯·æ±‚ä¸å­˜åœ¨çš„æ•°æ®ï¼‰" class="headerlink" title="3ï¸âƒ£ ç¼“å­˜ç©¿é€ï¼ˆè¯·æ±‚ä¸å­˜åœ¨çš„æ•°æ®ï¼‰"></a>3ï¸âƒ£ ç¼“å­˜ç©¿é€ï¼ˆè¯·æ±‚ä¸å­˜åœ¨çš„æ•°æ®ï¼‰</h4><ul><li>æ–¹æ¡ˆï¼šå°†ç©ºå€¼ä¹Ÿç¼“å­˜èµ·æ¥ï¼ˆçŸ­æ—¶ï¼‰</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_user_safe</span>(<span class="hljs-params">user_id: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">dict</span>:<br>    key = <span class="hljs-string">f&quot;user:<span class="hljs-subst">&#123;user_id&#125;</span>&quot;</span><br>    user = r.get(key)<br>    <span class="hljs-keyword">if</span> user:<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">eval</span>(user)<br>    user = get_from_db(user_id)<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> user:<br>        r.setex(key, <span class="hljs-number">60</span>, <span class="hljs-string">&quot;None&quot;</span>)<br>        <span class="hljs-keyword">return</span> &#123;&#125;<br>    r.setex(key, <span class="hljs-number">300</span>, <span class="hljs-built_in">str</span>(user))<br>    <span class="hljs-keyword">return</span> user<br></code></pre></td></tr></table></figure><hr><h2 id="1-2-Session-ç®¡ç†ï¼ˆç”¨æˆ·çŠ¶æ€ï¼‰"><a href="#1-2-Session-ç®¡ç†ï¼ˆç”¨æˆ·çŠ¶æ€ï¼‰" class="headerlink" title="1.2 Session ç®¡ç†ï¼ˆç”¨æˆ·çŠ¶æ€ï¼‰"></a>1.2 Session ç®¡ç†ï¼ˆç”¨æˆ·çŠ¶æ€ï¼‰</h2><h3 id="ğŸ› -Flask-Redis-å®ç°-Session"><a href="#ğŸ› -Flask-Redis-å®ç°-Session" class="headerlink" title="ğŸ›  Flask + Redis å®ç° Session"></a>ğŸ›  Flask + Redis å®ç° Session</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, request, jsonify<br><span class="hljs-keyword">import</span> uuid<br><br>app = Flask(__name__)<br>session_store = redis.Redis()<br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/login&quot;</span>, methods=[<span class="hljs-string">&quot;POST&quot;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">login</span>():<br>    username = request.json.get(<span class="hljs-string">&quot;username&quot;</span>)<br>    <span class="hljs-comment"># éªŒè¯ç•¥...</span><br>    session_id = <span class="hljs-built_in">str</span>(uuid.uuid4())<br>    session_store.setex(<span class="hljs-string">f&quot;session:<span class="hljs-subst">&#123;session_id&#125;</span>&quot;</span>, <span class="hljs-number">3600</span>, username)<br>    <span class="hljs-keyword">return</span> jsonify(&#123;<span class="hljs-string">&quot;session_id&quot;</span>: session_id&#125;)<br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/profile&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">profile</span>():<br>    session_id = request.headers.get(<span class="hljs-string">&quot;Authorization&quot;</span>)<br>    username = session_store.get(<span class="hljs-string">f&quot;session:<span class="hljs-subst">&#123;session_id&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> username:<br>        <span class="hljs-keyword">return</span> jsonify(&#123;<span class="hljs-string">&quot;error&quot;</span>: <span class="hljs-string">&quot;æœªç™»å½•&quot;</span>&#125;), <span class="hljs-number">401</span><br>    <span class="hljs-keyword">return</span> jsonify(&#123;<span class="hljs-string">&quot;username&quot;</span>: username.decode()&#125;)<br></code></pre></td></tr></table></figure><hr><h2 id="1-3-é™æµå®æˆ˜ï¼ˆé˜²åˆ·æ¥å£ï¼‰"><a href="#1-3-é™æµå®æˆ˜ï¼ˆé˜²åˆ·æ¥å£ï¼‰" class="headerlink" title="1.3 é™æµå®æˆ˜ï¼ˆé˜²åˆ·æ¥å£ï¼‰"></a>1.3 é™æµå®æˆ˜ï¼ˆé˜²åˆ·æ¥å£ï¼‰</h2><h3 id="ğŸš¦-ç”¨-Redis-å®ç°å›ºå®šçª—å£é™æµï¼ˆINCRï¼‰"><a href="#ğŸš¦-ç”¨-Redis-å®ç°å›ºå®šçª—å£é™æµï¼ˆINCRï¼‰" class="headerlink" title="ğŸš¦ ç”¨ Redis å®ç°å›ºå®šçª—å£é™æµï¼ˆINCRï¼‰"></a>ğŸš¦ ç”¨ Redis å®ç°å›ºå®šçª—å£é™æµï¼ˆINCRï¼‰</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">is_allowed</span>(<span class="hljs-params">ip: <span class="hljs-built_in">str</span>, limit=<span class="hljs-number">10</span></span>) -&gt; <span class="hljs-built_in">bool</span>:<br>    key = <span class="hljs-string">f&quot;rate:<span class="hljs-subst">&#123;ip&#125;</span>:<span class="hljs-subst">&#123;<span class="hljs-built_in">int</span>(time.time() // <span class="hljs-number">60</span>)&#125;</span>&quot;</span>  <span class="hljs-comment"># æ¯åˆ†é’Ÿä¸€ä¸ªkey</span><br>    current = r.incr(key)<br>    <span class="hljs-keyword">if</span> current == <span class="hljs-number">1</span>:<br>        r.expire(key, <span class="hljs-number">60</span>)<br>    <span class="hljs-keyword">return</span> current &lt;= limit<br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/search&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">search</span>():<br>    ip = request.remote_addr<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> is_allowed(ip):<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;é™æµä¸­ï¼Œè¯·ç¨åå†è¯•&quot;</span>, <span class="hljs-number">429</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;æ­£å¸¸è®¿é—®&quot;</span><br></code></pre></td></tr></table></figure><hr><h3 id="ğŸ’¡-è¿›é˜¶é™æµç®—æ³•ï¼ˆè¡¥å……ç†è®ºï¼‰"><a href="#ğŸ’¡-è¿›é˜¶é™æµç®—æ³•ï¼ˆè¡¥å……ç†è®ºï¼‰" class="headerlink" title="ğŸ’¡ è¿›é˜¶é™æµç®—æ³•ï¼ˆè¡¥å……ç†è®ºï¼‰"></a>ğŸ’¡ è¿›é˜¶é™æµç®—æ³•ï¼ˆè¡¥å……ç†è®ºï¼‰</h3><table><thead><tr><th>ç­–ç•¥</th><th>ç‰¹ç‚¹æè¿°</th></tr></thead><tbody><tr><td>å›ºå®šçª—å£</td><td>ç®€å•æ˜“å®ç°ï¼Œä½†ä¸´ç•Œå€¼æ˜“çªå¢</td></tr><tr><td>æ»‘åŠ¨çª—å£</td><td>ç²¾åº¦é«˜ä½†å®ç°å¤æ‚ï¼ˆLuaè„šæœ¬å¤„ç†ï¼‰</td></tr><tr><td>æ¼æ¡¶ï¼ˆLeakyï¼‰</td><td>åŒ€é€Ÿå‡ºæ°´ï¼Œé™åˆ¶å¤„ç†é€Ÿç‡</td></tr><tr><td>ä»¤ç‰Œæ¡¶ï¼ˆTokenï¼‰</td><td>æ§åˆ¶é€Ÿç‡å¹¶æ”¯æŒçªå‘</td></tr></tbody></table><hr><h2 id="1-4-æ’è¡Œæ¦œå®æˆ˜ï¼ˆZSETï¼‰"><a href="#1-4-æ’è¡Œæ¦œå®æˆ˜ï¼ˆZSETï¼‰" class="headerlink" title="1.4 æ’è¡Œæ¦œå®æˆ˜ï¼ˆZSETï¼‰"></a>1.4 æ’è¡Œæ¦œå®æˆ˜ï¼ˆZSETï¼‰</h2><h3 id="ğŸ†-æ„å»ºä¸€ä¸ªæ¸¸æˆç§¯åˆ†æ’è¡Œæ¦œ"><a href="#ğŸ†-æ„å»ºä¸€ä¸ªæ¸¸æˆç§¯åˆ†æ’è¡Œæ¦œ" class="headerlink" title="ğŸ† æ„å»ºä¸€ä¸ªæ¸¸æˆç§¯åˆ†æ’è¡Œæ¦œ"></a>ğŸ† æ„å»ºä¸€ä¸ªæ¸¸æˆç§¯åˆ†æ’è¡Œæ¦œ</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">update_score</span>(<span class="hljs-params">user_id: <span class="hljs-built_in">str</span>, score: <span class="hljs-built_in">int</span></span>):<br>    r.zadd(<span class="hljs-string">&quot;leaderboard&quot;</span>, &#123;user_id: score&#125;)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_top_n</span>(<span class="hljs-params">n: <span class="hljs-built_in">int</span> = <span class="hljs-number">10</span></span>):<br>    <span class="hljs-keyword">return</span> r.zrevrange(<span class="hljs-string">&quot;leaderboard&quot;</span>, <span class="hljs-number">0</span>, n - <span class="hljs-number">1</span>, withscores=<span class="hljs-literal">True</span>)<br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/leaderboard&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">leaderboard</span>():<br>    top = get_top_n()<br>    <span class="hljs-keyword">return</span> jsonify(top)<br></code></pre></td></tr></table></figure><hr><h3 id="ğŸ”-å¤šç»´æ’è¡Œæ¦œï¼ˆæŒ‰æ—¶é—´ã€ç±»åˆ«ï¼‰"><a href="#ğŸ”-å¤šç»´æ’è¡Œæ¦œï¼ˆæŒ‰æ—¶é—´ã€ç±»åˆ«ï¼‰" class="headerlink" title="ğŸ” å¤šç»´æ’è¡Œæ¦œï¼ˆæŒ‰æ—¶é—´ã€ç±»åˆ«ï¼‰"></a>ğŸ” å¤šç»´æ’è¡Œæ¦œï¼ˆæŒ‰æ—¶é—´ã€ç±»åˆ«ï¼‰</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">update_score_by_day</span>(<span class="hljs-params">user_id: <span class="hljs-built_in">str</span>, score: <span class="hljs-built_in">int</span></span>):<br>    day = time.strftime(<span class="hljs-string">&quot;%Y%m%d&quot;</span>)<br>    r.zadd(<span class="hljs-string">f&quot;leaderboard:<span class="hljs-subst">&#123;day&#125;</span>&quot;</span>, &#123;user_id: score&#125;)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_daily_top</span>(<span class="hljs-params">day: <span class="hljs-built_in">str</span>, n=<span class="hljs-number">10</span></span>):<br>    <span class="hljs-keyword">return</span> r.zrevrange(<span class="hljs-string">f&quot;leaderboard:<span class="hljs-subst">&#123;day&#125;</span>&quot;</span>, <span class="hljs-number">0</span>, n - <span class="hljs-number">1</span>, withscores=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure><hr><h2 id="âœ…-æ€»ç»“"><a href="#âœ…-æ€»ç»“" class="headerlink" title="âœ… æ€»ç»“"></a>âœ… æ€»ç»“</h2><table><thead><tr><th>æ¨¡å—</th><th>æŠ€æœ¯ç‚¹</th><th>åœºæ™¯</th></tr></thead><tbody><tr><td>ç¼“å­˜</td><td>Cache Asideã€é›ªå´©å‡»ç©¿ç©¿é€å¤„ç†</td><td>æ¥å£æ•°æ®åŠ é€Ÿã€çƒ­ç‚¹æ•°æ®ç¼“å­˜</td></tr><tr><td>Session ç®¡ç†</td><td>Redis å­˜å‚¨ç™»å½•æ€ + è¿‡æœŸè‡ªåŠ¨æ§åˆ¶</td><td>å•ç‚¹ç™»å½•ã€å¾®æœåŠ¡ç»Ÿä¸€è®¤è¯</td></tr><tr><td>é™æµ</td><td>INCRã€æ»‘åŠ¨çª—å£ã€æ¼æ¡¶ä»¤ç‰Œæ¡¶</td><td>é˜²åˆ·ã€é£æ§ã€æ¥å£ä¿æŠ¤</td></tr><tr><td>æ’è¡Œæ¦œ</td><td>ZSET æ„å»ºæœ‰åºé›†åˆã€æŒ‰æ—¶é—´åˆ†ç»„</td><td>ç”µå•†æ¦œå•ã€æ¸¸æˆæ’è¡Œã€æ‰“æ¦œæŠ•ç¥¨ç±»æ´»åŠ¨</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>Redis</category>
      
      <category>Redis æ•™ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Redis æ ¸å¿ƒæ•°æ®ç»“æ„ä»‹ç»</title>
    <link href="/2025/07/10/redis%E6%A0%B8%E5%BF%83%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    <url>/2025/07/10/redis%E6%A0%B8%E5%BF%83%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/</url>
    
    <content type="html"><![CDATA[<h1 id="Redis-æ ¸å¿ƒæ•°æ®ç»“æ„ä»‹ç»"><a href="#Redis-æ ¸å¿ƒæ•°æ®ç»“æ„ä»‹ç»" class="headerlink" title="Redis æ ¸å¿ƒæ•°æ®ç»“æ„ä»‹ç»"></a>Redis æ ¸å¿ƒæ•°æ®ç»“æ„ä»‹ç»</h1><h2 id="2-1-Stringï¼ˆå­—ç¬¦ä¸²ï¼‰"><a href="#2-1-Stringï¼ˆå­—ç¬¦ä¸²ï¼‰" class="headerlink" title="2.1 Stringï¼ˆå­—ç¬¦ä¸²ï¼‰"></a>2.1 Stringï¼ˆå­—ç¬¦ä¸²ï¼‰</h2><h3 id="æ ¸å¿ƒå‘½ä»¤"><a href="#æ ¸å¿ƒå‘½ä»¤" class="headerlink" title="æ ¸å¿ƒå‘½ä»¤"></a>æ ¸å¿ƒå‘½ä»¤</h3><ul><li><code>SET key value</code>ï¼šè®¾ç½® key å¯¹åº”çš„å­—ç¬¦ä¸²å€¼</li><li><code>GET key</code>ï¼šè·å– key å¯¹åº”çš„å€¼</li><li><code>INCR key</code>ï¼šå°† key ä¸­å­˜å‚¨çš„æ•°å­—å€¼åŠ ä¸€</li><li><code>EXPIRE key seconds</code>ï¼šè®¾ç½® key çš„è¿‡æœŸæ—¶é—´</li><li><code>APPEND key value</code>ï¼šè¿½åŠ å­—ç¬¦ä¸²åˆ°æŒ‡å®š key çš„æœ«å°¾</li></ul><h3 id="ä¼ä¸šåº”ç”¨åœºæ™¯"><a href="#ä¼ä¸šåº”ç”¨åœºæ™¯" class="headerlink" title="ä¼ä¸šåº”ç”¨åœºæ™¯"></a>ä¼ä¸šåº”ç”¨åœºæ™¯</h3><ul><li>ç”¨æˆ·ç™»å½•çŠ¶æ€ç¼“å­˜</li><li>çŸ­ä¿¡éªŒè¯ç ä¸´æ—¶å­˜å‚¨ï¼ˆè¿‡æœŸè‡ªåŠ¨åˆ é™¤ï¼‰</li><li>PV&#x2F;UV è®¡æ•°å™¨ã€æ¥å£è®¿é—®æ¬¡æ•°ç»Ÿè®¡</li></ul><h3 id="Python-ç¤ºä¾‹ï¼ˆçŸ­ä¿¡éªŒè¯ç ï¼‰"><a href="#Python-ç¤ºä¾‹ï¼ˆçŸ­ä¿¡éªŒè¯ç ï¼‰" class="headerlink" title="Python ç¤ºä¾‹ï¼ˆçŸ­ä¿¡éªŒè¯ç ï¼‰"></a>Python ç¤ºä¾‹ï¼ˆçŸ­ä¿¡éªŒè¯ç ï¼‰</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> redis<br><span class="hljs-keyword">import</span> random<br><br>r = redis.Redis(host=<span class="hljs-string">&#x27;localhost&#x27;</span>, port=<span class="hljs-number">6379</span>, decode_responses=<span class="hljs-literal">True</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">send_sms_code</span>(<span class="hljs-params">phone</span>):<br>    code = <span class="hljs-built_in">str</span>(random.randint(<span class="hljs-number">100000</span>, <span class="hljs-number">999999</span>))<br>    key = <span class="hljs-string">f&quot;sms:<span class="hljs-subst">&#123;phone&#125;</span>&quot;</span><br>    r.<span class="hljs-built_in">set</span>(key, code)<br>    r.expire(key, <span class="hljs-number">300</span>)  <span class="hljs-comment"># è®¾ç½®5åˆ†é’Ÿè¿‡æœŸ</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;éªŒè¯ç å·²å‘é€è‡³ <span class="hljs-subst">&#123;phone&#125;</span>ï¼š<span class="hljs-subst">&#123;code&#125;</span>&quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">validate_sms_code</span>(<span class="hljs-params">phone, code_input</span>):<br>    key = <span class="hljs-string">f&quot;sms:<span class="hljs-subst">&#123;phone&#125;</span>&quot;</span><br>    code = r.get(key)<br>    <span class="hljs-keyword">return</span> code_input == code<br><br><span class="hljs-comment"># ç¤ºä¾‹</span><br>send_sms_code(<span class="hljs-string">&quot;13800000000&quot;</span>)<br><span class="hljs-built_in">print</span>(validate_sms_code(<span class="hljs-string">&quot;13800000000&quot;</span>, <span class="hljs-string">&quot;123456&quot;</span>))  <span class="hljs-comment"># False</span><br></code></pre></td></tr></table></figure><hr><h2 id="2-2-Listï¼ˆåˆ—è¡¨ï¼‰"><a href="#2-2-Listï¼ˆåˆ—è¡¨ï¼‰" class="headerlink" title="2.2 Listï¼ˆåˆ—è¡¨ï¼‰"></a>2.2 Listï¼ˆåˆ—è¡¨ï¼‰</h2><h3 id="æ ¸å¿ƒå‘½ä»¤-1"><a href="#æ ¸å¿ƒå‘½ä»¤-1" class="headerlink" title="æ ¸å¿ƒå‘½ä»¤"></a>æ ¸å¿ƒå‘½ä»¤</h3><ul><li><code>LPUSH key value</code>ï¼šä»å·¦ä¾§æ¨å…¥å…ƒç´ </li><li><code>RPUSH key value</code>ï¼šä»å³ä¾§æ¨å…¥å…ƒç´ </li><li><code>LPOP key</code>ï¼šä»å·¦ä¾§å¼¹å‡ºå…ƒç´ </li><li><code>LRANGE key start stop</code>ï¼šè·å–æŒ‡å®šåŒºé—´å†…çš„å…ƒç´ åˆ—è¡¨</li></ul><h3 id="ä¼ä¸šåº”ç”¨åœºæ™¯-1"><a href="#ä¼ä¸šåº”ç”¨åœºæ™¯-1" class="headerlink" title="ä¼ä¸šåº”ç”¨åœºæ™¯"></a>ä¼ä¸šåº”ç”¨åœºæ™¯</h3><ul><li>æ¶ˆæ¯é˜Ÿåˆ—ç³»ç»Ÿï¼ˆå·¦è¿›å³å‡º&#x2F;å³è¿›å·¦å‡ºï¼‰</li><li>å®æ—¶è¯„è®ºç³»ç»Ÿ</li><li>å¾…å¤„ç†ä»»åŠ¡é˜Ÿåˆ—</li></ul><h3 id="Python-ç¤ºä¾‹ï¼ˆå¾…å¤„ç†ä»»åŠ¡é˜Ÿåˆ—ï¼‰"><a href="#Python-ç¤ºä¾‹ï¼ˆå¾…å¤„ç†ä»»åŠ¡é˜Ÿåˆ—ï¼‰" class="headerlink" title="Python ç¤ºä¾‹ï¼ˆå¾…å¤„ç†ä»»åŠ¡é˜Ÿåˆ—ï¼‰"></a>Python ç¤ºä¾‹ï¼ˆå¾…å¤„ç†ä»»åŠ¡é˜Ÿåˆ—ï¼‰</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">push_task</span>(<span class="hljs-params">task</span>):<br>    r.lpush(<span class="hljs-string">&quot;task_queue&quot;</span>, task)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">process_task</span>():<br>    task = r.rpop(<span class="hljs-string">&quot;task_queue&quot;</span>)<br>    <span class="hljs-keyword">if</span> task:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å¤„ç†ä»»åŠ¡ï¼š&quot;</span>, task)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å½“å‰æ— ä»»åŠ¡&quot;</span>)<br><br><span class="hljs-comment"># ç¤ºä¾‹</span><br>push_task(<span class="hljs-string">&quot;ä»»åŠ¡1&quot;</span>)<br>push_task(<span class="hljs-string">&quot;ä»»åŠ¡2&quot;</span>)<br>process_task()<br>process_task()<br></code></pre></td></tr></table></figure><hr><h2 id="2-3-Hashï¼ˆå“ˆå¸Œè¡¨ï¼‰"><a href="#2-3-Hashï¼ˆå“ˆå¸Œè¡¨ï¼‰" class="headerlink" title="2.3 Hashï¼ˆå“ˆå¸Œè¡¨ï¼‰"></a>2.3 Hashï¼ˆå“ˆå¸Œè¡¨ï¼‰</h2><h3 id="æ ¸å¿ƒå‘½ä»¤-2"><a href="#æ ¸å¿ƒå‘½ä»¤-2" class="headerlink" title="æ ¸å¿ƒå‘½ä»¤"></a>æ ¸å¿ƒå‘½ä»¤</h3><ul><li><code>HSET key field value</code>ï¼šè®¾ç½®å“ˆå¸Œå­—æ®µ</li><li><code>HGET key field</code>ï¼šè·å–å“ˆå¸Œå­—æ®µçš„å€¼</li><li><code>HGETALL key</code>ï¼šè·å–æ•´ä¸ªå“ˆå¸Œè¡¨å†…å®¹</li><li><code>HDEL key field</code>ï¼šåˆ é™¤æŒ‡å®šå­—æ®µ</li></ul><h3 id="ä¼ä¸šåº”ç”¨åœºæ™¯-2"><a href="#ä¼ä¸šåº”ç”¨åœºæ™¯-2" class="headerlink" title="ä¼ä¸šåº”ç”¨åœºæ™¯"></a>ä¼ä¸šåº”ç”¨åœºæ™¯</h3><ul><li>ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ç¼“å­˜</li><li>å•†å“è¯¦æƒ…ç¼“å­˜</li><li>é…ç½®é¡¹å¿«é€Ÿè¯»å–</li></ul><h3 id="Python-ç¤ºä¾‹ï¼ˆç”¨æˆ·ä¿¡æ¯å­˜å‚¨ï¼‰"><a href="#Python-ç¤ºä¾‹ï¼ˆç”¨æˆ·ä¿¡æ¯å­˜å‚¨ï¼‰" class="headerlink" title="Python ç¤ºä¾‹ï¼ˆç”¨æˆ·ä¿¡æ¯å­˜å‚¨ï¼‰"></a>Python ç¤ºä¾‹ï¼ˆç”¨æˆ·ä¿¡æ¯å­˜å‚¨ï¼‰</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python">user_id = <span class="hljs-string">&quot;user:1001&quot;</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">set_user_info</span>(<span class="hljs-params">uid, field, value</span>):<br>    r.hset(uid, field, value)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_user_info</span>(<span class="hljs-params">uid</span>):<br>    <span class="hljs-keyword">return</span> r.hgetall(uid)<br><br><span class="hljs-comment"># ç¤ºä¾‹</span><br>set_user_info(user_id, <span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;Alice&quot;</span>)<br>set_user_info(user_id, <span class="hljs-string">&quot;email&quot;</span>, <span class="hljs-string">&quot;alice@example.com&quot;</span>)<br><br>info = get_user_info(user_id)<br><span class="hljs-built_in">print</span>(info)<br></code></pre></td></tr></table></figure><hr><h2 id="2-4-Setï¼ˆé›†åˆï¼‰"><a href="#2-4-Setï¼ˆé›†åˆï¼‰" class="headerlink" title="2.4 Setï¼ˆé›†åˆï¼‰"></a>2.4 Setï¼ˆé›†åˆï¼‰</h2><h3 id="æ ¸å¿ƒå‘½ä»¤-3"><a href="#æ ¸å¿ƒå‘½ä»¤-3" class="headerlink" title="æ ¸å¿ƒå‘½ä»¤"></a>æ ¸å¿ƒå‘½ä»¤</h3><ul><li><code>SADD key value</code>ï¼šå‘é›†åˆæ·»åŠ å…ƒç´ </li><li><code>SREM key value</code>ï¼šç§»é™¤é›†åˆå…ƒç´ </li><li><code>SISMEMBER key value</code>ï¼šåˆ¤æ–­æ˜¯å¦æ˜¯é›†åˆæˆå‘˜</li><li><code>SDIFF key1 key2</code>ï¼šè¿”å› key1 ç‹¬æœ‰çš„å…ƒç´ </li></ul><h3 id="ä¼ä¸šåº”ç”¨åœºæ™¯-3"><a href="#ä¼ä¸šåº”ç”¨åœºæ™¯-3" class="headerlink" title="ä¼ä¸šåº”ç”¨åœºæ™¯"></a>ä¼ä¸šåº”ç”¨åœºæ™¯</h3><ul><li>æ ‡ç­¾ç³»ç»Ÿï¼ˆå¦‚å…´è¶£ã€åˆ†ç±»æ ‡ç­¾ï¼‰</li><li>ç”¨æˆ·é»‘åå•ç³»ç»Ÿ</li><li>æŠ½å¥–ç³»ç»Ÿå»é‡å­˜å‚¨ï¼ˆå”¯ä¸€å‚ä¸è€…ï¼‰</li></ul><h3 id="Python-ç¤ºä¾‹ï¼ˆé»‘åå•ç³»ç»Ÿï¼‰"><a href="#Python-ç¤ºä¾‹ï¼ˆé»‘åå•ç³»ç»Ÿï¼‰" class="headerlink" title="Python ç¤ºä¾‹ï¼ˆé»‘åå•ç³»ç»Ÿï¼‰"></a>Python ç¤ºä¾‹ï¼ˆé»‘åå•ç³»ç»Ÿï¼‰</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python">blacklist_key = <span class="hljs-string">&quot;user:blacklist&quot;</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">add_to_blacklist</span>(<span class="hljs-params">user_id</span>):<br>    r.sadd(blacklist_key, user_id)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">is_blacklisted</span>(<span class="hljs-params">user_id</span>):<br>    <span class="hljs-keyword">return</span> r.sismember(blacklist_key, user_id)<br><br><span class="hljs-comment"># ç¤ºä¾‹</span><br>add_to_blacklist(<span class="hljs-string">&quot;user:1002&quot;</span>)<br><span class="hljs-built_in">print</span>(is_blacklisted(<span class="hljs-string">&quot;user:1002&quot;</span>))  <span class="hljs-comment"># True</span><br></code></pre></td></tr></table></figure><hr><h2 id="2-5-Sorted-Setï¼ˆæœ‰åºé›†åˆï¼‰"><a href="#2-5-Sorted-Setï¼ˆæœ‰åºé›†åˆï¼‰" class="headerlink" title="2.5 Sorted Setï¼ˆæœ‰åºé›†åˆï¼‰"></a>2.5 Sorted Setï¼ˆæœ‰åºé›†åˆï¼‰</h2><h3 id="æ ¸å¿ƒå‘½ä»¤-4"><a href="#æ ¸å¿ƒå‘½ä»¤-4" class="headerlink" title="æ ¸å¿ƒå‘½ä»¤"></a>æ ¸å¿ƒå‘½ä»¤</h3><ul><li><code>ZADD key score value</code>ï¼šæ·»åŠ å…ƒç´ åŠåˆ†æ•°</li><li><code>ZRANGE key start stop [WITHSCORES]</code>ï¼šè·å–å…ƒç´ æŒ‰åˆ†æ•°å‡åºæ’åˆ—</li><li><code>ZREM key value</code>ï¼šåˆ é™¤æŒ‡å®šå…ƒç´ </li><li><code>ZSCORE key value</code>ï¼šè·å–æŸä¸ªå…ƒç´ çš„åˆ†æ•°</li></ul><h3 id="ä¼ä¸šåº”ç”¨åœºæ™¯-4"><a href="#ä¼ä¸šåº”ç”¨åœºæ™¯-4" class="headerlink" title="ä¼ä¸šåº”ç”¨åœºæ™¯"></a>ä¼ä¸šåº”ç”¨åœºæ™¯</h3><ul><li>å®æ—¶æ’è¡Œæ¦œï¼ˆå¦‚ç§¯åˆ†ã€æ´»è·ƒåº¦ï¼‰</li><li>çƒ­æœæ¦œï¼ˆæœç´¢æ¬¡æ•°æ’åï¼‰</li><li>æ–°é—»&#x2F;æ–‡ç« æ¨èç³»ç»Ÿï¼ˆæ ¹æ®æ—¶é—´å’Œçƒ­åº¦æ’åºï¼‰</li></ul><h3 id="Python-ç¤ºä¾‹ï¼ˆç§¯åˆ†æ’è¡Œæ¦œï¼‰"><a href="#Python-ç¤ºä¾‹ï¼ˆç§¯åˆ†æ’è¡Œæ¦œï¼‰" class="headerlink" title="Python ç¤ºä¾‹ï¼ˆç§¯åˆ†æ’è¡Œæ¦œï¼‰"></a>Python ç¤ºä¾‹ï¼ˆç§¯åˆ†æ’è¡Œæ¦œï¼‰</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python">leaderboard = <span class="hljs-string">&quot;game:scoreboard&quot;</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">add_score</span>(<span class="hljs-params">user, score</span>):<br>    r.zadd(leaderboard, &#123;user: score&#125;)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_top_users</span>(<span class="hljs-params">n=<span class="hljs-number">3</span></span>):<br>    <span class="hljs-keyword">return</span> r.zrange(leaderboard, <span class="hljs-number">0</span>, n - <span class="hljs-number">1</span>, withscores=<span class="hljs-literal">True</span>)<br><br><span class="hljs-comment"># ç¤ºä¾‹</span><br>add_score(<span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-number">80</span>)<br>add_score(<span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-number">95</span>)<br>add_score(<span class="hljs-string">&quot;Charlie&quot;</span>, <span class="hljs-number">90</span>)<br><br>top_users = get_top_users()<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æ’è¡Œæ¦œï¼š&quot;</span>, top_users)<br></code></pre></td></tr></table></figure><hr>]]></content>
    
    
    <categories>
      
      <category>Redis</category>
      
      <category>Redis æ•™ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Redis å­¦ä¹ åŸºç¡€ç¯‡</title>
    <link href="/2025/07/09/redis%E6%95%99%E7%A8%8B%E5%9F%BA%E7%A1%80%E7%AF%87/"/>
    <url>/2025/07/09/redis%E6%95%99%E7%A8%8B%E5%9F%BA%E7%A1%80%E7%AF%87/</url>
    
    <content type="html"><![CDATA[<h1 id="ğŸ“•-Redis-å­¦ä¹ åŸºç¡€ç¯‡"><a href="#ğŸ“•-Redis-å­¦ä¹ åŸºç¡€ç¯‡" class="headerlink" title="ğŸ“• Redis å­¦ä¹ åŸºç¡€ç¯‡"></a>ğŸ“• Redis å­¦ä¹ åŸºç¡€ç¯‡</h1><h2 id="âœ…-1-1-Redis-ç®€ä»‹"><a href="#âœ…-1-1-Redis-ç®€ä»‹" class="headerlink" title="âœ… 1.1 Redis ç®€ä»‹"></a>âœ… 1.1 Redis ç®€ä»‹</h2><h3 id="ğŸ”·-Redis-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ğŸ”·-Redis-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ğŸ”· Redis æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ğŸ”· Redis æ˜¯ä»€ä¹ˆï¼Ÿ</h3><blockquote><p>Redisï¼ˆRemote Dictionary Serverï¼‰æ˜¯ä¸€ä¸ªåŸºäºå†…å­˜çš„é«˜æ€§èƒ½é”®å€¼å‹æ•°æ®åº“ï¼Œæ”¯æŒä¸°å¯Œçš„æ•°æ®ç»“æ„ï¼Œå¹¿æ³›åº”ç”¨äºç¼“å­˜ã€æ¶ˆæ¯é˜Ÿåˆ—ã€æ’è¡Œæ¦œã€è®¡æ•°å™¨ã€å®æ—¶ç»Ÿè®¡ç­‰é«˜å¹¶å‘ä¸šåŠ¡åœºæ™¯ã€‚</p></blockquote><ul><li><p><strong>ç‰¹ç‚¹ï¼š</strong></p><ul><li>å†…å­˜æ“ä½œï¼šé€Ÿåº¦å¿«ï¼ˆç™¾ä¸‡çº§ QPSï¼‰</li><li>æ•°æ®ç»“æ„ä¸°å¯Œï¼š<code>String</code>ã€<code>List</code>ã€<code>Set</code>ã€<code>Hash</code>ã€<code>ZSet</code></li><li>æŒä¹…åŒ–æ”¯æŒï¼šAOFã€RDB</li><li>åŸå­æ“ä½œã€äº‹åŠ¡æœºåˆ¶</li><li>æ”¯æŒå‘å¸ƒè®¢é˜…ã€Lua è„šæœ¬ã€é›†ç¾¤ã€å“¨å…µæ¨¡å¼</li></ul></li></ul><hr><h3 id="ğŸ¢-ä¼ä¸šä¸ºä»€ä¹ˆç”¨-Redisï¼Ÿ"><a href="#ğŸ¢-ä¼ä¸šä¸ºä»€ä¹ˆç”¨-Redisï¼Ÿ" class="headerlink" title="ğŸ¢ ä¼ä¸šä¸ºä»€ä¹ˆç”¨ Redisï¼Ÿ"></a>ğŸ¢ ä¼ä¸šä¸ºä»€ä¹ˆç”¨ Redisï¼Ÿ</h3><table><thead><tr><th>åŠŸèƒ½åœºæ™¯</th><th>ç”¨é€”æè¿°</th></tr></thead><tbody><tr><td>ç¼“å­˜ç³»ç»Ÿ</td><td>å­˜å‚¨çƒ­ç‚¹æ•°æ®ï¼Œé™ä½ DB å‹åŠ›ï¼Œæé«˜å“åº”é€Ÿåº¦</td></tr><tr><td>æ¶ˆæ¯é˜Ÿåˆ—</td><td>åˆ©ç”¨ List æˆ– Stream å®ç°å‘å¸ƒ&#x2F;è®¢é˜…ã€å¼‚æ­¥é€šä¿¡</td></tr><tr><td>åˆ†å¸ƒå¼é”</td><td>å¤šä¸ªèŠ‚ç‚¹äº’æ–¥èµ„æºè®¿é—®ï¼Œç”¨äºä»»åŠ¡æ§åˆ¶ã€åº“å­˜æ§åˆ¶</td></tr><tr><td>æ’è¡Œæ¦œç³»ç»Ÿ</td><td>ä½¿ç”¨ ZSet ç»“æ„å®ç°åŠ¨æ€æ’å</td></tr><tr><td>é™æµç³»ç»Ÿ</td><td>ä½¿ç”¨ INCR &#x2F; SETNX ç»“åˆè„šæœ¬é™é€Ÿï¼Œé˜²æ­¢æ¥å£è¢«åˆ·</td></tr><tr><td>ä¼šè¯å…±äº«</td><td>åœ¨åˆ†å¸ƒå¼éƒ¨ç½²ä¸­å­˜å‚¨ç”¨æˆ·ç™»å½•æ€å’Œ Token</td></tr></tbody></table><hr><h3 id="ğŸ”-ä¸-Memcachedã€MySQL-çš„å¯¹æ¯”"><a href="#ğŸ”-ä¸-Memcachedã€MySQL-çš„å¯¹æ¯”" class="headerlink" title="ğŸ” ä¸ Memcachedã€MySQL çš„å¯¹æ¯”"></a>ğŸ” ä¸ Memcachedã€MySQL çš„å¯¹æ¯”</h3><table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>Redis</th><th>Memcached</th><th>MySQL</th></tr></thead><tbody><tr><td>æ•°æ®ç»“æ„</td><td>å¤šç§ï¼ˆStringã€Setã€Hashâ€¦ï¼‰</td><td>ä»…æ”¯æŒ String</td><td>è¡¨ç»“æ„ï¼Œå…³ç³»å‹</td></tr><tr><td>æŒä¹…åŒ–</td><td>âœ…ï¼ˆRDB &#x2F; AOFï¼‰</td><td>âŒ æ— æ³•è½ç›˜</td><td>âœ… é»˜è®¤æ”¯æŒ</td></tr><tr><td>åˆ†å¸ƒå¼</td><td>âœ… Redis Cluster</td><td>éœ€å®¢æˆ·ç«¯åˆ†ç‰‡æ”¯æŒ</td><td>âœ… ä¸»ä»å¤åˆ¶</td></tr><tr><td>ç”¨ä½œç¼“å­˜</td><td>âœ…</td><td>âœ…</td><td>âŒ é€šå¸¸ä¸å»ºè®®</td></tr><tr><td>å…¸å‹ä½¿ç”¨åœºæ™¯</td><td>ç¼“å­˜ã€æ’è¡Œæ¦œã€é™æµã€ç§’æ€ç³»ç»Ÿ</td><td>ç¼“å­˜é™æ€é¡µé¢ã€ç®€å•å¯¹è±¡ç¼“å­˜</td><td>æŒä¹…æ•°æ®å­˜å‚¨ã€å¤æ‚å…³ç³»å‹æŸ¥è¯¢</td></tr></tbody></table><hr><h3 id="âœ…-ä¸€ã€Stringï¼ˆå­—ç¬¦ä¸²ï¼‰"><a href="#âœ…-ä¸€ã€Stringï¼ˆå­—ç¬¦ä¸²ï¼‰" class="headerlink" title="âœ… ä¸€ã€Stringï¼ˆå­—ç¬¦ä¸²ï¼‰"></a>âœ… ä¸€ã€Stringï¼ˆå­—ç¬¦ä¸²ï¼‰</h3><h4 id="ğŸ§ -ç‰¹ç‚¹ï¼š"><a href="#ğŸ§ -ç‰¹ç‚¹ï¼š" class="headerlink" title="ğŸ§  ç‰¹ç‚¹ï¼š"></a>ğŸ§  ç‰¹ç‚¹ï¼š</h4><ul><li>æœ€åŸºæœ¬çš„æ•°æ®ç»“æ„ï¼ŒäºŒè¿›åˆ¶å®‰å…¨ï¼ˆå¯å­˜å‚¨å›¾ç‰‡ã€éŸ³é¢‘ç­‰ï¼‰</li><li>æœ€å¤§ 512MB</li><li>å¯ç”¨äºè®¡æ•°å™¨ã€ç¼“å­˜ JSONã€Token</li></ul><h4 id="ğŸ¯-å®æˆ˜åœºæ™¯ï¼š"><a href="#ğŸ¯-å®æˆ˜åœºæ™¯ï¼š" class="headerlink" title="ğŸ¯ å®æˆ˜åœºæ™¯ï¼š"></a>ğŸ¯ å®æˆ˜åœºæ™¯ï¼š</h4><ul><li>ç”¨æˆ· Token ç¼“å­˜</li><li>é¡µé¢è®¿é—®è®¡æ•°å™¨</li><li>ç®€å•é…ç½®ä¿¡æ¯å­˜å‚¨</li></ul><h4 id="ğŸ”§-Python-ç¤ºä¾‹ï¼š"><a href="#ğŸ”§-Python-ç¤ºä¾‹ï¼š" class="headerlink" title="ğŸ”§ Python ç¤ºä¾‹ï¼š"></a>ğŸ”§ Python ç¤ºä¾‹ï¼š</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> redis<br>r = redis.Redis(decode_responses=<span class="hljs-literal">True</span>)<br><br>r.<span class="hljs-built_in">set</span>(<span class="hljs-string">&quot;token:1001&quot;</span>, <span class="hljs-string">&quot;abc123&quot;</span>, ex=<span class="hljs-number">3600</span>)<br><span class="hljs-built_in">print</span>(r.get(<span class="hljs-string">&quot;token:1001&quot;</span>))  <span class="hljs-comment"># è¾“å‡º abc123</span><br><br><span class="hljs-comment"># è‡ªå¢</span><br>r.<span class="hljs-built_in">set</span>(<span class="hljs-string">&quot;count&quot;</span>, <span class="hljs-number">10</span>)<br>r.incr(<span class="hljs-string">&quot;count&quot;</span>)  <span class="hljs-comment"># è¾“å‡º 11</span><br></code></pre></td></tr></table></figure><hr><h3 id="âœ…-äºŒã€Hashï¼ˆå“ˆå¸Œï¼‰"><a href="#âœ…-äºŒã€Hashï¼ˆå“ˆå¸Œï¼‰" class="headerlink" title="âœ… äºŒã€Hashï¼ˆå“ˆå¸Œï¼‰"></a>âœ… äºŒã€Hashï¼ˆå“ˆå¸Œï¼‰</h3><h4 id="ğŸ§ -ç‰¹ç‚¹ï¼š-1"><a href="#ğŸ§ -ç‰¹ç‚¹ï¼š-1" class="headerlink" title="ğŸ§  ç‰¹ç‚¹ï¼š"></a>ğŸ§  ç‰¹ç‚¹ï¼š</h4><ul><li>ç±»ä¼¼äº Python çš„å­—å…¸ç»“æ„</li><li>é€‚åˆå­˜å‚¨å¯¹è±¡ï¼ˆå¦‚ç”¨æˆ·ä¿¡æ¯ï¼‰</li></ul><h4 id="ğŸ¯-å®æˆ˜åœºæ™¯ï¼š-1"><a href="#ğŸ¯-å®æˆ˜åœºæ™¯ï¼š-1" class="headerlink" title="ğŸ¯ å®æˆ˜åœºæ™¯ï¼š"></a>ğŸ¯ å®æˆ˜åœºæ™¯ï¼š</h4><ul><li>ç”¨æˆ·æ¡£æ¡ˆï¼š<code>user:1001 -&gt; &#123;name:å¼ ä¸‰, age:28&#125;</code></li><li>å•†å“è¯¦æƒ…é¡µç¼“å­˜</li></ul><h4 id="ğŸ”§-Python-ç¤ºä¾‹ï¼š-1"><a href="#ğŸ”§-Python-ç¤ºä¾‹ï¼š-1" class="headerlink" title="ğŸ”§ Python ç¤ºä¾‹ï¼š"></a>ğŸ”§ Python ç¤ºä¾‹ï¼š</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">r.hset(<span class="hljs-string">&quot;user:1001&quot;</span>, mapping=&#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>, <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">28</span>&#125;)<br><span class="hljs-built_in">print</span>(r.hget(<span class="hljs-string">&quot;user:1001&quot;</span>, <span class="hljs-string">&quot;name&quot;</span>))      <span class="hljs-comment"># å¼ ä¸‰</span><br><span class="hljs-built_in">print</span>(r.hgetall(<span class="hljs-string">&quot;user:1001&quot;</span>))           <span class="hljs-comment"># &#123;&#x27;name&#x27;: &#x27;å¼ ä¸‰&#x27;, &#x27;age&#x27;: &#x27;28&#x27;&#125;</span><br></code></pre></td></tr></table></figure><hr><h3 id="âœ…-ä¸‰ã€Listï¼ˆåˆ—è¡¨ï¼‰"><a href="#âœ…-ä¸‰ã€Listï¼ˆåˆ—è¡¨ï¼‰" class="headerlink" title="âœ… ä¸‰ã€Listï¼ˆåˆ—è¡¨ï¼‰"></a>âœ… ä¸‰ã€Listï¼ˆåˆ—è¡¨ï¼‰</h3><h4 id="ğŸ§ -ç‰¹ç‚¹ï¼š-2"><a href="#ğŸ§ -ç‰¹ç‚¹ï¼š-2" class="headerlink" title="ğŸ§  ç‰¹ç‚¹ï¼š"></a>ğŸ§  ç‰¹ç‚¹ï¼š</h4><ul><li>é“¾è¡¨ç»“æ„ï¼Œæ”¯æŒä»ä¸¤ç«¯æ’å…¥ã€å¼¹å‡ºï¼ˆLPUSH&#x2F;RPUSHï¼‰</li><li>æ”¯æŒé˜»å¡æ“ä½œï¼ˆBLPOPï¼‰</li></ul><h4 id="ğŸ¯-å®æˆ˜åœºæ™¯ï¼š-2"><a href="#ğŸ¯-å®æˆ˜åœºæ™¯ï¼š-2" class="headerlink" title="ğŸ¯ å®æˆ˜åœºæ™¯ï¼š"></a>ğŸ¯ å®æˆ˜åœºæ™¯ï¼š</h4><ul><li>æ¶ˆæ¯é˜Ÿåˆ—</li><li>æœ€è¿‘æ“ä½œè®°å½•ï¼ˆå¦‚ç™»å½•å†å²ï¼‰</li></ul><h4 id="ğŸ”§-Python-ç¤ºä¾‹ï¼š-2"><a href="#ğŸ”§-Python-ç¤ºä¾‹ï¼š-2" class="headerlink" title="ğŸ”§ Python ç¤ºä¾‹ï¼š"></a>ğŸ”§ Python ç¤ºä¾‹ï¼š</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">r.lpush(<span class="hljs-string">&quot;queue:task&quot;</span>, <span class="hljs-string">&quot;ä»»åŠ¡1&quot;</span>, <span class="hljs-string">&quot;ä»»åŠ¡2&quot;</span>)<br><span class="hljs-built_in">print</span>(r.rpop(<span class="hljs-string">&quot;queue:task&quot;</span>))  <span class="hljs-comment"># ä»»åŠ¡1ï¼Œå…ˆè¿›åå‡º</span><br></code></pre></td></tr></table></figure><p>ğŸ“Œ ç»“åˆ Celeryã€FastAPI å¯åšå¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—åŸºç¡€ã€‚</p><hr><h3 id="âœ…-å››ã€Setï¼ˆé›†åˆï¼‰"><a href="#âœ…-å››ã€Setï¼ˆé›†åˆï¼‰" class="headerlink" title="âœ… å››ã€Setï¼ˆé›†åˆï¼‰"></a>âœ… å››ã€Setï¼ˆé›†åˆï¼‰</h3><h4 id="ğŸ§ -ç‰¹ç‚¹ï¼š-3"><a href="#ğŸ§ -ç‰¹ç‚¹ï¼š-3" class="headerlink" title="ğŸ§  ç‰¹ç‚¹ï¼š"></a>ğŸ§  ç‰¹ç‚¹ï¼š</h4><ul><li>è‡ªåŠ¨å»é‡ï¼Œæ— åºé›†åˆ</li><li>é€‚åˆè¿›è¡Œäº¤é›†ã€å¹¶é›†ã€å·®é›†æ“ä½œ</li></ul><h4 id="ğŸ¯-å®æˆ˜åœºæ™¯ï¼š-3"><a href="#ğŸ¯-å®æˆ˜åœºæ™¯ï¼š-3" class="headerlink" title="ğŸ¯ å®æˆ˜åœºæ™¯ï¼š"></a>ğŸ¯ å®æˆ˜åœºæ™¯ï¼š</h4><ul><li>ç”¨æˆ·å…³æ³¨åˆ—è¡¨ã€ç‚¹èµåˆ—è¡¨</li><li>æ ‡ç­¾æœç´¢åŠŸèƒ½</li><li>é»‘åå•ç®¡ç†</li></ul><h4 id="ğŸ”§-Python-ç¤ºä¾‹ï¼š-3"><a href="#ğŸ”§-Python-ç¤ºä¾‹ï¼š-3" class="headerlink" title="ğŸ”§ Python ç¤ºä¾‹ï¼š"></a>ğŸ”§ Python ç¤ºä¾‹ï¼š</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">r.sadd(<span class="hljs-string">&quot;user:1001:likes&quot;</span>, <span class="hljs-string">&quot;è¶³çƒ&quot;</span>, <span class="hljs-string">&quot;ç¯®çƒ&quot;</span>, <span class="hljs-string">&quot;ç¯®çƒ&quot;</span>)  <span class="hljs-comment"># è‡ªåŠ¨å»é‡</span><br><span class="hljs-built_in">print</span>(r.smembers(<span class="hljs-string">&quot;user:1001:likes&quot;</span>))             <span class="hljs-comment"># &#123;&#x27;è¶³çƒ&#x27;, &#x27;ç¯®çƒ&#x27;&#125;</span><br></code></pre></td></tr></table></figure><hr><h3 id="âœ…-äº”ã€Sorted-Setï¼ˆæœ‰åºé›†åˆ-ZSetï¼‰"><a href="#âœ…-äº”ã€Sorted-Setï¼ˆæœ‰åºé›†åˆ-ZSetï¼‰" class="headerlink" title="âœ… äº”ã€Sorted Setï¼ˆæœ‰åºé›†åˆ ZSetï¼‰"></a>âœ… äº”ã€Sorted Setï¼ˆæœ‰åºé›†åˆ ZSetï¼‰</h3><h4 id="ğŸ§ -ç‰¹ç‚¹ï¼š-4"><a href="#ğŸ§ -ç‰¹ç‚¹ï¼š-4" class="headerlink" title="ğŸ§  ç‰¹ç‚¹ï¼š"></a>ğŸ§  ç‰¹ç‚¹ï¼š</h4><ul><li>å¸¦åˆ†æ•°ï¼ˆscoreï¼‰çš„ Setï¼Œè‡ªåŠ¨æ’åº</li><li>æŸ¥è¯¢æ•ˆç‡é«˜</li></ul><h4 id="ğŸ¯-å®æˆ˜åœºæ™¯ï¼š-4"><a href="#ğŸ¯-å®æˆ˜åœºæ™¯ï¼š-4" class="headerlink" title="ğŸ¯ å®æˆ˜åœºæ™¯ï¼š"></a>ğŸ¯ å®æˆ˜åœºæ™¯ï¼š</h4><ul><li>æ’è¡Œæ¦œï¼ˆæŒ‰åˆ†æ•°&#x2F;æ´»è·ƒåº¦&#x2F;æ—¶é—´æ’åºï¼‰</li><li>ä¼˜å…ˆé˜Ÿåˆ—</li></ul><h4 id="ğŸ”§-Python-ç¤ºä¾‹ï¼š-4"><a href="#ğŸ”§-Python-ç¤ºä¾‹ï¼š-4" class="headerlink" title="ğŸ”§ Python ç¤ºä¾‹ï¼š"></a>ğŸ”§ Python ç¤ºä¾‹ï¼š</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">r.zadd(<span class="hljs-string">&quot;leaderboard&quot;</span>, &#123;<span class="hljs-string">&quot;Alice&quot;</span>: <span class="hljs-number">100</span>, <span class="hljs-string">&quot;Bob&quot;</span>: <span class="hljs-number">80</span>&#125;)<br>r.zincrby(<span class="hljs-string">&quot;leaderboard&quot;</span>, <span class="hljs-number">20</span>, <span class="hljs-string">&quot;Bob&quot;</span>)  <span class="hljs-comment"># Bob åŠ  20 åˆ†</span><br><span class="hljs-built_in">print</span>(r.zrevrange(<span class="hljs-string">&quot;leaderboard&quot;</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, withscores=<span class="hljs-literal">True</span>))  <span class="hljs-comment"># [(&#x27;Bob&#x27;, 100.0), (&#x27;Alice&#x27;, 100.0)]</span><br></code></pre></td></tr></table></figure><hr><h3 id="âœ…-å…­ã€Bitmapï¼ˆä½å›¾ï¼‰"><a href="#âœ…-å…­ã€Bitmapï¼ˆä½å›¾ï¼‰" class="headerlink" title="âœ… å…­ã€Bitmapï¼ˆä½å›¾ï¼‰"></a>âœ… å…­ã€Bitmapï¼ˆä½å›¾ï¼‰</h3><h4 id="ğŸ§ -ç‰¹ç‚¹ï¼š-5"><a href="#ğŸ§ -ç‰¹ç‚¹ï¼š-5" class="headerlink" title="ğŸ§  ç‰¹ç‚¹ï¼š"></a>ğŸ§  ç‰¹ç‚¹ï¼š</h4><ul><li>ä»¥ä½ä¸ºå•ä½è¿›è¡Œå­˜å‚¨ã€æ“ä½œ</li><li>è¶…è½»é‡çº§æ•°æ®æ ‡è®°æ–¹å¼</li></ul><h4 id="ğŸ¯-å®æˆ˜åœºæ™¯ï¼š-5"><a href="#ğŸ¯-å®æˆ˜åœºæ™¯ï¼š-5" class="headerlink" title="ğŸ¯ å®æˆ˜åœºæ™¯ï¼š"></a>ğŸ¯ å®æˆ˜åœºæ™¯ï¼š</h4><ul><li>ç”¨æˆ·æ˜¯å¦ç­¾åˆ°ã€æ˜¯å¦æ¿€æ´»ã€å¹¿å‘Šæ›å…‰è®°å½•</li></ul><h4 id="ğŸ”§-Python-ç¤ºä¾‹ï¼š-5"><a href="#ğŸ”§-Python-ç¤ºä¾‹ï¼š-5" class="headerlink" title="ğŸ”§ Python ç¤ºä¾‹ï¼š"></a>ğŸ”§ Python ç¤ºä¾‹ï¼š</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">r.setbit(<span class="hljs-string">&quot;user:sign:2025-07-01&quot;</span>, <span class="hljs-number">1001</span>, <span class="hljs-number">1</span>)  <span class="hljs-comment"># ç”¨æˆ· 1001 ç­¾åˆ°</span><br><span class="hljs-built_in">print</span>(r.getbit(<span class="hljs-string">&quot;user:sign:2025-07-01&quot;</span>, <span class="hljs-number">1001</span>))  <span class="hljs-comment"># 1</span><br></code></pre></td></tr></table></figure><hr><h3 id="âœ…-ä¸ƒã€HyperLogLog"><a href="#âœ…-ä¸ƒã€HyperLogLog" class="headerlink" title="âœ… ä¸ƒã€HyperLogLog"></a>âœ… ä¸ƒã€HyperLogLog</h3><h4 id="ğŸ§ -ç‰¹ç‚¹ï¼š-6"><a href="#ğŸ§ -ç‰¹ç‚¹ï¼š-6" class="headerlink" title="ğŸ§  ç‰¹ç‚¹ï¼š"></a>ğŸ§  ç‰¹ç‚¹ï¼š</h4><ul><li>åŸºäºæ¦‚ç‡ç®—æ³•çš„åŸºæ•°ä¼°ç®—å™¨</li><li>å†…å­˜æ’å®šï¼ˆ~12KBï¼‰</li></ul><h4 id="ğŸ¯-å®æˆ˜åœºæ™¯ï¼š-6"><a href="#ğŸ¯-å®æˆ˜åœºæ™¯ï¼š-6" class="headerlink" title="ğŸ¯ å®æˆ˜åœºæ™¯ï¼š"></a>ğŸ¯ å®æˆ˜åœºæ™¯ï¼š</h4><ul><li>UV å»é‡ç»Ÿè®¡ï¼ˆä¾‹å¦‚æ—¥æ´» IPï¼‰</li></ul><h4 id="ğŸ”§-Python-ç¤ºä¾‹ï¼š-6"><a href="#ğŸ”§-Python-ç¤ºä¾‹ï¼š-6" class="headerlink" title="ğŸ”§ Python ç¤ºä¾‹ï¼š"></a>ğŸ”§ Python ç¤ºä¾‹ï¼š</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">r.pfadd(<span class="hljs-string">&quot;uv:2025-07-01&quot;</span>, <span class="hljs-string">&quot;ip1&quot;</span>, <span class="hljs-string">&quot;ip2&quot;</span>, <span class="hljs-string">&quot;ip3&quot;</span>)<br><span class="hljs-built_in">print</span>(r.pfcount(<span class="hljs-string">&quot;uv:2025-07-01&quot;</span>))  <span class="hljs-comment"># è¾“å‡º 3</span><br></code></pre></td></tr></table></figure><hr><h3 id="âœ…-å…«ã€Streamï¼ˆæµï¼‰"><a href="#âœ…-å…«ã€Streamï¼ˆæµï¼‰" class="headerlink" title="âœ… å…«ã€Streamï¼ˆæµï¼‰"></a>âœ… å…«ã€Streamï¼ˆæµï¼‰</h3><h4 id="ğŸ§ -ç‰¹ç‚¹ï¼š-7"><a href="#ğŸ§ -ç‰¹ç‚¹ï¼š-7" class="headerlink" title="ğŸ§  ç‰¹ç‚¹ï¼š"></a>ğŸ§  ç‰¹ç‚¹ï¼š</h4><ul><li>ç±» Kafka çš„æ¶ˆæ¯é˜Ÿåˆ—</li><li>æ”¯æŒæ¶ˆè´¹ç»„ã€é˜»å¡è¯»å–</li></ul><h4 id="ğŸ¯-å®æˆ˜åœºæ™¯ï¼š-7"><a href="#ğŸ¯-å®æˆ˜åœºæ™¯ï¼š-7" class="headerlink" title="ğŸ¯ å®æˆ˜åœºæ™¯ï¼š"></a>ğŸ¯ å®æˆ˜åœºæ™¯ï¼š</h4><ul><li>æ—¥å¿—é‡‡é›†ç³»ç»Ÿ</li><li>æ¶ˆæ¯é€šçŸ¥ï¼ˆè®¢å•ã€ç”¨æˆ·æ¶ˆæ¯ï¼‰</li></ul><h4 id="ğŸ”§-Python-ç¤ºä¾‹ï¼š-7"><a href="#ğŸ”§-Python-ç¤ºä¾‹ï¼š-7" class="headerlink" title="ğŸ”§ Python ç¤ºä¾‹ï¼š"></a>ğŸ”§ Python ç¤ºä¾‹ï¼š</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">r.xadd(<span class="hljs-string">&quot;mystream&quot;</span>, &#123;<span class="hljs-string">&quot;user&quot;</span>: <span class="hljs-string">&quot;1001&quot;</span>, <span class="hljs-string">&quot;msg&quot;</span>: <span class="hljs-string">&quot;hello&quot;</span>&#125;)<br><span class="hljs-built_in">print</span>(r.xread(&#123;<span class="hljs-string">&quot;mystream&quot;</span>: <span class="hljs-string">&quot;0-0&quot;</span>&#125;, count=<span class="hljs-number">1</span>))<br></code></pre></td></tr></table></figure><hr><h3 id="ğŸ-å°ç»“"><a href="#ğŸ-å°ç»“" class="headerlink" title="ğŸ å°ç»“"></a>ğŸ å°ç»“</h3><table><thead><tr><th>æ•°æ®ç»“æ„</th><th>ç”¨é€”æ¨è</th><th>æ˜¯å¦æ”¯æŒè¿‡æœŸ</th><th>æ˜¯å¦æ”¯æŒæ’åº</th><th>æ˜¯å¦é€‚åˆå¤§æ•°æ®é‡</th></tr></thead><tbody><tr><td>String</td><td>æœ€å¸¸è§çš„ key-value</td><td>âœ…</td><td>âŒ</td><td>âœ…</td></tr><tr><td>Hash</td><td>ç”¨æˆ·é…ç½®ã€JSON å¯¹è±¡</td><td>âœ…</td><td>âŒ</td><td>âœ…</td></tr><tr><td>List</td><td>é˜Ÿåˆ—ã€æ¶ˆæ¯æµ</td><td>âœ…</td><td>âŒ</td><td>âŒï¼ˆå¤§é”®é£é™©ï¼‰</td></tr><tr><td>Set</td><td>å»é‡ã€é›†åˆè¿ç®—</td><td>âœ…</td><td>âŒ</td><td>âœ…</td></tr><tr><td>ZSet</td><td>æ’è¡Œæ¦œã€ä¼˜å…ˆé˜Ÿåˆ—</td><td>âœ…</td><td>âœ…</td><td>âœ…</td></tr><tr><td>Bitmap</td><td>ç”¨æˆ·æ ‡è®°</td><td>âœ…</td><td>âŒ</td><td>âœ…</td></tr><tr><td>HLL</td><td>UV å»é‡</td><td>âœ…</td><td>âŒ</td><td>âœ…</td></tr><tr><td>Stream</td><td>æ—¥å¿—æµã€äº‹ä»¶ç³»ç»Ÿ</td><td>âœ…</td><td>âœ…ï¼ˆåŸºäº IDï¼‰</td><td>âœ…</td></tr></tbody></table><hr><h2 id="âœ…-1-2-Redis-å®‰è£…éƒ¨ç½²"><a href="#âœ…-1-2-Redis-å®‰è£…éƒ¨ç½²" class="headerlink" title="âœ… 1.2 Redis å®‰è£…éƒ¨ç½²"></a>âœ… 1.2 Redis å®‰è£…éƒ¨ç½²</h2><hr><h3 id="ğŸ’»-åœ¨æœ¬åœ°å®‰è£…-Redis"><a href="#ğŸ’»-åœ¨æœ¬åœ°å®‰è£…-Redis" class="headerlink" title="ğŸ’» åœ¨æœ¬åœ°å®‰è£… Redis"></a>ğŸ’» åœ¨æœ¬åœ°å®‰è£… Redis</h3><h4 id="ğŸ§©-Windows-ç”¨æˆ·ï¼ˆæ¨è-WSL-æˆ–ä½¿ç”¨-Redis-Windows-ç‰ˆæœ¬ï¼‰"><a href="#ğŸ§©-Windows-ç”¨æˆ·ï¼ˆæ¨è-WSL-æˆ–ä½¿ç”¨-Redis-Windows-ç‰ˆæœ¬ï¼‰" class="headerlink" title="ğŸ§© Windows ç”¨æˆ·ï¼ˆæ¨è WSL æˆ–ä½¿ç”¨ Redis Windows ç‰ˆæœ¬ï¼‰"></a>ğŸ§© Windows ç”¨æˆ·ï¼ˆæ¨è WSL æˆ–ä½¿ç”¨ Redis Windows ç‰ˆæœ¬ï¼‰</h4><blockquote><p>Redis å®˜æ–¹ä¸ç»´æŠ¤ Windows ç‰ˆæœ¬ï¼Œå¯ä½¿ç”¨ç¤¾åŒºç»´æŠ¤ç‰ˆæœ¬ã€‚</p></blockquote><ul><li>GitHub åœ°å€ï¼š<a href="https://github.com/microsoftarchive/redis/releases">https://github.com/microsoftarchive/redis/releases</a></li><li>ä¸‹è½½ <code>.msi</code> å®‰è£…åŒ…æˆ–å‹ç¼©åŒ…</li><li>å®‰è£…åå¯åŠ¨ï¼š<code>redis-server.exe</code></li><li>ä½¿ç”¨å®¢æˆ·ç«¯ï¼š<code>redis-cli.exe</code></li></ul><h4 id="ğŸ-macOS-ç”¨æˆ·"><a href="#ğŸ-macOS-ç”¨æˆ·" class="headerlink" title="ğŸ macOS ç”¨æˆ·"></a>ğŸ macOS ç”¨æˆ·</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># ä½¿ç”¨ Homebrew å®‰è£…</span><br>brew install redis<br><br><span class="hljs-comment"># å¯åŠ¨ Redis</span><br>brew services start redis<br><br><span class="hljs-comment"># æµ‹è¯•è¿æ¥</span><br>redis-cli ping  <span class="hljs-comment"># è¿”å› PONG</span><br></code></pre></td></tr></table></figure><h4 id="ğŸ§-Linux-ç”¨æˆ·ï¼ˆUbuntu-ç¤ºä¾‹ï¼‰"><a href="#ğŸ§-Linux-ç”¨æˆ·ï¼ˆUbuntu-ç¤ºä¾‹ï¼‰" class="headerlink" title="ğŸ§ Linux ç”¨æˆ·ï¼ˆUbuntu ç¤ºä¾‹ï¼‰"></a>ğŸ§ Linux ç”¨æˆ·ï¼ˆUbuntu ç¤ºä¾‹ï¼‰</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt update<br>sudo apt install redis-server<br><br><span class="hljs-comment"># ä¿®æ”¹é…ç½®æ”¯æŒå¤–éƒ¨è®¿é—®ï¼ˆç”Ÿäº§å»ºè®®è®¾ç½®å¯†ç ï¼‰</span><br>sudo nano /etc/redis/redis.conf<br><br><span class="hljs-comment"># å¯åŠ¨æœåŠ¡</span><br>sudo systemctl start redis<br></code></pre></td></tr></table></figure><hr><h3 id="ğŸ³-Docker-å®‰è£…-Redisï¼ˆä¼ä¸šæ¨èï¼‰"><a href="#ğŸ³-Docker-å®‰è£…-Redisï¼ˆä¼ä¸šæ¨èï¼‰" class="headerlink" title="ğŸ³ Docker å®‰è£… Redisï¼ˆä¼ä¸šæ¨èï¼‰"></a>ğŸ³ Docker å®‰è£… Redisï¼ˆä¼ä¸šæ¨èï¼‰</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker run -d --name redis \<br>  -p 6379:6379 \<br>  redis:latest<br></code></pre></td></tr></table></figure><p>ğŸ“Œ æŒä¹…åŒ–æŒ‚è½½ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker run -d --name redis \<br>  -v /mydata/redis:/data \<br>  -p 6379:6379 \<br>  redis --appendonly <span class="hljs-built_in">yes</span><br></code></pre></td></tr></table></figure><hr><h2 id="ğŸ§°-å®¢æˆ·ç«¯å·¥å…·ä»‹ç»"><a href="#ğŸ§°-å®¢æˆ·ç«¯å·¥å…·ä»‹ç»" class="headerlink" title="ğŸ§° å®¢æˆ·ç«¯å·¥å…·ä»‹ç»"></a>ğŸ§° å®¢æˆ·ç«¯å·¥å…·ä»‹ç»</h2><h3 id="1ï¸âƒ£-redis-cli-å‘½ä»¤è¡Œå®¢æˆ·ç«¯"><a href="#1ï¸âƒ£-redis-cli-å‘½ä»¤è¡Œå®¢æˆ·ç«¯" class="headerlink" title="1ï¸âƒ£ redis-cli å‘½ä»¤è¡Œå®¢æˆ·ç«¯"></a>1ï¸âƒ£ redis-cli å‘½ä»¤è¡Œå®¢æˆ·ç«¯</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># è¿æ¥ Redis</span><br>redis-cli -h 127.0.0.1 -p 6379<br><br><span class="hljs-comment"># åŸºæœ¬å‘½ä»¤</span><br>SET name <span class="hljs-string">&quot;Alice&quot;</span><br>GET name<br></code></pre></td></tr></table></figure><h3 id="2ï¸âƒ£-RedisInsightï¼ˆå¯è§†åŒ–å®¢æˆ·ç«¯ï¼‰"><a href="#2ï¸âƒ£-RedisInsightï¼ˆå¯è§†åŒ–å®¢æˆ·ç«¯ï¼‰" class="headerlink" title="2ï¸âƒ£ RedisInsightï¼ˆå¯è§†åŒ–å®¢æˆ·ç«¯ï¼‰"></a>2ï¸âƒ£ RedisInsightï¼ˆå¯è§†åŒ–å®¢æˆ·ç«¯ï¼‰</h3><blockquote><p>å®˜ç½‘åœ°å€ï¼š<a href="https://redis.com/redis-enterprise/redis-insight/">https://redis.com/redis-enterprise/redis-insight/</a></p></blockquote><ul><li>æ”¯æŒå›¾å½¢åŒ–æµè§ˆã€é”®å€¼æ“ä½œã€æ…¢æŸ¥è¯¢åˆ†æã€é›†ç¾¤å›¾å¯è§†åŒ–</li><li>æ¨èç»™åˆå­¦è€…ä¸ä¼ä¸šè¿ç»´</li></ul><hr><h2 id="ğŸ-ä½¿ç”¨-Python-æ“ä½œ-Redis"><a href="#ğŸ-ä½¿ç”¨-Python-æ“ä½œ-Redis" class="headerlink" title="ğŸ ä½¿ç”¨ Python æ“ä½œ Redis"></a>ğŸ ä½¿ç”¨ Python æ“ä½œ Redis</h2><h3 id="å®‰è£…-redis-ç¬¬ä¸‰æ–¹åº“"><a href="#å®‰è£…-redis-ç¬¬ä¸‰æ–¹åº“" class="headerlink" title="å®‰è£… redis ç¬¬ä¸‰æ–¹åº“"></a>å®‰è£… <code>redis</code> ç¬¬ä¸‰æ–¹åº“</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip install redis<br></code></pre></td></tr></table></figure><h3 id="ç¤ºä¾‹ï¼šPython-ç¼“å­˜ç”¨æˆ·ä¿¡æ¯"><a href="#ç¤ºä¾‹ï¼šPython-ç¼“å­˜ç”¨æˆ·ä¿¡æ¯" class="headerlink" title="ç¤ºä¾‹ï¼šPython ç¼“å­˜ç”¨æˆ·ä¿¡æ¯"></a>ç¤ºä¾‹ï¼šPython ç¼“å­˜ç”¨æˆ·ä¿¡æ¯</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> redis<br><br>r = redis.Redis(host=<span class="hljs-string">&#x27;localhost&#x27;</span>, port=<span class="hljs-number">6379</span>, decode_responses=<span class="hljs-literal">True</span>)<br><br><span class="hljs-comment"># è®¾ç½®ç¼“å­˜æ•°æ®</span><br>r.<span class="hljs-built_in">set</span>(<span class="hljs-string">&quot;user:1001:name&quot;</span>, <span class="hljs-string">&quot;Alice&quot;</span>, ex=<span class="hljs-number">60</span>)  <span class="hljs-comment"># ex=60 è¡¨ç¤º 60ç§’è¿‡æœŸ</span><br><br><span class="hljs-comment"># è¯»å–ç¼“å­˜æ•°æ®</span><br>name = r.get(<span class="hljs-string">&quot;user:1001:name&quot;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ç”¨æˆ·åï¼š&quot;</span>, name)<br></code></pre></td></tr></table></figure><h3 id="ç¤ºä¾‹ï¼šæ¨¡æ‹Ÿé¡µé¢è®¿é—®è®¡æ•°å™¨"><a href="#ç¤ºä¾‹ï¼šæ¨¡æ‹Ÿé¡µé¢è®¿é—®è®¡æ•°å™¨" class="headerlink" title="ç¤ºä¾‹ï¼šæ¨¡æ‹Ÿé¡µé¢è®¿é—®è®¡æ•°å™¨"></a>ç¤ºä¾‹ï¼šæ¨¡æ‹Ÿé¡µé¢è®¿é—®è®¡æ•°å™¨</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">r.incr(<span class="hljs-string">&quot;page:home:views&quot;</span>)   <span class="hljs-comment"># æ¯è®¿é—®ä¸€æ¬¡ +1</span><br>count = r.get(<span class="hljs-string">&quot;page:home:views&quot;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;é¦–é¡µè®¿é—®é‡ï¼š&quot;</span>, count)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Redis</category>
      
      <category>Redis æ•™ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python asyncå¼‚æ­¥ä»£ç å…¥é—¨çº§10ä¸ªæ¡ˆä¾‹ï¼</title>
    <link href="/2025/07/07/async%E5%BC%82%E6%AD%A5%E4%BB%A3%E7%A0%81/"/>
    <url>/2025/07/07/async%E5%BC%82%E6%AD%A5%E4%BB%A3%E7%A0%81/</url>
    
    <content type="html"><![CDATA[<h1 id="Python-å¼‚æ­¥ä»£ç æ¡ˆä¾‹"><a href="#Python-å¼‚æ­¥ä»£ç æ¡ˆä¾‹" class="headerlink" title="Python å¼‚æ­¥ä»£ç æ¡ˆä¾‹"></a>Python å¼‚æ­¥ä»£ç æ¡ˆä¾‹</h1><h2 id="åˆçº§async-ä»£ç æ¡ˆä¾‹å®ç°å¼‚æ­¥"><a href="#åˆçº§async-ä»£ç æ¡ˆä¾‹å®ç°å¼‚æ­¥" class="headerlink" title="åˆçº§async ä»£ç æ¡ˆä¾‹å®ç°å¼‚æ­¥"></a>åˆçº§async ä»£ç æ¡ˆä¾‹å®ç°å¼‚æ­¥</h2><h3 id="è®¤è¯†å¼‚æ­¥ä»£ç "><a href="#è®¤è¯†å¼‚æ­¥ä»£ç " class="headerlink" title="è®¤è¯†å¼‚æ­¥ä»£ç "></a>è®¤è¯†å¼‚æ­¥ä»£ç </h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> asyncio<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">fetch_data</span>(<span class="hljs-params">delay</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Fetching data...&quot;</span>)<br>    <span class="hljs-keyword">await</span> asyncio.sleep(delay)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Data fetched&quot;</span>)<br>    <span class="hljs-keyword">return</span> &#123;<span class="hljs-string">&quot;data&quot;</span>:<span class="hljs-string">&quot;Some data&quot;</span>&#125;<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Start of main coroutine&quot;</span>)<br>    task = fetch_data(<span class="hljs-number">2</span>)<br>    result = <span class="hljs-keyword">await</span> task<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Received result: <span class="hljs-subst">&#123;result&#125;</span>&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;End of main coroutine&quot;</span>)<br><br>asyncio.run(main())<br></code></pre></td></tr></table></figure><p>ä»£ç è§£é‡Šï¼š</p><p>  fetch_data æ¨¡æ‹Ÿä¸€ä¸ªç½‘ç»œä¸‹è½½çš„æ“ä½œï¼Œé¦–å…ˆå¼‚æ­¥ç­‰å¾…äº†æˆ‘ä»¬ä¼ å…¥çš„å€¼ï¼Œç„¶åæ¨¡æ‹Ÿä¸‹è½½æ•°æ®æˆåŠŸã€‚</p><p>  main å‡½æ•°å®šä¹‰äº†å¼€å¯å¼‚æ­¥ï¼Œæˆ‘ä»¬å°†å¼‚æ­¥è¿”å›çš„ä¿¡æ¯å­˜ä¸ºä¸€ä¸ªtaskï¼Œç„¶åé€šè¿‡awaitç„¶åè·å–å€¼ï¼Œç„¶åæ‰“å°å‡ºæˆ‘ä»¬ä¸‹è½½çš„ä¿¡æ¯ã€‚</p><p>è¿è¡Œç»“æœï¼š</p><img src="/2025/07/07/async%E5%BC%82%E6%AD%A5%E4%BB%A3%E7%A0%81/1.png" class=""><h3 id="å˜æ¢ä¸€ä¸‹å¼‚æ­¥è¯·æ±‚å½¢æ€"><a href="#å˜æ¢ä¸€ä¸‹å¼‚æ­¥è¯·æ±‚å½¢æ€" class="headerlink" title="å˜æ¢ä¸€ä¸‹å¼‚æ­¥è¯·æ±‚å½¢æ€"></a>å˜æ¢ä¸€ä¸‹å¼‚æ­¥è¯·æ±‚å½¢æ€</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> asyncio<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">fetch_data</span>(<span class="hljs-params">delay</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Fetching data...&quot;</span>)<br>    <span class="hljs-keyword">await</span> asyncio.sleep(delay)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Data fetched&quot;</span>)<br>    <span class="hljs-keyword">return</span> &#123;<span class="hljs-string">&quot;data&quot;</span>:<span class="hljs-string">&quot;Some data&quot;</span>&#125;<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Start of main coroutine&quot;</span>)<br>    task = fetch_data(<span class="hljs-number">2</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;End of main coroutine&quot;</span>)<br>    result = <span class="hljs-keyword">await</span> task<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Received result: <span class="hljs-subst">&#123;result&#125;</span>&quot;</span>)<br>    <br><br>asyncio.run(main())<br></code></pre></td></tr></table></figure><p>ä»£ç è§£é‡Šï¼š<br>   æˆ‘ä»¬æ›´æ”¹äº†ä¸‹é¢çš„éƒ¨åˆ†ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å°†ç»“æŸçš„ä¿¡æ¯æ”¾ç½®åˆ°äº†å‰é¢ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä¼šå¾—åˆ°ç»“æŸæ•°æ®æŸ¥è¯¢ç„¶åæ‰ä¼šå¾—åˆ°ç»“æŸçš„æ•°æ®ï¼</p><p>è¿è¡Œç»“æœï¼š</p><img src="/2025/07/07/async%E5%BC%82%E6%AD%A5%E4%BB%A3%E7%A0%81/2.png" class=""><h3 id="å¼‚æ­¥å¦‚æœè¿™ä¹ˆå†™æ•ˆç‡è¿˜æ˜¯ä½ä¸‹ï¼"><a href="#å¼‚æ­¥å¦‚æœè¿™ä¹ˆå†™æ•ˆç‡è¿˜æ˜¯ä½ä¸‹ï¼" class="headerlink" title="å¼‚æ­¥å¦‚æœè¿™ä¹ˆå†™æ•ˆç‡è¿˜æ˜¯ä½ä¸‹ï¼"></a>å¼‚æ­¥å¦‚æœè¿™ä¹ˆå†™æ•ˆç‡è¿˜æ˜¯ä½ä¸‹ï¼</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> asyncio<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">fetch_data</span>(<span class="hljs-params">delay,<span class="hljs-built_in">id</span></span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Fetching data.... id:&quot;</span>, <span class="hljs-built_in">id</span>)<br>    <span class="hljs-keyword">await</span> asyncio.sleep(delay)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Data fetched, id:&quot;</span>,<span class="hljs-built_in">id</span>)<br>    <span class="hljs-keyword">return</span> &#123;<span class="hljs-string">&quot;data&quot;</span>:<span class="hljs-string">&quot;Some data&quot;</span>,<span class="hljs-string">&quot;id&quot;</span>:<span class="hljs-built_in">id</span>&#125;<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    task1 = fetch_data(<span class="hljs-number">2</span>,<span class="hljs-number">1</span>)<br>    task2 = fetch_data(<span class="hljs-number">2</span>,<span class="hljs-number">2</span>)<br><br>    result1 = <span class="hljs-keyword">await</span> task1<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Received result: <span class="hljs-subst">&#123;result1&#125;</span>&quot;</span>)<br><br>    result2 = <span class="hljs-keyword">await</span> task2<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Received result: <span class="hljs-subst">&#123;result2&#125;</span>&quot;</span>)<br><br>asyncio.run(main())<br></code></pre></td></tr></table></figure><p>ä»£ç è§£é‡Šï¼š<br>   ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºæ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨await task1ï¼Œ await task 2 è¿™æ ·çš„ä¼šå¯¼è‡´æˆ‘ä»¬åªæœ‰åœ¨task1å®Œæˆä¹‹åï¼Œæ‰ä¼šå»æ‰§è¡Œtask2ï¼Œæ•ˆç‡å°±ä¼šå˜ä½ï¼å¹¶æ²¡æœ‰å¾—åˆ°æ•ˆç‡ä¸Šçš„æå‡ã€‚</p><p>è¿è¡Œç»“æœï¼š</p><img src="/2025/07/07/async%E5%BC%82%E6%AD%A5%E4%BB%A3%E7%A0%81/3.png" class=""><h3 id="è¿™æ ·å†™å¼‚æ­¥æ•ˆç‡å˜å˜çš„"><a href="#è¿™æ ·å†™å¼‚æ­¥æ•ˆç‡å˜å˜çš„" class="headerlink" title="è¿™æ ·å†™å¼‚æ­¥æ•ˆç‡å˜å˜çš„"></a>è¿™æ ·å†™å¼‚æ­¥æ•ˆç‡å˜å˜çš„</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> asyncio<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">fetch_data</span>(<span class="hljs-params"><span class="hljs-built_in">id</span>, sleep_time</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Coroutine <span class="hljs-subst">&#123;<span class="hljs-built_in">id</span>&#125;</span> starting to fetch data&quot;</span>)<br>    <span class="hljs-keyword">await</span> asyncio.sleep(sleep_time)<br>    <span class="hljs-keyword">return</span> &#123;<span class="hljs-string">&quot;id&quot;</span>:<span class="hljs-built_in">id</span>, <span class="hljs-string">&quot;data&quot;</span>:<span class="hljs-string">f&quot;Same data from coroutine <span class="hljs-subst">&#123;<span class="hljs-built_in">id</span>&#125;</span>&quot;</span>&#125;<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    task1 = asyncio.create_task(fetch_data(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>))<br>    task2 = asyncio.create_task(fetch_data(<span class="hljs-number">2</span>,<span class="hljs-number">3</span>))<br>    task3 = asyncio.create_task(fetch_data(<span class="hljs-number">3</span>,<span class="hljs-number">1</span>))<br><br>    result1 = <span class="hljs-keyword">await</span> task1<br>    result2 = <span class="hljs-keyword">await</span> task2<br>    result3 = <span class="hljs-keyword">await</span> task3<br><br>    <span class="hljs-built_in">print</span>(result1, result2,result3)<br><br>asyncio.run(main())<br></code></pre></td></tr></table></figure><p>ä»£ç è§£é‡Šï¼š<br>   æ­¤å¤„æˆ‘ä»¬å¼•å…¥äº†<code>task</code>è¿™ä¸ªæ¦‚å¿µï¼Œä¹Ÿå°±æ˜¯å°†æˆ‘ä»¬çš„ä»»åŠ¡åŠ å…¥åˆ°taskä¸­è¿™æ ·å°±ä¼šåšåˆ°å¼‚æ­¥æ‰§è¡Œå¤šä¸ªä»£ç ï¼Œæé«˜æˆ‘ä»¬çš„è¿è¡Œæ•ˆç‡ï¼åªéœ€è¦3ç§’å³å¯å®Œæˆæ‰€æœ‰çš„ç¨‹åº</p><p>è¿è¡Œç»“æœï¼š</p><img src="/2025/07/07/async%E5%BC%82%E6%AD%A5%E4%BB%A3%E7%A0%81/4.png" class=""><h3 id="æˆ‘æƒ³æ›´åŠ ä¼˜é›…çš„æ‰§è¡Œtask"><a href="#æˆ‘æƒ³æ›´åŠ ä¼˜é›…çš„æ‰§è¡Œtask" class="headerlink" title="æˆ‘æƒ³æ›´åŠ ä¼˜é›…çš„æ‰§è¡Œtask"></a>æˆ‘æƒ³æ›´åŠ ä¼˜é›…çš„æ‰§è¡Œtask</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> asyncio<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">fetch_data</span>(<span class="hljs-params"><span class="hljs-built_in">id</span>, sleep_time</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Coroutine <span class="hljs-subst">&#123;<span class="hljs-built_in">id</span>&#125;</span> starting to fetch data.&quot;</span>)<br>    <span class="hljs-keyword">await</span> asyncio.sleep(sleep_time)<br>    <span class="hljs-keyword">return</span> &#123;<span class="hljs-string">&quot;id&quot;</span>:<span class="hljs-built_in">id</span>,<span class="hljs-string">&quot;data&quot;</span>:<span class="hljs-string">f&quot;Sameple data from coroutine <span class="hljs-subst">&#123;<span class="hljs-built_in">id</span>&#125;</span>&quot;</span>&#125;<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    results = <span class="hljs-keyword">await</span> asyncio.gather(fetch_data(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>),fetch_data(<span class="hljs-number">2</span>,<span class="hljs-number">1</span>),fetch_data(<span class="hljs-number">3</span>,<span class="hljs-number">3</span>))<br>    <span class="hljs-keyword">for</span> result <span class="hljs-keyword">in</span> results:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Received result: <span class="hljs-subst">&#123;result&#125;</span>&quot;</span>)<br>    <br><br>asyncio.run(main())<br></code></pre></td></tr></table></figure><p>ä»£ç è§£é‡Šï¼š<br>   <code>gather</code> å°†æ‰€æœ‰çš„è¿”å›å€¼ä½œä¸ºä¸€ä¸ªå¯¹è±¡å­˜å‚¨èµ·æ¥ï¼Œè€Œä¸éœ€è¦æ¯ä¸ªå»åˆ›å»ºä¸€ä¸ª<code>task</code>æ¥å®ç°,ä½†æ˜¯gatherå¹¶ä¸ä¼šå¤„ç†åœ¨ç¨‹åºä¸­å‡ºç°çš„é”™è¯¯ï¼Œ<br>   å¦‚æœå…¶ä¸­ä¸€ä¸ªå¤±è´¥äº†ï¼Œå…¶ä»–çš„ä¼šç»§ç»­æ‰§è¡Œã€‚</p><p>è¿è¡Œç»“æœï¼š</p><img src="/2025/07/07/async%E5%BC%82%E6%AD%A5%E4%BB%A3%E7%A0%81/5.png" class=""><h3 id="å‡ºé”™åæ€ä¹ˆè‡ªåŠ¨åœæ­¢å‘¢ï¼Ÿ"><a href="#å‡ºé”™åæ€ä¹ˆè‡ªåŠ¨åœæ­¢å‘¢ï¼Ÿ" class="headerlink" title="å‡ºé”™åæ€ä¹ˆè‡ªåŠ¨åœæ­¢å‘¢ï¼Ÿ"></a>å‡ºé”™åæ€ä¹ˆè‡ªåŠ¨åœæ­¢å‘¢ï¼Ÿ</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> asyncio<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">fetch_data</span>(<span class="hljs-params"><span class="hljs-built_in">id</span>, sleep_time</span>):<br>     <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Coroutine <span class="hljs-subst">&#123;<span class="hljs-built_in">id</span>&#125;</span> starting to fetch data.&quot;</span>)<br>     <span class="hljs-keyword">await</span> asyncio.sleep(sleep_time)<br>     <span class="hljs-keyword">return</span> &#123;<span class="hljs-string">&quot;id&quot;</span>:<span class="hljs-built_in">id</span>,<span class="hljs-string">&quot;data&quot;</span>:<span class="hljs-string">f&quot;Sameple data from coroutine <span class="hljs-subst">&#123;<span class="hljs-built_in">id</span>&#125;</span>&quot;</span>&#125;<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    tasks =[]<br>    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> asyncio.TaskGroup() <span class="hljs-keyword">as</span> tg:<br>        <span class="hljs-keyword">for</span> i, sleep_time <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>([<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>], start=<span class="hljs-number">1</span>):<br>            task = tg.create_task(fetch_data(i,sleep_time))<br>            tasks.append(task)<br>    <br>    results = [task.result() <span class="hljs-keyword">for</span> task <span class="hljs-keyword">in</span> tasks]<br><br>    <span class="hljs-keyword">for</span> result <span class="hljs-keyword">in</span> results:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Received result: <span class="hljs-subst">&#123;result&#125;</span>&quot;</span>)<br><br>asyncio.run(main())<br></code></pre></td></tr></table></figure><p>ä»£ç è§£é‡Šï¼š<br>   è¿™é‡Œæˆ‘ä»¬æ–°å¢çš„å«åšäº‹åŠ¡ç»„ï¼Œä»–æä¾›äº†æ›´åŠ å¥½çš„å¯¹äºé”™è¯¯çš„å¤„ç†ï¼Œå¦‚æœå…¶ä¸­ä¸€ä¸ªå‡ºé”™äº†ï¼Œé‚£ä¹ˆå…¶ä»–çš„æ‰€æœ‰ä»»åŠ¡ä¹Ÿéƒ½ä¼šåœæ­¢è¿è¡Œï¼è¿™é‡Œä¹Ÿæ˜¯ç”¨åˆ°äº†ä¸Šä¸‹æ–‡ç®¡ç†å™¨æ¥å¤„ç†ï¼</p><p>è¿è¡Œç»“æœï¼š</p><img src="/2025/07/07/async%E5%BC%82%E6%AD%A5%E4%BB%A3%E7%A0%81/6.png" class=""><h3 id="å¼‚æ­¥åº•å±‚çš„é€»è¾‘"><a href="#å¼‚æ­¥åº•å±‚çš„é€»è¾‘" class="headerlink" title="å¼‚æ­¥åº•å±‚çš„é€»è¾‘"></a>å¼‚æ­¥åº•å±‚çš„é€»è¾‘</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> asyncio<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">set_future_result</span>(<span class="hljs-params">future, value</span>):<br>    <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">2</span>)<br>    future.set_result(value) <span class="hljs-comment"># è®¾ç½®ç»“æœ</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Set the future&#x27;s result to: <span class="hljs-subst">&#123;value&#125;</span>&quot;</span>)<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    loop = asyncio.get_running_loop() <span class="hljs-comment"># è·å–äº‹ä»¶å¾ªç¯</span><br>    future = loop.create_future() <span class="hljs-comment"># åˆ›å»ºfuture</span><br><br>    asyncio.create_task(set_future_result(future,<span class="hljs-string">&quot;Future result is reday&quot;</span>)) <span class="hljs-comment"># ç„¶ååˆ›å»ºæˆ‘ä»¬çš„ä»»åŠ¡å®ç°æœªæ¥çš„ç»“æœ</span><br><br>    result = <span class="hljs-keyword">await</span> future<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Received the future&#x27;s result is <span class="hljs-subst">&#123;result&#125;</span>&quot;</span>) <span class="hljs-comment"># ç­‰å¾…å®Œæˆåæ‰“å°ç»“æœ</span><br><br>asyncio.run(main())<br></code></pre></td></tr></table></figure><p>ä»£ç è§£é‡Šï¼š<br>   ä¸Šé¢çš„ä»£ç å®é™…æˆ‘ä»¬ä¸éœ€è¦æŒæ¡ï¼Œå› ä¸ºåœ¨ç›®å‰éƒ½å·²ç»è¢«å°è£…å¥½äº†ï¼Œå±äºç•¥å¾®åº•å±‚å®ç°çš„ä»£ç ï¼Œæˆ‘ä»¬è¿™é‡Œçš„<code>future</code>å®é™…ä¸Šæ˜¯æœªæ¥çš„ç»“æœï¼Œä½†æ˜¯ä½ å¹¶ä¸çŸ¥é“ä¼šåœ¨ä»€ä¹ˆæ—¶å€™å‘ç”Ÿï¼Œæˆ‘ä»¬åœ¨ä¸Šé¢çš„ä»£ç é‡Œé¢å°±æ˜¯åˆ›å»ºäº†<code>future</code>ï¼Œå¹¶ä¸”ç­‰å¾…è¿™ä¸ªæœªæ¥çš„ç»“æœ</p><p>è¿è¡Œç»“æœï¼š</p><img src="/2025/07/07/async%E5%BC%82%E6%AD%A5%E4%BB%A3%E7%A0%81/7.png" class=""><h3 id="å¼‚æ­¥é”çš„å®ç°"><a href="#å¼‚æ­¥é”çš„å®ç°" class="headerlink" title="å¼‚æ­¥é”çš„å®ç°"></a>å¼‚æ­¥é”çš„å®ç°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> asyncio<br><br>shared_resource=<span class="hljs-number">0</span><br><br>lock=asyncio.Lock()<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">modify_shared_resource</span>():<br>    <span class="hljs-keyword">global</span> shared_resource<br><br>    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> lock:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Resource before modification: <span class="hljs-subst">&#123;shared_resource&#125;</span>&quot;</span>)<br>        shared_resource += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">1</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Resource after modification: <span class="hljs-subst">&#123;shared_resource&#125;</span>&quot;</span>)<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    <span class="hljs-keyword">await</span> asyncio.gather(*(modify_shared_resource() <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>)))<br><br>asyncio.run(main())<br></code></pre></td></tr></table></figure><p>ä»£ç è§£é‡Šï¼š<br>   æˆ‘ä»¬è¿™é‡Œå¼•å…¥é”çš„æ¦‚å¿µï¼ŒåŠ ä¸Šé”å¯ä»¥é˜²æ­¢å¼‚æ­¥è®¿é—®å¯¼è‡´å‡ºç°çš„æ•°æ®é—®é¢˜ï¼Œä¾‹å¦‚å­˜å‚¨æ•°æ®åº“ï¼Œè¡¨æ ¼ç­‰ï¼Œå¼‚æ­¥æƒ…å†µä¸‹ä¼šå‡ºç°åŒæ—¶ä¿®æ”¹æ•°æ®çš„æƒ…å†µï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åŠ ä¸Šé”ï¼Œå†åŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ªè¿›è¡Œæ•°æ®çš„è¯»å†™æ“ä½œï¼ä¸Šä¸‹æ–‡æ“ä½œä½¿å¾—æˆ‘ä»¬ä¸å¿…å…³å¿ƒé‡Šæ”¾é”çš„æƒ…å†µã€‚</p><p>è¿è¡Œç»“æœï¼š</p><img src="/2025/07/07/async%E5%BC%82%E6%AD%A5%E4%BB%A3%E7%A0%81/8.png" class=""><h3 id="å¼‚æ­¥ä¿¡å·é‡çš„æ¦‚å¿µ"><a href="#å¼‚æ­¥ä¿¡å·é‡çš„æ¦‚å¿µ" class="headerlink" title="å¼‚æ­¥ä¿¡å·é‡çš„æ¦‚å¿µ"></a>å¼‚æ­¥ä¿¡å·é‡çš„æ¦‚å¿µ</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> asyncio<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">access_resource</span>(<span class="hljs-params">semaphore, resource_id</span>):<br>    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> semaphore:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Accessing resource <span class="hljs-subst">&#123;resource_id&#125;</span>&quot;</span>)<br>        <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">1</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Releasing resource <span class="hljs-subst">&#123;resource_id&#125;</span>&quot;</span>)<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    semaphore = asyncio.Semaphore(<span class="hljs-number">2</span>) <span class="hljs-comment"># åˆ›å»º2ä¸ªä¿¡å·é‡</span><br>    <span class="hljs-keyword">await</span> asyncio.gather(*(access_resource(semaphore,i)<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>)))<br><br>asyncio.run(main())<br><br></code></pre></td></tr></table></figure><p>ä»£ç è§£é‡Šï¼š<br>  è¿™é‡Œæˆ‘ä»¬å¼•å…¥äº†ä¿¡å·é‡çš„æ¦‚å¿µï¼Œå®ƒå’Œé”çš„æ¦‚å¿µç±»ä¼¼ï¼Œä½†æ˜¯å®ƒæ˜¯è¿è¡ŒåŒä¸€æ—¶åˆ»å€™å¤šå°‘ä¸ªç¨‹åºå¯ä»¥è®¿é—®ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰æˆ‘ä»¬è¦ä½¿ç”¨çš„æ•°é‡ï¼Œå¯ä»¥è¿›è¡Œé™åˆ¶ï¼Œé˜²æ­¢èµ„æºè®¿é—®è¿‡è½½ï¼Œä¹Ÿå°±æ˜¯æœ€å¤§ä¸€æ¬¡å¯ä»¥è®¿é—®å¤šå°‘ä¸ªã€‚</p><p>è¿è¡Œç»“æœï¼š</p><img src="/2025/07/07/async%E5%BC%82%E6%AD%A5%E4%BB%A3%E7%A0%81/9.png" class=""><h3 id="å¼‚æ­¥eventå®ç°æ¨¡æ‹ŸåŒæ­¥"><a href="#å¼‚æ­¥eventå®ç°æ¨¡æ‹ŸåŒæ­¥" class="headerlink" title="å¼‚æ­¥eventå®ç°æ¨¡æ‹ŸåŒæ­¥"></a>å¼‚æ­¥eventå®ç°æ¨¡æ‹ŸåŒæ­¥</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> asyncio<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">waiter</span>(<span class="hljs-params">event</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;waiting for the event to be set&quot;</span>)<br>    <span class="hljs-keyword">await</span> event.wait() <span class="hljs-comment"># ç­‰å¾…äº‹ä»¶</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;event has been set, continuing execution&quot;</span>)<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">setter</span>(<span class="hljs-params">event</span>):<br>    <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">2</span>)<br>    event.<span class="hljs-built_in">set</span>() <span class="hljs-comment"># è®¾ç½®äº‹ä»¶</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;event has been set!&quot;</span>)<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    event = asyncio.Event()<br>    <span class="hljs-keyword">await</span> asyncio.gather(waiter(event), setter(event))<br><br>asyncio.run(main())<br></code></pre></td></tr></table></figure><p>ä»£ç è§£é‡Š<br>  è¿™é‡Œæˆ‘ä»¬å¼•å…¥äº†äº‹ä»¶<code>Event</code>ï¼Œ å®ƒå¯ä»¥æ˜¯æˆ‘ä»¬æ¨¡æ‹ŸåŒæ­¥çš„æƒ…å†µï¼Œåœ¨å¼‚æ­¥ä¸­å¯èƒ½éœ€è¦æš‚æ—¶çš„åŒæ­¥çš„æ—¶å€™å¯ä»¥ä½¿ç”¨ï¼Œä¸€æ—¦æˆ‘ä»¬è®¾ç½®äº†äº‹ä»¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¿…é¡»ç­‰å¾…äº‹ä»¶å®Œæˆåï¼Œæ‰å¯ä»¥ç»§ç»­æ‰§è¡Œä¸‹ä¸€æ­¥ï¼</p><p>è¿è¡Œç»“æœï¼š</p><img src="/2025/07/07/async%E5%BC%82%E6%AD%A5%E4%BB%A3%E7%A0%81/10.png" class=""><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>  å½“æˆ‘ä»¬ä»¥æ­£ç¡®çš„æ–¹å¼æ‰“å¼€å¼‚æ­¥è¯·æ±‚æˆ‘ä»¬çš„æ•ˆç‡å°±ä¼šæå‡å¾ˆå¤šï¼</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
      <category>Python å¸¸è§å‡½æ•°</category>
      
      <category>Python asyncå¼‚æ­¥ä»£ç </category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pythonå¸¸è§å‡½æ•°ä¹‹rsplitå‡½æ•°ç”¨æ³•</title>
    <link href="/2025/06/23/rsplit%E4%BB%8B%E7%BB%8D/"/>
    <url>/2025/06/23/rsplit%E4%BB%8B%E7%BB%8D/</url>
    
    <content type="html"><![CDATA[<h1 id="ğŸ“˜-Pythonå¸¸è§å‡½æ•°ä¹‹rsplitå‡½æ•°ç”¨æ³•"><a href="#ğŸ“˜-Pythonå¸¸è§å‡½æ•°ä¹‹rsplitå‡½æ•°ç”¨æ³•" class="headerlink" title="ğŸ“˜ Pythonå¸¸è§å‡½æ•°ä¹‹rsplitå‡½æ•°ç”¨æ³•"></a>ğŸ“˜ Pythonå¸¸è§å‡½æ•°ä¹‹rsplitå‡½æ•°ç”¨æ³•</h1><hr><h2 id="âœ¨-ä¸€ã€rsplit-åŸºç¡€è¯­æ³•"><a href="#âœ¨-ä¸€ã€rsplit-åŸºç¡€è¯­æ³•" class="headerlink" title="âœ¨ ä¸€ã€rsplit() åŸºç¡€è¯­æ³•"></a>âœ¨ ä¸€ã€<code>rsplit()</code> åŸºç¡€è¯­æ³•</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">str</span>.rsplit(sep=<span class="hljs-literal">None</span>, maxsplit=-<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>sep</code></td><td>å¯é€‰ã€‚æŒ‡å®šåˆ†éš”ç¬¦ï¼ˆé»˜è®¤æ˜¯ä»»æ„ç©ºç™½å­—ç¬¦ï¼‰ã€‚</td></tr><tr><td><code>maxsplit</code></td><td>å¯é€‰ã€‚æœ€å¤šåˆ†å‰²å‡ æ¬¡ï¼Œä»<strong>å³è¾¹å¼€å§‹</strong>åˆ†å‰²ã€‚é»˜è®¤ <code>-1</code> è¡¨ç¤ºå…¨éƒ¨åˆ†å‰²ã€‚</td></tr></tbody></table><hr><h2 id="âœ…-äºŒã€ä¸-split-çš„åŒºåˆ«"><a href="#âœ…-äºŒã€ä¸-split-çš„åŒºåˆ«" class="headerlink" title="âœ… äºŒã€ä¸ split() çš„åŒºåˆ«"></a>âœ… äºŒã€ä¸ <code>split()</code> çš„åŒºåˆ«</h2><table><thead><tr><th>æ–¹æ³•</th><th>åˆ†å‰²æ–¹å‘</th><th>ä¸¾ä¾‹è¯´æ˜</th></tr></thead><tbody><tr><td><code>split()</code></td><td>ä»å·¦å‘å³</td><td><code>&#39;a-b-c&#39;.split(&#39;-&#39;, 1)</code> â†’ <code>[&#39;a&#39;, &#39;b-c&#39;]</code></td></tr><tr><td><code>rsplit()</code></td><td>ä»å³å‘å·¦</td><td><code>&#39;a-b-c&#39;.rsplit(&#39;-&#39;, 1)</code> â†’ <code>[&#39;a-b&#39;, &#39;c&#39;]</code></td></tr></tbody></table><hr><h2 id="ğŸ“Œ-ä¸‰ã€åŸºç¡€ç¤ºä¾‹"><a href="#ğŸ“Œ-ä¸‰ã€åŸºç¡€ç¤ºä¾‹" class="headerlink" title="ğŸ“Œ ä¸‰ã€åŸºç¡€ç¤ºä¾‹"></a>ğŸ“Œ ä¸‰ã€åŸºç¡€ç¤ºä¾‹</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">s = <span class="hljs-string">&quot;2024-05-01&quot;</span><br>parts = s.rsplit(<span class="hljs-string">&quot;-&quot;</span>, <span class="hljs-number">1</span>)<br><span class="hljs-built_in">print</span>(parts)  <span class="hljs-comment"># [&#x27;2024-05&#x27;, &#x27;01&#x27;]</span><br></code></pre></td></tr></table></figure><p>å¯¹æ—¥æœŸå­—ç¬¦ä¸² <code>YYYY-MM-DD</code> è¿›è¡Œæ‹†åˆ†ï¼Œåªå–å‡ºæœ€åçš„â€œæ—¥â€ã€‚</p><hr><h2 id="ğŸš€-å››ã€ä¼ä¸šå®æˆ˜ç¤ºä¾‹"><a href="#ğŸš€-å››ã€ä¼ä¸šå®æˆ˜ç¤ºä¾‹" class="headerlink" title="ğŸš€ å››ã€ä¼ä¸šå®æˆ˜ç¤ºä¾‹"></a>ğŸš€ å››ã€ä¼ä¸šå®æˆ˜ç¤ºä¾‹</h2><h3 id="ğŸ“-åœºæ™¯ä¸€ï¼šæ—¥å¿—è·¯å¾„è§£æ"><a href="#ğŸ“-åœºæ™¯ä¸€ï¼šæ—¥å¿—è·¯å¾„è§£æ" class="headerlink" title="ğŸ“ åœºæ™¯ä¸€ï¼šæ—¥å¿—è·¯å¾„è§£æ"></a>ğŸ“ åœºæ™¯ä¸€ï¼šæ—¥å¿—è·¯å¾„è§£æ</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">log_path = <span class="hljs-string">&quot;/var/log/app/2024-06-23-error.log&quot;</span><br>filename = log_path.rsplit(<span class="hljs-string">&quot;/&quot;</span>, <span class="hljs-number">1</span>)[-<span class="hljs-number">1</span>]<br><span class="hljs-built_in">print</span>(filename)  <span class="hljs-comment"># è¾“å‡º: &#x27;2024-06-23-error.log&#x27;</span><br></code></pre></td></tr></table></figure><p><strong>ç”¨æ³•è¯´æ˜</strong>ï¼šæå–æ—¥å¿—æ–‡ä»¶åï¼Œé€‚ç”¨äºè‡ªåŠ¨æ‰«æã€å½’æ¡£æ—¥å¿—ç³»ç»Ÿã€‚</p><hr><h3 id="ğŸ“§-åœºæ™¯äºŒï¼šé‚®ç®±è´¦å·æ‹†åˆ†"><a href="#ğŸ“§-åœºæ™¯äºŒï¼šé‚®ç®±è´¦å·æ‹†åˆ†" class="headerlink" title="ğŸ“§ åœºæ™¯äºŒï¼šé‚®ç®±è´¦å·æ‹†åˆ†"></a>ğŸ“§ åœºæ™¯äºŒï¼šé‚®ç®±è´¦å·æ‹†åˆ†</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">email = <span class="hljs-string">&quot;admin@mail.example.com&quot;</span><br>domain = email.rsplit(<span class="hljs-string">&quot;@&quot;</span>, <span class="hljs-number">1</span>)[-<span class="hljs-number">1</span>]<br><span class="hljs-built_in">print</span>(domain)  <span class="hljs-comment"># è¾“å‡º: &#x27;mail.example.com&#x27;</span><br></code></pre></td></tr></table></figure><p><strong>ä¼ä¸šç”¨é€”</strong>ï¼šç”¨äºé‚®ä»¶åŸŸåç™½åå•ã€è´¦å·éªŒè¯ã€é‚®ä»¶åˆ†å‘ç³»ç»Ÿç­‰ã€‚</p><hr><h3 id="ğŸ› ï¸-åœºæ™¯ä¸‰ï¼šç”¨æˆ·æ“ä½œè®°å½•è§£æ"><a href="#ğŸ› ï¸-åœºæ™¯ä¸‰ï¼šç”¨æˆ·æ“ä½œè®°å½•è§£æ" class="headerlink" title="ğŸ› ï¸ åœºæ™¯ä¸‰ï¼šç”¨æˆ·æ“ä½œè®°å½•è§£æ"></a>ğŸ› ï¸ åœºæ™¯ä¸‰ï¼šç”¨æˆ·æ“ä½œè®°å½•è§£æ</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">record = <span class="hljs-string">&quot;æ“ä½œäººID-æ—¶é—´æˆ³-æ“ä½œæè¿°&quot;</span><br><span class="hljs-comment"># ä»…åˆ†å‰²æœ€åä¸¤ä¸ªå­—æ®µ</span><br>user_id, timestamp, description = record.rsplit(<span class="hljs-string">&quot;-&quot;</span>, <span class="hljs-number">2</span>)<br></code></pre></td></tr></table></figure><p><strong>ç”¨é€”</strong>ï¼šåœ¨æ“ä½œè®°å½•ã€å®¡è®¡æ—¥å¿—ä¸­ï¼Œèƒ½å‡†ç¡®æå–ä¸åŒå±‚çº§çš„æ•°æ®ï¼Œé¿å…å‰ç¼€å˜åŒ–å½±å“è§£æã€‚</p><hr><h3 id="ğŸŒ-åœºæ™¯å››ï¼šURL-åå‘è§£æ"><a href="#ğŸŒ-åœºæ™¯å››ï¼šURL-åå‘è§£æ" class="headerlink" title="ğŸŒ åœºæ™¯å››ï¼šURL åå‘è§£æ"></a>ğŸŒ åœºæ™¯å››ï¼šURL åå‘è§£æ</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">url = <span class="hljs-string">&quot;https://example.com/api/v1/resource/12345&quot;</span><br>resource_id = url.rsplit(<span class="hljs-string">&quot;/&quot;</span>, <span class="hljs-number">1</span>)[-<span class="hljs-number">1</span>]<br><span class="hljs-built_in">print</span>(resource_id)  <span class="hljs-comment"># è¾“å‡º: &#x27;12345&#x27;</span><br></code></pre></td></tr></table></figure><p><strong>ç”¨é€”</strong>ï¼šåœ¨çˆ¬è™«ã€æ—¥å¿—è¿½è¸ªã€API è°ƒè¯•æ—¶å¿«é€Ÿæå–èµ„æº IDã€‚</p><hr><h2 id="ğŸ”-äº”ã€æ³¨æ„äº‹é¡¹"><a href="#ğŸ”-äº”ã€æ³¨æ„äº‹é¡¹" class="headerlink" title="ğŸ” äº”ã€æ³¨æ„äº‹é¡¹"></a>ğŸ” äº”ã€æ³¨æ„äº‹é¡¹</h2><ol><li>å¦‚æœ <code>sep</code> ä¸å­˜åœ¨äºå­—ç¬¦ä¸²ä¸­ï¼Œè¿”å›æ•´ä¸ªå­—ç¬¦ä¸²ä¸ºåˆ—è¡¨å…ƒç´ ã€‚</li><li><code>rsplit()</code> å¯¹äº<strong>ä¸ç¡®å®šå‰ç¼€ã€ä½†æ ¼å¼ç¨³å®šçš„åç¼€ç»“æ„</strong>ï¼Œéå¸¸æœ‰ç”¨ã€‚</li><li><code>rsplit()</code> æ¯”æ­£åˆ™æ›´é«˜æ•ˆã€è¯­ä¹‰æ¸…æ™°ï¼Œä¼˜å…ˆä½¿ç”¨ã€‚</li></ol><hr><h2 id="ğŸ§ -å…­ã€æ€»ç»“è®°å¿†"><a href="#ğŸ§ -å…­ã€æ€»ç»“è®°å¿†" class="headerlink" title="ğŸ§  å…­ã€æ€»ç»“è®°å¿†"></a>ğŸ§  å…­ã€æ€»ç»“è®°å¿†</h2><table><thead><tr><th>åŠŸèƒ½</th><th>æ¨èæ–¹æ³•</th></tr></thead><tbody><tr><td>ä»å·¦å‘å³æŒ‰åˆ†éš”ç¬¦æ‹†</td><td><code>split()</code></td></tr><tr><td>ä»å³å‘å·¦æŒ‰åˆ†éš”ç¬¦æ‹†</td><td>âœ… <code>rsplit()</code></td></tr><tr><td>å¯¹äºæ–‡ä»¶è·¯å¾„ã€URLã€æ“ä½œæ—¥å¿—ç­‰â€œå³ä¾§ç»“æ„å›ºå®šâ€çš„ä¸šåŠ¡ï¼Œé¦–é€‰ <code>rsplit()</code></td><td></td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
      <category>Python å¸¸è§å‡½æ•°</category>
      
      <category>Python rsplitå‡½æ•°ç”¨æ³•</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>äº’è”ç½‘å¹¿å‘Šå¸¸è§ç®—æ³•ä»‹ç»</title>
    <link href="/2025/05/15/%E5%B9%BF%E5%91%8A%E7%AE%97%E6%B3%95%E4%BB%8B%E7%BB%8D/"/>
    <url>/2025/05/15/%E5%B9%BF%E5%91%8A%E7%AE%97%E6%B3%95%E4%BB%8B%E7%BB%8D/</url>
    
    <content type="html"><![CDATA[<h1 id="äº’è”ç½‘å¹¿å‘Šå¸¸è§ç®—æ³•ä»‹ç»"><a href="#äº’è”ç½‘å¹¿å‘Šå¸¸è§ç®—æ³•ä»‹ç»" class="headerlink" title="äº’è”ç½‘å¹¿å‘Šå¸¸è§ç®—æ³•ä»‹ç»"></a>äº’è”ç½‘å¹¿å‘Šå¸¸è§ç®—æ³•ä»‹ç»</h1><h2 id="ä¸€ã€å¹¿å‘Šç³»ç»Ÿç®—æ³•æ•´ä½“ç»“æ„"><a href="#ä¸€ã€å¹¿å‘Šç³»ç»Ÿç®—æ³•æ•´ä½“ç»“æ„" class="headerlink" title="ä¸€ã€å¹¿å‘Šç³»ç»Ÿç®—æ³•æ•´ä½“ç»“æ„"></a>ä¸€ã€å¹¿å‘Šç³»ç»Ÿç®—æ³•æ•´ä½“ç»“æ„</h2><p>å¹¿å‘Šç®—æ³•é€šå¸¸åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªé˜¶æ®µï¼š</p><ol><li>â€‹<strong>å¬å›ï¼ˆRecallï¼‰</strong>â€‹ï¼šä»æµ·é‡å¹¿å‘Šä¸­å¿«é€Ÿç­›é€‰å‡ºä¸ç”¨æˆ·æœ€ç›¸å…³çš„ä¸€å°éƒ¨åˆ†å€™é€‰å¹¿å‘Šï¼›</li><li>â€‹<strong>ç²—æ’ï¼ˆç²—ç•¥æ’åºï¼‰</strong>â€‹ï¼šå¯¹å¬å›ç»“æœè¿›è¡Œåˆæ­¥æ’åºï¼Œé™ä½æ’åºè§„æ¨¡ï¼›</li><li>â€‹<strong>ç²¾æ’ï¼ˆç²¾ç»†æ’åºï¼‰</strong>â€‹ï¼šä½¿ç”¨å¤æ‚æ¨¡å‹å¯¹å€™é€‰å¹¿å‘Šç²¾å‡†æ‰“åˆ†ï¼›</li><li>â€‹<strong>é‡æ’ï¼ˆRe-rankingï¼‰</strong>â€‹ï¼šå¼•å…¥å¤šæ ·æ€§ã€æ–°é¢–æ€§ã€ç”¨æˆ·å…´è¶£ç­‰ç‰¹å¾ï¼Œæœ€ç»ˆç¡®å®šå±•ç¤ºé¡ºåºï¼›</li><li>â€‹<strong>ç‚¹å‡»ç‡é¢„ä¼°ï¼ˆCTRï¼‰ã€è½¬åŒ–ç‡é¢„ä¼°ï¼ˆCVRï¼‰</strong>â€‹ï¼šæ’åºæ ¸å¿ƒæ¨¡å‹ã€‚</li></ol><hr><h2 id="ğŸ”-ä¸€ã€å¬å›é˜¶æ®µï¼ˆRecallï¼‰"><a href="#ğŸ”-ä¸€ã€å¬å›é˜¶æ®µï¼ˆRecallï¼‰" class="headerlink" title="ğŸ” ä¸€ã€å¬å›é˜¶æ®µï¼ˆRecallï¼‰"></a>ğŸ” ä¸€ã€å¬å›é˜¶æ®µï¼ˆRecallï¼‰</h2><h3 id="ğŸ¯-ç›®æ ‡ï¼š"><a href="#ğŸ¯-ç›®æ ‡ï¼š" class="headerlink" title="ğŸ¯ ç›®æ ‡ï¼š"></a>ğŸ¯ ç›®æ ‡ï¼š</h3><p>ä»æµ·é‡å¹¿å‘Šä¸­å¿«é€Ÿç­›é€‰å‡ºä¸ç”¨æˆ·æœ€å¯èƒ½æ„Ÿå…´è¶£çš„ä¸€å°éƒ¨åˆ†å€™é€‰å¹¿å‘Šï¼Œå‡å°‘åç»­æ’åºçš„è®¡ç®—é‡ã€‚</p><h3 id="ğŸ§ -å¸¸è§ç®—æ³•ï¼š"><a href="#ğŸ§ -å¸¸è§ç®—æ³•ï¼š" class="headerlink" title="ğŸ§  å¸¸è§ç®—æ³•ï¼š"></a>ğŸ§  å¸¸è§ç®—æ³•ï¼š</h3><h4 id="1-åŸºäºå†…å®¹çš„å¬å›ï¼ˆContent-Based-Recallï¼‰"><a href="#1-åŸºäºå†…å®¹çš„å¬å›ï¼ˆContent-Based-Recallï¼‰" class="headerlink" title="1. åŸºäºå†…å®¹çš„å¬å›ï¼ˆContent-Based Recallï¼‰"></a>1. åŸºäºå†…å®¹çš„å¬å›ï¼ˆContent-Based Recallï¼‰</h4><p>â€‹<strong>åŸç†</strong>â€‹ï¼šæ ¹æ®å¹¿å‘Šä¸ç”¨æˆ·ç‰¹å¾çš„ç›¸ä¼¼æ€§è¿›è¡Œå¬å›ï¼Œä¾‹å¦‚å…³é”®è¯ã€ç±»åˆ«ã€å‘é‡è¡¨ç¤ºã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> sklearn.metrics.pairwise <span class="hljs-keyword">import</span> cosine_similarity<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br><span class="hljs-comment"># å‡è®¾ç”¨æˆ·å’Œå¹¿å‘Šå‘é‡ä¸º 300 ç»´</span><br>user_vector = np.random.rand(<span class="hljs-number">1</span>, <span class="hljs-number">300</span>)<br>ad_vectors = np.random.rand(<span class="hljs-number">1000</span>, <span class="hljs-number">300</span>)  <span class="hljs-comment"># å‡è®¾ 1000 ä¸ªå¹¿å‘Š</span><br><br><span class="hljs-comment"># è®¡ç®—ç”¨æˆ·ä¸æ‰€æœ‰å¹¿å‘Šçš„ç›¸ä¼¼åº¦</span><br>similarities = cosine_similarity(user_vector, ad_vectors)[<span class="hljs-number">0</span>]<br><br><span class="hljs-comment"># å–å‰ 50 ä¸ªæœ€ç›¸ä¼¼çš„å¹¿å‘Šç´¢å¼•</span><br>top_k_indices = similarities.argsort()[-<span class="hljs-number">50</span>:][::-<span class="hljs-number">1</span>]<br><br><span class="hljs-comment"># è¾“å‡ºå¬å›ç»“æœ</span><br>recall_ads = [<span class="hljs-string">f&quot;ad_<span class="hljs-subst">&#123;i&#125;</span>&quot;</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> top_k_indices]<br></code></pre></td></tr></table></figure><hr><h4 id="2-ååŒè¿‡æ»¤ï¼ˆCollaborative-Filteringï¼‰"><a href="#2-ååŒè¿‡æ»¤ï¼ˆCollaborative-Filteringï¼‰" class="headerlink" title="2. ååŒè¿‡æ»¤ï¼ˆCollaborative Filteringï¼‰"></a>2. ååŒè¿‡æ»¤ï¼ˆCollaborative Filteringï¼‰</h4><p>â€‹<strong>åŸç†</strong>â€‹ï¼šåŸºäºå†å²ç‚¹å‡»è¡Œä¸ºï¼ŒæŒ–æ˜ç”¨æˆ·-å¹¿å‘Šä¹‹é—´çš„åå¥½å…³ç³»ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> surprise <span class="hljs-keyword">import</span> Dataset, SVD<br><span class="hljs-keyword">from</span> surprise.model_selection <span class="hljs-keyword">import</span> train_test_split<br><br><span class="hljs-comment"># å‡è®¾å·²æœ‰ (user, ad, interaction) çš„è¡Œä¸ºæ•°æ®</span><br>data = Dataset.load_builtin(<span class="hljs-string">&#x27;ml-100k&#x27;</span>)  <span class="hljs-comment"># å®é™…åº”ç”¨ä¸­ä¸ºå¹¿å‘Šæ•°æ®</span><br>trainset, testset = train_test_split(data, test_size=<span class="hljs-number">0.2</span>)<br><br>model = SVD()<br>model.fit(trainset)<br><br><span class="hljs-comment"># æ¨èå¹¿å‘Šç»™æŸç”¨æˆ·</span><br>uid = <span class="hljs-built_in">str</span>(<span class="hljs-number">196</span>)  <span class="hljs-comment"># ç¤ºä¾‹ç”¨æˆ·</span><br>ad_candidates = [<span class="hljs-string">&#x27;101&#x27;</span>, <span class="hljs-string">&#x27;102&#x27;</span>, <span class="hljs-string">&#x27;103&#x27;</span>]  <span class="hljs-comment"># ç¤ºä¾‹å¹¿å‘Š ID</span><br>results = [(iid, model.predict(uid, iid).est) <span class="hljs-keyword">for</span> iid <span class="hljs-keyword">in</span> ad_candidates]<br><br><span class="hljs-comment"># æŒ‰è¯„åˆ†æ’åº</span><br>sorted_results = <span class="hljs-built_in">sorted</span>(results, key=<span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">1</span>], reverse=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure><hr><h2 id="ğŸ§®-äºŒã€ç²—æ’ï¼ˆåˆæ­¥æ’åºï¼‰"><a href="#ğŸ§®-äºŒã€ç²—æ’ï¼ˆåˆæ­¥æ’åºï¼‰" class="headerlink" title="ğŸ§® äºŒã€ç²—æ’ï¼ˆåˆæ­¥æ’åºï¼‰"></a>ğŸ§® äºŒã€ç²—æ’ï¼ˆåˆæ­¥æ’åºï¼‰</h2><h3 id="ğŸ¯-ç›®æ ‡ï¼š-1"><a href="#ğŸ¯-ç›®æ ‡ï¼š-1" class="headerlink" title="ğŸ¯ ç›®æ ‡ï¼š"></a>ğŸ¯ ç›®æ ‡ï¼š</h3><p>å¯¹å¬å›ç»“æœè¿›è¡Œç¬¬ä¸€è½®æ’åºï¼Œé€šå¸¸æ¨¡å‹è¾ƒè½»é‡ï¼Œå¿«é€Ÿæ‰“åˆ†ã€‚</p><h3 id="ğŸ§ -å¸¸è§ç®—æ³•ï¼š-1"><a href="#ğŸ§ -å¸¸è§ç®—æ³•ï¼š-1" class="headerlink" title="ğŸ§  å¸¸è§ç®—æ³•ï¼š"></a>ğŸ§  å¸¸è§ç®—æ³•ï¼š</h3><h4 id="1-Logistic-Regressionï¼ˆCTR-ç²—æ’ï¼‰"><a href="#1-Logistic-Regressionï¼ˆCTR-ç²—æ’ï¼‰" class="headerlink" title="1. Logistic Regressionï¼ˆCTR ç²—æ’ï¼‰"></a>1. Logistic Regressionï¼ˆCTR ç²—æ’ï¼‰</h4><p>â€‹<strong>åŸç†</strong>â€‹ï¼šè®­ç»ƒä¸€ä¸ªäºŒåˆ†ç±»æ¨¡å‹åˆ¤æ–­ç‚¹å‡»æ¦‚ç‡ï¼ˆCTRï¼‰ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br><span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> LogisticRegression<br><span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> train_test_split<br><br><span class="hljs-comment"># ç¤ºä¾‹ç‰¹å¾ï¼šå¹´é¾„ã€æ€§åˆ«ã€å¹¿å‘Šç±»åˆ«ç­‰</span><br>data = pd.read_csv(<span class="hljs-string">&#x27;ad_click_data.csv&#x27;</span>)<br>X = data[[<span class="hljs-string">&#x27;user_age&#x27;</span>, <span class="hljs-string">&#x27;ad_category&#x27;</span>, <span class="hljs-string">&#x27;is_male&#x27;</span>]]<br>y = data[<span class="hljs-string">&#x27;clicked&#x27;</span>]<br><br><span class="hljs-comment"># æ‹Ÿåˆæ¨¡å‹</span><br>X_train, X_test, y_train, y_test = train_test_split(X, y)<br>model = LogisticRegression()<br>model.fit(X_train, y_train)<br><br><span class="hljs-comment"># é¢„æµ‹å€™é€‰å¹¿å‘Šç‚¹å‡»æ¦‚ç‡</span><br>y_pred_prob = model.predict_proba(X_test)[:, <span class="hljs-number">1</span>]<br></code></pre></td></tr></table></figure><hr><h2 id="ğŸ§ -ä¸‰ã€ç²¾æ’-é‡æ’ï¼ˆFine-Rankingï¼‰"><a href="#ğŸ§ -ä¸‰ã€ç²¾æ’-é‡æ’ï¼ˆFine-Rankingï¼‰" class="headerlink" title="ğŸ§  ä¸‰ã€ç²¾æ’&#x2F;é‡æ’ï¼ˆFine Rankingï¼‰"></a>ğŸ§  ä¸‰ã€ç²¾æ’&#x2F;é‡æ’ï¼ˆFine Rankingï¼‰</h2><h3 id="ğŸ¯-ç›®æ ‡ï¼š-2"><a href="#ğŸ¯-ç›®æ ‡ï¼š-2" class="headerlink" title="ğŸ¯ ç›®æ ‡ï¼š"></a>ğŸ¯ ç›®æ ‡ï¼š</h3><p>ä½¿ç”¨æ›´å¤æ‚æ¨¡å‹å¯¹å€™é€‰å¹¿å‘Šæ‰“åˆ†æ’åºï¼Œå®ç°ç²¾å‡†æŠ•æ”¾ã€‚</p><h3 id="ğŸ§ -å¸¸è§ç®—æ³•ï¼š-2"><a href="#ğŸ§ -å¸¸è§ç®—æ³•ï¼š-2" class="headerlink" title="ğŸ§  å¸¸è§ç®—æ³•ï¼š"></a>ğŸ§  å¸¸è§ç®—æ³•ï¼š</h3><h4 id="1-XGBoost-æ’åºæ¨¡å‹"><a href="#1-XGBoost-æ’åºæ¨¡å‹" class="headerlink" title="1. XGBoost æ’åºæ¨¡å‹"></a>1. XGBoost æ’åºæ¨¡å‹</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> xgboost <span class="hljs-keyword">as</span> xgb<br><br><span class="hljs-comment"># å‡è®¾æœ‰ç”¨æˆ·å¹¿å‘Šäº¤äº’ç‰¹å¾ä»¥åŠæ ‡ç­¾</span><br>X = data[[<span class="hljs-string">&#x27;user_age&#x27;</span>, <span class="hljs-string">&#x27;ad_category&#x27;</span>, <span class="hljs-string">&#x27;ad_price&#x27;</span>]]<br>y = data[<span class="hljs-string">&#x27;clicked&#x27;</span>]<br><br>dtrain = xgb.DMatrix(X, label=y)<br>params = &#123;<br>    <span class="hljs-string">&#x27;objective&#x27;</span>: <span class="hljs-string">&#x27;binary:logistic&#x27;</span>,<br>    <span class="hljs-string">&#x27;eval_metric&#x27;</span>: <span class="hljs-string">&#x27;logloss&#x27;</span>,<br>    <span class="hljs-string">&#x27;max_depth&#x27;</span>: <span class="hljs-number">6</span>,<br>    <span class="hljs-string">&#x27;eta&#x27;</span>: <span class="hljs-number">0.1</span><br>&#125;<br><br>bst = xgb.train(params, dtrain, num_boost_round=<span class="hljs-number">100</span>)<br><br><span class="hljs-comment"># é¢„æµ‹æ‰“åˆ†</span><br>scores = bst.predict(dtrain)<br></code></pre></td></tr></table></figure><hr><h4 id="2-DeepFM-DINï¼ˆé€‚åˆå¤§è§„æ¨¡å·¥ä¸šæ¨èç³»ç»Ÿï¼‰"><a href="#2-DeepFM-DINï¼ˆé€‚åˆå¤§è§„æ¨¡å·¥ä¸šæ¨èç³»ç»Ÿï¼‰" class="headerlink" title="2. DeepFM &#x2F; DINï¼ˆé€‚åˆå¤§è§„æ¨¡å·¥ä¸šæ¨èç³»ç»Ÿï¼‰"></a>2. DeepFM &#x2F; DINï¼ˆé€‚åˆå¤§è§„æ¨¡å·¥ä¸šæ¨èç³»ç»Ÿï¼‰</h4><p>â€‹<strong>è¯´æ˜</strong>â€‹ï¼šèåˆäº†ç‰¹å¾ç»„åˆå’Œæ·±åº¦ç¥ç»ç½‘ç»œï¼Œèƒ½æ•æ‰å¤æ‚çš„éçº¿æ€§äº¤äº’å…³ç³»ã€‚</p><p>ä½¿ç”¨ TensorFlow æˆ– PyTorch å®ç°ï¼Œæ¶‰åŠç‰¹å¾åµŒå…¥ï¼ˆEmbeddingï¼‰ã€å¤šå¡”ç»“æ„ç­‰ã€‚</p><p>ç®€è¦ä¼ªä»£ç ç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># DeepFM ç»“æ„ç®€å›¾ï¼š</span><br><span class="hljs-comment"># 1. Sparse embedding å±‚</span><br><span class="hljs-comment"># 2. FM ç»„ä»¶å¤„ç†ç‰¹å¾ç»„åˆ</span><br><span class="hljs-comment"># 3. DNN å±‚å¤„ç†é«˜é˜¶ç‰¹å¾äº¤å‰</span><br><span class="hljs-comment"># 4. è¾“å‡ºå±‚ä¸º CTR/Score</span><br><br><span class="hljs-comment"># æ¨èä½¿ç”¨ç°æˆæ¡†æ¶å¦‚ DeepCTRï¼ˆhttps://github.com/shenweichen/DeepCTRï¼‰</span><br></code></pre></td></tr></table></figure><hr><h2 id="ğŸ§¾-å››ã€é‡æ’ç­–ç•¥ï¼ˆRerankï¼‰"><a href="#ğŸ§¾-å››ã€é‡æ’ç­–ç•¥ï¼ˆRerankï¼‰" class="headerlink" title="ğŸ§¾ å››ã€é‡æ’ç­–ç•¥ï¼ˆRerankï¼‰"></a>ğŸ§¾ å››ã€é‡æ’ç­–ç•¥ï¼ˆRerankï¼‰</h2><h3 id="ğŸ¯-ç›®æ ‡ï¼š-3"><a href="#ğŸ¯-ç›®æ ‡ï¼š-3" class="headerlink" title="ğŸ¯ ç›®æ ‡ï¼š"></a>ğŸ¯ ç›®æ ‡ï¼š</h3><p>è€ƒè™‘ä¸šåŠ¡ç›®æ ‡ï¼ˆç‚¹å‡»ç‡ã€è½¬åŒ–ç‡ã€GMVã€æ›å…‰å…¬å¹³æ€§ç­‰ï¼‰è¿›è¡Œç²¾ç»†è°ƒæ§ã€‚</p><h4 id="ç¤ºä¾‹ï¼šç‚¹å‡»è½¬åŒ–æ··åˆç›®æ ‡-å¤šç›®æ ‡é‡æ’"><a href="#ç¤ºä¾‹ï¼šç‚¹å‡»è½¬åŒ–æ··åˆç›®æ ‡-å¤šç›®æ ‡é‡æ’" class="headerlink" title="ç¤ºä¾‹ï¼šç‚¹å‡»è½¬åŒ–æ··åˆç›®æ ‡ + å¤šç›®æ ‡é‡æ’"></a>ç¤ºä¾‹ï¼šç‚¹å‡»è½¬åŒ–æ··åˆç›®æ ‡ + å¤šç›®æ ‡é‡æ’</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># ç®€åŒ–ç‰ˆç­–ç•¥åˆ†æ•°</span><br>final_score = <span class="hljs-number">0.7</span> * predicted_ctr + <span class="hljs-number">0.3</span> * predicted_cvr<br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯å¼•å…¥ multi-objective rankingï¼Œæ¯”å¦‚ï¼š</p><ul><li>ä½¿ç”¨å¼ºåŒ–å­¦ä¹ å­¦ä¹ æ’åºç­–ç•¥ï¼ˆRL Rankingï¼‰</li><li>ä½¿ç”¨ A&#x2F;B å®éªŒè°ƒèŠ‚æƒé‡æ¯”ä¾‹</li></ul><hr><h2 id="äº”ã€CTRé¢„ä¼°ï¼ˆç‚¹å‡»ç‡é¢„æµ‹ï¼‰"><a href="#äº”ã€CTRé¢„ä¼°ï¼ˆç‚¹å‡»ç‡é¢„æµ‹ï¼‰" class="headerlink" title="äº”ã€CTRé¢„ä¼°ï¼ˆç‚¹å‡»ç‡é¢„æµ‹ï¼‰"></a>äº”ã€CTRé¢„ä¼°ï¼ˆç‚¹å‡»ç‡é¢„æµ‹ï¼‰</h2><p>CTR æ˜¯æ’åºæ ¸å¿ƒï¼Œæ·±åº¦å­¦ä¹ ï¼ˆå¦‚ DNNã€Wide&amp;Deepã€DeepFMï¼‰åœ¨å·¥ä¸šç•Œå¹¿æ³›ä½¿ç”¨ã€‚</p><h3 id="DNN-CTR-æ¨¡å‹ç»“æ„ç®€ä»‹ï¼ˆä¼ªä»£ç ï¼‰"><a href="#DNN-CTR-æ¨¡å‹ç»“æ„ç®€ä»‹ï¼ˆä¼ªä»£ç ï¼‰" class="headerlink" title="DNN CTR æ¨¡å‹ç»“æ„ç®€ä»‹ï¼ˆä¼ªä»£ç ï¼‰"></a>DNN CTR æ¨¡å‹ç»“æ„ç®€ä»‹ï¼ˆä¼ªä»£ç ï¼‰</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> torch.nn <span class="hljs-keyword">as</span> nn<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleCTRModel</span>(nn.Module):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">super</span>(SimpleCTRModel, self).__init__()<br>        self.model = nn.Sequential(<br>            nn.Linear(<span class="hljs-number">10</span>, <span class="hljs-number">64</span>),<br>            nn.ReLU(),<br>            nn.Linear(<span class="hljs-number">64</span>, <span class="hljs-number">1</span>),<br>            nn.Sigmoid()<br>        )<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):<br>        <span class="hljs-keyword">return</span> self.model(x)<br></code></pre></td></tr></table></figure><h2 id="âœ…-æ€»ç»“"><a href="#âœ…-æ€»ç»“" class="headerlink" title="âœ… æ€»ç»“"></a>âœ… æ€»ç»“</h2><table><thead><tr><th>é˜¶æ®µ</th><th>ç›®æ ‡</th><th>å¸¸ç”¨æ–¹æ³•</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>å¬å›</td><td>å¿«é€Ÿç¼©å°å€™é€‰</td><td>ååŒè¿‡æ»¤ã€å†…å®¹åŒ¹é…</td><td>å¿«é€Ÿç²—ç²’åº¦</td></tr><tr><td>ç²—æ’</td><td>åˆæ­¥æ’åº</td><td>LRã€GDBT</td><td>æ¨¡å‹è½»é‡ï¼Œå¯å®æ—¶è®¡ç®—</td></tr><tr><td>ç²¾æ’</td><td>ç²¾ç»†æ‰“åˆ†</td><td>XGBoostã€DeepFM</td><td>å¤æ‚æ¨¡å‹ï¼Œæ•ˆæœæœ€å…³é”®</td></tr><tr><td>é‡æ’</td><td>æˆ˜ç•¥æ’åº</td><td>å¤šç›®æ ‡èåˆç­–ç•¥</td><td>å¹³è¡¡è½¬åŒ–ã€ç‚¹å‡»ã€GMV ç­‰ç›®æ ‡</td></tr><tr><td>CTR&#x2F;CVR</td><td>æ’åºæ ¸å¿ƒæ¨¡å‹</td><td>Wide&amp;Deepã€DeepFM</td><td>é«˜ç»´ç»„åˆç‰¹å¾å»ºæ¨¡</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>æµ‹è¯•å¸¸è§é—®é¢˜</category>
      
      <category>å¹¿å‘Šæµ‹è¯•</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>å¹¿å‘Šæµ‹è¯•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä¸€æ–‡è®²æ˜ç™½ Python é€’å½’</title>
    <link href="/2025/05/15/python%E9%80%92%E5%BD%92/"/>
    <url>/2025/05/15/python%E9%80%92%E5%BD%92/</url>
    
    <content type="html"><![CDATA[<h1 id="ä¸€æ–‡è®²æ˜ç™½-Python-çš„é€’å½’"><a href="#ä¸€æ–‡è®²æ˜ç™½-Python-çš„é€’å½’" class="headerlink" title="ä¸€æ–‡è®²æ˜ç™½ Python çš„é€’å½’"></a>ä¸€æ–‡è®²æ˜ç™½ Python çš„é€’å½’</h1><h2 id="ä¸€ã€ğŸ“Œ-ä»€ä¹ˆæ˜¯é€’å½’ï¼Ÿ"><a href="#ä¸€ã€ğŸ“Œ-ä»€ä¹ˆæ˜¯é€’å½’ï¼Ÿ" class="headerlink" title="ä¸€ã€ğŸ“Œ ä»€ä¹ˆæ˜¯é€’å½’ï¼Ÿ"></a>ä¸€ã€ğŸ“Œ ä»€ä¹ˆæ˜¯é€’å½’ï¼Ÿ</h2><p>é€’å½’ï¼ˆRecursionï¼‰æ˜¯æŒ‡åœ¨å‡½æ•°å†…éƒ¨è°ƒç”¨è‡ªå·±æœ¬èº«çš„ç¼–ç¨‹æŠ€å·§ã€‚å®ƒé€šå¸¸ç”¨äºè§£å†³å¯ä»¥åˆ†è§£ä¸ºå­é—®é¢˜çš„é—®é¢˜ï¼Œæ¯”å¦‚æ ‘ç»“æ„ã€å›¾éå†ç­‰ã€‚</p><blockquote><p>ç®€å•ç†è§£ï¼šä¸€ä¸ªé—®é¢˜çš„è§£ä¾èµ–äºå®ƒæ›´å°è§„æ¨¡çš„å­é—®é¢˜çš„è§£ã€‚</p></blockquote><hr><h2 id="äºŒã€ğŸ§ -é€’å½’çš„åŸºæœ¬ç»“æ„"><a href="#äºŒã€ğŸ§ -é€’å½’çš„åŸºæœ¬ç»“æ„" class="headerlink" title="äºŒã€ğŸ§  é€’å½’çš„åŸºæœ¬ç»“æ„"></a>äºŒã€ğŸ§  é€’å½’çš„åŸºæœ¬ç»“æ„</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">recursive_function</span>(<span class="hljs-params">parameters</span>):<br>    <span class="hljs-keyword">if</span> termination_condition:<br>        <span class="hljs-keyword">return</span> result  <span class="hljs-comment"># ç»ˆæ­¢æ¡ä»¶ï¼Œé˜²æ­¢æ— é™è°ƒç”¨</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> recursive_function(smaller_parameters)<br></code></pre></td></tr></table></figure><h3 id="âœ…-å¿…é¡»åŒ…å«ï¼š"><a href="#âœ…-å¿…é¡»åŒ…å«ï¼š" class="headerlink" title="âœ… å¿…é¡»åŒ…å«ï¼š"></a>âœ… å¿…é¡»åŒ…å«ï¼š</h3><ol><li><strong>ç»ˆæ­¢æ¡ä»¶ï¼ˆBase Caseï¼‰</strong></li><li><strong>é€’å½’è°ƒç”¨ï¼ˆRecursive Caseï¼‰</strong></li></ol><hr><h2 id="ä¸‰ã€ğŸŒ±-æ–°æ‰‹å…¥é—¨ï¼šç»å…¸æ¡ˆä¾‹ç¤ºä¾‹"><a href="#ä¸‰ã€ğŸŒ±-æ–°æ‰‹å…¥é—¨ï¼šç»å…¸æ¡ˆä¾‹ç¤ºä¾‹" class="headerlink" title="ä¸‰ã€ğŸŒ± æ–°æ‰‹å…¥é—¨ï¼šç»å…¸æ¡ˆä¾‹ç¤ºä¾‹"></a>ä¸‰ã€ğŸŒ± æ–°æ‰‹å…¥é—¨ï¼šç»å…¸æ¡ˆä¾‹ç¤ºä¾‹</h2><h3 id="1-é˜¶ä¹˜è®¡ç®—"><a href="#1-é˜¶ä¹˜è®¡ç®—" class="headerlink" title="1. é˜¶ä¹˜è®¡ç®—"></a>1. é˜¶ä¹˜è®¡ç®—</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">factorial</span>(<span class="hljs-params">n</span>):<br>    <span class="hljs-keyword">if</span> n == <span class="hljs-number">1</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>  <span class="hljs-comment"># åŸºæœ¬æƒ…å†µ</span><br>    <span class="hljs-keyword">return</span> n * factorial(n - <span class="hljs-number">1</span>)  <span class="hljs-comment"># é€’å½’è°ƒç”¨</span><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(factorial(<span class="hljs-number">5</span>))  <span class="hljs-comment"># è¾“å‡º 120</span><br></code></pre></td></tr></table></figure><h3 id="2-æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼ˆæ¼”ç¤ºé€’å½’çš„æ•ˆç‡ç“¶é¢ˆï¼‰"><a href="#2-æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼ˆæ¼”ç¤ºé€’å½’çš„æ•ˆç‡ç“¶é¢ˆï¼‰" class="headerlink" title="2. æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼ˆæ¼”ç¤ºé€’å½’çš„æ•ˆç‡ç“¶é¢ˆï¼‰"></a>2. æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼ˆæ¼”ç¤ºé€’å½’çš„æ•ˆç‡ç“¶é¢ˆï¼‰</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">fibonacci</span>(<span class="hljs-params">n</span>):<br>    <span class="hljs-keyword">if</span> n &lt;= <span class="hljs-number">1</span>:<br>        <span class="hljs-keyword">return</span> n<br>    <span class="hljs-keyword">return</span> fibonacci(n - <span class="hljs-number">1</span>) + fibonacci(n - <span class="hljs-number">2</span>)<br></code></pre></td></tr></table></figure><blockquote><p>â— è¯¥æ–¹æ³•æ•ˆç‡ä½ï¼Œé€‚åˆç”¨æ¥æ¼”ç¤ºâ€œé‡å å­é—®é¢˜â€çš„åœºæ™¯ã€‚</p></blockquote><hr><h2 id="å››ã€ğŸ”-é€’å½’çš„åº”ç”¨åœºæ™¯ï¼ˆä¼ä¸šçº§å®æˆ˜ï¼‰"><a href="#å››ã€ğŸ”-é€’å½’çš„åº”ç”¨åœºæ™¯ï¼ˆä¼ä¸šçº§å®æˆ˜ï¼‰" class="headerlink" title="å››ã€ğŸ” é€’å½’çš„åº”ç”¨åœºæ™¯ï¼ˆä¼ä¸šçº§å®æˆ˜ï¼‰"></a>å››ã€ğŸ” é€’å½’çš„åº”ç”¨åœºæ™¯ï¼ˆä¼ä¸šçº§å®æˆ˜ï¼‰</h2><h3 id="ç¤ºä¾‹1ï¼šğŸ“‚-éå†åµŒå¥—æ–‡ä»¶å¤¹ç»“æ„"><a href="#ç¤ºä¾‹1ï¼šğŸ“‚-éå†åµŒå¥—æ–‡ä»¶å¤¹ç»“æ„" class="headerlink" title="ç¤ºä¾‹1ï¼šğŸ“‚ éå†åµŒå¥—æ–‡ä»¶å¤¹ç»“æ„"></a>ç¤ºä¾‹1ï¼šğŸ“‚ éå†åµŒå¥—æ–‡ä»¶å¤¹ç»“æ„</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">traverse_directory</span>(<span class="hljs-params">path</span>):<br>    <span class="hljs-keyword">for</span> entry <span class="hljs-keyword">in</span> os.listdir(path):<br>        full_path = os.path.join(path, entry)<br>        <span class="hljs-keyword">if</span> os.path.isdir(full_path):<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ğŸ“ ç›®å½•ï¼š&quot;</span>, full_path)<br>            traverse_directory(full_path)  <span class="hljs-comment"># é€’å½’è¿›å…¥å­ç›®å½•</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ğŸ“„ æ–‡ä»¶ï¼š&quot;</span>, full_path)<br></code></pre></td></tr></table></figure><p>ğŸ“Œ å®ç”¨åœºæ™¯ï¼šä¼ä¸šç³»ç»Ÿè‡ªåŠ¨éƒ¨ç½²ã€æ—¥å¿—æ‰¹å¤„ç†ã€å…¨ç›˜æœç´¢ç­‰ã€‚</p><hr><h3 id="ç¤ºä¾‹2ï¼šğŸŒ³-æ ‘å½¢ç»„ç»‡æ¶æ„æ•°æ®è§£æï¼ˆJSONæ ¼å¼ï¼‰"><a href="#ç¤ºä¾‹2ï¼šğŸŒ³-æ ‘å½¢ç»„ç»‡æ¶æ„æ•°æ®è§£æï¼ˆJSONæ ¼å¼ï¼‰" class="headerlink" title="ç¤ºä¾‹2ï¼šğŸŒ³ æ ‘å½¢ç»„ç»‡æ¶æ„æ•°æ®è§£æï¼ˆJSONæ ¼å¼ï¼‰"></a>ç¤ºä¾‹2ï¼šğŸŒ³ æ ‘å½¢ç»„ç»‡æ¶æ„æ•°æ®è§£æï¼ˆJSONæ ¼å¼ï¼‰</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python">org_chart = &#123;<br>    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;CEO&quot;</span>,<br>    <span class="hljs-string">&quot;children&quot;</span>: [<br>        &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;CTO&quot;</span>, <span class="hljs-string">&quot;children&quot;</span>: [<br>            &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Dev Manager&quot;</span>, <span class="hljs-string">&quot;children&quot;</span>: []&#125;<br>        ]&#125;,<br>        &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;CFO&quot;</span>, <span class="hljs-string">&quot;children&quot;</span>: []&#125;<br>    ]<br>&#125;<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">print_org_chart</span>(<span class="hljs-params">node, level=<span class="hljs-number">0</span></span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;  &quot;</span> * level + <span class="hljs-string">f&quot;ğŸ‘¤ <span class="hljs-subst">&#123;node[<span class="hljs-string">&#x27;name&#x27;</span>]&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">for</span> child <span class="hljs-keyword">in</span> node.get(<span class="hljs-string">&quot;children&quot;</span>, []):<br>        print_org_chart(child, level + <span class="hljs-number">1</span>)<br><br>print_org_chart(org_chart)<br></code></pre></td></tr></table></figure><p>ğŸ“Œ å®ç”¨åœºæ™¯ï¼šä¼ä¸šHRç³»ç»Ÿç»„ç»‡ç®¡ç†ã€åå°æƒé™æ ‘ã€èœå•æ ‘ç­‰ã€‚</p><hr><h3 id="ç¤ºä¾‹3ï¼šğŸ§¾-é€’å½’è®¡ç®—è®¢å•æ˜ç»†çš„æ€»ä»·ï¼ˆåµŒå¥—ç»“æ„ï¼‰"><a href="#ç¤ºä¾‹3ï¼šğŸ§¾-é€’å½’è®¡ç®—è®¢å•æ˜ç»†çš„æ€»ä»·ï¼ˆåµŒå¥—ç»“æ„ï¼‰" class="headerlink" title="ç¤ºä¾‹3ï¼šğŸ§¾ é€’å½’è®¡ç®—è®¢å•æ˜ç»†çš„æ€»ä»·ï¼ˆåµŒå¥—ç»“æ„ï¼‰"></a>ç¤ºä¾‹3ï¼šğŸ§¾ é€’å½’è®¡ç®—è®¢å•æ˜ç»†çš„æ€»ä»·ï¼ˆåµŒå¥—ç»“æ„ï¼‰</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python">order = &#123;<br>    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;å¥—é¤A&quot;</span>,<br>    <span class="hljs-string">&quot;price&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-string">&quot;items&quot;</span>: [<br>        &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;æ±‰å ¡&quot;</span>, <span class="hljs-string">&quot;price&quot;</span>: <span class="hljs-number">20</span>&#125;,<br>        &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;é…èœ&quot;</span>, <span class="hljs-string">&quot;price&quot;</span>: <span class="hljs-number">0</span>, <span class="hljs-string">&quot;items&quot;</span>: [<br>            &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;è–¯æ¡&quot;</span>, <span class="hljs-string">&quot;price&quot;</span>: <span class="hljs-number">10</span>&#125;,<br>            &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;é¸¡ç¿…&quot;</span>, <span class="hljs-string">&quot;price&quot;</span>: <span class="hljs-number">12</span>&#125;<br>        ]&#125;<br>    ]<br>&#125;<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">calc_price</span>(<span class="hljs-params">item</span>):<br>    total = item.get(<span class="hljs-string">&quot;price&quot;</span>, <span class="hljs-number">0</span>)<br>    <span class="hljs-keyword">for</span> sub <span class="hljs-keyword">in</span> item.get(<span class="hljs-string">&quot;items&quot;</span>, []):<br>        total += calc_price(sub)<br>    <span class="hljs-keyword">return</span> total<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æ€»ä»·ï¼šÂ¥&quot;</span>, calc_price(order))  <span class="hljs-comment"># è¾“å‡ºï¼šÂ¥42</span><br></code></pre></td></tr></table></figure><p>ğŸ“Œ å®ç”¨åœºæ™¯ï¼šERPç³»ç»Ÿã€å•†å“æ‰“åŒ…å¥—é¤ç³»ç»Ÿç­‰ã€‚</p><hr><h2 id="äº”ã€â›ï¸-å¸¸è§é—®é¢˜åŠä¼˜åŒ–"><a href="#äº”ã€â›ï¸-å¸¸è§é—®é¢˜åŠä¼˜åŒ–" class="headerlink" title="äº”ã€â›ï¸ å¸¸è§é—®é¢˜åŠä¼˜åŒ–"></a>äº”ã€â›ï¸ å¸¸è§é—®é¢˜åŠä¼˜åŒ–</h2><h3 id="â“-é—®é¢˜1ï¼šæ ˆæº¢å‡ºï¼ˆRecursionErrorï¼‰"><a href="#â“-é—®é¢˜1ï¼šæ ˆæº¢å‡ºï¼ˆRecursionErrorï¼‰" class="headerlink" title="â“ é—®é¢˜1ï¼šæ ˆæº¢å‡ºï¼ˆRecursionErrorï¼‰"></a>â“ é—®é¢˜1ï¼šæ ˆæº¢å‡ºï¼ˆRecursionErrorï¼‰</h3><ul><li>é»˜è®¤é€’å½’æ·±åº¦ï¼š1000ï¼ˆå¯é€šè¿‡ <code>sys.setrecursionlimit</code> ä¿®æ”¹ï¼‰</li></ul><h3 id="â“-é—®é¢˜2ï¼šé‡å¤è®¡ç®—ï¼ˆå¦‚-Fibonacciï¼‰"><a href="#â“-é—®é¢˜2ï¼šé‡å¤è®¡ç®—ï¼ˆå¦‚-Fibonacciï¼‰" class="headerlink" title="â“ é—®é¢˜2ï¼šé‡å¤è®¡ç®—ï¼ˆå¦‚ Fibonacciï¼‰"></a>â“ é—®é¢˜2ï¼šé‡å¤è®¡ç®—ï¼ˆå¦‚ Fibonacciï¼‰</h3><ul><li>âœ… å¯ä½¿ç”¨ â€‹<strong>ç¼“å­˜ä¼˜åŒ–</strong>â€‹ï¼ˆå¦‚ï¼š<code>functools.lru_cache</code>ï¼‰</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> lru_cache<br><br><span class="hljs-meta">@lru_cache()</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">fibonacci</span>(<span class="hljs-params">n</span>):<br>    <span class="hljs-keyword">if</span> n &lt;= <span class="hljs-number">1</span>:<br>        <span class="hljs-keyword">return</span> n<br>    <span class="hljs-keyword">return</span> fibonacci(n - <span class="hljs-number">1</span>) + fibonacci(n - <span class="hljs-number">2</span>)<br></code></pre></td></tr></table></figure><hr><h2 id="å…­ã€âš™ï¸-ä¼ä¸šå®æˆ˜ä¸­ä½¿ç”¨é€’å½’çš„æŠ€å·§æ€»ç»“"><a href="#å…­ã€âš™ï¸-ä¼ä¸šå®æˆ˜ä¸­ä½¿ç”¨é€’å½’çš„æŠ€å·§æ€»ç»“" class="headerlink" title="å…­ã€âš™ï¸ ä¼ä¸šå®æˆ˜ä¸­ä½¿ç”¨é€’å½’çš„æŠ€å·§æ€»ç»“"></a>å…­ã€âš™ï¸ ä¼ä¸šå®æˆ˜ä¸­ä½¿ç”¨é€’å½’çš„æŠ€å·§æ€»ç»“</h2><table><thead><tr><th>æŠ€å·§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>âœ… è®¾å®šç»ˆæ­¢æ¡ä»¶</td><td>é˜²æ­¢æ­»å¾ªç¯æˆ–æ ˆæº¢å‡º</td></tr><tr><td>âœ… æ·»åŠ ç¼“å­˜</td><td>æå‡æ€§èƒ½ï¼ˆå¦‚åŠ¨æ€è§„åˆ’+å¤‡å¿˜å½•ï¼‰</td></tr><tr><td>âœ… ä½¿ç”¨å°¾é€’å½’&#x2F;è½¬å¾ªç¯</td><td>Pythonä¸ä¼˜åŒ–å°¾é€’å½’ï¼Œå¿…è¦æ—¶æ”¹ç”¨å¾ªç¯</td></tr><tr><td>âœ… æ—¥å¿—&#x2F;printè¾…åŠ©è°ƒè¯•</td><td>è§‚å¯Ÿé€’å½’æ ˆçš„å˜åŒ–</td></tr></tbody></table><hr><h2 id="ä¸ƒã€ğŸ“Œ-å°ç»“"><a href="#ä¸ƒã€ğŸ“Œ-å°ç»“" class="headerlink" title="ä¸ƒã€ğŸ“Œ å°ç»“"></a>ä¸ƒã€ğŸ“Œ å°ç»“</h2><table><thead><tr><th>é˜¶æ®µ</th><th>å†…å®¹</th></tr></thead><tbody><tr><td>å…¥é—¨</td><td>ç†è§£é€’å½’ç»“æ„ã€ç»ˆæ­¢æ¡ä»¶</td></tr><tr><td>æå‡</td><td>æŒæ¡é€’å½’åœ¨æ ‘å½¢&#x2F;å›¾ç»“æ„ä¸­çš„åº”ç”¨</td></tr><tr><td>å®æˆ˜</td><td>æ„å»ºä¼ä¸šçº§åŠŸèƒ½ï¼šæ–‡ä»¶éå†ã€ç»„ç»‡ç»“æ„ã€è®¢å•ä»·æ ¼ã€æƒé™ç³»ç»Ÿç­‰</td></tr><tr><td>ä¼˜åŒ–</td><td>ä½¿ç”¨ç¼“å­˜ã€è½¬æ¢ä¸ºå¾ªç¯ã€æ§åˆ¶é€’å½’æ·±åº¦</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
      <category>Python å¸¸è§å‡½æ•°</category>
      
      <category>Python é€’å½’</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Chrome mock è¯·æ±‚ä»¥åŠå›åº”</title>
    <link href="/2025/05/15/chromemock%E8%AF%B7%E6%B1%82%E4%BB%A5%E5%8F%8A%E5%9B%9E%E5%BA%94/"/>
    <url>/2025/05/15/chromemock%E8%AF%B7%E6%B1%82%E4%BB%A5%E5%8F%8A%E5%9B%9E%E5%BA%94/</url>
    
    <content type="html"><![CDATA[<h1 id="Chome-å¦‚ä½•-mock-è¯·æ±‚åŠå›åº”"><a href="#Chome-å¦‚ä½•-mock-è¯·æ±‚åŠå›åº”" class="headerlink" title="Chome å¦‚ä½• mock è¯·æ±‚åŠå›åº”"></a>Chome å¦‚ä½• mock è¯·æ±‚åŠå›åº”</h1><p>å¹³å¸¸æˆ‘ä»¬mockæ¥å£æˆ–è€…ä¿®æ”¹è¯·æ±‚æˆ–è€…ä¿®æ”¹headeréƒ½æ˜¯é€šè¿‡fiddleræˆ–è€…charlesç­‰å·¥å…·å®ç°ï¼Œä½†æ˜¯å…¶å®chromeå·²ç»å…¼å…·äº†è¿™ä¸ªåŠŸèƒ½ï¼</p><h2 id="Chrome-mock-è¿”å›å†…å®¹"><a href="#Chrome-mock-è¿”å›å†…å®¹" class="headerlink" title="Chrome mock è¿”å›å†…å®¹"></a>Chrome mock è¿”å›å†…å®¹</h2><p>ä¿®æ”¹è¿”å›çš„æ•°æ®æ”¹ä¸ºç‰¹å®šçš„å€¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡chromeå¼€å‘è€…å·¥å…·çš„networkï¼Œåœ¨ä½ æƒ³è¦ä¿®æ”¹çš„æ¥å£ä¸Šé¢å³å‡»ï¼Œç„¶åé€‰æ‹©<code>Override content</code></p><img src="/2025/05/15/chromemock%E8%AF%B7%E6%B1%82%E4%BB%A5%E5%8F%8A%E5%9B%9E%E5%BA%94/1.png" class=""><p>æ­¤æ—¶æµè§ˆå™¨ä¼šæç¤ºä½ : <code>é€‰æ‹©ä¸€ä¸ªæ–‡ä»¶å¤¹è¿›è¡Œå­˜å‚¨æ–‡ä»¶</code>ï¼Œ ä¹Ÿå°±æ˜¯å°†ä½ çš„ä¿¡æ¯ä¿å­˜åˆ°æœ¬åœ°ï¼Œå†æ¬¡è¯·æ±‚çš„æ—¶å€™å¦‚æœurlä¸€æ ·åˆ™ä¼šèµ°ä½ çš„æœ¬åœ°è¿™ä¸ªæ–‡ä»¶çš„ä¿¡æ¯</p><p>å½“ç„¶ï¼Œåœ¨æç¤ºéœ€è¦<code>DevToolsçš„æƒé™è·å–</code>çš„æ—¶å€™éœ€è¦ç»™äºˆå…è®¸ï¼</p><p>è¿™æ—¶å€™ä½ å°±å¯ä»¥çœ‹åˆ°ä½ å¯ä»¥å°†è¿”å›çš„ä¿¡æ¯è¿›è¡Œä¿®æ”¹äº†ï¼</p><img src="/2025/05/15/chromemock%E8%AF%B7%E6%B1%82%E4%BB%A5%E5%8F%8A%E5%9B%9E%E5%BA%94/2.png" class=""><p>ä¸‹é¢æˆ‘ä»¬æ¥ä¿®æ”¹ä¸€ä¸‹ï¼</p><img src="/2025/05/15/chromemock%E8%AF%B7%E6%B1%82%E4%BB%A5%E5%8F%8A%E5%9B%9E%E5%BA%94/3.png" class=""><p>æˆ‘å°†adsä¹‹å‰çš„æ•°æ®å…¨éƒ¨æ¸…ç©ºï¼Œç„¶åæˆ‘ä»¬çœ‹ä¸€ä¸‹è¯·æ±‚çš„è¿”å›æ¥å£</p><img src="/2025/05/15/chromemock%E8%AF%B7%E6%B1%82%E4%BB%A5%E5%8F%8A%E5%9B%9E%E5%BA%94/4.png" class=""><p>æ­¤æ—¶æˆ‘ä»¬å°±çœ‹åˆ°äº†å·²ç»mockæˆåŠŸäº†ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>mockå®Œæ¯•ä¹‹åè®°å¾—æ”¹å›æ¥æˆ–è€…ç§»é™¤mockï¼Œå› ä¸ºå¾ˆé•¿æ—¶é—´å¿˜è®°åï¼Œå†æ¬¡æµ‹è¯•å¯èƒ½ä¼šè®©è‡ªå·±è§‰å¾—æ˜¯BUGï¼Œç„¶åæ‰¾åˆ°å¼€å‘ï¼Œæœ€åå‘ç°æ˜¯è‡ªå·±çš„é—®é¢˜ï¼Œå› ä¸ºæˆ‘å°±å‡ºç°è¿‡ï¼Œå› ä¸ºæ— æ„ŸçŸ¥ï¼</code></p><h1 id="Chrome-mock-è¿”å›çš„response-header"><a href="#Chrome-mock-è¿”å›çš„response-header" class="headerlink" title="Chrome mock è¿”å›çš„response header"></a>Chrome mock è¿”å›çš„response header</h1><p>ä¼šäº†ä¸Šé¢çš„ï¼Œé‚£ä¹ˆä¸‹é¢çš„å°±å¾ˆç®€å•äº†ï¼Œæ­¤æ—¶æˆ‘ä»¬æ‰“å¼€<code>chromeå¼€å‘è€…å·¥å…·</code>ï¼Œé€‰æ‹©<code>networké¢æ¿</code>ï¼Œé€‰æ‹©å¯¹åº”çš„æ¥å£ï¼Œç„¶åå³å‡»é€‰æ‹©<code>Override headers</code></p><img src="/2025/05/15/chromemock%E8%AF%B7%E6%B1%82%E4%BB%A5%E5%8F%8A%E5%9B%9E%E5%BA%94/5.png" class=""><p>æ­¤æ—¶ä½ ä¼šå‘ç°ï¼Œå¯ä»¥åœ¨<code>network</code>çš„<code>Response header</code>ä¸‹ç›´æ¥è¿›è¡Œæ·»åŠ æƒ³è¦çš„<code>header</code></p><img src="/2025/05/15/chromemock%E8%AF%B7%E6%B1%82%E4%BB%A5%E5%8F%8A%E5%9B%9E%E5%BA%94/6.png" class=""><p>ä¹Ÿå¯ä»¥é€šè¿‡å³ä¾§çš„headersæ–‡ä»¶é“¾æ¥è¿›è¡Œåœ¨æ–‡ä»¶ä¸­çš„ç¼–è¾‘ï¼Œè¿™é‡Œæˆ‘ä»¬ä»¥è¿™æ ·çš„æ–¹å¼ä¸¾ä¾‹ï¼è¿™é‡Œæˆ‘ä»¬æ–°å¢ä¸€ä¸ªè¿”å›çš„<code>header</code>ï¼Œ<code>key:value</code> ä¸º<code>testtraceid:11112222333444</code></p><img src="/2025/05/15/chromemock%E8%AF%B7%E6%B1%82%E4%BB%A5%E5%8F%8A%E5%9B%9E%E5%BA%94/7.png" class=""><p>å†æ¬¡è¯·æ±‚æ¥å£ï¼Œå‘ç°å·²ç»è¿”å›äº†æˆ‘ä»¬æ–°å¢çš„header</p><img src="/2025/05/15/chromemock%E8%AF%B7%E6%B1%82%E4%BB%A5%E5%8F%8A%E5%9B%9E%E5%BA%94/8.png" class=""><p>å¦‚æœæƒ³è¦ä¿®æ”¹å·²ç»å­˜åœ¨çš„response header,åˆ™åªéœ€è¦å¢åŠ ç›¸åŒçš„keyå³å¯,ä¾‹å¦‚ä¿®æ”¹ tracid</p><img src="/2025/05/15/chromemock%E8%AF%B7%E6%B1%82%E4%BB%A5%E5%8F%8A%E5%9B%9E%E5%BA%94/9.png" class=""><img src="/2025/05/15/chromemock%E8%AF%B7%E6%B1%82%E4%BB%A5%E5%8F%8A%E5%9B%9E%E5%BA%94/10.png" class=""><p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å·²ç»å°†å­˜åœ¨çš„headeræ›¿æ¢æˆäº†æˆ‘ä»¬æŒ‡å®šçš„å€¼</p><h2 id="Chrome-mockçš„æ¥å£ä¼šæœ‰æ ‡è¯†"><a href="#Chrome-mockçš„æ¥å£ä¼šæœ‰æ ‡è¯†" class="headerlink" title="Chrome mockçš„æ¥å£ä¼šæœ‰æ ‡è¯†"></a>Chrome mockçš„æ¥å£ä¼šæœ‰æ ‡è¯†</h2><p>å¦‚æœæ¥å£è¢«<code>mock</code>åˆ™<code>chrome</code>ä¼šæœ‰ä¸€ä¸ªæ ‡è¯†åœ¨è¯·æ±‚çš„å‰é¢å±•ç¤ºï¼Œç”¨æ¥æ ‡è®°è¿™ä¸ªæ¥å£æ˜¯è¢«<code>Mock</code>è¿‡çš„</p><img src="/2025/05/15/chromemock%E8%AF%B7%E6%B1%82%E4%BB%A5%E5%8F%8A%E5%9B%9E%E5%BA%94/11.png" class=""><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>è¿™ä¸ªç”¨èµ·æ¥è›®æ–¹ä¾¿çš„å°±æ˜¯åœ¨æˆ‘ä¸Šé¢æåˆ°çš„ä¸€å®šåœ¨ç”¨å®Œåç§»é™¤ï¼Œè¦ä¸ç„¶åˆ°äº†åæœŸä½ åœ¨ç”¨çš„æ—¶å€™å‘ç°ä¼šå¾ˆæ‡µï¼Œä¸ºä»€ä¹ˆæˆ‘çš„è¿”å›å’Œåˆ«äººçš„ä¸ä¸€æ ·å‘¢ï¼Ÿ</p>]]></content>
    
    
    <categories>
      
      <category>æµ‹è¯•å¼€å‘å·¥å…·/æ¡†æ¶</category>
      
      <category>Chromeè°ƒè¯•</category>
      
      <category>Chrome mock è¯·æ±‚ä»¥åŠå›åº”</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Chromeè°ƒè¯•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Cloudfareå†…ç½‘ç©¿é€æ•ˆèƒ½å·¥å…·</title>
    <link href="/2025/04/21/cloudfare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/"/>
    <url>/2025/04/21/cloudfare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/</url>
    
    <content type="html"><![CDATA[<h1 id="Cloudfare-å†…ç½‘ç©¿é€å®ç°"><a href="#Cloudfare-å†…ç½‘ç©¿é€å®ç°" class="headerlink" title="Cloudfare å†…ç½‘ç©¿é€å®ç°"></a>Cloudfare å†…ç½‘ç©¿é€å®ç°</h1><p>æœ€è¿‘åœ¨æµ‹è¯•é¡¹ç›®ä¸­ï¼Œç”±äºæŸä¸ªéœ€è¦å†æµ‹è¯•è¿‡ç¨‹ä¸­æ¶‰åŠå¾ˆå¤šSQLæ‰§è¡Œçš„æ“ä½œï¼Œè¦æ¨¡æ‹Ÿå¤šä¸ªä¸ä¸€æ ·çš„ç¯å¢ƒï¼Œå¤šç§æ•°æ®ï¼Œå½“æµ‹è¯•å®Œæ¯•äº¤ä»˜ç»™äº§å“èµ°æŸ¥çš„æ—¶å€™ï¼Œå‘ç°äº§å“å¯èƒ½ä¸æ€ä¹ˆä¼šä½¿ç”¨SQLï¼Œå³ä½¿ä¼šä½¿ç”¨ä½ ä»éœ€è¦è€—è´¹å¤§é‡çš„ç²¾åŠ›å»å‘Šè¯‰æ¯ä¸ªè¡¨çš„ç»“æ„ä»¥åŠé€»è¾‘ç­‰ï¼ŒåŸºäºè¿™ä¸ªåœºæ™¯æˆ‘åŸºäºFastApiå¼€å‘äº†ä¸€ç‰ˆswaggerä¸‹çš„æ•°æ®åº“æŸ¥è¯¢æ¥å£ã€‚<br>ä½†æ˜¯æˆ‘æ˜¯éƒ¨ç½²åœ¨æœ¬æœºçš„ï¼Œç”±äºéƒ¨åˆ†æ—¶é—´æˆ‘ä»¬ä¼šåœ¨å®¶é‡ŒåŠå…¬ï¼Œäº§å“æ­¤æ—¶å°±æ— æ³•è®¿é—®ï¼Œè™½ç„¶å¯ä»¥éƒ¨ç½²åˆ°å…¬å¸ç¯å¢ƒä¸­ï¼Œä½†æ˜¯ç›®å‰è¯„ä¼°åªæ˜¯å½“å‰éœ€æ±‚æ¶‰åŠé¢‘ç¹åç»­å¯èƒ½éƒ½æ€ä¹ˆé¢‘ç¹ï¼Œæ‰€ä»¥æ”¾å¼ƒäº†éƒ¨ç½²åˆ°å…¬å¸ç¯å¢ƒä¸­ï¼Œéšåä½¿ç”¨cloudfareè¿›è¡Œå†…ç½‘ç©¿é€ï¼Œå³ä½¿äº§å“å’Œæˆ‘ä¸åœ¨ä¸€ä¸ªç½‘ç»œåªè¦æˆ‘å¼€æœºï¼Œä¾¿å¯ä»¥åœ¨å…¬å¼€ç½‘ç»œä¸Šè®¿é—®åˆ°ï¼Œéå¸¸ä¾¿åˆ©ï¼</p><h2 id="cloudfare-ä¸Šç»‘å®šåŸŸå"><a href="#cloudfare-ä¸Šç»‘å®šåŸŸå" class="headerlink" title="cloudfare ä¸Šç»‘å®šåŸŸå"></a>cloudfare ä¸Šç»‘å®šåŸŸå</h2><p>é¦–å…ˆä½ å¾—æœ‰åŸŸåï¼Œè¿™ä¸ªåº”è¯¥å¾ˆç®€å•ï¼Œä½ å¯ä»¥ä»é˜¿é‡Œäº‘ä¸Šè´­ä¹°å¾ˆå¤šåŸŸåï¼Œè¿™é‡Œå°±ä¸ä»‹ç»äº†ï¼Œç„¶åä½ å¾—ä»cloudfareä¸Šè¿›è¡Œæ³¨å†Œè´¦æˆ·ï¼Œè¿™ä¸ªä¹Ÿå¾ˆç®€å•ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±éœ€è¦ç»‘å®šæˆ‘ä»¬çš„åŸŸåäº†</p><h3 id="æ·»åŠ åŸŸå"><a href="#æ·»åŠ åŸŸå" class="headerlink" title="æ·»åŠ åŸŸå"></a>æ·»åŠ åŸŸå</h3><p>è¿›å»cloudfareä¸»é¡µåï¼Œç‚¹å‡»<code>æ·»åŠ åŸŸ</code></p><img src="/2025/04/21/cloudfare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/1.png" class=""><p>è¾“å…¥ç°æœ‰çš„åŸŸå</p><img src="/2025/04/21/cloudfare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/2.png" class=""><p>ç»§ç»­ï¼Œç„¶åæˆ‘ä»¬é€‰æ‹©0å…ƒçš„è®¡åˆ’ï¼Œè¿›è¡Œæ— éœ€ä»˜è´¹çš„ä½¿ç”¨</p> <img src="/2025/04/21/cloudfare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/3.png" class=""><p> æ»‘åˆ°é¡µé¢åº•éƒ¨ï¼Œç‚¹å‡» <code>ç»§ç»­å‰å¾€æ¿€æ´»</code></p> <img src="/2025/04/21/cloudfare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/4.png" class=""><p> æ»‘åˆ°é¡µé¢åº•éƒ¨ï¼Œå¤åˆ¶cloudfare ç»™æˆ‘ä»¬åˆ†é…çš„ä¸¤ä¸ªDNS æœåŠ¡å™¨ã€‚</p> <img src="/2025/04/21/cloudfare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/5.png" class=""><p> ç„¶åæ‰¾åˆ°ä½ çš„åŸŸåæä¾›å•†ï¼Œå°†ä½ çš„åŸŸåçš„DNSè¿›è¡Œæ›´æ”¹ï¼ŒæŒ‰ç…§cloudfareåŸºäºçš„ï¼Œæ”¹å®Œä¹‹åç¨ç­‰5-10åˆ†é’Ÿå³å¯çœ‹åˆ°é¡µé¢ä¸»é¡µçš„æ˜¾ç¤ºå·²ç»æ¿€æ´»ã€‚</p> <img src="/2025/04/21/cloudfare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/6.png" class=""><p> æ­¤åˆ»æˆ‘ä»¬çš„åŸŸåå·²ç»ç»‘å®šæˆåŠŸã€‚</p><h2 id="ç”³è¯·Zero-Trust"><a href="#ç”³è¯·Zero-Trust" class="headerlink" title="ç”³è¯·Zero Trust"></a>ç”³è¯·Zero Trust</h2><p> éœ€è¦è¿›è¡Œå†…ç½‘ç©¿é€æˆ‘ä»¬è¦åœ¨Zero Trustä¸­è¿›è¡Œç”³è¯·ï¼Œç‚¹å‡»ä¸»é¡µçš„<code>Zero Trust</code></p> <img src="/2025/04/21/cloudfare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/7.png" class=""><p> è¿›å»åï¼Œæ»‘åˆ°åº•éƒ¨ï¼Œé€‰æ‹©<code>è´¦æˆ·å’Œè®¡è´¹</code></p> <img src="/2025/04/21/cloudfare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/8.png" class=""><p>ç»§ç»­é€‰æ‹©<code>å…è´¹çš„è®¡åˆ’</code></p><img src="/2025/04/21/cloudfare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/9.png" class=""><p>æ­¤æ—¶éœ€è¦å¡«å†™ä¸€ä¸ªé“¶è¡Œå¡ä¿¡æ¯ï¼Œå½“ç„¶æˆ‘ä»¬éƒ½é€‰æ‹©Freeçš„è®¡åˆ’ æ˜¯ä¸ä¼šäº§ç”Ÿä»»ä½•æ”¶è´¹è¡Œä¸ºçš„ï¼Œä½ å†™ä¸Šä¹Ÿä¸ä¼šæ‰£é’±çš„ã€‚</p><img src="/2025/04/21/cloudfare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/10.png" class=""><p>éƒ½å†™å®Œæ¯•åï¼Œæˆ‘ä»¬å°±å¯ä»¥ç‚¹å‡»è´­ä¹°ï¼Œç„¶åå½“ç„¶å°±å®Œæˆäº†Freeè®¡åˆ’çš„ç”³è¯·ã€‚</p><p>ç„¶åæˆ‘ä»¬å›åˆ°é¦–é¡µï¼Œç‚¹å‡»<code>ç½‘ç»œ</code> é€‰æ‹©ä¸‹é¢çš„ <code>Tunnels</code>, ç„¶åè¾“å…¥ä¸€ä¸ªå›¢é˜Ÿçš„åå­—ç„¶åç‚¹å‡»åˆ›å»ºå³å¯ï¼</p><h2 id="githubä¸Šä¸‹è½½ç›¸å…³æ‰§è¡Œæ–‡ä»¶"><a href="#githubä¸Šä¸‹è½½ç›¸å…³æ‰§è¡Œæ–‡ä»¶" class="headerlink" title="githubä¸Šä¸‹è½½ç›¸å…³æ‰§è¡Œæ–‡ä»¶"></a>githubä¸Šä¸‹è½½ç›¸å…³æ‰§è¡Œæ–‡ä»¶</h2><h3 id="windows"><a href="#windows" class="headerlink" title="windows"></a>windows</h3><p>å› ä¸ºæˆ‘çš„ç”µè„‘æ˜¯Windowsçš„ï¼Œæ‰€ä»¥æˆ‘è¿™è¾¹ä»¥Windowsä¸ºä¾‹ï¼Œä¸è¿‡è¿‡ç¨‹çš„éƒ½å¤§åŒå°å¼‚çš„ï¼</p><p>è®¿é—®githubåœ°å€ï¼š<a href="https://github.com/cloudflare/cloudflared/releases">https://github.com/cloudflare/cloudflared/releases</a></p><p>æ‰“å¼€åï¼Œç‚¹å‡»<code>show all 28 assets</code></p><img src="/2025/04/21/cloudfare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/13.png" class=""><p>é€‰æ‹©å¯¹åº”çš„ç³»ç»Ÿç‰ˆæœ¬ï¼Œæˆ‘è¿™é‡Œé€‰æ‹©çš„æ˜¯<code>cloudflared-windows-amd64.exe</code></p><p>ä¸‹è½½å®Œæ¯•åï¼Œæ”¾åˆ°éšæ„çš„æ–‡ä»¶å¤¹ä¸‹ï¼Œå°†è¿™ä¸ªæ–‡ä»¶åé‡å‘½åä¸º <code>cloudflared.exe</code></p><p>ç„¶åcmd åˆ°æ–‡ä»¶å¤¹ä¸‹æ‰§è¡Œå‘½ä»¤è¡Œ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">cloudflared.exe login<br></code></pre></td></tr></table></figure><p>æµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰“å¼€ä¸€ä¸ª <code>Cloudflare</code> æˆæƒé¡µé¢ï¼Œè®©ä½ é€‰æ‹©åŸŸåå¹¶ç¡®è®¤ã€‚ç™»å½•æˆåŠŸåï¼Œä¼šåœ¨ä½ çš„ç”¨æˆ·ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª .<code>cloudflared</code> æ–‡ä»¶å¤¹å’Œ<code>cert.pem</code>æ–‡ä»¶ã€‚</p><img src="/2025/04/21/cloudfare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/14.png" class=""><h2 id="åˆ›å»ºTunnel"><a href="#åˆ›å»ºTunnel" class="headerlink" title="åˆ›å»ºTunnel"></a>åˆ›å»ºTunnel</h2><p>ç„¶åå‘½ä»¤è¡Œåˆ›å»º<code>Tunnel</code>ï¼Œè¿˜æ˜¯å›åˆ°åˆšåˆšæ”¾ç½®<code>cloudfare.exe</code>æ–‡ä»¶å¤¹ä¸‹æ‰§è¡Œcmdå‘½ä»¤</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">cloudflared tunnel create ä½ çš„éš§é“åç§°<br></code></pre></td></tr></table></figure><p>è¿™å°†åˆ›å»ºä¸€ä¸ªåä¸º <code>ä½ çš„éš§é“åç§°</code> çš„ <code>Tunnel</code>ï¼ŒåŒæ—¶ <code>Cloudflare</code> ä¼šè‡ªåŠ¨åˆ†é…ä¸€ä¸ª <code>Tunnel ID</code>ï¼Œå¹¶åœ¨æœ¬åœ°ç”Ÿæˆé…ç½®æ–‡ä»¶ã€‚</p><p>æ­¤æ—¶ç”Ÿæˆçš„é…ç½®æ–‡ä»¶ä»ç„¶åœ¨è¯ä¹¦ç”Ÿæˆçš„é‚£ä¸ªæ–‡ä»¶å¤¹ä¸‹çš„ä¸€ä¸ªjsonæ–‡ä»¶ã€‚</p><img src="/2025/04/21/cloudfare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/15.png" class=""><p>ç„¶åæˆ‘ä»¬ç»§ç»­é…ç½®æ‰§è¡Œå‘½ä»¤è¡Œ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">cloudflared.exe tunnel route dns ä½ åˆšåˆšçš„éš§é“åç§° ä½ çš„åŸŸå<br></code></pre></td></tr></table></figure><p>ä¾‹å¦‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">cloudflared.exe tunnel route dns mytunnel mhy.com<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶æ‰§è¡ŒæˆåŠŸåï¼Œå¯¹è‡ªåŠ¨åˆ›å»ºåˆ°<code>cloudfare</code>ä¸­çš„ä¸€ä¸ª<code>CNAME</code>ç±»å‹çš„è§£æ</p><img src="/2025/04/21/cloudfare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/16.png" class=""><p>æ­¤æ—¶æˆ‘ä»¬å°±æ³¨å†Œäº†æˆ‘ä»¬çš„éš§é“</p><h2 id="ç¼–å†™é…ç½®æ–‡ä»¶"><a href="#ç¼–å†™é…ç½®æ–‡ä»¶" class="headerlink" title="ç¼–å†™é…ç½®æ–‡ä»¶"></a>ç¼–å†™é…ç½®æ–‡ä»¶</h2><p>æ­¤æ—¶ä»åœ¨<code>cloudfare.exe</code>æ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ª<code>config.yml</code>çš„é…ç½®æ–‡ä»¶</p><p><code>credentials-file</code> æ˜¯ä½ ç”Ÿæˆçš„jsonæ–‡ä»¶è·¯å¾„</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">tunnel:</span> <span class="hljs-string">ä½ çš„éš§é“åç§°</span><br><span class="hljs-attr">credentials-file:</span> <span class="hljs-string">C:\Users\&lt;ä½ çš„ç”¨æˆ·å&gt;\.cloudflared\xxxxxxx-xxxx-xxxx-xxxx-xxxxxxxx.json</span><br><br><span class="hljs-attr">ingress:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">hostname:</span> <span class="hljs-string">api.yourdomain.com</span><br>    <span class="hljs-attr">service:</span> <span class="hljs-string">http://localhost:8000</span>   <span class="hljs-comment"># å‡è®¾ä½ è¿è¡Œçš„æ˜¯ FastAPI æœåŠ¡</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">service:</span> <span class="hljs-string">http_status:404</span>         <span class="hljs-comment"># å…œåº•</span><br><br></code></pre></td></tr></table></figure><p>ä¿å­˜å®Œæ¯•åï¼Œå°±å®Œæˆäº†é…ç½®æ–‡ä»¶çš„ç¼–å†™</p><h2 id="è¿è¡ŒTunnel"><a href="#è¿è¡ŒTunnel" class="headerlink" title="è¿è¡ŒTunnel"></a>è¿è¡ŒTunnel</h2><p>è¿è¡Œå‰å…ˆå°†ä½ æœ¬åœ°çš„é¡¹ç›®å¯åŠ¨ï¼Œæœ€å¥½ä»¥å±€åŸŸç½‘è®¿é—®çš„æ–¹å¼å¯åŠ¨ï¼Œè€Œä¸åªæ˜¯ä»¥<code>loaclhost</code>æ–¹å¼å¯åŠ¨ã€‚</p><p>ç„¶åæˆ‘ä»¬å¯åŠ¨Tunnelï¼Œä»åœ¨<code>cloudfare.exe</code> æ–‡ä»¶å¤¹ä¸‹æ‰§è¡Œå‘½ä»¤è¡Œ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">cloudflared tunnel --config configæ–‡ä»¶è·¯å¾„\config.yml run ä½ çš„éš§é“åç§°<br></code></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">cloudflared tunnel --config C:\tools\cloudfare\config.yml run teen<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶å°±å¯ä»¥çœ‹åˆ°å¯åŠ¨äº†ï¼Œå¦‚æœå¼¹å‡ºæç¤ºéœ€è¦è·å–ç½‘ç»œä¼ è¾“æƒé™ï¼Œéœ€è¦ç»™äºˆï¼</p><h3 id="éå¸¸é‡è¦ï¼"><a href="#éå¸¸é‡è¦ï¼" class="headerlink" title="éå¸¸é‡è¦ï¼"></a>éå¸¸é‡è¦ï¼</h3><p><code>Cloudflare Tunnel</code> æ˜¯é€šè¿‡ <code>QUIC</code>ï¼ˆæˆ– <code>TCP</code>ï¼‰åè®®è¿æ¥åˆ° <code>Cloudflare</code> çš„å…¨çƒèŠ‚ç‚¹ã€‚å¦‚æœä½ çœ‹åˆ°è¿™ä¸ªæŠ¥é”™ï¼š</p><img src="/2025/04/21/cloudfare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/17.png" class=""><p><code>QUIC</code> æ˜¯é¦–é€‰ä¼ è¾“åè®®ï¼Œä½†å› ä¸ºç½‘ç»œé—®é¢˜å¤±è´¥äº†ã€‚</p><p>æ­¤æ—¶ä¸è¦æ…Œï¼Œé‚£æ˜¯å› ä¸ºä½ çš„è·¯ç”±å™¨æˆ–è€…å…¶ä»–çš„ç½‘ç»œè®¾å¤‡ä¸æ”¯æŒï¼Œæ­¤æ—¶ä½ åœ¨é…ç½®æ–‡ä»¶ä¸­åŠ å…¥</p><p>config.yml</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">no-quic:</span> <span class="hljs-literal">true</span><br><br></code></pre></td></tr></table></figure><p>æ­¤æ—¶<code>Tunnel</code> ä¼šå°è¯•å›é€€åˆ° <code>TCP</code>ï¼Œä½†å¦‚æœä¸¤è€…éƒ½å¤±è´¥ï¼Œå°±ä¼š <code>503</code>ã€‚</p><p>å†æ¬¡å¯åŠ¨åï¼Œä¼šæŠ¥é€šç”¨çš„é”™è¯¯ï¼Œæ­¤æ—¶éœ€è¦ç­‰å¾…3-5åˆ†é’Ÿï¼Œå°±ä¼šæˆåŠŸäº†ï¼</p><img src="/2025/04/21/cloudfare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/18.png" class=""><p>ç„¶åæ­¤åˆ»ä½ å°±å¯ä»¥è®¿é—®ä½ çš„é¡¹ç›®äº†,æŒ‰ç…§ä½ çš„åŸŸåå°±å¯ä»¥äº«å—ç½‘ç»œè®¿é—®äº†ï¼</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>cloudfare å¯ä»¥æä¾›å¾ˆå¤šå…è´¹çš„é¡¹ç›®ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±é€‰æ‹©ï¼å½“ç„¶ä½ ä¹Ÿå¯ä»¥åšåˆ°å¼€æœºè‡ªåŠ¨å¯åŠ¨ï¼Œéƒ½æ˜¯å¯ä»¥çš„ï¼</p>]]></content>
    
    
    <categories>
      
      <category>æµ‹è¯•å¼€å‘å·¥å…·/æ¡†æ¶</category>
      
      <category>Cloudfare ç›¸å…³å·¥å…·</category>
      
      <category>Cloudfareå†…ç½‘ç©¿é€æ•ˆèƒ½å·¥å…·</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Cloudfareå†…ç½‘ç©¿é€æ•ˆèƒ½å·¥å…·</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æœç´¢ç®—æ³•æµ‹è¯•å…¥é—¨</title>
    <link href="/2025/04/14/%E6%90%9C%E7%B4%A2%E7%AE%97%E6%B3%95%E6%B5%8B%E8%AF%95%E5%85%A5%E9%97%A8/"/>
    <url>/2025/04/14/%E6%90%9C%E7%B4%A2%E7%AE%97%E6%B3%95%E6%B5%8B%E8%AF%95%E5%85%A5%E9%97%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="ğŸ§ -æœç´¢çƒé˜Ÿç®—æ³•å®ç°è¯¦è§£ï¼ˆå·¥ç¨‹çº§ï¼‰"><a href="#ğŸ§ -æœç´¢çƒé˜Ÿç®—æ³•å®ç°è¯¦è§£ï¼ˆå·¥ç¨‹çº§ï¼‰" class="headerlink" title="ğŸ§  æœç´¢çƒé˜Ÿç®—æ³•å®ç°è¯¦è§£ï¼ˆå·¥ç¨‹çº§ï¼‰"></a>ğŸ§  æœç´¢çƒé˜Ÿç®—æ³•å®ç°è¯¦è§£ï¼ˆå·¥ç¨‹çº§ï¼‰</h1><hr><h2 id="ğŸ“Œ-ç›®æ ‡å›é¡¾"><a href="#ğŸ“Œ-ç›®æ ‡å›é¡¾" class="headerlink" title="ğŸ“Œ ç›®æ ‡å›é¡¾"></a>ğŸ“Œ ç›®æ ‡å›é¡¾</h2><p>ç”¨æˆ·è¾“å…¥ä¸€æ®µå…³é”®è¯ï¼Œå¦‚ <code>real</code>, <code>çš‡é©¬</code>, <code>rmad</code>, <code>é©¬å¾·é‡Œ</code>ï¼Œç³»ç»Ÿåº”ï¼š</p><ul><li>å¿«é€Ÿä»çƒé˜Ÿåº“ä¸­åŒ¹é…æœ€ç›¸å…³çš„çƒé˜Ÿ</li><li>æ”¯æŒæ‹¼éŸ³ã€åˆ«åã€æ¨¡ç³Šæ‹¼å†™ã€ç®€ç§°</li><li>æ’åºè¿”å› Top-N æœ€ä¼˜åŒ¹é…é¡¹</li></ul><hr><h2 id="ğŸ§©-æ€»ä½“æµç¨‹"><a href="#ğŸ§©-æ€»ä½“æµç¨‹" class="headerlink" title="ğŸ§© æ€»ä½“æµç¨‹"></a>ğŸ§© æ€»ä½“æµç¨‹</h2><pre><code class=" mermaid">graph TD    A[ç”¨æˆ·è¾“å…¥å…³é”®è¯q] --&gt; B[æ ‡å‡†åŒ–é¢„å¤„ç†]    B --&gt; C[ç”Ÿæˆç‰¹å¾Tokenï¼šç®€æ‹¼/å…¨æ‹¼/åˆ«å/åˆ†è¯]    C --&gt; D[æ„å»ºå€™é€‰æ± ]    D --&gt; E[åŒ¹é…ç®—æ³•ï¼šç¼–è¾‘è·ç¦» + BM25/Tfidf]    E --&gt; F[ç»¼åˆæ’åºæ‰“åˆ†]    F --&gt; G[è¿”å›Top-Nçƒé˜Ÿ]</code></pre><hr><h2 id="ğŸ§±-Step-1ï¼šæ ‡å‡†åŒ–-Tokenç”Ÿæˆ"><a href="#ğŸ§±-Step-1ï¼šæ ‡å‡†åŒ–-Tokenç”Ÿæˆ" class="headerlink" title="ğŸ§± Step 1ï¼šæ ‡å‡†åŒ– + Tokenç”Ÿæˆ"></a>ğŸ§± Step 1ï¼šæ ‡å‡†åŒ– + Tokenç”Ÿæˆ</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> re<br><span class="hljs-keyword">from</span> pypinyin <span class="hljs-keyword">import</span> lazy_pinyin, Style<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">normalize_query</span>(<span class="hljs-params">q: <span class="hljs-built_in">str</span></span>):<br>    <span class="hljs-string">&quot;&quot;&quot;æ¸…æ´—æœç´¢å…³é”®è¯ï¼Œå»ç©ºæ ¼ã€ç»Ÿä¸€å¤§å°å†™&quot;&quot;&quot;</span><br>    q = q.lower().strip()<br>    q = re.sub(<span class="hljs-string">r&#x27;[^\u4e00-\u9fa5a-z0-9]&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>, q)<br>    <span class="hljs-keyword">return</span> q<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_tokens</span>(<span class="hljs-params">q: <span class="hljs-built_in">str</span></span>):<br>    <span class="hljs-string">&quot;&quot;&quot;ç”Ÿæˆå¤šç§tokenå½¢å¼ï¼šå…¨æ‹¼ã€ç®€æ‹¼ã€åˆ†è¯&quot;&quot;&quot;</span><br>    full_pinyin = <span class="hljs-string">&#x27;&#x27;</span>.join(lazy_pinyin(q))<br>    simple_pinyin = <span class="hljs-string">&#x27;&#x27;</span>.join(lazy_pinyin(q, style=Style.FIRST_LETTER))<br>    <span class="hljs-keyword">return</span> &#123;<br>        <span class="hljs-string">&#x27;original&#x27;</span>: q,<br>        <span class="hljs-string">&#x27;full_pinyin&#x27;</span>: full_pinyin,<br>        <span class="hljs-string">&#x27;simple_pinyin&#x27;</span>: simple_pinyin,<br>    &#125;<br></code></pre></td></tr></table></figure><hr><h2 id="ğŸ“¦-Step-2ï¼šæ„å»ºå€™é€‰æ± ï¼ˆç¦»çº¿æ„å»º-å†…å­˜åŠ è½½ï¼‰"><a href="#ğŸ“¦-Step-2ï¼šæ„å»ºå€™é€‰æ± ï¼ˆç¦»çº¿æ„å»º-å†…å­˜åŠ è½½ï¼‰" class="headerlink" title="ğŸ“¦ Step 2ï¼šæ„å»ºå€™é€‰æ± ï¼ˆç¦»çº¿æ„å»º + å†…å­˜åŠ è½½ï¼‰"></a>ğŸ“¦ Step 2ï¼šæ„å»ºå€™é€‰æ± ï¼ˆç¦»çº¿æ„å»º + å†…å­˜åŠ è½½ï¼‰</h2><p>æ¯æ”¯çƒé˜Ÿç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python">team_index = [<br>    &#123;<br>        <span class="hljs-string">&quot;team_id&quot;</span>: <span class="hljs-number">1001</span>,<br>        <span class="hljs-string">&quot;name_zh&quot;</span>: <span class="hljs-string">&quot;çš‡å®¶é©¬å¾·é‡Œ&quot;</span>,<br>        <span class="hljs-string">&quot;name_en&quot;</span>: <span class="hljs-string">&quot;Real Madrid&quot;</span>,<br>        <span class="hljs-string">&quot;alias&quot;</span>: [<span class="hljs-string">&quot;real&quot;</span>, <span class="hljs-string">&quot;rmad&quot;</span>, <span class="hljs-string">&quot;çš‡é©¬&quot;</span>],<br>        <span class="hljs-string">&quot;full_pinyin&quot;</span>: <span class="hljs-string">&quot;huangjiamadelie&quot;</span>,<br>        <span class="hljs-string">&quot;simple_pinyin&quot;</span>: <span class="hljs-string">&quot;hjmdl&quot;</span><br>    &#125;,<br>    ...<br>]<br></code></pre></td></tr></table></figure><blockquote><p>å»ºè®®æå‰ç”¨ Redis ç¼“å­˜ç®€æ‹¼ç´¢å¼•ï¼Œæé«˜é¦–æ¬¡å‘½ä¸­ç‡ã€‚</p></blockquote><hr><h2 id="ğŸ”-Step-3ï¼šåŒ¹é…ç®—æ³•æ ¸å¿ƒå®ç°"><a href="#ğŸ”-Step-3ï¼šåŒ¹é…ç®—æ³•æ ¸å¿ƒå®ç°" class="headerlink" title="ğŸ” Step 3ï¼šåŒ¹é…ç®—æ³•æ ¸å¿ƒå®ç°"></a>ğŸ” Step 3ï¼šåŒ¹é…ç®—æ³•æ ¸å¿ƒå®ç°</h2><h3 id="æ–¹æ³•1ï¼šç¼–è¾‘è·ç¦»ï¼ˆLevenshteinï¼‰"><a href="#æ–¹æ³•1ï¼šç¼–è¾‘è·ç¦»ï¼ˆLevenshteinï¼‰" class="headerlink" title="æ–¹æ³•1ï¼šç¼–è¾‘è·ç¦»ï¼ˆLevenshteinï¼‰"></a>æ–¹æ³•1ï¼šç¼–è¾‘è·ç¦»ï¼ˆLevenshteinï¼‰</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> Levenshtein<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">fuzzy_score</span>(<span class="hljs-params">a: <span class="hljs-built_in">str</span>, b: <span class="hljs-built_in">str</span></span>):<br>    <span class="hljs-string">&quot;&quot;&quot;è¿”å›å­—ç¬¦ä¸²ç›¸ä¼¼åº¦ï¼Œ1åˆ†ä¸ºæ»¡åˆ†&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> a <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> b:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> - Levenshtein.distance(a, b) / <span class="hljs-built_in">max</span>(<span class="hljs-built_in">len</span>(a), <span class="hljs-built_in">len</span>(b))<br></code></pre></td></tr></table></figure><h3 id="æ–¹æ³•2ï¼šTF-IDF-å‘é‡ç›¸ä¼¼åº¦"><a href="#æ–¹æ³•2ï¼šTF-IDF-å‘é‡ç›¸ä¼¼åº¦" class="headerlink" title="æ–¹æ³•2ï¼šTF-IDF å‘é‡ç›¸ä¼¼åº¦"></a>æ–¹æ³•2ï¼šTF-IDF å‘é‡ç›¸ä¼¼åº¦</h3><p>ç”¨äºå¤„ç†å¤šè¯åœºæ™¯ï¼Œå¦‚ â€œmanchester unitedâ€</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> sklearn.feature_extraction.text <span class="hljs-keyword">import</span> TfidfVectorizer<br><span class="hljs-keyword">from</span> sklearn.metrics.pairwise <span class="hljs-keyword">import</span> cosine_similarity<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">tfidf_match</span>(<span class="hljs-params">query, docs</span>):<br>    vectorizer = TfidfVectorizer()<br>    tfidf = vectorizer.fit_transform([query] + docs)<br>    sim = cosine_similarity(tfidf[<span class="hljs-number">0</span>:<span class="hljs-number">1</span>], tfidf[<span class="hljs-number">1</span>:]).flatten()<br>    <span class="hljs-keyword">return</span> sim<br></code></pre></td></tr></table></figure><hr><h2 id="ğŸ“Š-Step-4ï¼šç»¼åˆè¯„åˆ†é€»è¾‘"><a href="#ğŸ“Š-Step-4ï¼šç»¼åˆè¯„åˆ†é€»è¾‘" class="headerlink" title="ğŸ“Š Step 4ï¼šç»¼åˆè¯„åˆ†é€»è¾‘"></a>ğŸ“Š Step 4ï¼šç»¼åˆè¯„åˆ†é€»è¾‘</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">score_team</span>(<span class="hljs-params">query_tokens, team</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;å¯¹ä¸€æ”¯çƒé˜Ÿè¿›è¡Œå¤šç§å­—æ®µåŒ¹é…ï¼Œå¹¶è®¡ç®—æœ€ç»ˆå¾—åˆ†&quot;&quot;&quot;</span><br>    scores = []<br><br>    <span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> [<span class="hljs-string">&#x27;name_zh&#x27;</span>, <span class="hljs-string">&#x27;name_en&#x27;</span>, <span class="hljs-string">&#x27;full_pinyin&#x27;</span>, <span class="hljs-string">&#x27;simple_pinyin&#x27;</span>]:<br>        <span class="hljs-keyword">if</span> key <span class="hljs-keyword">in</span> team:<br>            scores.append(fuzzy_score(query_tokens[<span class="hljs-string">&#x27;original&#x27;</span>], team[key]))<br>            scores.append(fuzzy_score(query_tokens[<span class="hljs-string">&#x27;full_pinyin&#x27;</span>], team[key]))<br>            scores.append(fuzzy_score(query_tokens[<span class="hljs-string">&#x27;simple_pinyin&#x27;</span>], team[key]))<br><br>    <span class="hljs-comment"># åˆ«ååŒ¹é…</span><br>    <span class="hljs-keyword">for</span> alias <span class="hljs-keyword">in</span> team.get(<span class="hljs-string">&#x27;alias&#x27;</span>, []):<br>        scores.append(fuzzy_score(query_tokens[<span class="hljs-string">&#x27;original&#x27;</span>], alias))<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">max</span>(scores)  <span class="hljs-comment"># æˆ–ä½¿ç”¨åŠ æƒå¹³å‡</span><br></code></pre></td></tr></table></figure><hr><h2 id="ğŸ§ª-Step-5ï¼šä¸»å‡½æ•°-æµ‹è¯•æ ·ä¾‹"><a href="#ğŸ§ª-Step-5ï¼šä¸»å‡½æ•°-æµ‹è¯•æ ·ä¾‹" class="headerlink" title="ğŸ§ª Step 5ï¼šä¸»å‡½æ•° + æµ‹è¯•æ ·ä¾‹"></a>ğŸ§ª Step 5ï¼šä¸»å‡½æ•° + æµ‹è¯•æ ·ä¾‹</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">search_teams</span>(<span class="hljs-params">query, index, top_n=<span class="hljs-number">5</span></span>):<br>    q_norm = normalize_query(query)<br>    q_tokens = generate_tokens(q_norm)<br><br>    scored = []<br>    <span class="hljs-keyword">for</span> team <span class="hljs-keyword">in</span> index:<br>        score = score_team(q_tokens, team)<br>        <span class="hljs-keyword">if</span> score &gt; <span class="hljs-number">0.3</span>:<br>            scored.append((score, team))<br><br>    scored.sort(key=<span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">0</span>], reverse=<span class="hljs-literal">True</span>)<br>    <span class="hljs-keyword">return</span> [team <span class="hljs-keyword">for</span> _, team <span class="hljs-keyword">in</span> scored[:top_n]]<br><br><span class="hljs-comment"># ç¤ºä¾‹ï¼š</span><br>results = search_teams(<span class="hljs-string">&quot;çš‡é©¬&quot;</span>, team_index)<br><span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> results:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;âœ… <span class="hljs-subst">&#123;r[<span class="hljs-string">&#x27;name_zh&#x27;</span>]&#125;</span> - <span class="hljs-subst">&#123;r[<span class="hljs-string">&#x27;name_en&#x27;</span>]&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure><hr><h2 id="ğŸš€-æå‡å»ºè®®ï¼ˆå¤§æ•°æ®ç‰ˆæœ¬ï¼‰"><a href="#ğŸš€-æå‡å»ºè®®ï¼ˆå¤§æ•°æ®ç‰ˆæœ¬ï¼‰" class="headerlink" title="ğŸš€ æå‡å»ºè®®ï¼ˆå¤§æ•°æ®ç‰ˆæœ¬ï¼‰"></a>ğŸš€ æå‡å»ºè®®ï¼ˆå¤§æ•°æ®ç‰ˆæœ¬ï¼‰</h2><ol><li>æ›¿æ¢ä¸º ElasticSearch è¯å‘é‡åŒ¹é…ï¼Œå®æ—¶æœç´¢æ›´å¼º</li><li>å¼•å…¥ Query é‡å†™å™¨ï¼ˆSpell Correctionï¼‰</li><li>ç”¨æˆ·ç”»åƒè¯æƒé‡ï¼ˆåŸºäºè¡Œä¸ºåˆ†æ•°åŠ æƒï¼‰</li></ol><hr><h2 id="âœ…-æœ€ç»ˆæ€»ç»“"><a href="#âœ…-æœ€ç»ˆæ€»ç»“" class="headerlink" title="âœ… æœ€ç»ˆæ€»ç»“"></a>âœ… æœ€ç»ˆæ€»ç»“</h2><table><thead><tr><th>é˜¶æ®µ</th><th>å…³é”®ä»»åŠ¡</th></tr></thead><tbody><tr><td>æ ‡å‡†åŒ–è¾“å…¥</td><td>æ¸…æ´—ã€æ‹¼éŸ³æå–ã€ç¼–ç ç»Ÿä¸€</td></tr><tr><td>å€™é€‰åŒ¹é…</td><td>ç®€æ‹¼ã€å…¨æ‹¼ã€åˆ«åã€ä¸­æ–‡åç­‰å¤šç»´åŒ¹é…</td></tr><tr><td>ç›¸ä¼¼åº¦è®¡ç®—</td><td>Levenshtein ç¼–è¾‘è·ç¦»ã€TF-IDF è¯­ä¹‰åŒ¹é…</td></tr><tr><td>æ’åºä¸è¿‡æ»¤</td><td>æŒ‰åˆ†æ•°é™åºè¿‡æ»¤ã€è¿”å›Top-N</td></tr></tbody></table><h1 id="ğŸ§ -æœç´¢çƒé˜Ÿç®—æ³•ï¼ˆå‡çº§ç‰ˆï¼‰-æ¥å…¥-ElasticSearch-å®Œæ•´å®ç°-æ¶æ„è¯´æ˜-æµ‹è¯•æ–¹æ³•"><a href="#ğŸ§ -æœç´¢çƒé˜Ÿç®—æ³•ï¼ˆå‡çº§ç‰ˆï¼‰-æ¥å…¥-ElasticSearch-å®Œæ•´å®ç°-æ¶æ„è¯´æ˜-æµ‹è¯•æ–¹æ³•" class="headerlink" title="ğŸ§  æœç´¢çƒé˜Ÿç®—æ³•ï¼ˆå‡çº§ç‰ˆï¼‰- æ¥å…¥ ElasticSearch å®Œæ•´å®ç° + æ¶æ„è¯´æ˜ + æµ‹è¯•æ–¹æ³•"></a>ğŸ§  æœç´¢çƒé˜Ÿç®—æ³•ï¼ˆå‡çº§ç‰ˆï¼‰- æ¥å…¥ ElasticSearch å®Œæ•´å®ç° + æ¶æ„è¯´æ˜ + æµ‹è¯•æ–¹æ³•</h1><hr><h2 id="ğŸŒ-ä¸€ã€æ•´ä½“æ¶æ„å›¾ï¼ˆå¼•å…¥-ESï¼‰"><a href="#ğŸŒ-ä¸€ã€æ•´ä½“æ¶æ„å›¾ï¼ˆå¼•å…¥-ESï¼‰" class="headerlink" title="ğŸŒ ä¸€ã€æ•´ä½“æ¶æ„å›¾ï¼ˆå¼•å…¥ ESï¼‰"></a>ğŸŒ ä¸€ã€æ•´ä½“æ¶æ„å›¾ï¼ˆå¼•å…¥ ESï¼‰</h2><pre><code class=" mermaid">graph TD  A[ç”¨æˆ·è¾“å…¥å…³é”®è¯] --&gt; B[æ ‡å‡†åŒ– + æ‹¼éŸ³/ç®€æ‹¼ç”Ÿæˆ]  B --&gt; C[ES æŸ¥è¯¢æ„å»ºå™¨ï¼ˆQuery Builderï¼‰]  C --&gt; D[ElasticSearch æ‰§è¡ŒæŸ¥è¯¢]  D --&gt; E[è·å–åˆæ­¥ç»“æœ Top-K]  E --&gt; F[åå¤„ç†ï¼šæ‹¼éŸ³/åˆ«å/è¯­ä¹‰äºŒæ¬¡æ‰“åˆ†]  F --&gt; G[Top-Nç»“æœè¿”å›å‰ç«¯å±•ç¤º]</code></pre><hr><h2 id="ğŸ§©-äºŒã€ElasticSearch-åœ¨æ¶æ„ä¸­çš„è§’è‰²"><a href="#ğŸ§©-äºŒã€ElasticSearch-åœ¨æ¶æ„ä¸­çš„è§’è‰²" class="headerlink" title="ğŸ§© äºŒã€ElasticSearch åœ¨æ¶æ„ä¸­çš„è§’è‰²"></a>ğŸ§© äºŒã€ElasticSearch åœ¨æ¶æ„ä¸­çš„è§’è‰²</h2><table><thead><tr><th>æ¨¡å—</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>ES ç´¢å¼•ï¼ˆIndexï¼‰</strong></td><td>å­˜å‚¨æ‰€æœ‰çƒé˜Ÿä¿¡æ¯ï¼Œå­—æ®µåŒ…æ‹¬åŸåã€æ‹¼éŸ³ã€åˆ«åã€è‹±æ–‡åç­‰</td></tr><tr><td><strong>Query DSL</strong></td><td>ç”¨äºæ„å»ºå¤šå­—æ®µã€æ¨¡ç³Šã€æƒé‡æŸ¥è¯¢</td></tr><tr><td><strong>åˆç­›ä»»åŠ¡</strong></td><td>ä½¿ç”¨<code>match</code>,<code>multi_match</code>,<code>should</code>æŸ¥è¯¢å¿«é€Ÿæ‹‰å– 200 ä¸ª Top å€™é€‰</td></tr><tr><td><strong>æ€§èƒ½ä¼˜åŒ–</strong></td><td>å€ŸåŠ©å€’æ’ç´¢å¼• + åˆ†è¯å™¨ï¼Œè½»é‡æœç´¢æ¯«ç§’çº§è¿”å›</td></tr></tbody></table><hr><h2 id="ğŸ”Œ-ä¸‰ã€æ•°æ®åº“å¦‚ä½•ä¸-ElasticSearch-äº¤äº’"><a href="#ğŸ”Œ-ä¸‰ã€æ•°æ®åº“å¦‚ä½•ä¸-ElasticSearch-äº¤äº’" class="headerlink" title="ğŸ”Œ ä¸‰ã€æ•°æ®åº“å¦‚ä½•ä¸ ElasticSearch äº¤äº’"></a>ğŸ”Œ ä¸‰ã€æ•°æ®åº“å¦‚ä½•ä¸ ElasticSearch äº¤äº’</h2><h3 id="1ï¸âƒ£-ç´¢å¼•ç»“æ„è®¾è®¡ï¼ˆMappingï¼‰"><a href="#1ï¸âƒ£-ç´¢å¼•ç»“æ„è®¾è®¡ï¼ˆMappingï¼‰" class="headerlink" title="1ï¸âƒ£ ç´¢å¼•ç»“æ„è®¾è®¡ï¼ˆMappingï¼‰"></a>1ï¸âƒ£ ç´¢å¼•ç»“æ„è®¾è®¡ï¼ˆMappingï¼‰</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs json">PUT /team_index<br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;mappings&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;properties&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;team_id&quot;</span><span class="hljs-punctuation">:</span>    <span class="hljs-punctuation">&#123;</span> <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;keyword&quot;</span> <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;name_zh&quot;</span><span class="hljs-punctuation">:</span>    <span class="hljs-punctuation">&#123;</span> <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;text&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">&quot;analyzer&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ik_max_word&quot;</span> <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;name_en&quot;</span><span class="hljs-punctuation">:</span>    <span class="hljs-punctuation">&#123;</span> <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;text&quot;</span> <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;alias&quot;</span><span class="hljs-punctuation">:</span>      <span class="hljs-punctuation">&#123;</span> <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;text&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">&quot;analyzer&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ik_smart&quot;</span> <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;simple_pinyin&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span> <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;keyword&quot;</span> <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;full_pinyin&quot;</span><span class="hljs-punctuation">:</span>   <span class="hljs-punctuation">&#123;</span> <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;keyword&quot;</span> <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>å»ºè®®ä¸­æ–‡å­—æ®µç”¨ <code>ik</code> åˆ†è¯å™¨ï¼ˆå¯ç”¨è‡ªå®šä¹‰ï¼‰ï¼Œæ‹¼éŸ³å­—æ®µç”¨ <code>keyword</code> ç²¾ç¡®åŒ¹é…ã€‚</p><hr><h3 id="2ï¸âƒ£-æ•°æ®åŒæ­¥ç­–ç•¥"><a href="#2ï¸âƒ£-æ•°æ®åŒæ­¥ç­–ç•¥" class="headerlink" title="2ï¸âƒ£ æ•°æ®åŒæ­¥ç­–ç•¥"></a>2ï¸âƒ£ æ•°æ®åŒæ­¥ç­–ç•¥</h3><p>å¯é€‰ 2 ç§æ–¹å¼åŒæ­¥æ•°æ®åº“åˆ° ESï¼š</p><h4 id="ğŸŒ€-åå°å®šæ—¶åŒæ­¥"><a href="#ğŸŒ€-åå°å®šæ—¶åŒæ­¥" class="headerlink" title="ğŸŒ€ åå°å®šæ—¶åŒæ­¥"></a>ğŸŒ€ åå°å®šæ—¶åŒæ­¥</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">sync_mysql_to_es</span>():<br>    teams = mysql.query(<span class="hljs-string">&quot;SELECT * FROM teams&quot;</span>)<br>    <span class="hljs-keyword">for</span> team <span class="hljs-keyword">in</span> teams:<br>        es.index(index=<span class="hljs-string">&#x27;team_index&#x27;</span>, <span class="hljs-built_in">id</span>=team[<span class="hljs-string">&#x27;id&#x27;</span>], body=team)<br></code></pre></td></tr></table></figure><h4 id="âš¡-å®æ—¶è§¦å‘å¼ï¼ˆå¦‚Django-Celeryï¼‰"><a href="#âš¡-å®æ—¶è§¦å‘å¼ï¼ˆå¦‚Django-Celeryï¼‰" class="headerlink" title="âš¡ å®æ—¶è§¦å‘å¼ï¼ˆå¦‚Django + Celeryï¼‰"></a>âš¡ å®æ—¶è§¦å‘å¼ï¼ˆå¦‚Django + Celeryï¼‰</h4><p>ç›‘å¬æ–°å¢&#x2F;æ›´æ–°çƒé˜Ÿæ—¶ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">@receiver(<span class="hljs-params">post_save, sender=Team</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">update_es_index</span>(<span class="hljs-params">sender, instance, **kwargs</span>):<br>    es.index(index=<span class="hljs-string">&#x27;team_index&#x27;</span>, <span class="hljs-built_in">id</span>=instance.<span class="hljs-built_in">id</span>, body=model_to_dict(instance))<br></code></pre></td></tr></table></figure><hr><h2 id="ğŸ”-å››ã€ES-æŸ¥è¯¢å®ç°ï¼ˆPython-ç¤ºä¾‹ï¼‰"><a href="#ğŸ”-å››ã€ES-æŸ¥è¯¢å®ç°ï¼ˆPython-ç¤ºä¾‹ï¼‰" class="headerlink" title="ğŸ” å››ã€ES æŸ¥è¯¢å®ç°ï¼ˆPython ç¤ºä¾‹ï¼‰"></a>ğŸ” å››ã€ES æŸ¥è¯¢å®ç°ï¼ˆPython ç¤ºä¾‹ï¼‰</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> elasticsearch <span class="hljs-keyword">import</span> Elasticsearch<br><br>es = Elasticsearch(<span class="hljs-string">&quot;http://localhost:9200&quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">search_teams_es</span>(<span class="hljs-params">query: <span class="hljs-built_in">str</span>, size=<span class="hljs-number">20</span></span>):<br>    <span class="hljs-string">&quot;&quot;&quot;åœ¨ESä¸­æœç´¢çƒé˜Ÿ&quot;&quot;&quot;</span><br>    q = query.strip().lower()<br><br>    body = &#123;<br>        <span class="hljs-string">&quot;query&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;bool&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;should&quot;</span>: [<br>                    &#123; <span class="hljs-string">&quot;match&quot;</span>: &#123; <span class="hljs-string">&quot;name_zh&quot;</span>: q &#125;&#125;,<br>                    &#123; <span class="hljs-string">&quot;match&quot;</span>: &#123; <span class="hljs-string">&quot;name_en&quot;</span>: q &#125;&#125;,<br>                    &#123; <span class="hljs-string">&quot;match&quot;</span>: &#123; <span class="hljs-string">&quot;alias&quot;</span>: q &#125;&#125;,<br>                    &#123; <span class="hljs-string">&quot;term&quot;</span>:  &#123; <span class="hljs-string">&quot;simple_pinyin&quot;</span>: q &#125;&#125;,<br>                    &#123; <span class="hljs-string">&quot;term&quot;</span>:  &#123; <span class="hljs-string">&quot;full_pinyin&quot;</span>: q &#125;&#125;<br>                ]<br>            &#125;<br>        &#125;,<br>        <span class="hljs-string">&quot;size&quot;</span>: size<br>    &#125;<br><br>    resp = es.search(index=<span class="hljs-string">&quot;team_index&quot;</span>, body=body)<br>    <span class="hljs-keyword">return</span> [hit[<span class="hljs-string">&quot;_source&quot;</span>] <span class="hljs-keyword">for</span> hit <span class="hljs-keyword">in</span> resp[<span class="hljs-string">&quot;hits&quot;</span>][<span class="hljs-string">&quot;hits&quot;</span>]]<br></code></pre></td></tr></table></figure><blockquote><p>è‹¥ä½ è¦åš Typo å®¹é”™æˆ–æ‹¼å†™ä¿®æ­£ï¼Œä¹Ÿå¯å¼•å…¥ <code>fuzzy</code>, <code>match_phrase_prefix</code>, <code>suggest</code> æŸ¥è¯¢å™¨ã€‚</p></blockquote><hr><h2 id="ğŸ§ª-äº”ã€æµ‹è¯•æ–¹æ¡ˆè®¾è®¡"><a href="#ğŸ§ª-äº”ã€æµ‹è¯•æ–¹æ¡ˆè®¾è®¡" class="headerlink" title="ğŸ§ª äº”ã€æµ‹è¯•æ–¹æ¡ˆè®¾è®¡"></a>ğŸ§ª äº”ã€æµ‹è¯•æ–¹æ¡ˆè®¾è®¡</h2><h3 id="âœ…-1-å•å…ƒæµ‹è¯•"><a href="#âœ…-1-å•å…ƒæµ‹è¯•" class="headerlink" title="âœ… 1. å•å…ƒæµ‹è¯•"></a>âœ… 1. å•å…ƒæµ‹è¯•</h3><ul><li>ä½¿ç”¨å›ºå®šçš„ query å¦‚ <code>&quot;çš‡é©¬&quot;</code>, <code>&quot;real&quot;</code>, <code>&quot;rmad&quot;</code>, <code>&quot;huangjiamadelie&quot;</code></li><li>éªŒè¯è¿”å›æ˜¯å¦åŒ…å« <code>Real Madrid</code> ä¸”æ’åºé å‰</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_search_real_madrid</span>():<br>    results = search_teams_es(<span class="hljs-string">&quot;çš‡é©¬&quot;</span>)<br>    names = [r[<span class="hljs-string">&#x27;name_zh&#x27;</span>] <span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> results]<br>    <span class="hljs-keyword">assert</span> <span class="hljs-string">&quot;çš‡å®¶é©¬å¾·é‡Œ&quot;</span> <span class="hljs-keyword">in</span> names<br></code></pre></td></tr></table></figure><h3 id="âœ…-2-å¬å›ç‡æµ‹è¯•ï¼ˆç¦»çº¿è¯„ä¼°ï¼‰"><a href="#âœ…-2-å¬å›ç‡æµ‹è¯•ï¼ˆç¦»çº¿è¯„ä¼°ï¼‰" class="headerlink" title="âœ… 2. å¬å›ç‡æµ‹è¯•ï¼ˆç¦»çº¿è¯„ä¼°ï¼‰"></a>âœ… 2. å¬å›ç‡æµ‹è¯•ï¼ˆç¦»çº¿è¯„ä¼°ï¼‰</h3><ul><li>å»ºç«‹ä¸€ä¸ª query -&gt; ground truth æ˜ å°„è¡¨</li><li>æµ‹è¯• N æ¡ query çš„ Top-K å¬å›æ˜¯å¦æ­£ç¡®</li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;çš‡é©¬&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;çš‡å®¶é©¬å¾·é‡Œ&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;man u&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;æ›¼å½»æ–¯ç‰¹è”&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;acmilan&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;ACç±³å…°&quot;</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ Python è„šæœ¬ç»Ÿè®¡å¬å›ç‡ã€å‘½ä¸­ç‡ã€æ’åºè´¨é‡ã€‚</p><hr><h2 id="ğŸ¯-æ€§èƒ½æµ‹è¯•å»ºè®®"><a href="#ğŸ¯-æ€§èƒ½æµ‹è¯•å»ºè®®" class="headerlink" title="ğŸ¯ æ€§èƒ½æµ‹è¯•å»ºè®®"></a>ğŸ¯ æ€§èƒ½æµ‹è¯•å»ºè®®</h2><ul><li>ä½¿ç”¨ <code>ab</code> æˆ– <code>wrk</code> æ¨¡æ‹Ÿé«˜å¹¶å‘æœç´¢è¯·æ±‚ï¼Œæµ‹è¯• ES åå</li><li>æ¯æ¬¡æ‹‰å– 20 æ¡å€™é€‰ï¼Œåç«¯å†æ‰§è¡ŒäºŒæ¬¡é‡æ’æ‰“åˆ†</li></ul><hr><h2 id="âš’ï¸-å·¥ç¨‹å»ºè®®"><a href="#âš’ï¸-å·¥ç¨‹å»ºè®®" class="headerlink" title="âš’ï¸ å·¥ç¨‹å»ºè®®"></a>âš’ï¸ å·¥ç¨‹å»ºè®®</h2><table><thead><tr><th>æ¨¡å—</th><th>å®è·µå»ºè®®</th></tr></thead><tbody><tr><td>æ•°æ®å»ºæ¨¡</td><td>æ‹¼éŸ³å­—æ®µå†—ä½™å»ºæ¨¡å†™å…¥ ES</td></tr><tr><td>å¤šè¯­è¨€æ”¯æŒ</td><td>name_enã€alias ç­‰å­—æ®µæå‰é¢„å¤„ç†</td></tr><tr><td>SpellCheck</td><td>å¯ç”¨<code>elasticsearch-suggest</code>æ¨¡å—é›†æˆ</td></tr><tr><td>æœç´¢æ—¥å¿—åˆ†æ</td><td>æ—¥å¿—ä¸­è®°å½• query + è¿”å› top3ï¼Œè®­ç»ƒçƒ­åº¦æ¨¡å‹</td></tr></tbody></table><h1 id="ğŸ§©-æ‹¼éŸ³ç”Ÿæˆå™¨ï¼ˆç®€æ‹¼-å…¨æ‹¼ï¼‰é›†æˆ"><a href="#ğŸ§©-æ‹¼éŸ³ç”Ÿæˆå™¨ï¼ˆç®€æ‹¼-å…¨æ‹¼ï¼‰é›†æˆ" class="headerlink" title="ğŸ§© æ‹¼éŸ³ç”Ÿæˆå™¨ï¼ˆç®€æ‹¼&#x2F;å…¨æ‹¼ï¼‰é›†æˆ"></a>ğŸ§© æ‹¼éŸ³ç”Ÿæˆå™¨ï¼ˆç®€æ‹¼&#x2F;å…¨æ‹¼ï¼‰é›†æˆ</h1><hr><h2 id="ğŸ”§-1-å¼•å…¥ä¾èµ–"><a href="#ğŸ”§-1-å¼•å…¥ä¾èµ–" class="headerlink" title="ğŸ”§ 1. å¼•å…¥ä¾èµ–"></a>ğŸ”§ 1. å¼•å…¥ä¾èµ–</h2><p>ä½¿ç”¨é˜¿é‡Œå·´å·´çš„ <a href="https://github.com/belerweb/pinyin4j">pinyin4j</a>ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.belerweb<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>pinyin4j<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.5.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><hr><h2 id="ğŸ§ -2-æ‹¼éŸ³å·¥å…·ç±»å®ç°"><a href="#ğŸ§ -2-æ‹¼éŸ³å·¥å…·ç±»å®ç°" class="headerlink" title="ğŸ§  2. æ‹¼éŸ³å·¥å…·ç±»å®ç°"></a>ğŸ§  2. æ‹¼éŸ³å·¥å…·ç±»å®ç°</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PinyinUtil</span> &#123;<br><br>    <span class="hljs-comment">// è·å–å…¨æ‹¼ï¼Œå¦‚ï¼šåŒ—äº¬ â†’ beijing</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getFullPinyin</span><span class="hljs-params">(String chinese)</span> &#123;<br>        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">char</span> c : chinese.toCharArray()) &#123;<br>            <span class="hljs-keyword">if</span> (Character.toString(c).matches(<span class="hljs-string">&quot;[\\u4E00-\\u9FA5]+&quot;</span>)) &#123;<br>                String[] pinyinArray = PinyinHelper.toHanyuPinyinStringArray(c);<br>                <span class="hljs-keyword">if</span> (pinyinArray != <span class="hljs-literal">null</span>) &#123;<br>                    sb.append(pinyinArray[<span class="hljs-number">0</span>].replaceAll(<span class="hljs-string">&quot;\\d&quot;</span>, <span class="hljs-string">&quot;&quot;</span>));<br>                &#125;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                sb.append(c);<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> sb.toString().toLowerCase();<br>    &#125;<br><br>    <span class="hljs-comment">// è·å–ç®€æ‹¼ï¼Œå¦‚ï¼šåŒ—äº¬ â†’ bj</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getSimplePinyin</span><span class="hljs-params">(String chinese)</span> &#123;<br>        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">char</span> c : chinese.toCharArray()) &#123;<br>            <span class="hljs-keyword">if</span> (Character.toString(c).matches(<span class="hljs-string">&quot;[\\u4E00-\\u9FA5]+&quot;</span>)) &#123;<br>                String[] pinyinArray = PinyinHelper.toHanyuPinyinStringArray(c);<br>                <span class="hljs-keyword">if</span> (pinyinArray != <span class="hljs-literal">null</span> &amp;&amp; pinyinArray.length &gt; <span class="hljs-number">0</span>) &#123;<br>                    sb.append(pinyinArray[<span class="hljs-number">0</span>].charAt(<span class="hljs-number">0</span>));<br>                &#125;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                sb.append(c.charAt(<span class="hljs-number">0</span>));<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> sb.toString().toLowerCase();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><hr><h2 id="ğŸ“-3-å®ä½“ä¿å­˜æˆ–æ›´æ–°æ—¶è‡ªåŠ¨ç”Ÿæˆæ‹¼éŸ³å­—æ®µ"><a href="#ğŸ“-3-å®ä½“ä¿å­˜æˆ–æ›´æ–°æ—¶è‡ªåŠ¨ç”Ÿæˆæ‹¼éŸ³å­—æ®µ" class="headerlink" title="ğŸ“ 3. å®ä½“ä¿å­˜æˆ–æ›´æ–°æ—¶è‡ªåŠ¨ç”Ÿæˆæ‹¼éŸ³å­—æ®µ"></a>ğŸ“ 3. å®ä½“ä¿å­˜æˆ–æ›´æ–°æ—¶è‡ªåŠ¨ç”Ÿæˆæ‹¼éŸ³å­—æ®µ</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> Team <span class="hljs-title function_">preProcessTeam</span><span class="hljs-params">(Team team)</span> &#123;<br>    team.setSimplePinyin(PinyinUtil.getSimplePinyin(team.getNameZh()));<br>    team.setFullPinyin(PinyinUtil.getFullPinyin(team.getNameZh()));<br>    <span class="hljs-keyword">return</span> team;<br>&#125;<br></code></pre></td></tr></table></figure><p>å»ºè®®åœ¨ï¼š</p><ul><li>åå°å½•å…¥</li><li>æ•°æ®åº“å®šæ—¶åŒæ­¥</li><li>Kafka æ¶ˆè´¹ç«¯</li></ul><p>ç»Ÿä¸€è°ƒç”¨æ­¤é€»è¾‘ã€‚</p><hr><h1 id="ğŸ”„-å®æ—¶æ•°æ®åŒæ­¥æœºåˆ¶ï¼šMySQL-Kafka-Debezium-â†’-ES-è‡ªåŠ¨æ›´æ–°"><a href="#ğŸ”„-å®æ—¶æ•°æ®åŒæ­¥æœºåˆ¶ï¼šMySQL-Kafka-Debezium-â†’-ES-è‡ªåŠ¨æ›´æ–°" class="headerlink" title="ğŸ”„ å®æ—¶æ•°æ®åŒæ­¥æœºåˆ¶ï¼šMySQL + Kafka + Debezium â†’ ES è‡ªåŠ¨æ›´æ–°"></a>ğŸ”„ å®æ—¶æ•°æ®åŒæ­¥æœºåˆ¶ï¼šMySQL + Kafka + Debezium â†’ ES è‡ªåŠ¨æ›´æ–°</h1><hr><h2 id="ğŸ“¦-1-æ ¸å¿ƒç»„ä»¶è¯´æ˜"><a href="#ğŸ“¦-1-æ ¸å¿ƒç»„ä»¶è¯´æ˜" class="headerlink" title="ğŸ“¦ 1. æ ¸å¿ƒç»„ä»¶è¯´æ˜"></a>ğŸ“¦ 1. æ ¸å¿ƒç»„ä»¶è¯´æ˜</h2><table><thead><tr><th>ç»„ä»¶</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>MySQL</td><td>æ•°æ®æº</td></tr><tr><td>Debezium</td><td>ç›‘å¬ MySQL binlogï¼Œå®æ—¶æ•æ‰æ•°æ®å˜æ›´</td></tr><tr><td>Kafka</td><td>æ¥æ”¶ binlog äº‹ä»¶</td></tr><tr><td>Kafka Consumerï¼ˆSpringï¼‰</td><td>æ¶ˆè´¹äº‹ä»¶ã€åŒæ­¥æ•°æ®</td></tr><tr><td>Elasticsearch</td><td>æ¥æ”¶ç´¢å¼•æ›´æ–°</td></tr></tbody></table><hr><h2 id="ğŸ§°-2-Debezium-ç›‘å¬-MySQL-é…ç½®ï¼ˆDocker-æ–¹å¼ç¤ºä¾‹ï¼‰"><a href="#ğŸ§°-2-Debezium-ç›‘å¬-MySQL-é…ç½®ï¼ˆDocker-æ–¹å¼ç¤ºä¾‹ï¼‰" class="headerlink" title="ğŸ§° 2. Debezium ç›‘å¬ MySQL é…ç½®ï¼ˆDocker æ–¹å¼ç¤ºä¾‹ï¼‰"></a>ğŸ§° 2. Debezium ç›‘å¬ MySQL é…ç½®ï¼ˆDocker æ–¹å¼ç¤ºä¾‹ï¼‰</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">&#x27;3&#x27;</span><br><span class="hljs-attr">services:</span><br>  <span class="hljs-attr">zookeeper:</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">zookeeper:3.6</span><br>    <span class="hljs-attr">ports:</span> [<span class="hljs-string">&quot;2181:2181&quot;</span>]<br><br>  <span class="hljs-attr">kafka:</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">confluentinc/cp-kafka</span><br>    <span class="hljs-attr">ports:</span> [<span class="hljs-string">&quot;9092:9092&quot;</span>]<br>    <span class="hljs-attr">environment:</span><br>      <span class="hljs-attr">KAFKA_ZOOKEEPER_CONNECT:</span> <span class="hljs-string">zookeeper:2181</span><br>      <span class="hljs-attr">KAFKA_ADVERTISED_LISTENERS:</span> <span class="hljs-string">PLAINTEXT://kafka:9092</span><br><br>  <span class="hljs-attr">mysql:</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">mysql:8</span><br>    <span class="hljs-attr">environment:</span><br>      <span class="hljs-attr">MYSQL_ROOT_PASSWORD:</span> <span class="hljs-string">root</span><br><br>  <span class="hljs-attr">debezium:</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">debezium/connect:2.6</span><br>    <span class="hljs-attr">ports:</span> [<span class="hljs-string">&quot;8083:8083&quot;</span>]<br>    <span class="hljs-attr">environment:</span><br>      <span class="hljs-attr">BOOTSTRAP_SERVERS:</span> <span class="hljs-string">kafka:9092</span><br>      <span class="hljs-attr">GROUP_ID:</span> <span class="hljs-number">1</span><br>      <span class="hljs-attr">CONFIG_STORAGE_TOPIC:</span> <span class="hljs-string">my_connect_configs</span><br>      <span class="hljs-attr">OFFSET_STORAGE_TOPIC:</span> <span class="hljs-string">my_connect_offsets</span><br>      <span class="hljs-attr">STATUS_STORAGE_TOPIC:</span> <span class="hljs-string">my_connect_statuses</span><br></code></pre></td></tr></table></figure><p>æ³¨å†Œ MySQL ç›‘å¬å™¨ï¼ˆPOST åˆ° <a href="http://localhost:8083/connectors%EF%BC%89%EF%BC%9A">http://localhost:8083/connectorsï¼‰ï¼š</a></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;mysql-team-connector&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;config&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;connector.class&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;io.debezium.connector.mysql.MySqlConnector&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;database.hostname&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;mysql&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;database.port&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;3306&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;database.user&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;root&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;database.password&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;root&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;database.server.id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;database.include.list&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;sports_db&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;table.include.list&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;sports_db.teams&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;database.server.name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;mysqlserver1&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;database.history.kafka.bootstrap.servers&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;kafka:9092&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;database.history.kafka.topic&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;dbhistory.full&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>Kafka ä¼šæ¨é€ <code>mysqlserver1.sports_db.teams</code> ä¸»é¢˜ã€‚</p><hr><h2 id="ğŸ§‘â€ğŸ’»-3-Java-æ¶ˆè´¹-Kafka-â†’-è‡ªåŠ¨æ›´æ–°-Elasticsearch"><a href="#ğŸ§‘â€ğŸ’»-3-Java-æ¶ˆè´¹-Kafka-â†’-è‡ªåŠ¨æ›´æ–°-Elasticsearch" class="headerlink" title="ğŸ§‘â€ğŸ’» 3. Java æ¶ˆè´¹ Kafka â†’ è‡ªåŠ¨æ›´æ–° Elasticsearch"></a>ğŸ§‘â€ğŸ’» 3. Java æ¶ˆè´¹ Kafka â†’ è‡ªåŠ¨æ›´æ–° Elasticsearch</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@RequiredArgsConstructor</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TeamKafkaConsumer</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ObjectMapper objectMapper;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> TeamESRepository teamESRepository;<br><br>    <span class="hljs-meta">@KafkaListener(topics = &quot;mysqlserver1.sports_db.teams&quot;, groupId = &quot;team-sync&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">consumeTeamChange</span><span class="hljs-params">(String message)</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">JsonNode</span> <span class="hljs-variable">root</span> <span class="hljs-operator">=</span> objectMapper.readTree(message);<br>            <span class="hljs-type">JsonNode</span> <span class="hljs-variable">after</span> <span class="hljs-operator">=</span> root.path(<span class="hljs-string">&quot;payload&quot;</span>).path(<span class="hljs-string">&quot;after&quot;</span>);<br><br>            <span class="hljs-keyword">if</span> (!after.isMissingNode()) &#123;<br>                <span class="hljs-type">TeamDocument</span> <span class="hljs-variable">doc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TeamDocument</span>();<br>                doc.setId(after.get(<span class="hljs-string">&quot;id&quot;</span>).asLong());<br>                doc.setNameZh(after.get(<span class="hljs-string">&quot;nameZh&quot;</span>).asText());<br>                doc.setNameEn(after.get(<span class="hljs-string">&quot;nameEn&quot;</span>).asText());<br>                doc.setAlias(after.get(<span class="hljs-string">&quot;alias&quot;</span>).asText());<br><br>                doc.setSimplePinyin(PinyinUtil.getSimplePinyin(doc.getNameZh()));<br>                doc.setFullPinyin(PinyinUtil.getFullPinyin(doc.getNameZh()));<br><br>                teamESRepository.save(doc);<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            log.error(<span class="hljs-string">&quot;Failed to sync team from Kafka&quot;</span>, e);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><hr><h2 id="ğŸ”-æµ‹è¯•å»ºè®®"><a href="#ğŸ”-æµ‹è¯•å»ºè®®" class="headerlink" title="ğŸ” æµ‹è¯•å»ºè®®"></a>ğŸ” æµ‹è¯•å»ºè®®</h2><ul><li>ä½¿ç”¨ Kafka MockServer + å•å…ƒæµ‹è¯•éªŒè¯æ¶ˆè´¹æ˜¯å¦æ­£ç¡®å†™å…¥ ESã€‚</li><li>å†™å…¥æ•°æ®åº“æ¨¡æ‹Ÿæ–°å¢çƒé˜Ÿåï¼Œæ£€æŸ¥ ES ç´¢å¼•æ˜¯å¦è‡ªåŠ¨æ›´æ–°ã€‚</li><li>ä¿®æ”¹å·²æœ‰çƒé˜Ÿåï¼Œæµ‹è¯•æ‹¼éŸ³å­—æ®µæ˜¯å¦é‡æ–°ç”Ÿæˆã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>æµ‹è¯•å¸¸è§é—®é¢˜</category>
      
      <category>ç®—æ³•æµ‹è¯•</category>
      
      <category>æœç´¢ç®—æ³•æµ‹è¯•å…¥é—¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>æµ‹è¯•çŸ¥è¯†</tag>
      
      <tag>æœç´¢ç®—æ³•æµ‹è¯•å…¥é—¨</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python sortedå‡½æ•°è¯¦ç»†ä»‹ç»</title>
    <link href="/2025/04/14/sorted%E5%87%BD%E6%95%B0%E8%AF%A6%E7%BB%86%E4%BB%8B%E7%BB%8D/"/>
    <url>/2025/04/14/sorted%E5%87%BD%E6%95%B0%E8%AF%A6%E7%BB%86%E4%BB%8B%E7%BB%8D/</url>
    
    <content type="html"><![CDATA[<h1 id="Python-sorted-å‡½æ•°è¯¦ç»†ä»‹ç»"><a href="#Python-sorted-å‡½æ•°è¯¦ç»†ä»‹ç»" class="headerlink" title="Python sorted å‡½æ•°è¯¦ç»†ä»‹ç»"></a>Python sorted å‡½æ•°è¯¦ç»†ä»‹ç»</h1><h1 id="ğŸ“Œ-Python-ä¸­çš„-sorted-å‡½æ•°è¯¦è§£ï¼ˆä»å…¥é—¨åˆ°é«˜é˜¶ï¼‰"><a href="#ğŸ“Œ-Python-ä¸­çš„-sorted-å‡½æ•°è¯¦è§£ï¼ˆä»å…¥é—¨åˆ°é«˜é˜¶ï¼‰" class="headerlink" title="ğŸ“Œ Python ä¸­çš„ sorted() å‡½æ•°è¯¦è§£ï¼ˆä»å…¥é—¨åˆ°é«˜é˜¶ï¼‰"></a><strong>ğŸ“Œ Python ä¸­çš„ <code>sorted()</code> å‡½æ•°è¯¦è§£ï¼ˆä»å…¥é—¨åˆ°é«˜é˜¶ï¼‰</strong></h1><hr><h2 id="âœ…-1-ä»€ä¹ˆæ˜¯-sorted-ï¼Ÿ"><a href="#âœ…-1-ä»€ä¹ˆæ˜¯-sorted-ï¼Ÿ" class="headerlink" title="âœ… 1. ä»€ä¹ˆæ˜¯ sorted()ï¼Ÿ"></a>âœ… 1. ä»€ä¹ˆæ˜¯ <code>sorted()</code>ï¼Ÿ</h2><p><code>sorted()</code> æ˜¯ Python å†…ç½®çš„â€‹<strong>æ’åºå‡½æ•°</strong>â€‹ï¼Œå¯ä»¥å¯¹â€‹<strong>ä»»æ„å¯è¿­ä»£å¯¹è±¡ï¼ˆå¦‚åˆ—è¡¨ã€å…ƒç»„ã€é›†åˆã€å­—å…¸ç­‰ï¼‰</strong>è¿›è¡Œæ’åºï¼Œå¹¶<strong>è¿”å›ä¸€ä¸ªæ–°çš„æœ‰åºåˆ—è¡¨</strong>â€‹ï¼Œâ€‹<strong>ä¸ä¼šä¿®æ”¹åŸå§‹æ•°æ®</strong>â€‹ã€‚</p><h3 id="ğŸ”¹-åŸºæœ¬è¯­æ³•ï¼š"><a href="#ğŸ”¹-åŸºæœ¬è¯­æ³•ï¼š" class="headerlink" title="ğŸ”¹ åŸºæœ¬è¯­æ³•ï¼š"></a><strong>ğŸ”¹ åŸºæœ¬è¯­æ³•ï¼š</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">sorted</span>(iterable, *, key=<span class="hljs-literal">None</span>, reverse=<span class="hljs-literal">False</span>)<br></code></pre></td></tr></table></figure><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>iterable</code></td><td>å¯è¿­ä»£å¯¹è±¡ï¼Œå¦‚<code>list</code>ã€<code>tuple</code>ã€<code>dict</code>ç­‰</td></tr><tr><td><code>key</code></td><td>æ’åºå‡½æ•°ï¼Œç”¨äºæŒ‡å®šæ’åºä¾æ®</td></tr><tr><td><code>reverse</code></td><td>æ˜¯å¦åå‘æ’åºï¼Œé»˜è®¤ä¸º<code>False</code>ï¼ˆå‡åºï¼‰</td></tr></tbody></table><hr><h2 id="âœ…-2-åŸºç¡€ç”¨æ³•ï¼šå¯¹åˆ—è¡¨æ’åº"><a href="#âœ…-2-åŸºç¡€ç”¨æ³•ï¼šå¯¹åˆ—è¡¨æ’åº" class="headerlink" title="âœ… 2. åŸºç¡€ç”¨æ³•ï¼šå¯¹åˆ—è¡¨æ’åº"></a>âœ… 2. åŸºç¡€ç”¨æ³•ï¼šå¯¹åˆ—è¡¨æ’åº</h2><h3 id="ğŸ“Œ-ç¤ºä¾‹-1ï¼šæ•°å­—å‡åºæ’åº"><a href="#ğŸ“Œ-ç¤ºä¾‹-1ï¼šæ•°å­—å‡åºæ’åº" class="headerlink" title="ğŸ“Œ ç¤ºä¾‹ 1ï¼šæ•°å­—å‡åºæ’åº"></a><strong>ğŸ“Œ ç¤ºä¾‹ 1ï¼šæ•°å­—å‡åºæ’åº</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">numbers = [<span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">9</span>, <span class="hljs-number">2</span>]<br>result = <span class="hljs-built_in">sorted</span>(numbers)<br><span class="hljs-built_in">print</span>(result)  <span class="hljs-comment"># âœ… [1, 1, 2, 3, 4, 5, 9]</span><br></code></pre></td></tr></table></figure><h3 id="ğŸ“Œ-ç¤ºä¾‹-2ï¼šå­—ç¬¦ä¸²æ’åºï¼ˆæŒ‰å­—æ¯ï¼‰"><a href="#ğŸ“Œ-ç¤ºä¾‹-2ï¼šå­—ç¬¦ä¸²æ’åºï¼ˆæŒ‰å­—æ¯ï¼‰" class="headerlink" title="ğŸ“Œ ç¤ºä¾‹ 2ï¼šå­—ç¬¦ä¸²æ’åºï¼ˆæŒ‰å­—æ¯ï¼‰"></a><strong>ğŸ“Œ ç¤ºä¾‹ 2ï¼šå­—ç¬¦ä¸²æ’åºï¼ˆæŒ‰å­—æ¯ï¼‰</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">words = [<span class="hljs-string">&#x27;banana&#x27;</span>, <span class="hljs-string">&#x27;apple&#x27;</span>, <span class="hljs-string">&#x27;cherry&#x27;</span>]<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">sorted</span>(words))  <span class="hljs-comment"># âœ… [&#x27;apple&#x27;, &#x27;banana&#x27;, &#x27;cherry&#x27;]</span><br></code></pre></td></tr></table></figure><h3 id="âœ…-æ³¨æ„ï¼šåŸå§‹åˆ—è¡¨æœªè¢«ä¿®æ”¹"><a href="#âœ…-æ³¨æ„ï¼šåŸå§‹åˆ—è¡¨æœªè¢«ä¿®æ”¹" class="headerlink" title="âœ… æ³¨æ„ï¼šåŸå§‹åˆ—è¡¨æœªè¢«ä¿®æ”¹"></a>âœ… <strong>æ³¨æ„ï¼šåŸå§‹åˆ—è¡¨æœªè¢«ä¿®æ”¹</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(numbers)  <span class="hljs-comment"># âœ… [3, 1, 4, 1, 5, 9, 2]</span><br></code></pre></td></tr></table></figure><hr><h2 id="âœ…-3-ä¸-sort-çš„åŒºåˆ«"><a href="#âœ…-3-ä¸-sort-çš„åŒºåˆ«" class="headerlink" title="âœ… 3. ä¸ .sort() çš„åŒºåˆ«"></a>âœ… 3. ä¸ <code>.sort()</code> çš„åŒºåˆ«</h2><table><thead><tr><th>ç‰¹æ€§</th><th><code>sorted()</code></th><th><code>list.sort()</code></th></tr></thead><tbody><tr><td>è¿”å›æ–°åˆ—è¡¨</td><td>âœ… æ˜¯</td><td>âŒ å¦ï¼ˆå°±åœ°æ’åºï¼‰</td></tr><tr><td>é€‚ç”¨äºæ‰€æœ‰å¯è¿­ä»£å¯¹è±¡</td><td>âœ… æ˜¯</td><td>âŒ ä»…é™<code>list</code></td></tr><tr><td>æ›´æ¨èåœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ä½¿ç”¨</td><td>âœ… æ˜¯</td><td>âŒ å¦</td></tr><tr><td>æ˜¯å¦ç ´ååŸæ•°æ®</td><td>âŒ ä¸ç ´å</td><td>âœ… ä¿®æ”¹åŸå¯¹è±¡</td></tr></tbody></table><hr><h2 id="âœ…-4-ä½¿ç”¨-reverse-True-å®ç°é™åºæ’åº"><a href="#âœ…-4-ä½¿ç”¨-reverse-True-å®ç°é™åºæ’åº" class="headerlink" title="âœ… 4. ä½¿ç”¨ reverse=True å®ç°é™åºæ’åº"></a>âœ… 4. ä½¿ç”¨ <code>reverse=True</code> å®ç°é™åºæ’åº</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">scores = [<span class="hljs-number">60</span>, <span class="hljs-number">75</span>, <span class="hljs-number">90</span>, <span class="hljs-number">88</span>, <span class="hljs-number">70</span>]<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">sorted</span>(scores, reverse=<span class="hljs-literal">True</span>))  <span class="hljs-comment"># âœ… [90, 88, 75, 70, 60]</span><br></code></pre></td></tr></table></figure><hr><h2 id="âœ…-5-ä½¿ç”¨-key-æŒ‡å®šæ’åºä¾æ®"><a href="#âœ…-5-ä½¿ç”¨-key-æŒ‡å®šæ’åºä¾æ®" class="headerlink" title="âœ… 5. ä½¿ç”¨ key æŒ‡å®šæ’åºä¾æ®"></a>âœ… 5. ä½¿ç”¨ <code>key</code> æŒ‡å®šæ’åºä¾æ®</h2><h3 id="ğŸ“Œ-ç¤ºä¾‹-1ï¼šæŒ‰å­—ç¬¦ä¸²é•¿åº¦æ’åº"><a href="#ğŸ“Œ-ç¤ºä¾‹-1ï¼šæŒ‰å­—ç¬¦ä¸²é•¿åº¦æ’åº" class="headerlink" title="ğŸ“Œ ç¤ºä¾‹ 1ï¼šæŒ‰å­—ç¬¦ä¸²é•¿åº¦æ’åº"></a><strong>ğŸ“Œ ç¤ºä¾‹ 1ï¼šæŒ‰å­—ç¬¦ä¸²é•¿åº¦æ’åº</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">words = [<span class="hljs-string">&#x27;apple&#x27;</span>, <span class="hljs-string">&#x27;banana&#x27;</span>, <span class="hljs-string">&#x27;pear&#x27;</span>, <span class="hljs-string">&#x27;kiwi&#x27;</span>]<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">sorted</span>(words, key=<span class="hljs-built_in">len</span>))  <span class="hljs-comment"># âœ… [&#x27;kiwi&#x27;, &#x27;pear&#x27;, &#x27;apple&#x27;, &#x27;banana&#x27;]</span><br></code></pre></td></tr></table></figure><h3 id="ğŸ“Œ-ç¤ºä¾‹-2ï¼šå¿½ç•¥å¤§å°å†™æ’åº"><a href="#ğŸ“Œ-ç¤ºä¾‹-2ï¼šå¿½ç•¥å¤§å°å†™æ’åº" class="headerlink" title="ğŸ“Œ ç¤ºä¾‹ 2ï¼šå¿½ç•¥å¤§å°å†™æ’åº"></a><strong>ğŸ“Œ ç¤ºä¾‹ 2ï¼šå¿½ç•¥å¤§å°å†™æ’åº</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">words = [<span class="hljs-string">&#x27;Banana&#x27;</span>, <span class="hljs-string">&#x27;apple&#x27;</span>, <span class="hljs-string">&#x27;Cherry&#x27;</span>]<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">sorted</span>(words, key=<span class="hljs-built_in">str</span>.lower))  <span class="hljs-comment"># âœ… [&#x27;apple&#x27;, &#x27;Banana&#x27;, &#x27;Cherry&#x27;]</span><br></code></pre></td></tr></table></figure><hr><h2 id="âœ…-6-æ’åºå­—å…¸åˆ—è¡¨ï¼ˆä¼ä¸šå¸¸ç”¨ï¼‰"><a href="#âœ…-6-æ’åºå­—å…¸åˆ—è¡¨ï¼ˆä¼ä¸šå¸¸ç”¨ï¼‰" class="headerlink" title="âœ… 6. æ’åºå­—å…¸åˆ—è¡¨ï¼ˆä¼ä¸šå¸¸ç”¨ï¼‰"></a>âœ… 6. æ’åºå­—å…¸åˆ—è¡¨ï¼ˆä¼ä¸šå¸¸ç”¨ï¼‰</h2><h3 id="ğŸ“Œ-ç¤ºä¾‹-1ï¼šæŒ‰å¹´é¾„æ’åºå‘˜å·¥åˆ—è¡¨"><a href="#ğŸ“Œ-ç¤ºä¾‹-1ï¼šæŒ‰å¹´é¾„æ’åºå‘˜å·¥åˆ—è¡¨" class="headerlink" title="ğŸ“Œ ç¤ºä¾‹ 1ï¼šæŒ‰å¹´é¾„æ’åºå‘˜å·¥åˆ—è¡¨"></a><strong>ğŸ“Œ ç¤ºä¾‹ 1ï¼šæŒ‰å¹´é¾„æ’åºå‘˜å·¥åˆ—è¡¨</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python">employees = [<br>    &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">30</span>&#125;,<br>    &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">25</span>&#125;,<br>    &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Tom&quot;</span>, <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">35</span>&#125;<br>]<br><br><span class="hljs-comment"># ä½¿ç”¨ key=lambda è·å–å­—å…¸ä¸­çš„ age å€¼</span><br>sorted_employees = <span class="hljs-built_in">sorted</span>(employees, key=<span class="hljs-keyword">lambda</span> emp: emp[<span class="hljs-string">&quot;age&quot;</span>])<br><span class="hljs-keyword">for</span> e <span class="hljs-keyword">in</span> sorted_employees:<br>    <span class="hljs-built_in">print</span>(e[<span class="hljs-string">&quot;name&quot;</span>], e[<span class="hljs-string">&quot;age&quot;</span>])<br></code></pre></td></tr></table></figure><p>âœ… è¾“å‡ºï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Bob</span> <span class="hljs-number">25</span><br><span class="hljs-attribute">Alice</span> <span class="hljs-number">30</span><br><span class="hljs-attribute">Tom</span> <span class="hljs-number">35</span><br></code></pre></td></tr></table></figure><hr><h3 id="ğŸ“Œ-ç¤ºä¾‹-2ï¼šæŒ‰å¤šä¸ªå­—æ®µæ’åºï¼ˆå…ˆæŒ‰å¹´é¾„ï¼Œå†æŒ‰å§“åï¼‰"><a href="#ğŸ“Œ-ç¤ºä¾‹-2ï¼šæŒ‰å¤šä¸ªå­—æ®µæ’åºï¼ˆå…ˆæŒ‰å¹´é¾„ï¼Œå†æŒ‰å§“åï¼‰" class="headerlink" title="ğŸ“Œ ç¤ºä¾‹ 2ï¼šæŒ‰å¤šä¸ªå­—æ®µæ’åºï¼ˆå…ˆæŒ‰å¹´é¾„ï¼Œå†æŒ‰å§“åï¼‰"></a><strong>ğŸ“Œ ç¤ºä¾‹ 2ï¼šæŒ‰å¤šä¸ªå­—æ®µæ’åºï¼ˆå…ˆæŒ‰å¹´é¾„ï¼Œå†æŒ‰å§“åï¼‰</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python">employees = [<br>    &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">30</span>&#125;,<br>    &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">25</span>&#125;,<br>    &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">25</span>&#125;<br>]<br><br><span class="hljs-comment"># å¤šæ¡ä»¶æ’åºï¼šå…ˆæŒ‰ age å‡åºï¼Œå†æŒ‰ name å‡åº</span><br>sorted_employees = <span class="hljs-built_in">sorted</span>(employees, key=<span class="hljs-keyword">lambda</span> e: (e[<span class="hljs-string">&quot;age&quot;</span>], e[<span class="hljs-string">&quot;name&quot;</span>]))<br><span class="hljs-keyword">for</span> e <span class="hljs-keyword">in</span> sorted_employees:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;<span class="hljs-subst">&#123;e[<span class="hljs-string">&quot;name&quot;</span>]&#125;</span> - <span class="hljs-subst">&#123;e[<span class="hljs-string">&quot;age&quot;</span>]&#125;</span>&#x27;</span>)<br></code></pre></td></tr></table></figure><hr><h2 id="âœ…-7-å¤æ‚æ•°æ®ç»“æ„æ’åºï¼ˆä¼ä¸šå®æˆ˜ï¼‰"><a href="#âœ…-7-å¤æ‚æ•°æ®ç»“æ„æ’åºï¼ˆä¼ä¸šå®æˆ˜ï¼‰" class="headerlink" title="âœ… 7. å¤æ‚æ•°æ®ç»“æ„æ’åºï¼ˆä¼ä¸šå®æˆ˜ï¼‰"></a>âœ… 7. å¤æ‚æ•°æ®ç»“æ„æ’åºï¼ˆä¼ä¸šå®æˆ˜ï¼‰</h2><h3 id="ğŸ“Œ-æŒ‰æ–‡ä»¶å¤§å°æ’åºï¼ˆæ¨¡æ‹Ÿæ–‡ä»¶ä¿¡æ¯ï¼‰"><a href="#ğŸ“Œ-æŒ‰æ–‡ä»¶å¤§å°æ’åºï¼ˆæ¨¡æ‹Ÿæ–‡ä»¶ä¿¡æ¯ï¼‰" class="headerlink" title="ğŸ“Œ æŒ‰æ–‡ä»¶å¤§å°æ’åºï¼ˆæ¨¡æ‹Ÿæ–‡ä»¶ä¿¡æ¯ï¼‰"></a><strong>ğŸ“Œ æŒ‰æ–‡ä»¶å¤§å°æ’åºï¼ˆæ¨¡æ‹Ÿæ–‡ä»¶ä¿¡æ¯ï¼‰</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python">files = [<br>    &#123;<span class="hljs-string">&quot;filename&quot;</span>: <span class="hljs-string">&quot;report.docx&quot;</span>, <span class="hljs-string">&quot;size&quot;</span>: <span class="hljs-number">2400</span>&#125;,<br>    &#123;<span class="hljs-string">&quot;filename&quot;</span>: <span class="hljs-string">&quot;data.xlsx&quot;</span>, <span class="hljs-string">&quot;size&quot;</span>: <span class="hljs-number">5000</span>&#125;,<br>    &#123;<span class="hljs-string">&quot;filename&quot;</span>: <span class="hljs-string">&quot;image.png&quot;</span>, <span class="hljs-string">&quot;size&quot;</span>: <span class="hljs-number">3200</span>&#125;,<br>]<br><br><span class="hljs-comment"># æŒ‰ size é™åºæ’åº</span><br>largest_first = <span class="hljs-built_in">sorted</span>(files, key=<span class="hljs-keyword">lambda</span> f: f[<span class="hljs-string">&quot;size&quot;</span>], reverse=<span class="hljs-literal">True</span>)<br><span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> largest_first:<br>    <span class="hljs-built_in">print</span>(f[<span class="hljs-string">&quot;filename&quot;</span>], f[<span class="hljs-string">&quot;size&quot;</span>])<br></code></pre></td></tr></table></figure><p>âœ… è¾“å‡ºï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">data</span>.xlsx <span class="hljs-number">5000</span><br><span class="hljs-attribute">image</span>.png <span class="hljs-number">3200</span><br><span class="hljs-attribute">report</span>.docx <span class="hljs-number">2400</span><br></code></pre></td></tr></table></figure><hr><h2 id="âœ…-8-ä¸è‡ªå®šä¹‰å‡½æ•°ç»“åˆ"><a href="#âœ…-8-ä¸è‡ªå®šä¹‰å‡½æ•°ç»“åˆ" class="headerlink" title="âœ… 8. ä¸è‡ªå®šä¹‰å‡½æ•°ç»“åˆ"></a>âœ… 8. ä¸è‡ªå®šä¹‰å‡½æ•°ç»“åˆ</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_last_digit</span>(<span class="hljs-params">num</span>):<br>    <span class="hljs-keyword">return</span> num % <span class="hljs-number">10</span><br><br>nums = [<span class="hljs-number">23</span>, <span class="hljs-number">41</span>, <span class="hljs-number">56</span>, <span class="hljs-number">77</span>]<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">sorted</span>(nums, key=get_last_digit))  <span class="hljs-comment"># âœ… [41, 23, 56, 77]</span><br></code></pre></td></tr></table></figure><hr><h2 id="âœ…-9-ä½¿ç”¨-operator-æ¨¡å—ç®€åŒ–æ’åº"><a href="#âœ…-9-ä½¿ç”¨-operator-æ¨¡å—ç®€åŒ–æ’åº" class="headerlink" title="âœ… 9. ä½¿ç”¨ operator æ¨¡å—ç®€åŒ–æ’åº"></a>âœ… 9. ä½¿ç”¨ <code>operator</code> æ¨¡å—ç®€åŒ–æ’åº</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> operator <span class="hljs-keyword">import</span> itemgetter<br><br>employees = [<br>    &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">30</span>&#125;,<br>    &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">25</span>&#125;,<br>    &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Tom&quot;</span>, <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">35</span>&#125;<br>]<br><br><span class="hljs-comment"># itemgetter(&#x27;age&#x27;) ç­‰åŒäº lambda e: e[&#x27;age&#x27;]</span><br>sorted_list = <span class="hljs-built_in">sorted</span>(employees, key=itemgetter(<span class="hljs-string">&quot;age&quot;</span>))<br></code></pre></td></tr></table></figure><hr><h2 id="âœ…-10-ä¸ä½¿ç”¨-sorted-çš„å½±å“"><a href="#âœ…-10-ä¸ä½¿ç”¨-sorted-çš„å½±å“" class="headerlink" title="âœ… 10. ä¸ä½¿ç”¨ sorted() çš„å½±å“"></a>âœ… 10. ä¸ä½¿ç”¨ <code>sorted()</code> çš„å½±å“</h2><h3 id="âŒ-æ‰‹åŠ¨æ’åºæ•ˆç‡ä½-ä¸å®‰å…¨"><a href="#âŒ-æ‰‹åŠ¨æ’åºæ•ˆç‡ä½-ä¸å®‰å…¨" class="headerlink" title="âŒ æ‰‹åŠ¨æ’åºæ•ˆç‡ä½ &amp; ä¸å®‰å…¨"></a>âŒ æ‰‹åŠ¨æ’åºæ•ˆç‡ä½ &amp; ä¸å®‰å…¨</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># æ¨¡æ‹Ÿæ‰‹åŠ¨æ’åºé€»è¾‘ï¼ˆä¸æ¨èï¼‰</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(scores)):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i + <span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(scores)):<br>        <span class="hljs-keyword">if</span> scores[i] &gt; scores[j]:<br>            scores[i], scores[j] = scores[j], scores[i]<br></code></pre></td></tr></table></figure><p>ğŸ”´ é—®é¢˜ï¼š</p><ul><li>âŒ æ‰‹å†™æ’åºå®¹æ˜“å‡ºé”™</li><li>âŒ å¯è¯»æ€§å·®</li><li>âŒ æ— æ³•å¿«é€Ÿåˆ‡æ¢æ’åºä¾æ®</li><li>âœ… <code>sorted()</code> æ€§èƒ½ä¼˜åŒ–å¥½ã€æ”¯æŒå¤šæ¡ä»¶ã€key å®šåˆ¶çµæ´»</li></ul><hr><h2 id="âœ…-11-å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„-sorted"><a href="#âœ…-11-å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„-sorted" class="headerlink" title="âœ… 11. å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„ sorted()"></a>âœ… 11. å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„ <code>sorted()</code></h2><p>ç»“åˆ <code>map</code>ã€<code>filter</code>ã€<code>lambda</code>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">products = [<span class="hljs-string">&quot;book&quot;</span>, <span class="hljs-string">&quot;TV&quot;</span>, <span class="hljs-string">&quot;laptop&quot;</span>, <span class="hljs-string">&quot;pen&quot;</span>, <span class="hljs-string">&quot;speaker&quot;</span>]<br><span class="hljs-comment"># è¿‡æ»¤å‡ºé•¿åº¦ &gt; 3 çš„ï¼Œå¹¶æŒ‰å­—æ¯æ’åº</span><br>result = <span class="hljs-built_in">sorted</span>(<span class="hljs-built_in">filter</span>(<span class="hljs-keyword">lambda</span> x: <span class="hljs-built_in">len</span>(x) &gt; <span class="hljs-number">3</span>, products))<br><span class="hljs-built_in">print</span>(result)  <span class="hljs-comment"># âœ… [&#x27;book&#x27;, &#x27;laptop&#x27;, &#x27;speaker&#x27;]</span><br></code></pre></td></tr></table></figure><hr><h2 id="âœ…-12-æ€»ç»“ï¼šsorted-çš„å¼ºå¤§ä¹‹å¤„"><a href="#âœ…-12-æ€»ç»“ï¼šsorted-çš„å¼ºå¤§ä¹‹å¤„" class="headerlink" title="âœ… 12. æ€»ç»“ï¼šsorted() çš„å¼ºå¤§ä¹‹å¤„"></a>âœ… 12. æ€»ç»“ï¼š<code>sorted()</code> çš„å¼ºå¤§ä¹‹å¤„</h2><table><thead><tr><th>åŠŸèƒ½</th><th>ä½¿ç”¨æ–¹å¼</th><th>ä¼˜ç‚¹</th></tr></thead><tbody><tr><td>åŸºæœ¬æ’åº</td><td><code>sorted(list)</code></td><td>å‡åºã€ç¨³å®šæ’åº</td></tr><tr><td>é™åºæ’åº</td><td><code>sorted(list, reverse=True)</code></td><td>å¿«é€Ÿå®ç°é™åº</td></tr><tr><td>è‡ªå®šä¹‰æ’åº</td><td><code>key=lambda x: ...</code></td><td>çµæ´»</td></tr><tr><td>å¤šå­—æ®µæ’åº</td><td><code>key=lambda x: (a, b)</code></td><td>ä¼ä¸šæ•°æ®å¤„ç†åœºæ™¯</td></tr><tr><td>ä¸ä¿®æ”¹åŸå§‹æ•°æ®</td><td><code>è¿”å›æ–°åˆ—è¡¨</code></td><td>æ›´å®‰å…¨</td></tr><tr><td>å¯æ’åºä»»æ„å¯è¿­ä»£å¯¹è±¡</td><td><code>dict, tuple, set</code>ç­‰</td><td>æ›´é€šç”¨</td></tr></tbody></table><hr><h3 id="âœ…-ä¼ä¸šåœºæ™¯å»ºè®®"><a href="#âœ…-ä¼ä¸šåœºæ™¯å»ºè®®" class="headerlink" title="âœ… ä¼ä¸šåœºæ™¯å»ºè®®"></a>âœ… ä¼ä¸šåœºæ™¯å»ºè®®</h3><table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ–¹å¼</th></tr></thead><tbody><tr><td>æ’åºåˆ—è¡¨ä¸­çš„æ•°å­—æˆ–å­—ç¬¦ä¸²</td><td><code>sorted(list)</code></td></tr><tr><td>å¯¹å¤æ‚å¯¹è±¡å¦‚å­—å…¸æ’åº</td><td><code>key=lambda x: x[&quot;key&quot;]</code></td></tr><tr><td>å¤šå­—æ®µæ’åº</td><td><code>key=lambda x: (x[&quot;a&quot;], x[&quot;b&quot;])</code></td></tr><tr><td>å¤„ç†å¤§æ•°æ®åˆ—è¡¨</td><td><code>sorted()</code>+<code>key</code>+<code>reverse</code>ç»„åˆ</td></tr><tr><td>å·¥å…·å‹æ¨¡å—</td><td>ä½¿ç”¨<code>operator.itemgetter</code>æé«˜æ•ˆç‡</td></tr></tbody></table><hr><p>ğŸ§  â€‹<strong>è®°ä½</strong>â€‹ï¼š<code>sorted()</code> æ˜¯ Python æ•°æ®å¤„ç†çš„â€‹<strong>å¿…å¤‡å·¥å…·</strong>â€‹ï¼Œå†™æ¸…æ¥šæ’åºé€»è¾‘ï¼Œè®©ä½ çš„ä»£ç æ›´æ¸…æ™°ã€æ›´å®‰å…¨ã€æ›´ä¼˜é›…ã€‚æŒæ¡ <code>key</code> å’Œ <code>reverse</code>ï¼Œä½ å°±æŒæ¡äº†æ•°æ®æ’åºçš„æ ¸å¿ƒã€‚</p><p>ğŸš€ <strong>ä»ç°åœ¨å¼€å§‹ï¼Œè®©ä½ çš„æ’åºä»æ‰‹åŠ¨å®ç° â†’ Pythonic ä¼˜é›…ï¼</strong></p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
      <category>Python å¸¸è§å‡½æ•°</category>
      
      <category>Python sortedå‡½æ•°ä»‹ç»</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>python sortedå‡½æ•°</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python åè½¬å­—ç¬¦ä¸²å¹¶æŒ‰ç…§é•¿åº¦æ’åº</title>
    <link href="/2025/04/08/python%E5%8F%8D%E8%BD%AC%E5%AD%97%E7%AC%A6%E4%B8%B2/"/>
    <url>/2025/04/08/python%E5%8F%8D%E8%BD%AC%E5%AD%97%E7%AC%A6%E4%B8%B2/</url>
    
    <content type="html"><![CDATA[<h1 id="Python-åè½¬å­—ç¬¦ä¸²å¹¶æŒ‰ç…§é•¿åº¦æ’åº"><a href="#Python-åè½¬å­—ç¬¦ä¸²å¹¶æŒ‰ç…§é•¿åº¦æ’åº" class="headerlink" title="Python åè½¬å­—ç¬¦ä¸²å¹¶æŒ‰ç…§é•¿åº¦æ’åº"></a>Python åè½¬å­—ç¬¦ä¸²å¹¶æŒ‰ç…§é•¿åº¦æ’åº</h1><h1 id="é¢˜ç›®è¦æ±‚"><a href="#é¢˜ç›®è¦æ±‚" class="headerlink" title="é¢˜ç›®è¦æ±‚"></a>é¢˜ç›®è¦æ±‚</h1><p>æ ¹æ®å•è¯é•¿åº¦ç”±é«˜åˆ°ä½è¿›è¡Œæ’åºï¼Œç›¸åŒé•¿åº¦çš„å•è¯ä¿æŒåŸé¡ºåºï¼Œé¦–å­—æ¯å¤§å†™ï¼Œ<code>e.g. ï¼Œè¾“å…¥ï¼šI am a studentï¼Œè¾“å‡ºï¼š Student am i a</code></p><h1 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">sort</span>(<span class="hljs-params">str_name</span>):<br>    <span class="hljs-keyword">if</span> str_name:<br>        str_name = str_name.split()<br>        str_name = <span class="hljs-built_in">sorted</span>(str_name, key=<span class="hljs-built_in">len</span>, reverse=<span class="hljs-literal">True</span>)<br>        str_name[<span class="hljs-number">0</span>] = str_name[<span class="hljs-number">0</span>].capitalize()<br>        <span class="hljs-built_in">print</span>(str_name)<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27; &#x27;</span>.join(str_name)<br><br><br><span class="hljs-built_in">print</span>(sort(<span class="hljs-string">&quot;I am a student&quot;</span>))<br><br></code></pre></td></tr></table></figure><h1 id="ä»£ç è§£æ"><a href="#ä»£ç è§£æ" class="headerlink" title="ä»£ç è§£æ"></a>ä»£ç è§£æ</h1><p>è¿™é‡Œé¦–å…ˆä½¿ç”¨<code>split</code> è¿›è¡ŒæŒ‰ç…§ç©ºæ ¼åˆ†éš”ï¼Œä»è€Œç”Ÿæˆåˆ—è¡¨ï¼Œç„¶åä½¿ç”¨<code>sorted</code>å‡½æ•°å®ç°æŒ‰ç…§<code>len</code>çš„é•¿åº¦å¹¶ä¸”åè½¬è¾“å‡ºï¼Œä¹Ÿå°±å®ç°äº†é¢˜ç›®çš„è¦æ±‚æŒ‰ç…§ä»é«˜åˆ°ä½çš„é¡ºåºï¼Œç„¶åæˆ‘ä»¬å°†é¦–å­—æ¯å®ç°å¤§å†™ä½¿ç”¨çš„æ˜¯<code>capitalize()</code>è¿™ä¸ªå‡½æ•°ï¼Œæœ€åä½¿ç”¨<code>join</code>å°†å…¶ç»„è£…æˆä¸€ä¸ªæ–°çš„å¥å­è¾“å‡ºï¼</p>]]></content>
    
    
    <categories>
      
      <category>é¢è¯•é¢˜ç›®æœé›†</category>
      
      <category>Python ç®—æ³•é¢˜ç›®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>äº’è”ç½‘å¹¿å‘Šæµ‹è¯•å…¨é¢æŒ‡å—</title>
    <link href="/2025/04/02/%E4%B8%B4%E6%97%B6/"/>
    <url>/2025/04/02/%E4%B8%B4%E6%97%B6/</url>
    
    <content type="html"><![CDATA[<h1 id="äº’è”ç½‘å¹¿å‘Šæµ‹è¯•å…¨é¢æŒ‡å—"><a href="#äº’è”ç½‘å¹¿å‘Šæµ‹è¯•å…¨é¢æŒ‡å—" class="headerlink" title="äº’è”ç½‘å¹¿å‘Šæµ‹è¯•å…¨é¢æŒ‡å—"></a>äº’è”ç½‘å¹¿å‘Šæµ‹è¯•å…¨é¢æŒ‡å—</h1><h1 id="äº’è”ç½‘å¹¿å‘Šæµ‹è¯•å…¨é¢æŒ‡å—ï¼ˆä¼ä¸šå®æˆ˜ï¼‰"><a href="#äº’è”ç½‘å¹¿å‘Šæµ‹è¯•å…¨é¢æŒ‡å—ï¼ˆä¼ä¸šå®æˆ˜ï¼‰" class="headerlink" title="äº’è”ç½‘å¹¿å‘Šæµ‹è¯•å…¨é¢æŒ‡å—ï¼ˆä¼ä¸šå®æˆ˜ï¼‰"></a><strong>äº’è”ç½‘å¹¿å‘Šæµ‹è¯•å…¨é¢æŒ‡å—ï¼ˆä¼ä¸šå®æˆ˜ï¼‰</strong></h1><h2 id="ğŸ“Œ-1-äº’è”ç½‘å¹¿å‘Šæµ‹è¯•çš„æ ¸å¿ƒç›®æ ‡"><a href="#ğŸ“Œ-1-äº’è”ç½‘å¹¿å‘Šæµ‹è¯•çš„æ ¸å¿ƒç›®æ ‡" class="headerlink" title="ğŸ“Œ 1. äº’è”ç½‘å¹¿å‘Šæµ‹è¯•çš„æ ¸å¿ƒç›®æ ‡"></a><strong>ğŸ“Œ 1. äº’è”ç½‘å¹¿å‘Šæµ‹è¯•çš„æ ¸å¿ƒç›®æ ‡</strong></h2><p>äº’è”ç½‘å¹¿å‘Šæµ‹è¯•çš„ä¸»è¦ç›®çš„æ˜¯â€‹<strong>ä¼˜åŒ–å¹¿å‘Šæ•ˆæœï¼Œæé«˜ROIï¼ˆæŠ•èµ„å›æŠ¥ç‡ï¼‰ï¼Œç¡®ä¿å¹¿å‘Šç³»ç»Ÿç¨³å®šè¿è¡Œ</strong>â€‹ã€‚æ ¸å¿ƒæµ‹è¯•æ–¹å‘åŒ…æ‹¬ï¼š</p><ul><li>â€‹<strong>åŠŸèƒ½æµ‹è¯•</strong>â€‹ï¼šç¡®ä¿å¹¿å‘ŠæŠ•æ”¾ç³»ç»ŸåŠŸèƒ½æ­£å¸¸</li><li>â€‹<strong>æ€§èƒ½æµ‹è¯•</strong>â€‹ï¼šè¯„ä¼°å¹¿å‘Šç³»ç»Ÿåœ¨é«˜å¹¶å‘ä¸‹çš„ç¨³å®šæ€§</li><li>â€‹<strong>æ•°æ®å‡†ç¡®æ€§æµ‹è¯•</strong>â€‹ï¼šéªŒè¯å¹¿å‘Šæ›å…‰ã€ç‚¹å‡»ã€è½¬åŒ–ç­‰æ•°æ®çš„å‡†ç¡®æ€§</li><li>â€‹<strong>ç”¨æˆ·ä½“éªŒæµ‹è¯•</strong>â€‹ï¼šæ£€æŸ¥å¹¿å‘Šåœ¨ä¸åŒè®¾å¤‡ã€æµè§ˆå™¨ä¸Šçš„å±•ç¤ºæ•ˆæœ</li><li>â€‹<strong>ABæµ‹è¯•</strong>â€‹ï¼šä¼˜åŒ–å¹¿å‘Šå†…å®¹ï¼Œæé«˜è½¬åŒ–ç‡</li><li>â€‹<strong>å®‰å…¨ä¸åˆè§„æµ‹è¯•</strong>â€‹ï¼šç¡®ä¿æ•°æ®éšç§ã€å¹¿å‘Šå†…å®¹åˆæ³•</li></ul><hr><h2 id="ğŸ“Œ-2-äº’è”ç½‘å¹¿å‘Šçš„å…³é”®æµ‹è¯•ç±»å‹"><a href="#ğŸ“Œ-2-äº’è”ç½‘å¹¿å‘Šçš„å…³é”®æµ‹è¯•ç±»å‹" class="headerlink" title="ğŸ“Œ 2. äº’è”ç½‘å¹¿å‘Šçš„å…³é”®æµ‹è¯•ç±»å‹"></a><strong>ğŸ“Œ 2. äº’è”ç½‘å¹¿å‘Šçš„å…³é”®æµ‹è¯•ç±»å‹</strong></h2><p>ä¼ä¸šåœ¨å¹¿å‘ŠæŠ•æ”¾è¿‡ç¨‹ä¸­ï¼Œé€šå¸¸ä¼šæ¶‰åŠä»¥ä¸‹å‡ ä¸ªæ–¹é¢çš„æµ‹è¯•ï¼š</p><h3 id="ğŸ”¹-2-1-åŠŸèƒ½æµ‹è¯•"><a href="#ğŸ”¹-2-1-åŠŸèƒ½æµ‹è¯•" class="headerlink" title="ğŸ”¹ 2.1 åŠŸèƒ½æµ‹è¯•"></a><strong>ğŸ”¹ 2.1 åŠŸèƒ½æµ‹è¯•</strong></h3><p>ç¡®ä¿å¹¿å‘ŠæŠ•æ”¾å¹³å°çš„â€‹<strong>åŸºç¡€åŠŸèƒ½å®Œæ•´å¯ç”¨</strong>â€‹ï¼Œä¸»è¦åŒ…æ‹¬ï¼š</p><table><thead><tr><th><strong>æµ‹è¯•é¡¹</strong></th><th><strong>æµ‹è¯•å†…å®¹</strong></th></tr></thead><tbody><tr><td><strong>å¹¿å‘Šåˆ›å»º</strong></td><td>ç¡®ä¿å¹¿å‘Šåˆ›å»ºç•Œé¢æ­£å¸¸ï¼Œæ”¯æŒå„ç§å¹¿å‘Šç±»å‹ï¼ˆå›¾æ–‡ã€è§†é¢‘ã€æ¨ªå¹…ç­‰ï¼‰</td></tr><tr><td><strong>å¹¿å‘ŠæŠ•æ”¾è§„åˆ™</strong></td><td>æŒ‰ç…§åœ°åŸŸã€ç”¨æˆ·å…´è¶£ã€å…³é”®è¯ã€è®¾å¤‡ç±»å‹ç­‰æ­£ç¡®ç­›é€‰ç”¨æˆ·</td></tr><tr><td><strong>é¢„ç®—ä¸ç«ä»·</strong></td><td>é¢„ç®—æ¶ˆè€—ç¬¦åˆé¢„æœŸï¼Œç«ä»·æ¨¡å¼ï¼ˆCPCã€CPMã€CPAï¼‰æ­£å¸¸è¿è¡Œ</td></tr><tr><td><strong>å¹¿å‘Šå®¡æ ¸æµç¨‹</strong></td><td>ç¡®ä¿è¿è§„å¹¿å‘Šèƒ½å¤Ÿè¢«è‡ªåŠ¨&#x2F;äººå·¥å®¡æ ¸æ‹’ç»</td></tr><tr><td><strong>å¹¿å‘Šå±•ç¤º</strong></td><td>åœ¨æŒ‡å®šé¡µé¢æ­£ç¡®å±•ç¤ºå¹¿å‘Šï¼Œä¸å½±å“é¡µé¢å¸ƒå±€</td></tr><tr><td><strong>ç‚¹å‡»è·³è½¬</strong></td><td>ç¡®ä¿ç‚¹å‡»å¹¿å‘Šåè·³è½¬åˆ°æ­£ç¡®çš„ç›®æ ‡é¡µé¢ï¼ˆè½åœ°é¡µï¼‰</td></tr><tr><td><strong>å¹¿å‘Šå…³é—­</strong></td><td>å…³é—­å¹¿å‘ŠæŒ‰é’®æ­£å¸¸å·¥ä½œï¼Œä¸å½±å“ç”¨æˆ·ä½“éªŒ</td></tr></tbody></table><hr><h3 id="ğŸ”¹-2-2-å¹¿å‘Šæ•°æ®å‡†ç¡®æ€§æµ‹è¯•"><a href="#ğŸ”¹-2-2-å¹¿å‘Šæ•°æ®å‡†ç¡®æ€§æµ‹è¯•" class="headerlink" title="ğŸ”¹ 2.2 å¹¿å‘Šæ•°æ®å‡†ç¡®æ€§æµ‹è¯•"></a><strong>ğŸ”¹ 2.2 å¹¿å‘Šæ•°æ®å‡†ç¡®æ€§æµ‹è¯•</strong></h3><p>ç¡®ä¿å¹¿å‘Šæ•°æ®é‡‡é›†â€‹<strong>çœŸå®ã€å‡†ç¡®ã€æ— è¯¯</strong>â€‹ï¼ŒåŒ…æ‹¬ï¼š</p><table><thead><tr><th><strong>æµ‹è¯•é¡¹</strong></th><th><strong>æµ‹è¯•å†…å®¹</strong></th></tr></thead><tbody><tr><td><strong>æ›å…‰æ•°æ®</strong></td><td>ç¡®ä¿æ¯æ¬¡å¹¿å‘Šå±•ç¤ºå‡è¢«è®°å½•ï¼ˆåŒ¹é…æµè§ˆå™¨æ§åˆ¶å° Network è¯·æ±‚ï¼‰</td></tr><tr><td><strong>ç‚¹å‡»æ•°æ®</strong></td><td>ç‚¹å‡»æ•°ä¸æ—¥å¿—è®°å½•ã€åˆ†æå¹³å°ï¼ˆGAã€Firebaseç­‰ï¼‰æ•°æ®ä¸€è‡´</td></tr><tr><td><strong>è½¬åŒ–æ•°æ®</strong></td><td>è®¡ç®—è½¬åŒ–ç‡ï¼ˆè´­ä¹°ã€æ³¨å†Œã€è¡¨å•æäº¤ç­‰ï¼‰æ˜¯å¦åˆç†</td></tr><tr><td><strong>PV &#x2F; UV</strong></td><td>ç»Ÿè®¡å¹¿å‘ŠæŠ•æ”¾é¡µé¢çš„è®¿é—®æ¬¡æ•°ä¸ç‹¬ç«‹è®¿å®¢æ•°</td></tr><tr><td><strong>Cookie &amp; User ID</strong></td><td>ç¡®ä¿ç”¨æˆ·æ ‡è¯†æ­£ç¡®ï¼Œä¸é‡å¤è®¡ç®—</td></tr></tbody></table><p>âœ… â€‹<strong>æµ‹è¯•æ–¹æ³•</strong>â€‹ï¼š</p><ul><li>â€‹<strong>å¯¹æ¯”æ—¥å¿— &amp; æ•°æ®åº“è®°å½•</strong>â€‹ï¼šæ‰‹åŠ¨&#x2F;è‡ªåŠ¨éªŒè¯å¹¿å‘Šæ—¥å¿—ä¸æ•°æ®åº“æ•°æ®æ˜¯å¦ä¸€è‡´</li><li>â€‹<strong>æ—¥å¿—åŸ‹ç‚¹ &amp; A&#x2F;B æµ‹è¯•</strong>â€‹ï¼šä½¿ç”¨ Google Tag Managerã€Mixpanelã€Adobe Analytics ç­‰ç›‘æ§</li><li>â€‹<strong>å¼‚å¸¸æ•°æ®æ£€æµ‹</strong>â€‹ï¼šæ£€æŸ¥æ•°æ®æ˜¯å¦æœ‰å¼‚å¸¸çªå¢æˆ–ä¸‹é™</li></ul><hr><h3 id="ğŸ”¹-2-3-æ€§èƒ½æµ‹è¯•"><a href="#ğŸ”¹-2-3-æ€§èƒ½æµ‹è¯•" class="headerlink" title="ğŸ”¹ 2.3 æ€§èƒ½æµ‹è¯•"></a><strong>ğŸ”¹ 2.3 æ€§èƒ½æµ‹è¯•</strong></h3><p>è¯„ä¼°å¹¿å‘ŠæŠ•æ”¾ç³»ç»Ÿçš„é«˜å¹¶å‘å¤„ç†èƒ½åŠ›ã€åŠ è½½é€Ÿåº¦ç­‰ï¼š</p><table><thead><tr><th><strong>æµ‹è¯•é¡¹</strong></th><th><strong>æµ‹è¯•å†…å®¹</strong></th></tr></thead><tbody><tr><td><strong>å¹¿å‘Šç³»ç»Ÿè´Ÿè½½</strong></td><td>å¹¶å‘æŠ•æ”¾1W+å¹¿å‘Šæ˜¯å¦å½±å“ç³»ç»Ÿå“åº”</td></tr><tr><td><strong>å¹¿å‘ŠåŠ è½½é€Ÿåº¦</strong></td><td>ç¡®ä¿å¹¿å‘Šåœ¨1ç§’å†…åŠ è½½å®Œæˆ</td></tr><tr><td><strong>CDNç¼“å­˜</strong></td><td>é™æ€å¹¿å‘Šèµ„æºæ˜¯å¦æ­£ç¡®ä½¿ç”¨CDNç¼“å­˜</td></tr><tr><td><strong>APIæ€§èƒ½</strong></td><td>æŠ•æ”¾ APIã€æ›å…‰ APIã€ç‚¹å‡» API æ˜¯å¦ç¨³å®š</td></tr></tbody></table><p>âœ… â€‹<strong>æµ‹è¯•å·¥å…·</strong>â€‹ï¼š</p><ul><li>â€‹<strong>JMeter &#x2F; Locust</strong>â€‹ï¼šæ¨¡æ‹Ÿå¤§è§„æ¨¡å¹¶å‘æµé‡</li><li>â€‹<strong>Lighthouse &#x2F; WebPageTest</strong>â€‹ï¼šæµ‹è¯•å¹¿å‘ŠåŠ è½½é€Ÿåº¦</li></ul><hr><h3 id="ğŸ”¹-2-4-å…¼å®¹æ€§æµ‹è¯•"><a href="#ğŸ”¹-2-4-å…¼å®¹æ€§æµ‹è¯•" class="headerlink" title="ğŸ”¹ 2.4 å…¼å®¹æ€§æµ‹è¯•"></a><strong>ğŸ”¹ 2.4 å…¼å®¹æ€§æµ‹è¯•</strong></h3><p>å¹¿å‘ŠæŠ•æ”¾è¦ç¡®ä¿<strong>ä¸åŒè®¾å¤‡ã€ä¸åŒæµè§ˆå™¨ã€ä¸åŒç½‘ç»œç¯å¢ƒ</strong>ä¸‹éƒ½èƒ½æ­£å¸¸å±•ç¤ºï¼š</p><table><thead><tr><th><strong>æµ‹è¯•é¡¹</strong></th><th><strong>æµ‹è¯•å†…å®¹</strong></th></tr></thead><tbody><tr><td><strong>è·¨æµè§ˆå™¨</strong></td><td>Chrome &#x2F; Safari &#x2F; Firefox &#x2F; Edge å…¼å®¹æ€§æµ‹è¯•</td></tr><tr><td><strong>ç§»åŠ¨ç«¯é€‚é…</strong></td><td>iOS &#x2F; Android æ‰‹æœºã€å¹³æ¿çš„å¹¿å‘Šå±•ç¤ºæ•ˆæœ</td></tr><tr><td><strong>ç½‘ç»œç¯å¢ƒ</strong></td><td>2G&#x2F;3G&#x2F;4G&#x2F;5G&#x2F;WiFi ä¸‹å¹¿å‘ŠåŠ è½½æƒ…å†µ</td></tr></tbody></table><p>âœ… â€‹<strong>æµ‹è¯•å·¥å…·</strong>â€‹ï¼š</p><ul><li>â€‹<strong>BrowserStack &#x2F; SauceLabs</strong>â€‹ï¼šè·¨æµè§ˆå™¨æµ‹è¯•</li><li>â€‹<strong>Fiddler &#x2F; Charles</strong>â€‹ï¼šæµ‹è¯•å¹¿å‘Šè¯·æ±‚æ˜¯å¦æ­£å¸¸è¿”å›</li></ul><hr><h3 id="ğŸ”¹-2-5-ç”¨æˆ·ä½“éªŒæµ‹è¯•"><a href="#ğŸ”¹-2-5-ç”¨æˆ·ä½“éªŒæµ‹è¯•" class="headerlink" title="ğŸ”¹ 2.5 ç”¨æˆ·ä½“éªŒæµ‹è¯•"></a><strong>ğŸ”¹ 2.5 ç”¨æˆ·ä½“éªŒæµ‹è¯•</strong></h3><p>å¹¿å‘Šéœ€è¦å¹³è¡¡<strong>å•†ä¸šç›®æ ‡</strong>ä¸â€‹<strong>ç”¨æˆ·ä½“éªŒ</strong>â€‹ï¼Œé¿å…å¹¿å‘Šå½±å“ç”¨æˆ·æµè§ˆï¼š</p><table><thead><tr><th><strong>æµ‹è¯•é¡¹</strong></th><th><strong>æµ‹è¯•å†…å®¹</strong></th></tr></thead><tbody><tr><td><strong>å¹¿å‘Šé¢‘æ¬¡æ§åˆ¶</strong></td><td>åŒä¸€ç”¨æˆ·ä¸€å¤©å†…ä¸ä¼šçœ‹åˆ°è¿‡å¤šç›¸åŒå¹¿å‘Š</td></tr><tr><td><strong>å¹¿å‘Šä¾µå…¥æ€§</strong></td><td>é¿å…å¹¿å‘ŠæŒ¡ä½ä¸»é¡µé¢å†…å®¹æˆ–éš¾ä»¥å…³é—­</td></tr><tr><td><strong>äº¤äº’ä½“éªŒ</strong></td><td>ç”¨æˆ·èƒ½æ–¹ä¾¿åœ°æŸ¥çœ‹å¹¿å‘Šè¯¦æƒ…ã€è¿”å›ä¸»é¡µé¢</td></tr></tbody></table><p>âœ… â€‹<strong>ç”¨æˆ·åé¦ˆ</strong>â€‹ï¼š</p><ul><li>è¿›è¡Œâ€‹<strong>é—®å·è°ƒæŸ¥</strong>â€‹ï¼Œæ”¶é›†ç”¨æˆ·å¯¹å¹¿å‘Šä½“éªŒçš„åé¦ˆ</li><li>ç›‘æ§â€‹<strong>å¹¿å‘Šç‚¹å‡»ç‡ã€è·³å‡ºç‡</strong>â€‹ï¼Œä¼˜åŒ–å¹¿å‘ŠæŠ•æ”¾ç­–ç•¥</li></ul><hr><h3 id="ğŸ”¹-2-6-ABæµ‹è¯•ï¼ˆå¹¿å‘Šä¼˜åŒ–ï¼‰"><a href="#ğŸ”¹-2-6-ABæµ‹è¯•ï¼ˆå¹¿å‘Šä¼˜åŒ–ï¼‰" class="headerlink" title="ğŸ”¹ 2.6 ABæµ‹è¯•ï¼ˆå¹¿å‘Šä¼˜åŒ–ï¼‰"></a><strong>ğŸ”¹ 2.6 ABæµ‹è¯•ï¼ˆå¹¿å‘Šä¼˜åŒ–ï¼‰</strong></h3><p>A&#x2F;B æµ‹è¯•å¯ä»¥â€‹<strong>ä¼˜åŒ–å¹¿å‘Šå†…å®¹ï¼Œæé«˜è½¬åŒ–ç‡</strong>â€‹ï¼š</p><table><thead><tr><th><strong>æµ‹è¯•é¡¹</strong></th><th><strong>æµ‹è¯•å†…å®¹</strong></th></tr></thead><tbody><tr><td><strong>ä¸åŒæ–‡æ¡ˆå¯¹æ¯”</strong></td><td>ä¾‹å¦‚ A å¹¿å‘Šï¼šâ€œä¹°1é€1â€ï¼ŒB å¹¿å‘Šï¼šâ€œé™æ—¶8æŠ˜â€</td></tr><tr><td><strong>å›¾ç‰‡ vs è§†é¢‘</strong></td><td>è§‚å¯Ÿå›¾ç‰‡å¹¿å‘Šå’Œè§†é¢‘å¹¿å‘Šçš„æ•ˆæœå¯¹æ¯”</td></tr><tr><td><strong>CTA æŒ‰é’®é¢œè‰²</strong></td><td>æµ‹è¯•ä¸åŒé¢œè‰²çš„æŒ‰é’®å¯¹ç‚¹å‡»ç‡çš„å½±å“</td></tr><tr><td><strong>è½åœ°é¡µä¼˜åŒ–</strong></td><td>è®¾è®¡ä¸åŒçš„è½åœ°é¡µï¼ˆé•¿ vs çŸ­ï¼‰å¯¹è½¬åŒ–ç‡çš„å½±å“</td></tr></tbody></table><p>âœ… â€‹<strong>æµ‹è¯•å·¥å…·</strong>â€‹ï¼š</p><ul><li><strong>Google Optimize</strong></li><li><strong>Optimizely</strong></li><li><strong>Adobe Target</strong></li></ul><hr><h3 id="ğŸ”¹-2-7-å®‰å…¨-åä½œå¼Šæµ‹è¯•"><a href="#ğŸ”¹-2-7-å®‰å…¨-åä½œå¼Šæµ‹è¯•" class="headerlink" title="ğŸ”¹ 2.7 å®‰å…¨ &amp; åä½œå¼Šæµ‹è¯•"></a><strong>ğŸ”¹ 2.7 å®‰å…¨ &amp; åä½œå¼Šæµ‹è¯•</strong></h3><p>é˜²æ­¢æ¶æ„ç‚¹å‡»ã€å¹¿å‘Šæ¬ºè¯ˆï¼š</p><table><thead><tr><th><strong>æµ‹è¯•é¡¹</strong></th><th><strong>æµ‹è¯•å†…å®¹</strong></th></tr></thead><tbody><tr><td><strong>ç‚¹å‡»æ¬ºè¯ˆ</strong></td><td>æ£€æµ‹åŒä¸€IPçŸ­æ—¶é—´å¤šæ¬¡ç‚¹å‡»</td></tr><tr><td><strong>çˆ¬è™«æ‹¦æˆª</strong></td><td>è¿‡æ»¤éæ­£å¸¸è®¿é—®</td></tr><tr><td><strong>æ¶æ„å¹¿å‘Šæ‹¦æˆª</strong></td><td>é˜²æ­¢æŠ•æ”¾å¸¦æœ‰ç—…æ¯’ã€è‰²æƒ…ã€èµŒåšç­‰å†…å®¹çš„å¹¿å‘Š</td></tr></tbody></table><p>âœ… â€‹<strong>æµ‹è¯•å·¥å…·</strong>â€‹ï¼š</p><ul><li><strong>Google reCAPTCHA</strong></li><li><strong>AWS WAF</strong></li><li><strong>ç¬¬ä¸‰æ–¹åä½œå¼ŠæœåŠ¡ï¼ˆå¦‚ White Opsï¼‰</strong></li></ul><hr><h2 id="ğŸ“Œ-3-äº’è”ç½‘å¹¿å‘Šæµ‹è¯•çš„æœ€ä½³å®è·µ"><a href="#ğŸ“Œ-3-äº’è”ç½‘å¹¿å‘Šæµ‹è¯•çš„æœ€ä½³å®è·µ" class="headerlink" title="ğŸ“Œ 3. äº’è”ç½‘å¹¿å‘Šæµ‹è¯•çš„æœ€ä½³å®è·µ"></a><strong>ğŸ“Œ 3. äº’è”ç½‘å¹¿å‘Šæµ‹è¯•çš„æœ€ä½³å®è·µ</strong></h2><p>âœ… <strong>1. é‡‡ç”¨è‡ªåŠ¨åŒ–æµ‹è¯•</strong></p><ul><li>ä½¿ç”¨ <strong>Selenium &#x2F; Cypress</strong> è¿›è¡Œå¹¿å‘Šå±•ç¤ºã€è·³è½¬ç­‰è‡ªåŠ¨åŒ–æµ‹è¯•</li><li>ä½¿ç”¨ <strong>Postman &#x2F; RestAssured</strong> æµ‹è¯•å¹¿å‘Š API æ¥å£</li></ul><p>âœ… <strong>2. æ•°æ®ç›‘æ§</strong></p><ul><li><strong>ä½¿ç”¨ ELK &#x2F; Prometheus</strong> ç›‘æ§å¹¿å‘Šæ•°æ®å¼‚å¸¸</li><li><strong>å¯¹æ¥ Google Analytics &#x2F; Firebase</strong> è¿›è¡Œæ•°æ®åˆ†æ</li></ul><p>âœ… <strong>3. æŒç»­ä¼˜åŒ–</strong></p><ul><li>â€‹<strong>å®šæœŸè°ƒæ•´æŠ•æ”¾ç­–ç•¥</strong>â€‹ï¼ˆåŸºäº A&#x2F;B æµ‹è¯•ç»“æœï¼‰</li><li><strong>å‡å°‘å¹¿å‘Šå¹²æ‰°ï¼Œæé«˜ç”¨æˆ·ä½“éªŒ</strong></li></ul><p>âœ… <strong>4. å®šæœŸè¿›è¡Œå®‰å…¨å®¡è®¡</strong></p><ul><li><strong>é˜²æ­¢æ¶æ„å¹¿å‘ŠæŠ•æ”¾</strong></li><li><strong>ç›‘æµ‹ç”¨æˆ·éšç§åˆè§„æ€§ï¼ˆGDPRã€CCPAï¼‰</strong></li></ul><hr><h2 id="ğŸ“Œ-4-ç»“è®º"><a href="#ğŸ“Œ-4-ç»“è®º" class="headerlink" title="ğŸ“Œ 4. ç»“è®º"></a><strong>ğŸ“Œ 4. ç»“è®º</strong></h2><p>äº’è”ç½‘å¹¿å‘Šæµ‹è¯•è¦†ç›–<strong>åŠŸèƒ½ã€æ•°æ®ã€æ€§èƒ½ã€å®‰å…¨ã€ç”¨æˆ·ä½“éªŒã€ä¼˜åŒ–</strong>ç­‰å¤šä¸ªç»´åº¦ã€‚ä¼ä¸šåœ¨è¿›è¡Œå¹¿å‘Šæµ‹è¯•æ—¶ï¼Œåº”ç»“åˆ<strong>è‡ªåŠ¨åŒ–æµ‹è¯•ã€æ•°æ®åˆ†æã€A&#x2F;Bæµ‹è¯•ã€å®‰å…¨é˜²æŠ¤</strong>ç­‰æ–¹æ³•ï¼Œç¡®ä¿å¹¿å‘ŠæŠ•æ”¾ç²¾å‡†ã€é«˜æ•ˆã€åˆè§„ã€‚</p><p>ğŸ’¡ â€‹<strong>ä¼ä¸šå®æˆ˜å»ºè®®</strong>â€‹ï¼š</p><ul><li><strong>æµ‹è¯•ä»å¹¿å‘Šåˆ›å»ºåˆ°æŠ•æ”¾çš„å…¨æµç¨‹</strong></li><li><strong>ä½¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·æé«˜æµ‹è¯•æ•ˆç‡</strong></li><li><strong>åŸºäºæ•°æ®åˆ†ææŒç»­ä¼˜åŒ–å¹¿å‘Šæ•ˆæœ</strong></li></ul><p>ğŸš€ <strong>è‰¯å¥½çš„å¹¿å‘Šæµ‹è¯•å¯ä»¥å¤§å¹…æå‡ ROIï¼Œè®©å¹¿å‘ŠæŠ•æ”¾æ›´ç²¾å‡†ã€æ›´æœ‰æ•ˆï¼</strong></p><h1 id="ç«ä»·æ¨¡å¼ï¼ˆCPCã€CPMã€CPAï¼‰è¯¦ç»†ä»‹ç»"><a href="#ç«ä»·æ¨¡å¼ï¼ˆCPCã€CPMã€CPAï¼‰è¯¦ç»†ä»‹ç»" class="headerlink" title="ç«ä»·æ¨¡å¼ï¼ˆCPCã€CPMã€CPAï¼‰è¯¦ç»†ä»‹ç»"></a><strong>ç«ä»·æ¨¡å¼ï¼ˆCPCã€CPMã€CPAï¼‰è¯¦ç»†ä»‹ç»</strong></h1><p>åœ¨äº’è”ç½‘å¹¿å‘ŠæŠ•æ”¾ä¸­ï¼Œç«ä»·æ¨¡å¼æ˜¯å¹¿å‘Šä¸»æ”¯ä»˜å¹¿å‘Šè´¹ç”¨çš„åŸºç¡€æ–¹å¼ã€‚å¸¸è§çš„ç«ä»·æ¨¡å¼åŒ…æ‹¬<strong>CPCï¼ˆCost Per Clickï¼‰ã€CPMï¼ˆCost Per Milleï¼‰ã€CPAï¼ˆCost Per Actionï¼‰</strong>ï¼Œå®ƒä»¬åˆ†åˆ«é€‚ç”¨äºä¸åŒçš„å¹¿å‘ŠæŠ•æ”¾ç›®æ ‡ã€‚ä¸‹é¢è¯¦ç»†ä»‹ç»è¿™ä¸‰ç§æ¨¡å¼çš„æ¦‚å¿µã€è®¡ç®—æ–¹å¼ã€ä¼˜ç¼ºç‚¹åŠé€‚ç”¨åœºæ™¯ã€‚  </p><hr><h2 id="1-CPCï¼ˆCost-Per-Clickï¼ŒæŒ‰ç‚¹å‡»ä»˜è´¹ï¼‰"><a href="#1-CPCï¼ˆCost-Per-Clickï¼ŒæŒ‰ç‚¹å‡»ä»˜è´¹ï¼‰" class="headerlink" title="1. CPCï¼ˆCost Per Clickï¼ŒæŒ‰ç‚¹å‡»ä»˜è´¹ï¼‰"></a><strong>1. CPCï¼ˆCost Per Clickï¼ŒæŒ‰ç‚¹å‡»ä»˜è´¹ï¼‰</strong></h2><h3 id="1-1-æ¦‚å¿µ"><a href="#1-1-æ¦‚å¿µ" class="headerlink" title="1.1 æ¦‚å¿µ"></a><strong>1.1 æ¦‚å¿µ</strong></h3><p>CPCï¼ˆæŒ‰ç‚¹å‡»ä»˜è´¹ï¼‰æ˜¯ä¸€ç§ä»¥<strong>å¹¿å‘Šè¢«ç”¨æˆ·ç‚¹å‡»çš„æ¬¡æ•°</strong>æ¥è®¡è´¹çš„æ¨¡å¼ã€‚å¹¿å‘Šä¸»åªæœ‰åœ¨ç”¨æˆ·ç‚¹å‡»å¹¿å‘Šæ—¶æ‰éœ€è¦æ”¯ä»˜è´¹ç”¨ï¼Œè€Œä¸ç®¡å¹¿å‘Šå±•ç¤ºäº†å¤šå°‘æ¬¡ã€‚  </p><h3 id="1-2-è®¡ç®—å…¬å¼"><a href="#1-2-è®¡ç®—å…¬å¼" class="headerlink" title="1.2 è®¡ç®—å…¬å¼"></a><strong>1.2 è®¡ç®—å…¬å¼</strong></h3><p>[<br>\text{å¹¿å‘Šè´¹ç”¨} &#x3D; \text{ç‚¹å‡»æ¬¡æ•°} \times \text{CPCå•ä»·}<br>]</p><p>ä¾‹å¦‚ï¼Œå¦‚æœCPCå•ä»·æ˜¯<strong>1å…ƒ</strong>ï¼Œå¹¿å‘Šè¢«ç‚¹å‡»äº†<strong>100æ¬¡</strong>ï¼Œé‚£ä¹ˆå¹¿å‘Šä¸»éœ€è¦æ”¯ä»˜çš„è´¹ç”¨æ˜¯ï¼š<br>[<br>100 \times 1 &#x3D; 100 \text{å…ƒ}<br>]</p><h3 id="1-3-ä¼˜ç¼ºç‚¹"><a href="#1-3-ä¼˜ç¼ºç‚¹" class="headerlink" title="1.3 ä¼˜ç¼ºç‚¹"></a><strong>1.3 ä¼˜ç¼ºç‚¹</strong></h3><p>âœ… <strong>ä¼˜ç‚¹</strong>ï¼š</p><ul><li>é€‚ç”¨äº<strong>è½¬åŒ–ç‡é«˜çš„å¹¿å‘Š</strong>ï¼ˆå¦‚ç”µå•†ã€åº”ç”¨ä¸‹è½½ï¼‰ã€‚</li><li><strong>ç²¾å‡†æŠ•æ”¾</strong>ï¼Œå¹¿å‘Šä¸»åªä¸ºæœ‰æ•ˆçš„ç‚¹å‡»ä»˜è´¹ï¼Œå‡å°‘æ— æ•ˆæ›å…‰çš„æˆæœ¬ã€‚  </li><li>é€‚åˆ<strong>ç«ä»·æ’å</strong>ï¼ˆå¦‚Google Adsã€ç™¾åº¦ç«ä»·å¹¿å‘Šï¼‰ã€‚</li></ul><p>âŒ <strong>ç¼ºç‚¹</strong>ï¼š</p><ul><li><strong>ç‚¹å‡»æ¬ºè¯ˆé£é™©</strong>ï¼šéƒ¨åˆ†æ¶æ„ç«äº‰è€…å¯èƒ½é€šè¿‡ç‚¹å‡»å¹¿å‘Šå¢åŠ å¹¿å‘Šä¸»æˆæœ¬ã€‚</li><li><strong>è½¬åŒ–ä¸ç¨³å®š</strong>ï¼šç‚¹å‡»åç”¨æˆ·ä¸ä¸€å®šä¼šå®Œæˆè´­ä¹°æˆ–æ³¨å†Œï¼Œå¯èƒ½é€ æˆæˆæœ¬æµªè´¹ã€‚</li></ul><h3 id="1-4-é€‚ç”¨åœºæ™¯"><a href="#1-4-é€‚ç”¨åœºæ™¯" class="headerlink" title="1.4 é€‚ç”¨åœºæ™¯"></a><strong>1.4 é€‚ç”¨åœºæ™¯</strong></h3><ul><li><strong>æœç´¢å¹¿å‘Šï¼ˆSEMï¼‰</strong>ï¼šå¦‚Google Adsã€ç™¾åº¦æ¨å¹¿ï¼Œç”¨æˆ·åœ¨æœç´¢å…³é”®è¯åä¼šçœ‹åˆ°å¹¿å‘Šï¼Œç‚¹å‡»åè·³è½¬åˆ°å¹¿å‘Šä¸»çš„ç½‘ç«™ã€‚  </li><li><strong>ç”µå•†å¹¿å‘Š</strong>ï¼šé€‚ç”¨äºæ·˜å®ç›´é€šè½¦ã€äº¬ä¸œå¿«è½¦ç­‰ï¼Œä»¥å¸å¼•ç²¾å‡†ç”¨æˆ·ç‚¹å‡»å¹¶å®Œæˆè´­ä¹°ã€‚  </li><li><strong>ç¤¾äº¤å¹¿å‘Š</strong>ï¼šå¦‚Facebook Adsã€å¾®åšå¹¿å‘Šï¼Œç”¨æˆ·çœ‹åˆ°å¹¿å‘Šåç‚¹å‡»è¿›å…¥å•†å®¶ä¸»é¡µæˆ–è½åœ°é¡µã€‚</li></ul><hr><h2 id="2-CPMï¼ˆCost-Per-Milleï¼ŒæŒ‰å±•ç¤ºä»˜è´¹ï¼‰"><a href="#2-CPMï¼ˆCost-Per-Milleï¼ŒæŒ‰å±•ç¤ºä»˜è´¹ï¼‰" class="headerlink" title="2. CPMï¼ˆCost Per Milleï¼ŒæŒ‰å±•ç¤ºä»˜è´¹ï¼‰"></a><strong>2. CPMï¼ˆCost Per Milleï¼ŒæŒ‰å±•ç¤ºä»˜è´¹ï¼‰</strong></h2><h3 id="2-1-æ¦‚å¿µ"><a href="#2-1-æ¦‚å¿µ" class="headerlink" title="2.1 æ¦‚å¿µ"></a><strong>2.1 æ¦‚å¿µ</strong></h3><p>CPMï¼ˆæŒ‰åƒæ¬¡å±•ç¤ºä»˜è´¹ï¼‰æ˜¯ä¸€ç§<strong>æŒ‰å¹¿å‘Šè¢«å±•ç¤ºçš„æ¬¡æ•°</strong>æ¥è®¡è´¹çš„æ¨¡å¼ï¼Œå¹¿å‘Šä¸»ä¸ç®¡ç”¨æˆ·æ˜¯å¦ç‚¹å‡»å¹¿å‘Šï¼Œåªè¦å¹¿å‘Šè¢«æ›å…‰å°±éœ€è¦ä»˜è´¹ã€‚  </p><h3 id="2-2-è®¡ç®—å…¬å¼"><a href="#2-2-è®¡ç®—å…¬å¼" class="headerlink" title="2.2 è®¡ç®—å…¬å¼"></a><strong>2.2 è®¡ç®—å…¬å¼</strong></h3><p>[<br>\text{å¹¿å‘Šè´¹ç”¨} &#x3D; \frac{\text{å±•ç¤ºæ¬¡æ•°} \times \text{CPMå•ä»·}}{1000}<br>]</p><p>ä¾‹å¦‚ï¼Œå¦‚æœCPMå•ä»·æ˜¯<strong>10å…ƒ</strong>ï¼Œå¹¿å‘Šå±•ç¤ºäº†<strong>100,000æ¬¡</strong>ï¼Œé‚£ä¹ˆå¹¿å‘Šä¸»çš„è´¹ç”¨è®¡ç®—å¦‚ä¸‹ï¼š<br>[<br>\frac{100,000 \times 10}{1000} &#x3D; 1000 \text{å…ƒ}<br>]</p><h3 id="2-3-ä¼˜ç¼ºç‚¹"><a href="#2-3-ä¼˜ç¼ºç‚¹" class="headerlink" title="2.3 ä¼˜ç¼ºç‚¹"></a><strong>2.3 ä¼˜ç¼ºç‚¹</strong></h3><p>âœ… <strong>ä¼˜ç‚¹</strong>ï¼š</p><ul><li>é€‚ç”¨äº<strong>å“ç‰Œæ›å…‰</strong>ï¼Œæœ‰åŠ©äºæé«˜å“ç‰ŒçŸ¥ååº¦å’Œå½±å“åŠ›ã€‚</li><li>é€‚åˆ<strong>å±•ç¤ºç±»å¹¿å‘Š</strong>ï¼Œå¦‚æ¨ªå¹…å¹¿å‘Šã€ä¿¡æ¯æµå¹¿å‘Šã€‚  </li><li>è´¹ç”¨ç›¸å¯¹ç¨³å®šï¼Œé¿å…äº†æ¶æ„ç‚¹å‡»çš„é—®é¢˜ã€‚</li></ul><p>âŒ <strong>ç¼ºç‚¹</strong>ï¼š</p><ul><li><strong>è½¬åŒ–ç‡è¾ƒä½</strong>ï¼Œå¯èƒ½ä¼šæœ‰å¤§é‡ç”¨æˆ·çœ‹åˆ°å¹¿å‘Šä½†ä¸ç‚¹å‡»ï¼Œå¯¼è‡´æŠ•èµ„å›æŠ¥ç‡ï¼ˆROIï¼‰ä¸ç¨³å®šã€‚  </li><li><strong>å¯¹ç²¾å‡†æŠ•æ”¾è¦æ±‚è¾ƒé«˜</strong>ï¼Œå¦‚æœæŠ•æ”¾ç­–ç•¥ä¸ä½³ï¼Œå¯èƒ½ä¼šæµªè´¹é¢„ç®—ã€‚</li></ul><h3 id="2-4-é€‚ç”¨åœºæ™¯"><a href="#2-4-é€‚ç”¨åœºæ™¯" class="headerlink" title="2.4 é€‚ç”¨åœºæ™¯"></a><strong>2.4 é€‚ç”¨åœºæ™¯</strong></h3><ul><li><strong>å“ç‰Œå¹¿å‘Š</strong>ï¼šé€‚ç”¨äºéœ€è¦å¢åŠ å“ç‰Œæ›å…‰åº¦çš„ä¼ä¸šï¼Œå¦‚å¥¢ä¾ˆå“ã€æ±½è½¦ã€é‡‘èç­‰è¡Œä¸šã€‚  </li><li><strong>ç¤¾äº¤åª’ä½“å¹¿å‘Š</strong>ï¼šå¦‚Facebookã€Instagramã€å¾®åšçš„å¹¿å‘Šæ¨é€ï¼Œä¸»è¦ç›®çš„æ˜¯å¢åŠ ç”¨æˆ·è§¦è¾¾ç‡ã€‚  </li><li><strong>è§†é¢‘å¹¿å‘Š</strong>ï¼šå¦‚YouTubeå‰è´´ç‰‡å¹¿å‘Šï¼Œå¹¿å‘Šä¸»åªéœ€æŒ‰å±•ç¤ºæ¬¡æ•°ä»˜è´¹ã€‚</li></ul><hr><h2 id="3-CPAï¼ˆCost-Per-Actionï¼ŒæŒ‰è½¬åŒ–ä»˜è´¹ï¼‰"><a href="#3-CPAï¼ˆCost-Per-Actionï¼ŒæŒ‰è½¬åŒ–ä»˜è´¹ï¼‰" class="headerlink" title="3. CPAï¼ˆCost Per Actionï¼ŒæŒ‰è½¬åŒ–ä»˜è´¹ï¼‰"></a><strong>3. CPAï¼ˆCost Per Actionï¼ŒæŒ‰è½¬åŒ–ä»˜è´¹ï¼‰</strong></h2><h3 id="3-1-æ¦‚å¿µ"><a href="#3-1-æ¦‚å¿µ" class="headerlink" title="3.1 æ¦‚å¿µ"></a><strong>3.1 æ¦‚å¿µ</strong></h3><p>CPAï¼ˆæŒ‰è½¬åŒ–ä»˜è´¹ï¼‰æ˜¯ä¸€ç§<strong>ä»¥ç”¨æˆ·å®Œæˆç‰¹å®šç›®æ ‡ï¼ˆè½¬åŒ–ï¼‰</strong>æ¥è®¡è´¹çš„æ¨¡å¼ï¼Œåªæœ‰å½“ç”¨æˆ·å®Œæˆ<strong>è´­ä¹°ã€æ³¨å†Œã€ä¸‹è½½ã€å¡«å†™è¡¨å•</strong>ç­‰è¡Œä¸ºåï¼Œå¹¿å‘Šä¸»æ‰éœ€è¦æ”¯ä»˜è´¹ç”¨ã€‚  </p><h3 id="3-2-è®¡ç®—å…¬å¼"><a href="#3-2-è®¡ç®—å…¬å¼" class="headerlink" title="3.2 è®¡ç®—å…¬å¼"></a><strong>3.2 è®¡ç®—å…¬å¼</strong></h3><p>[<br>\text{å¹¿å‘Šè´¹ç”¨} &#x3D; \text{è½¬åŒ–æ¬¡æ•°} \times \text{CPAå•ä»·}<br>]</p><p>ä¾‹å¦‚ï¼Œå¦‚æœCPAå•ä»·æ˜¯<strong>50å…ƒ</strong>ï¼Œå¹¿å‘Šå¸¦æ¥äº†<strong>10ä¸ªæ³¨å†Œç”¨æˆ·</strong>ï¼Œé‚£ä¹ˆå¹¿å‘Šè´¹ç”¨ä¸ºï¼š<br>[<br>10 \times 50 &#x3D; 500 \text{å…ƒ}<br>]</p><h3 id="3-3-ä¼˜ç¼ºç‚¹"><a href="#3-3-ä¼˜ç¼ºç‚¹" class="headerlink" title="3.3 ä¼˜ç¼ºç‚¹"></a><strong>3.3 ä¼˜ç¼ºç‚¹</strong></h3><p>âœ… <strong>ä¼˜ç‚¹</strong>ï¼š</p><ul><li>å¹¿å‘Šä¸»åªéœ€ä¸º<strong>æœ‰æ•ˆç”¨æˆ·ä»˜è´¹</strong>ï¼Œé™ä½æ— æ•ˆç‚¹å‡»æˆæœ¬ã€‚  </li><li>é€‚ç”¨äºç”µå•†ã€åº”ç”¨æ¨å¹¿ç­‰éœ€è¦<strong>å®é™…æˆäº¤</strong>çš„ä¸šåŠ¡æ¨¡å¼ã€‚  </li><li>ROIï¼ˆæŠ•èµ„å›æŠ¥ç‡ï¼‰æ›´ç¨³å®šï¼Œå¯é¢„æµ‹ã€‚</li></ul><p>âŒ <strong>ç¼ºç‚¹</strong>ï¼š</p><ul><li><strong>è½¬åŒ–æˆæœ¬è¾ƒé«˜</strong>ï¼Œæ¯”CPC&#x2F;CPMæ¨¡å¼æ›´è´µã€‚  </li><li><strong>è½¬åŒ–æ•°æ®ç›‘æµ‹è¦æ±‚é«˜</strong>ï¼Œéœ€è¦é…åˆ<strong>è½¬åŒ–è·Ÿè¸ªå·¥å…·</strong>ï¼ˆå¦‚Google Analyticsã€Facebook Pixelï¼‰ã€‚  </li><li><strong>é€‚ç”¨è¡Œä¸šæœ‰é™</strong>ï¼Œå¯¹äºå“ç‰Œæ¨å¹¿ç±»å¹¿å‘Šä¸å¤ªé€‚åˆã€‚</li></ul><h3 id="3-4-é€‚ç”¨åœºæ™¯"><a href="#3-4-é€‚ç”¨åœºæ™¯" class="headerlink" title="3.4 é€‚ç”¨åœºæ™¯"></a><strong>3.4 é€‚ç”¨åœºæ™¯</strong></h3><ul><li><strong>ç”µå•†æ¨å¹¿</strong>ï¼šå¦‚äº¬ä¸œã€æ·˜å®çš„<strong>æŒ‰æˆäº¤ä»˜è´¹</strong>ï¼ˆCPSï¼ŒCost Per Saleï¼‰ã€‚  </li><li><strong>åº”ç”¨ä¸‹è½½</strong>ï¼šApp Store å’Œ Google Play å¹¿å‘Šï¼Œåªæœ‰å½“ç”¨æˆ·ä¸‹è½½å¹¶å®‰è£…åº”ç”¨åæ‰è®¡è´¹ã€‚  </li><li><strong>é‡‘èè¡Œä¸š</strong>ï¼šå¦‚ä¿¡ç”¨å¡ç”³è¯·ã€è´·æ¬¾ç”³è¯·ç­‰ï¼Œç”¨æˆ·æäº¤è¡¨å•æˆ–å®Œæˆå¼€æˆ·åå¹¿å‘Šä¸»æ‰ä»˜è´¹ã€‚</li></ul><hr><h1 id="4-CPCã€CPMã€CPAå¯¹æ¯”æ€»ç»“"><a href="#4-CPCã€CPMã€CPAå¯¹æ¯”æ€»ç»“" class="headerlink" title="4. CPCã€CPMã€CPAå¯¹æ¯”æ€»ç»“"></a><strong>4. CPCã€CPMã€CPAå¯¹æ¯”æ€»ç»“</strong></h1><table><thead><tr><th>ç«ä»·æ¨¡å¼</th><th>è®¡è´¹æ–¹å¼</th><th>è®¡ç®—æ–¹å¼</th><th>é€‚ç”¨åœºæ™¯</th><th>ä¼˜åŠ¿</th><th>åŠ£åŠ¿</th></tr></thead><tbody><tr><td><strong>CPCï¼ˆæŒ‰ç‚¹å‡»ä»˜è´¹ï¼‰</strong></td><td>ç”¨æˆ·ç‚¹å‡»å¹¿å‘Šæ—¶è®¡è´¹</td><td>æ€»è´¹ç”¨ &#x3D; ç‚¹å‡»æ¬¡æ•° Ã— CPCå•ä»·</td><td>æœç´¢å¹¿å‘Šã€ç”µå•†å¹¿å‘Šã€ç¤¾äº¤å¹¿å‘Š</td><td>ç²¾å‡†æŠ•æ”¾ã€èŠ‚çœé¢„ç®—</td><td>å¯èƒ½è¢«æ¶æ„ç‚¹å‡»ã€è½¬åŒ–ç‡ä¸ç¨³å®š</td></tr><tr><td><strong>CPMï¼ˆæŒ‰å±•ç¤ºä»˜è´¹ï¼‰</strong></td><td>æ¯å±•ç¤º1000æ¬¡è®¡è´¹</td><td>æ€»è´¹ç”¨ &#x3D;ï¼ˆå±•ç¤ºæ¬¡æ•° Ã— CPMå•ä»·ï¼‰&#x2F;1000</td><td>å“ç‰Œæ¨å¹¿ã€è§†é¢‘å¹¿å‘Šã€ç¤¾äº¤åª’ä½“å¹¿å‘Š</td><td>å¢å¼ºå“ç‰Œæ›å…‰ã€æˆæœ¬å¯æ§</td><td>ç‚¹å‡»ç‡ä½ã€è½¬åŒ–ç‡éš¾é¢„æµ‹</td></tr><tr><td><strong>CPAï¼ˆæŒ‰è½¬åŒ–ä»˜è´¹ï¼‰</strong></td><td>ç”¨æˆ·å®Œæˆç‰¹å®šåŠ¨ä½œåè®¡è´¹</td><td>æ€»è´¹ç”¨ &#x3D; è½¬åŒ–æ¬¡æ•° Ã— CPAå•ä»·</td><td>ç”µå•†ã€åº”ç”¨ä¸‹è½½ã€é‡‘èè¡Œä¸š</td><td>è´¹ç”¨ç²¾å‡†ã€ROIå¯æ§</td><td>æˆæœ¬è¾ƒé«˜ã€æ•°æ®ç›‘æµ‹è¦æ±‚é«˜</td></tr></tbody></table><hr><h1 id="5-é€‰æ‹©å“ªç§æ¨¡å¼ï¼Ÿ"><a href="#5-é€‰æ‹©å“ªç§æ¨¡å¼ï¼Ÿ" class="headerlink" title="5. é€‰æ‹©å“ªç§æ¨¡å¼ï¼Ÿ"></a><strong>5. é€‰æ‹©å“ªç§æ¨¡å¼ï¼Ÿ</strong></h1><ol><li><strong>å¦‚æœç›®æ ‡æ˜¯è·å–æµé‡ï¼Œæé«˜ç½‘ç«™ç‚¹å‡»ç‡</strong> â†’ é€‰æ‹© <strong>CPC</strong></li><li><strong>å¦‚æœç›®æ ‡æ˜¯å“ç‰Œæ›å…‰ï¼Œæé«˜çŸ¥ååº¦</strong> â†’ é€‰æ‹© <strong>CPM</strong></li><li><strong>å¦‚æœç›®æ ‡æ˜¯è·å–é«˜è´¨é‡ç”¨æˆ·ï¼Œæå‡è½¬åŒ–ç‡</strong> â†’ é€‰æ‹© <strong>CPA</strong></li></ol><h3 id="æœ€ç»ˆå»ºè®®"><a href="#æœ€ç»ˆå»ºè®®" class="headerlink" title="æœ€ç»ˆå»ºè®®"></a><strong>æœ€ç»ˆå»ºè®®</strong></h3><ul><li><strong>çŸ­æœŸ</strong>ï¼šè‹¥é¢„ç®—æœ‰é™ï¼Œå¯å…ˆé€‰æ‹© <strong>CPC</strong>ï¼Œç²¾å‡†è·å–æµé‡ã€‚  </li><li><strong>é•¿æœŸ</strong>ï¼šå¦‚æœå“ç‰Œæ¨å¹¿ä¸ºä¸»ï¼Œå¯é‡‡ç”¨ <strong>CPM</strong>ã€‚  </li><li><strong>é«˜ROIç›®æ ‡</strong>ï¼šå¯¹è½¬åŒ–è¦æ±‚é«˜çš„ä¸šåŠ¡ï¼Œå¦‚é‡‘èã€ç”µå•†ï¼Œåˆ™é€‰ <strong>CPA</strong>ã€‚</li></ul><hr><p>ğŸ’¡ <strong>æ€»ç»“</strong>ï¼šä¸åŒçš„ç«ä»·æ¨¡å¼é€‚ç”¨äºä¸åŒçš„å¹¿å‘Šç›®æ ‡ï¼Œå¹¿å‘Šä¸»éœ€è¦æ ¹æ®<strong>è‡ªèº«é¢„ç®—ã€æ¨å¹¿ç›®æ ‡å’Œç”¨æˆ·ç¾¤ä½“</strong>é€‰æ‹©åˆé€‚çš„ç«ä»·æ¨¡å¼ï¼Œä»¥æœ€å¤§åŒ–å¹¿å‘Šæ•ˆæœå’ŒROIã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æµ‹è¯•å¸¸è§é—®é¢˜</category>
      
      <category>å¹¿å‘Šæµ‹è¯•</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>å¹¿å‘Šæµ‹è¯•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pythonä¸­çš„ç±»æ–¹æ³•å’Œé™æ€æ–¹æ³•ä»¥åŠæ™®é€šå®ä¾‹æ–¹æ³•çš„åŒºåˆ«</title>
    <link href="/2025/03/31/python%E7%B1%BB%E6%96%B9%E6%B3%95%E5%92%8C%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95/"/>
    <url>/2025/03/31/python%E7%B1%BB%E6%96%B9%E6%B3%95%E5%92%8C%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h1 id="Pythonä¸­çš„ç±»æ–¹æ³•å’Œé™æ€æ–¹æ³•ä»¥åŠæ™®é€šå®ä¾‹æ–¹æ³•çš„åŒºåˆ«"><a href="#Pythonä¸­çš„ç±»æ–¹æ³•å’Œé™æ€æ–¹æ³•ä»¥åŠæ™®é€šå®ä¾‹æ–¹æ³•çš„åŒºåˆ«" class="headerlink" title="Pythonä¸­çš„ç±»æ–¹æ³•å’Œé™æ€æ–¹æ³•ä»¥åŠæ™®é€šå®ä¾‹æ–¹æ³•çš„åŒºåˆ«"></a>Pythonä¸­çš„ç±»æ–¹æ³•å’Œé™æ€æ–¹æ³•ä»¥åŠæ™®é€šå®ä¾‹æ–¹æ³•çš„åŒºåˆ«</h1><p>åœ¨ <code>Python</code> ä¸­ï¼Œç±»æ–¹æ³•<code>ï¼ˆ@classmethodï¼‰</code>å’Œé™æ€æ–¹æ³•<code>ï¼ˆ@staticmethodï¼‰</code>æ˜¯ä¸¤ç§å¸¸è§çš„æ–¹æ³•ä¿®é¥°ç¬¦ï¼Œå®ƒä»¬ä¸æ™®é€šçš„å®ä¾‹æ–¹æ³•ä¸åŒã€‚æŒæ¡å®ƒä»¬æœ‰åŠ©äºç¼–å†™æ›´åŠ æ¸…æ™°ã€ç»“æ„åŒ–ã€å¯å¤ç”¨çš„ä»£ç ï¼Œåœ¨ä¼ä¸šçº§å¼€å‘ä¸­åº”ç”¨å¹¿æ³›ã€‚</p><h1 id="Python-ä¸­çš„ä¸‰ç§æ–¹æ³•"><a href="#Python-ä¸­çš„ä¸‰ç§æ–¹æ³•" class="headerlink" title="Python ä¸­çš„ä¸‰ç§æ–¹æ³•"></a>Python ä¸­çš„ä¸‰ç§æ–¹æ³•</h1><table><thead><tr><th>æ–¹æ³•ç±»å‹</th><th>å®šä¹‰æ–¹å¼</th><th>ä½œç”¨</th><th>è®¿é—®æƒé™</th></tr></thead><tbody><tr><td><strong>å®ä¾‹æ–¹æ³•</strong></td><td><code>def method(self)</code></td><td>ä½œç”¨äºâ€‹<strong>å®ä¾‹</strong>â€‹ï¼Œå¯ä»¥è®¿é—®<code>self</code></td><td>è®¿é—®<strong>å®ä¾‹å˜é‡</strong>å’Œ<strong>ç±»å˜é‡</strong></td></tr><tr><td><strong>ç±»æ–¹æ³•</strong></td><td><code>@classmethod def method(cls)</code></td><td>ä½œç”¨äºâ€‹<strong>ç±»</strong>â€‹ï¼Œå¯ä»¥è®¿é—®<code>cls</code></td><td>è®¿é—®â€‹<strong>ç±»å˜é‡</strong>â€‹ï¼Œä½†ä¸èƒ½è®¿é—®å®ä¾‹å˜é‡</td></tr><tr><td><strong>é™æ€æ–¹æ³•</strong></td><td><code>@staticmethod def method()</code></td><td>ä»…æ˜¯â€‹<strong>æ™®é€šå‡½æ•°</strong>â€‹ï¼Œä¸ç±»æ— ç›´æ¥å…³ç³»</td><td><strong>ä¸èƒ½</strong>è®¿é—®å®ä¾‹å˜é‡å’Œç±»å˜é‡</td></tr></tbody></table><h1 id="å®ä¾‹æ–¹æ³•ï¼ˆInstance-Methodï¼‰"><a href="#å®ä¾‹æ–¹æ³•ï¼ˆInstance-Methodï¼‰" class="headerlink" title="å®ä¾‹æ–¹æ³•ï¼ˆInstance Methodï¼‰"></a>å®ä¾‹æ–¹æ³•ï¼ˆInstance Methodï¼‰</h1><p>ğŸ“Œ å®ä¾‹æ–¹æ³•æ˜¯æœ€å¸¸è§çš„æ–¹æ³•ï¼Œå®ƒå±äºæŸä¸ªå¯¹è±¡ï¼ˆå®ä¾‹ï¼‰ï¼Œå¯ä»¥è®¿é—®å®ä¾‹å˜é‡ <code>(self.attribute) </code>å’Œç±»å˜é‡ <code>(self.__class__.attribute)</code>ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Employee</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name, salary</span>):<br>        self.name = name  <span class="hljs-comment"># å®ä¾‹å˜é‡</span><br>        self.salary = salary  <span class="hljs-comment"># å®ä¾‹å˜é‡</span><br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_info</span>(<span class="hljs-params">self</span>):  <span class="hljs-comment"># å®ä¾‹æ–¹æ³•</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;å‘˜å·¥: <span class="hljs-subst">&#123;self.name&#125;</span>, è–ªèµ„: <span class="hljs-subst">&#123;self.salary&#125;</span>&quot;</span><br><br><span class="hljs-comment"># åˆ›å»ºå¯¹è±¡</span><br>emp1 = Employee(<span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-number">5000</span>)<br><br><span class="hljs-comment"># è°ƒç”¨å®ä¾‹æ–¹æ³•</span><br><span class="hljs-built_in">print</span>(emp1.get_info())  <span class="hljs-comment"># âœ… è¾“å‡º: å‘˜å·¥: Alice, è–ªèµ„: 5000</span><br><br></code></pre></td></tr></table></figure><p>ğŸ”¹ ç‰¹ç‚¹</p><p>ğŸŸ¢éœ€è¦ <code>self</code> ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼ŒæŒ‡å‘å½“å‰å®ä¾‹ã€‚<br>ğŸŸ¢åªèƒ½é€šè¿‡å¯¹è±¡è°ƒç”¨ï¼Œä¸èƒ½ç›´æ¥ç”¨ç±»è°ƒç”¨ã€‚<br>ğŸŸ¢å¯ä»¥è®¿é—®å®ä¾‹å˜é‡ï¼Œä¹Ÿå¯ä»¥è®¿é—®ç±»å˜é‡ã€‚</p><h1 id="ç±»æ–¹æ³•ï¼ˆ-classmethodï¼‰"><a href="#ç±»æ–¹æ³•ï¼ˆ-classmethodï¼‰" class="headerlink" title="ç±»æ–¹æ³•ï¼ˆ@classmethodï¼‰"></a>ç±»æ–¹æ³•ï¼ˆ@classmethodï¼‰</h1><p>ğŸ“Œ ç±»æ–¹æ³•ä½œç”¨äºç±»ï¼Œè€Œéå®ä¾‹ï¼Œå¯ä»¥è®¿é—®å’Œä¿®æ”¹ç±»å˜é‡ï¼Œä½†æ— æ³•è®¿é—®å®ä¾‹å˜é‡ã€‚ä½¿ç”¨ <code>@classmethod</code> è£…é¥°å™¨ï¼Œå¹¶ä¸”ç¬¬ä¸€ä¸ªå‚æ•° <code>cls</code> ä»£è¡¨ç±»æœ¬èº«ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Employee</span>:<br>    company = <span class="hljs-string">&quot;Tech Corp&quot;</span>  <span class="hljs-comment"># ç±»å˜é‡</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name, salary</span>):<br>        self.name = name<br>        self.salary = salary<br><br><span class="hljs-meta">    @classmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">set_company</span>(<span class="hljs-params">cls, new_name</span>):<br>        cls.company = new_name  <span class="hljs-comment"># ä¿®æ”¹ç±»å˜é‡</span><br><br><span class="hljs-meta">    @classmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_company</span>(<span class="hljs-params">cls</span>):<br>        <span class="hljs-keyword">return</span> cls.company<br><br><span class="hljs-comment"># è°ƒç”¨ç±»æ–¹æ³•</span><br><span class="hljs-built_in">print</span>(Employee.get_company())  <span class="hljs-comment"># âœ… Tech Corp</span><br>Employee.set_company(<span class="hljs-string">&quot;NewTech&quot;</span>)<br><span class="hljs-built_in">print</span>(Employee.get_company())  <span class="hljs-comment"># âœ… NewTech</span><br><br></code></pre></td></tr></table></figure><p>ğŸ”¹ ç‰¹ç‚¹</p><p>ğŸŸ¢éœ€è¦ @classmethod è£…é¥°å™¨ï¼Œç¬¬ä¸€ä¸ªå‚æ•° cls ä»£è¡¨ç±»æœ¬èº«ã€‚<br>ğŸŸ¢é€šè¿‡ cls è®¿é—®å’Œä¿®æ”¹ç±»å˜é‡ï¼Œè€Œä¸èƒ½è®¿é—®å®ä¾‹å˜é‡ã€‚<br>ğŸŸ¢å¯ä»¥é€šè¿‡ç±»è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å®ä¾‹è°ƒç”¨ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">emp = Employee(<span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-number">4000</span>)<br><span class="hljs-built_in">print</span>(emp.get_company())  <span class="hljs-comment"># âœ… ä¹Ÿèƒ½è°ƒç”¨</span><br></code></pre></td></tr></table></figure><h1 id="é™æ€æ–¹æ³•ï¼ˆ-staticmethodï¼‰"><a href="#é™æ€æ–¹æ³•ï¼ˆ-staticmethodï¼‰" class="headerlink" title="é™æ€æ–¹æ³•ï¼ˆ@staticmethodï¼‰"></a>é™æ€æ–¹æ³•ï¼ˆ@staticmethodï¼‰</h1><p>ğŸ“Œ é™æ€æ–¹æ³•ç‹¬ç«‹äºç±»å’Œå®ä¾‹ï¼Œåªæ˜¯ç±»ä¸­çš„ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œå®ƒä¸ä¼šè®¿é—® <code>self</code> æˆ– <code>cls</code>ï¼Œå› æ­¤ä¸èƒ½è®¿é—®å®ä¾‹å˜é‡å’Œç±»å˜é‡ã€‚ä½¿ç”¨ <code>@staticmethod</code> è£…é¥°å™¨ï¼Œä¸éœ€è¦ <code>self</code> æˆ– <code>cls</code>ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MathUtils</span>:<br><span class="hljs-meta">    @staticmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">x, y</span>):<br>        <span class="hljs-keyword">return</span> x + y<br><br><span class="hljs-comment"># ç›´æ¥é€šè¿‡ç±»åè°ƒç”¨</span><br><span class="hljs-built_in">print</span>(MathUtils.add(<span class="hljs-number">3</span>, <span class="hljs-number">5</span>))  <span class="hljs-comment"># âœ… è¾“å‡º: 8</span><br><br></code></pre></td></tr></table></figure><p>ğŸ”¹ ç‰¹ç‚¹</p><p>ğŸŸ¢éœ€è¦ <code>@staticmethod</code> è£…é¥°å™¨ã€‚<br>ğŸŸ¢ä¸èƒ½è®¿é—® <code>self</code> å’Œ <code>cls</code>ï¼Œå³ä¸èƒ½è®¿é—®å®ä¾‹å˜é‡æˆ–ç±»å˜é‡ã€‚<br>ğŸŸ¢æ—¢å¯ä»¥é€šè¿‡ç±»åè°ƒç”¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å®ä¾‹è°ƒç”¨ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">math_util = MathUtils()<br><span class="hljs-built_in">print</span>(math_util.add(<span class="hljs-number">4</span>, <span class="hljs-number">6</span>))  <span class="hljs-comment"># âœ… è¾“å‡º: 10</span><br></code></pre></td></tr></table></figure><h1 id="ä¸‰è€…çš„å¯¹æ¯”"><a href="#ä¸‰è€…çš„å¯¹æ¯”" class="headerlink" title="ä¸‰è€…çš„å¯¹æ¯”"></a>ä¸‰è€…çš„å¯¹æ¯”</h1><table><thead><tr><th>æ–¹æ³•ç±»å‹</th><th><code>self</code></th><th><code>cls</code></th><th>è®¿é—®å®ä¾‹å˜é‡</th><th>è®¿é—®ç±»å˜é‡</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>å®ä¾‹æ–¹æ³•</strong></td><td>âœ…</td><td>âŒ</td><td>âœ…</td><td>âœ…</td><td>éœ€è¦æ“ä½œå®ä¾‹æ•°æ®</td></tr><tr><td><strong>ç±»æ–¹æ³•</strong></td><td>âŒ</td><td>âœ…</td><td>âŒ</td><td>âœ…</td><td>éœ€è¦æ“ä½œç±»æ•°æ®ï¼ˆå¦‚ä¿®æ”¹ç±»å˜é‡ï¼‰</td></tr><tr><td><strong>é™æ€æ–¹æ³•</strong></td><td>âŒ</td><td>âŒ</td><td>âŒ</td><td>âŒ</td><td>ä¸å®ä¾‹å’Œç±»æ— å…³çš„å·¥å…·æ–¹æ³•</td></tr></tbody></table><h1 id="ä¼ä¸šå®æˆ˜æ¡ˆä¾‹"><a href="#ä¼ä¸šå®æˆ˜æ¡ˆä¾‹" class="headerlink" title="ä¼ä¸šå®æˆ˜æ¡ˆä¾‹"></a>ä¼ä¸šå®æˆ˜æ¡ˆä¾‹</h1><p>ğŸ”¹ é€šè¿‡ç±»æ–¹æ³•åˆ›å»ºå¯¹è±¡</p><p>ğŸ“Œ åœ¨ä¼ä¸šå¼€å‘ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦ä¸åŒçš„æ–¹å¼åˆ›å»ºå¯¹è±¡ï¼Œä¾‹å¦‚ä»æ•°æ®åº“ã€<code>JSON</code> æ–‡ä»¶ç­‰è·å–æ•°æ®ã€‚è¿™æ—¶å¯ä»¥ä½¿ç”¨ <code>@classmethod</code> ä½œä¸ºå·¥å‚æ–¹æ³•ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Employee</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name, salary</span>):<br>        self.name = name<br>        self.salary = salary<br><br><span class="hljs-meta">    @classmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">from_string</span>(<span class="hljs-params">cls, emp_str</span>):<br>        name, salary = emp_str.split(<span class="hljs-string">&quot;-&quot;</span>)<br>        <span class="hljs-keyword">return</span> cls(name, <span class="hljs-built_in">int</span>(salary))  <span class="hljs-comment"># é€šè¿‡ç±»æ–¹æ³•åˆ›å»ºå¯¹è±¡</span><br><br><span class="hljs-comment"># é€šè¿‡ç±»æ–¹æ³•åˆ›å»ºå¯¹è±¡</span><br>emp = Employee.from_string(<span class="hljs-string">&quot;Alice-6000&quot;</span>)<br><span class="hljs-built_in">print</span>(emp.name, emp.salary)  <span class="hljs-comment"># âœ… Alice 6000</span><br><br></code></pre></td></tr></table></figure><p>ğŸ”¹ ç»Ÿè®¡å®ä¾‹ä¸ªæ•°ï¼ˆç±»æ–¹æ³•ï¼‰</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Employee</span>:<br>    count = <span class="hljs-number">0</span>  <span class="hljs-comment"># ç»Ÿè®¡å‘˜å·¥æ•°é‡</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name</span>):<br>        self.name = name<br>        Employee.count += <span class="hljs-number">1</span><br><br><span class="hljs-meta">    @classmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_count</span>(<span class="hljs-params">cls</span>):<br>        <span class="hljs-keyword">return</span> cls.count<br><br><span class="hljs-comment"># åˆ›å»ºå¤šä¸ªå‘˜å·¥</span><br>emp1 = Employee(<span class="hljs-string">&quot;Alice&quot;</span>)<br>emp2 = Employee(<span class="hljs-string">&quot;Bob&quot;</span>)<br><br><span class="hljs-comment"># è·å–å‘˜å·¥æ€»æ•°</span><br><span class="hljs-built_in">print</span>(Employee.get_count())  <span class="hljs-comment"># âœ… 2</span><br><br></code></pre></td></tr></table></figure><p>ğŸ”¹ ä½¿ç”¨é™æ€æ–¹æ³•å®ç°æ—¥æœŸæ ¡éªŒ</p><p>ğŸ“Œ åœ¨ä¼ä¸šå¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦ä¸€äº›é€šç”¨å·¥å…·å‡½æ•°ï¼Œå¦‚æ—¥æœŸæ ¡éªŒã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DateUtils</span>:<br><span class="hljs-meta">    @staticmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">is_valid_date</span>(<span class="hljs-params">date_str</span>):<br>        <span class="hljs-keyword">try</span>:<br>            datetime.strptime(date_str, <span class="hljs-string">&quot;%Y-%m-%d&quot;</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>        <span class="hljs-keyword">except</span> ValueError:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br><span class="hljs-comment"># è°ƒç”¨é™æ€æ–¹æ³•</span><br><span class="hljs-built_in">print</span>(DateUtils.is_valid_date(<span class="hljs-string">&quot;2024-03-31&quot;</span>))  <span class="hljs-comment"># âœ… True</span><br><span class="hljs-built_in">print</span>(DateUtils.is_valid_date(<span class="hljs-string">&quot;2024-02-30&quot;</span>))  <span class="hljs-comment"># âœ… False</span><br><br></code></pre></td></tr></table></figure><h1 id="ä»€ä¹ˆæ—¶å€™ç”¨ç±»æ–¹æ³•-vs-é™æ€æ–¹æ³•ï¼Ÿ"><a href="#ä»€ä¹ˆæ—¶å€™ç”¨ç±»æ–¹æ³•-vs-é™æ€æ–¹æ³•ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ—¶å€™ç”¨ç±»æ–¹æ³• vs é™æ€æ–¹æ³•ï¼Ÿ"></a>ä»€ä¹ˆæ—¶å€™ç”¨ç±»æ–¹æ³• vs é™æ€æ–¹æ³•ï¼Ÿ</h1><table><thead><tr><th><strong>åœºæ™¯</strong></th><th><strong>ç±»æ–¹æ³•ï¼ˆ@classmethodï¼‰</strong></th><th><strong>é™æ€æ–¹æ³•ï¼ˆ@staticmethodï¼‰</strong></th></tr></thead><tbody><tr><td>éœ€è¦è®¿é—®&#x2F;ä¿®æ”¹ç±»å˜é‡</td><td>âœ…</td><td>âŒ</td></tr><tr><td>éœ€è¦åˆ›å»ºå¯¹è±¡çš„å·¥å‚æ–¹æ³•</td><td>âœ…</td><td>âŒ</td></tr><tr><td>åªæ‰§è¡Œç‹¬ç«‹é€»è¾‘ï¼Œä¸è®¿é—®ç±»æˆ–å®ä¾‹</td><td>âŒ</td><td>âœ…</td></tr><tr><td>éœ€è¦è®¿é—®å®ä¾‹å˜é‡</td><td>âŒ</td><td>âŒ</td></tr></tbody></table><h1 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h1><p>âœ… å®ä¾‹æ–¹æ³•<code>ï¼ˆselfï¼‰</code>ï¼šæ“ä½œå®ä¾‹æ•°æ®ï¼Œè®¿é—®å®ä¾‹å˜é‡ã€‚<br>âœ… ç±»æ–¹æ³•<code>ï¼ˆclsï¼‰</code>ï¼šæ“ä½œç±»æ•°æ®ï¼Œè®¿é—®å’Œä¿®æ”¹ç±»å˜é‡ã€‚<br>âœ… é™æ€æ–¹æ³•ï¼ˆæ—  <code>self</code> å’Œ <code>cls</code>ï¼‰ï¼šå·¥å…·å‡½æ•°ï¼Œä¸å®ä¾‹å’Œç±»æ— å…³ã€‚</p><p>ğŸ’¡ ä¼ä¸šçº§å¼€å‘å»ºè®®</p><p>ğŸŸ¢éœ€è¦ä¿®æ”¹ç±»å˜é‡ â ç”¨ <code>@classmethod</code><br>ğŸŸ¢å·¥å…·æ–¹æ³•ï¼Œä¸ä¾èµ–ç±»å’Œå®ä¾‹ â ç”¨<code> @staticmethod</code><br>ğŸŸ¢æ“ä½œå®ä¾‹å˜é‡ â ç”¨æ™®é€šæ–¹æ³•</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
      <category>Python å¸¸è§å‡½æ•°</category>
      
      <category>Pythonä¸­çš„ç±»æ–¹æ³•å’Œé™æ€æ–¹æ³•ä»¥åŠæ™®é€šå®ä¾‹æ–¹æ³•çš„åŒºåˆ«</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python å‡½æ•°çš„ -&gt; åŠå‚æ•°çš„å¼ºç±»å‹æ³¨è§£è¯¦è§£</title>
    <link href="/2025/03/28/Python%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0%E7%9A%84%E5%BC%BA%E7%B1%BB%E5%9E%8B%E6%B3%A8%E8%A7%A3%E8%AF%A6%E8%A7%A3/"/>
    <url>/2025/03/28/Python%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0%E7%9A%84%E5%BC%BA%E7%B1%BB%E5%9E%8B%E6%B3%A8%E8%A7%A3%E8%AF%A6%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<h1 id="Python-å‡½æ•°çš„-åŠå‚æ•°çš„å¼ºç±»å‹æ³¨è§£è¯¦è§£"><a href="#Python-å‡½æ•°çš„-åŠå‚æ•°çš„å¼ºç±»å‹æ³¨è§£è¯¦è§£" class="headerlink" title="Python å‡½æ•°çš„ -&gt; åŠå‚æ•°çš„å¼ºç±»å‹æ³¨è§£è¯¦è§£"></a>Python å‡½æ•°çš„ -&gt; åŠå‚æ•°çš„å¼ºç±»å‹æ³¨è§£è¯¦è§£</h1><h1 id="ä»€ä¹ˆæ˜¯ç±»å‹æ³¨è§£ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯ç±»å‹æ³¨è§£ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ç±»å‹æ³¨è§£ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ç±»å‹æ³¨è§£ï¼Ÿ</h1><p>ğŸ“Œ <code>Python</code> ä» 3.5 å¼€å§‹æ”¯æŒç±»å‹æ³¨è§£<code>ï¼ˆType Hintingï¼‰</code>ï¼Œç”¨äºæŒ‡å®šå‡½æ•°å‚æ•°å’Œè¿”å›å€¼çš„ç±»å‹ï¼Œä½¿ä»£ç æ›´å¯è¯»ã€å¯ç»´æŠ¤ï¼Œå¹¶å¯ä½¿ç”¨ <code>mypy</code> ç­‰å·¥å…·è¿›è¡Œé™æ€ç±»å‹æ£€æŸ¥ã€‚</p><p>ğŸ’¡ è¯­æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">å‡½æ•°å</span>(<span class="hljs-params">å‚æ•°<span class="hljs-number">1</span>: ç±»å‹, å‚æ•°<span class="hljs-number">2</span>: ç±»å‹</span>) -&gt; è¿”å›ç±»å‹:<br>    ä»£ç å—<br></code></pre></td></tr></table></figure><p>ğŸ”¹ ç¤ºä¾‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">x: <span class="hljs-built_in">int</span>, y: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>    <span class="hljs-keyword">return</span> x + y<br></code></pre></td></tr></table></figure><p>âœ… è¿™é‡Œ <code>x: int </code>å’Œ <code>y: int </code>æŒ‡å®šå‚æ•°ç±»å‹ï¼Œ<code>-&gt; int </code>æŒ‡å®šè¿”å›å€¼ç±»å‹ã€‚</p><h1 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ç±»å‹æ³¨è§£ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ç±»å‹æ³¨è§£ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ç±»å‹æ³¨è§£ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ç±»å‹æ³¨è§£ï¼Ÿ</h1><table><thead><tr><th>ç‰¹ç‚¹</th><th>æ— ç±»å‹æ³¨è§£</th><th>æœ‰ç±»å‹æ³¨è§£</th></tr></thead><tbody><tr><td>ä»£ç å¯è¯»æ€§</td><td>ä½</td><td>é«˜</td></tr><tr><td>é™æ€é”™è¯¯æ£€æµ‹</td><td>âŒ è¿è¡Œæ—¶æŠ¥é”™</td><td>âœ… æå‰æ£€æŸ¥</td></tr><tr><td>IDE æ”¯æŒ</td><td>è¾ƒå·®ï¼Œæç¤ºä¸ç²¾å‡†</td><td>âœ… è‡ªåŠ¨è¡¥å…¨æ›´å‡†ç¡®</td></tr><tr><td>é€‚ç”¨äºå¤§å‹é¡¹ç›®</td><td>âŒ ç»´æŠ¤å›°éš¾</td><td>âœ… ä»£ç æ›´ç¨³å®š</td></tr></tbody></table><h1 id="åŸºç¡€ç±»å‹æ³¨è§£"><a href="#åŸºç¡€ç±»å‹æ³¨è§£" class="headerlink" title="åŸºç¡€ç±»å‹æ³¨è§£"></a>åŸºç¡€ç±»å‹æ³¨è§£</h1><p>ğŸ“Œ <code>Python</code> ä¸­å¸¸è§çš„ç±»å‹ï¼š</p><table><thead><tr><th><strong>æ•°æ®ç±»å‹</strong></th><th><strong>æ³¨è§£æ–¹å¼</strong></th><th><strong>ç¤ºä¾‹</strong></th></tr></thead><tbody><tr><td>æ•´æ•°</td><td><code>int</code></td><td><code>x: int = 10</code></td></tr><tr><td>æµ®ç‚¹æ•°</td><td><code>float</code></td><td><code>y: float = 3.14</code></td></tr><tr><td>å­—ç¬¦ä¸²</td><td><code>str</code></td><td><code>name: str = &quot;Tom&quot;</code></td></tr><tr><td>å¸ƒå°”å€¼</td><td><code>bool</code></td><td><code>flag: bool = True</code></td></tr><tr><td>åˆ—è¡¨</td><td><code>List[ç±»å‹]</code></td><td><code>scores: List[int] = [90, 80, 70]</code></td></tr><tr><td>å…ƒç»„</td><td><code>Tuple[ç±»å‹1, ç±»å‹2]</code></td><td><code>data: Tuple[int, str] = (1, &quot;hello&quot;)</code></td></tr><tr><td>å­—å…¸</td><td><code>Dict[é”®ç±»å‹, å€¼ç±»å‹]</code></td><td><code>info: Dict[str, int] = &#123;&quot;age&quot;: 25&#125;</code></td></tr><tr><td>é›†åˆ</td><td><code>Set[ç±»å‹]</code></td><td><code>nums: Set[int] = &#123;1, 2, 3&#125;</code></td></tr></tbody></table><h1 id="è¿›é˜¶ï¼šå¯é€‰å‚æ•°-Optional"><a href="#è¿›é˜¶ï¼šå¯é€‰å‚æ•°-Optional" class="headerlink" title="è¿›é˜¶ï¼šå¯é€‰å‚æ•° (Optional)"></a>è¿›é˜¶ï¼šå¯é€‰å‚æ•° (Optional)</h1><p>ğŸ“Œ æœ‰äº›å‚æ•°å¯èƒ½æ˜¯ <code>None</code>ï¼Œå¯ä»¥ä½¿ç”¨ <code>Optional</code>ï¼ˆç­‰ä»·äº <code>Union[ç±»å‹, None]</code>ï¼‰ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Optional</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_username</span>(<span class="hljs-params">user_id: <span class="hljs-built_in">int</span>, nickname: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">str</span>] = <span class="hljs-literal">None</span></span>) -&gt; <span class="hljs-built_in">str</span>:<br>    <span class="hljs-keyword">return</span> nickname <span class="hljs-keyword">if</span> nickname <span class="hljs-keyword">else</span> <span class="hljs-string">f&quot;User-<span class="hljs-subst">&#123;user_id&#125;</span>&quot;</span><br><br><span class="hljs-built_in">print</span>(get_username(<span class="hljs-number">1</span>))  <span class="hljs-comment"># âœ… è¾“å‡º: User-1</span><br><span class="hljs-built_in">print</span>(get_username(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;Tom&quot;</span>))  <span class="hljs-comment"># âœ… è¾“å‡º: Tom</span><br><br></code></pre></td></tr></table></figure><h1 id="è¿›é˜¶ï¼šå¤šä¸ªè¿”å›ç±»å‹ï¼ˆUnionï¼‰"><a href="#è¿›é˜¶ï¼šå¤šä¸ªè¿”å›ç±»å‹ï¼ˆUnionï¼‰" class="headerlink" title="è¿›é˜¶ï¼šå¤šä¸ªè¿”å›ç±»å‹ï¼ˆUnionï¼‰"></a>è¿›é˜¶ï¼šå¤šä¸ªè¿”å›ç±»å‹ï¼ˆUnionï¼‰</h1><p>ğŸ“Œ å¦‚æœå‡½æ•°å¯èƒ½è¿”å›å¤šç§ç±»å‹ï¼Œå¦‚ <code>int</code> æˆ– <code>str</code>ï¼Œå¯ä»¥ä½¿ç”¨ <code>Union</code>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Union</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_discount</span>(<span class="hljs-params">price: <span class="hljs-built_in">float</span></span>) -&gt; <span class="hljs-type">Union</span>[<span class="hljs-built_in">float</span>, <span class="hljs-built_in">str</span>]:<br>    <span class="hljs-keyword">return</span> price * <span class="hljs-number">0.9</span> <span class="hljs-keyword">if</span> price &gt; <span class="hljs-number">100</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&quot;æ— æŠ˜æ‰£&quot;</span><br><br><span class="hljs-built_in">print</span>(get_discount(<span class="hljs-number">120</span>))  <span class="hljs-comment"># âœ… è¾“å‡º: 108.0</span><br><span class="hljs-built_in">print</span>(get_discount(<span class="hljs-number">80</span>))   <span class="hljs-comment"># âœ… è¾“å‡º: æ— æŠ˜æ‰£</span><br></code></pre></td></tr></table></figure><h1 id="é«˜çº§ï¼šæ³›å‹-Generics"><a href="#é«˜çº§ï¼šæ³›å‹-Generics" class="headerlink" title="é«˜çº§ï¼šæ³›å‹ (Generics)"></a>é«˜çº§ï¼šæ³›å‹ (Generics)</h1><p>ğŸ“Œ å½“å‚æ•°æˆ–è¿”å›å€¼çš„ç±»å‹ä¸ç¡®å®šæ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ³›å‹<code>ï¼ˆTypeVarï¼‰</code>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> TypeVar, <span class="hljs-type">List</span><br><br>T = TypeVar(<span class="hljs-string">&quot;T&quot;</span>)  <span class="hljs-comment"># å®šä¹‰æ³›å‹å˜é‡</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">first_element</span>(<span class="hljs-params">elements: <span class="hljs-type">List</span>[T]</span>) -&gt; T:<br>    <span class="hljs-keyword">return</span> elements[<span class="hljs-number">0</span>]<br><br><span class="hljs-built_in">print</span>(first_element([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]))  <span class="hljs-comment"># âœ… 1</span><br><span class="hljs-built_in">print</span>(first_element([<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;c&quot;</span>]))  <span class="hljs-comment"># âœ… &#x27;a&#x27;</span><br><br></code></pre></td></tr></table></figure><h1 id="Callableï¼ˆå‡½æ•°ç±»å‹ï¼‰"><a href="#Callableï¼ˆå‡½æ•°ç±»å‹ï¼‰" class="headerlink" title="Callableï¼ˆå‡½æ•°ç±»å‹ï¼‰"></a>Callableï¼ˆå‡½æ•°ç±»å‹ï¼‰</h1><p>ğŸ“Œ æœ‰æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä¼ é€’å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨ <code>Callable</code> æŒ‡å®šå‡½æ•°çš„å‚æ•°å’Œè¿”å›ç±»å‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Callable</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">execute_twice</span>(<span class="hljs-params">func: <span class="hljs-type">Callable</span>[[<span class="hljs-built_in">int</span>], <span class="hljs-built_in">int</span>], value: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>    <span class="hljs-keyword">return</span> func(func(value))<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">square</span>(<span class="hljs-params">x: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>    <span class="hljs-keyword">return</span> x * x<br><br><span class="hljs-built_in">print</span>(execute_twice(square, <span class="hljs-number">2</span>))  <span class="hljs-comment"># âœ… 16</span><br></code></pre></td></tr></table></figure><h1 id="Anyï¼ˆä»»æ„ç±»å‹ï¼‰"><a href="#Anyï¼ˆä»»æ„ç±»å‹ï¼‰" class="headerlink" title="Anyï¼ˆä»»æ„ç±»å‹ï¼‰"></a>Anyï¼ˆä»»æ„ç±»å‹ï¼‰</h1><p>ğŸ“Œ å¦‚æœå‚æ•°æˆ–è¿”å›å€¼å¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼Œä½¿ç”¨<code> Any</code>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Any</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">print_value</span>(<span class="hljs-params">value: <span class="hljs-type">Any</span></span>) -&gt; <span class="hljs-literal">None</span>:<br>    <span class="hljs-built_in">print</span>(value)<br><br>print_value(<span class="hljs-number">123</span>)        <span class="hljs-comment"># âœ… è¾“å‡º: 123</span><br>print_value(<span class="hljs-string">&quot;hello&quot;</span>)    <span class="hljs-comment"># âœ… è¾“å‡º: hello</span><br>print_value([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])  <span class="hljs-comment"># âœ… è¾“å‡º: [1, 2, 3]</span><br></code></pre></td></tr></table></figure><h1 id="ä¼ä¸šå®æˆ˜ï¼šæ•°æ®åº“æŸ¥è¯¢"><a href="#ä¼ä¸šå®æˆ˜ï¼šæ•°æ®åº“æŸ¥è¯¢" class="headerlink" title="ä¼ä¸šå®æˆ˜ï¼šæ•°æ®åº“æŸ¥è¯¢"></a>ä¼ä¸šå®æˆ˜ï¼šæ•°æ®åº“æŸ¥è¯¢</h1><p>ğŸ“Œ åœ¨ä¼ä¸šå¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¸¸ç”¨ç±»å‹æ³¨è§£æ¥çº¦æŸæ•°æ®åº“è¿”å›çš„æ•°æ®ç»“æ„ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Dict</span>, <span class="hljs-type">Union</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_user_info</span>(<span class="hljs-params">user_id: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Union</span>[<span class="hljs-built_in">str</span>, <span class="hljs-built_in">int</span>]]:<br>    <span class="hljs-keyword">return</span> &#123;<span class="hljs-string">&quot;id&quot;</span>: user_id, <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">25</span>&#125;<br><br><span class="hljs-built_in">print</span>(get_user_info(<span class="hljs-number">1</span>))  <span class="hljs-comment"># âœ… &#123;&#x27;id&#x27;: 1, &#x27;name&#x27;: &#x27;Alice&#x27;, &#x27;age&#x27;: 25&#125;</span><br><br></code></pre></td></tr></table></figure><h1 id="ç»“åˆ-mypy-è¿›è¡Œé™æ€ç±»å‹æ£€æŸ¥"><a href="#ç»“åˆ-mypy-è¿›è¡Œé™æ€ç±»å‹æ£€æŸ¥" class="headerlink" title="ç»“åˆ mypy è¿›è¡Œé™æ€ç±»å‹æ£€æŸ¥"></a>ç»“åˆ mypy è¿›è¡Œé™æ€ç±»å‹æ£€æŸ¥</h1><p>ğŸ“Œ <code>Python</code> æœ¬èº«ä¸ä¼šå¼ºåˆ¶ç±»å‹æ£€æŸ¥ï¼Œä½†å¯ä»¥ä½¿ç”¨ <code>mypy </code>è¿›è¡Œé™æ€æ£€æŸ¥ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">pip install mypy<br>mypy my_script.py<br></code></pre></td></tr></table></figure><p>âš ï¸ å¦‚æœ <code>my_script.py</code> é‡Œæœ‰é”™è¯¯ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">x: <span class="hljs-built_in">int</span>, y: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>    <span class="hljs-keyword">return</span> x + y<br><br><span class="hljs-built_in">print</span>(add(<span class="hljs-string">&quot;hello&quot;</span>, <span class="hljs-number">5</span>))  <span class="hljs-comment"># âŒ TypeError</span><br></code></pre></td></tr></table></figure><p>ğŸ”´ <code>mypy</code> ä¼šæŠ¥é”™ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">error: Argument 1 to <span class="hljs-string">&quot;add&quot;</span> has incompatible <span class="hljs-built_in">type</span> <span class="hljs-string">&quot;str&quot;</span>; expected <span class="hljs-string">&quot;int&quot;</span><br></code></pre></td></tr></table></figure><h1 id="ä½¿ç”¨-overload-è¿›è¡Œé‡è½½"><a href="#ä½¿ç”¨-overload-è¿›è¡Œé‡è½½" class="headerlink" title="ä½¿ç”¨ @overload è¿›è¡Œé‡è½½"></a>ä½¿ç”¨ @overload è¿›è¡Œé‡è½½</h1><p>ğŸ“Œ åœ¨ <code>Python</code> ä¸­ï¼Œå‡½æ•°å¯ä»¥æœ‰ä¸åŒçš„å‚æ•°å’Œè¿”å›å€¼ï¼Œä½¿ç”¨ <code>@overload</code> æä¾›æ›´ç²¾å‡†çš„ç±»å‹æç¤ºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> overload<br><br><span class="hljs-meta">@overload</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">process_data</span>(<span class="hljs-params">data: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">int</span>: ...<br><span class="hljs-meta">@overload</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">process_data</span>(<span class="hljs-params">data: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">str</span>: ...<br>    <br><span class="hljs-keyword">def</span> <span class="hljs-title function_">process_data</span>(<span class="hljs-params">data</span>):<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(data) <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(data, <span class="hljs-built_in">str</span>) <span class="hljs-keyword">else</span> <span class="hljs-built_in">str</span>(data)<br><br><span class="hljs-built_in">print</span>(process_data(<span class="hljs-string">&quot;hello&quot;</span>))  <span class="hljs-comment"># âœ… 5</span><br><span class="hljs-built_in">print</span>(process_data(<span class="hljs-number">123</span>))      <span class="hljs-comment"># âœ… &#x27;123&#x27;</span><br><br></code></pre></td></tr></table></figure><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><table><thead><tr><th><strong>æ¦‚å¿µ</strong></th><th><strong>ä½œç”¨</strong></th><th><strong>ç¤ºä¾‹</strong></th></tr></thead><tbody><tr><td>å‚æ•°ç±»å‹æ³¨è§£</td><td>æŒ‡å®šå‡½æ•°å‚æ•°ç±»å‹</td><td><code>def func(a: int):</code></td></tr><tr><td>è¿”å›å€¼æ³¨è§£</td><td>æŒ‡å®šè¿”å›å€¼ç±»å‹</td><td><code>-&gt; int</code></td></tr><tr><td><code>Optional</code></td><td>å…è®¸<code>None</code>å€¼</td><td><code>Optional[str]</code></td></tr><tr><td><code>Union</code></td><td>å¤šç§å¯èƒ½ç±»å‹</td><td><code>Union[int, str]</code></td></tr><tr><td><code>List</code>&#x2F;<code>Dict</code></td><td>å¤æ‚æ•°æ®ç±»å‹</td><td><code>List[int]</code>&#x2F;<code>Dict[str, int]</code></td></tr><tr><td>æ³›å‹<code>TypeVar</code></td><td>é€‚é…å¤šä¸ªç±»å‹</td><td><code>T = TypeVar(&quot;T&quot;)</code></td></tr><tr><td><code>Callable</code></td><td>ä¼ é€’å‡½æ•°</td><td><code>Callable[[int], int]</code></td></tr><tr><td><code>Any</code></td><td>ä»»æ„ç±»å‹</td><td><code>Any</code></td></tr><tr><td><code>mypy</code></td><td>é™æ€ç±»å‹æ£€æŸ¥</td><td><code>mypy script.py</code></td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
      <category>Python å¸¸è§å‡½æ•°</category>
      
      <category>Python å‡½æ•°çš„ -&gt; åŠå‚æ•°çš„å¼ºç±»å‹æ³¨è§£è¯¦è§£</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pythonè„šæœ¬ä¸­çš„__main__ä¸­çš„ä½œç”¨</title>
    <link href="/2025/03/28/python%E8%84%9A%E6%9C%AC%E4%B8%AD%E7%9A%84main%E6%96%B9%E6%B3%95/"/>
    <url>/2025/03/28/python%E8%84%9A%E6%9C%AC%E4%B8%AD%E7%9A%84main%E6%96%B9%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h1 id="Pythonè„šæœ¬ä¸­çš„-main-ä¸­çš„ä½œç”¨"><a href="#Pythonè„šæœ¬ä¸­çš„-main-ä¸­çš„ä½œç”¨" class="headerlink" title="Pythonè„šæœ¬ä¸­çš„__main__ä¸­çš„ä½œç”¨"></a>Pythonè„šæœ¬ä¸­çš„__main__ä¸­çš„ä½œç”¨</h1><p>åœ¨ <code>Python</code> ä¸­ï¼Œ<code>if __name__ == &quot;__main__&quot;</code>: æ˜¯ä¸€ä¸ªå¸¸è§çš„ç»“æ„ï¼Œä¸»è¦ç”¨äºæ§åˆ¶ä»£ç çš„æ‰§è¡Œæ–¹å¼ï¼Œç¡®ä¿ä»£ç åªæœ‰åœ¨ç›´æ¥è¿è¡Œå½“å‰æ–‡ä»¶æ—¶æ‰ä¼šæ‰§è¡Œï¼Œè€Œä¸ä¼šåœ¨è¢«å…¶ä»–æ¨¡å—å¯¼å…¥æ—¶æ‰§è¡Œã€‚</p><h1 id="ä»€ä¹ˆæ˜¯-name-ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-name-ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ __name__ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ __name__ï¼Ÿ</h1><p>ğŸ“Œ åœ¨ <code>Python</code> ä¸­ï¼Œæ¯ä¸ªæ¨¡å—ï¼ˆæ–‡ä»¶ï¼‰åœ¨è¿è¡Œæ—¶éƒ½ä¼šæœ‰ä¸€ä¸ªç‰¹æ®Šçš„å˜é‡<code> __name__</code>ï¼Œå®ƒçš„å€¼å–å†³äºæ¨¡å—æ˜¯ç›´æ¥æ‰§è¡Œè¿˜æ˜¯è¢«å¯¼å…¥ã€‚</p><p>âœ…å½“ <code>Python</code> ç›´æ¥è¿è¡Œæ–‡ä»¶æ—¶ï¼Œ<code>__name__</code> çš„å€¼æ˜¯ <code>&quot;__main__&quot;</code>ã€‚</p><p>âœ…å½“ <code>Python</code> æ–‡ä»¶è¢«ä½œä¸ºæ¨¡å—å¯¼å…¥æ—¶ï¼Œ<code>__name__</code> å–çš„æ˜¯æ–‡ä»¶çš„æ¨¡å—åï¼ˆä¸å¸¦ .pyï¼‰ã€‚</p><p>ğŸ”¹ ç¤ºä¾‹ï¼šæ£€æŸ¥ <code>__name__</code> çš„å€¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># my_module.py</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å½“å‰æ¨¡å—çš„ __name__ å˜é‡å€¼æ˜¯: <span class="hljs-subst">&#123;__name__&#125;</span>&quot;</span>)<br><br></code></pre></td></tr></table></figure><p>å¦‚æœç›´æ¥è¿è¡Œ <code>my_module.py</code>ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">python my_module.py<br></code></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">å½“å‰æ¨¡å—çš„ __name__ å˜é‡å€¼æ˜¯: __main__<br></code></pre></td></tr></table></figure><p>å¦‚æœè¿™ä¸ªæ–‡ä»¶è¢«å…¶ä»– <code>Python</code> æ–‡ä»¶ <code>import</code>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># another_script.py</span><br><span class="hljs-keyword">import</span> my_module<br><br></code></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">å½“å‰æ¨¡å—çš„ __name__ å˜é‡å€¼æ˜¯: my_module<br></code></pre></td></tr></table></figure><h1 id="ä¸ºä»€ä¹ˆè¦ç”¨-if-name-main-ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦ç”¨-if-name-main-ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ç”¨ if __name__ == &quot;__main__&quot;:ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦ç”¨ <code>if __name__ == &quot;__main__&quot;:</code>ï¼Ÿ</h1><p>ğŸ“Œ åœ¨ <code>Python</code> ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨ <code>if __name__ == &quot;__main__&quot;</code>: æ¥é¿å…å¯¼å…¥æ—¶æ‰§è¡Œä¸å¿…è¦çš„ä»£ç ã€‚</p><p>ğŸ”¹ ç¤ºä¾‹ï¼šæ²¡æœ‰ <code>if __name__ == &quot;__main__&quot;</code> çš„é—®é¢˜</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># my_script.py</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;è¿™ä¸ªæ–‡ä»¶è¢«è¿è¡Œäº†ï¼&quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">greet</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Hello, World!&quot;</span>)<br><br>greet()<br><br></code></pre></td></tr></table></figure><p>å¦‚æœç›´æ¥è¿è¡Œï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">python my_script.py<br></code></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">è¿™ä¸ªæ–‡ä»¶è¢«è¿è¡Œäº†ï¼<br>Hello, World!<br></code></pre></td></tr></table></figure><p>ä½†å¦‚æœè¢« <code>import</code>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> my_script  <span class="hljs-comment"># è¿™é‡Œä»…ä»…æ˜¯å¯¼å…¥</span><br></code></pre></td></tr></table></figure><p>ä»ç„¶ä¼šè¾“å‡ºï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">è¿™ä¸ªæ–‡ä»¶è¢«è¿è¡Œäº†ï¼<br>Hello, World!<br></code></pre></td></tr></table></figure><p>âš ï¸ é—®é¢˜ï¼š</p><p>â›”ï¸æ„å¤–æ‰§è¡Œï¼šæˆ‘ä»¬åªæ˜¯æƒ³å¯¼å…¥ <code>greet()</code> å‡½æ•°ï¼Œä½†æ–‡ä»¶é‡Œçš„æ‰€æœ‰ä»£ç éƒ½è¢«æ‰§è¡Œäº†ï¼</p><p>â›”ï¸å¯èƒ½å¯¼è‡´é”™è¯¯ï¼šå¦‚æœ <code>my_script.py</code> é‡ŒåŒ…å«æ•°æ®åº“æ“ä½œæˆ– <code>IO</code> æ“ä½œï¼Œä¼šè¢«æ„å¤–è§¦å‘ã€‚</p><h1 id="æ­£ç¡®ä½¿ç”¨-if-name-main"><a href="#æ­£ç¡®ä½¿ç”¨-if-name-main" class="headerlink" title="æ­£ç¡®ä½¿ç”¨ if __name__ == &quot;__main__&quot;:"></a>æ­£ç¡®ä½¿ç”¨ <code>if __name__ == &quot;__main__&quot;</code>:</h1><p>ğŸ”¹ ç»§ç»­ä¸Šä¸ªä¾‹å­,æ·»åŠ  <code>if __name__ == &quot;__main__&quot;:</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># my_script.py</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;è¿™ä¸ªæ–‡ä»¶è¢«è¿è¡Œäº†ï¼&quot;</span>)  <span class="hljs-comment"># è¿™ä¸ªä»ç„¶ä¼šåœ¨å¯¼å…¥æ—¶æ‰§è¡Œ</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">greet</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Hello, World!&quot;</span>)<br><br><span class="hljs-comment"># åªæœ‰ç›´æ¥è¿è¡Œæ—¶æ‰ä¼šæ‰§è¡Œ</span><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    greet()<br><br></code></pre></td></tr></table></figure><p>âœ… æ”¹è¿›å</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> my_script  <span class="hljs-comment"># ä»…ä»…å¯¼å…¥ï¼Œä¸ä¼šæ‰§è¡Œ greet()</span><br></code></pre></td></tr></table></figure><p>è¾“å‡ºï¼ˆæ²¡æœ‰ä¸å¿…è¦çš„æ‰§è¡Œï¼‰ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">è¿™ä¸ªæ–‡ä»¶è¢«è¿è¡Œäº†ï¼<br></code></pre></td></tr></table></figure><p><code>greet()</code> ä¸ä¼šæ‰§è¡Œï¼Œé™¤éæ˜¾å¼è°ƒç”¨ <code>my_script.greet()</code>ã€‚</p><h1 id="ä¼ä¸šå®æˆ˜æ¡ˆä¾‹"><a href="#ä¼ä¸šå®æˆ˜æ¡ˆä¾‹" class="headerlink" title="ä¼ä¸šå®æˆ˜æ¡ˆä¾‹"></a>ä¼ä¸šå®æˆ˜æ¡ˆä¾‹</h1><p>ğŸ“Œ åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œ<code>if __name__ == &quot;__main__&quot;</code>: ä¸»è¦ç”¨äºï¼š</p><p>âœ… ç¼–å†™å¯å¤ç”¨çš„æ¨¡å—</p><p>âœ… é˜²æ­¢å¯¼å…¥æ—¶çš„å‰¯ä½œç”¨</p><p>âœ… è®© <code>Python</code> è„šæœ¬æ—¢èƒ½ç‹¬ç«‹è¿è¡Œï¼Œåˆèƒ½ä½œä¸ºæ¨¡å—ä½¿ç”¨</p><p>ğŸ”¹ æ¡ˆä¾‹ 1ï¼šæ•°æ®åº“åˆå§‹åŒ–</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># database.py</span><br><span class="hljs-keyword">import</span> sqlite3<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">init_db</span>():<br>    conn = sqlite3.connect(<span class="hljs-string">&quot;example.db&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æ•°æ®åº“åˆå§‹åŒ–å®Œæˆï¼&quot;</span>)<br>    conn.close()<br><br><span class="hljs-comment"># åªæœ‰åœ¨ç›´æ¥è¿è¡Œ database.py æ—¶æ‰ä¼šåˆå§‹åŒ–æ•°æ®åº“</span><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    init_db()<br><br></code></pre></td></tr></table></figure><p>ğŸŸ¢ å¥½å¤„ï¼š</p><p>ğŸŸ¢ å…¶ä»–æ¨¡å—å¯ä»¥ <code>import database</code> è€Œä¸ä¼šåˆå§‹åŒ–æ•°æ®åº“ã€‚</p><p>ğŸŸ¢ åªæœ‰ç›´æ¥è¿è¡Œ <code>python database.py</code> æ—¶æ‰ä¼šåˆå§‹åŒ–æ•°æ®åº“ã€‚</p><p>ğŸ”¹ æ¡ˆä¾‹ 2ï¼šå‘½ä»¤è¡Œå·¥å…·</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># cli_tool.py</span><br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(sys.argv) &gt; <span class="hljs-number">1</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ä½ è¾“å…¥çš„å‚æ•°æ˜¯ï¼š<span class="hljs-subst">&#123;sys.argv[<span class="hljs-number">1</span>]&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;è¯·æä¾›å‚æ•°ï¼&quot;</span>)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br><br></code></pre></td></tr></table></figure><p>ç›´æ¥è¿è¡Œï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">python cli_tool.py hello<br></code></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">ä½ è¾“å…¥çš„å‚æ•°æ˜¯ï¼šhello<br></code></pre></td></tr></table></figure><p>âš ï¸ å¯¼å…¥æ—¶ä¸ä¼šè‡ªåŠ¨è¿è¡Œ <code>main()</code>ã€‚</p><p>ğŸ”¹ æ¡ˆä¾‹ 3ï¼šWeb æœåŠ¡å™¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># app.py</span><br><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask<br><br>app = Flask(__name__)<br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">home</span>():<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Hello, Flask!&quot;</span><br><br><span class="hljs-comment"># ä»…å½“ç›´æ¥è¿è¡Œæ—¶æ‰å¯åŠ¨ Flask æœåŠ¡å™¨</span><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br><br></code></pre></td></tr></table></figure><p>âœ”ï¸ è¿™æ ·å°±ä¸ä¼šåœ¨ <code>import app</code> æ—¶å¯åŠ¨ <code>Flask</code> æœåŠ¡å™¨ï¼</p><h1 id="if-name-main-VS-main-py"><a href="#if-name-main-VS-main-py" class="headerlink" title="if __name__ == &quot;__main__&quot;: VS __main__.py"></a><code>if __name__ == &quot;__main__&quot;: VS __main__.py</code></h1><p>ğŸ“Œ æœ‰æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>__main__.py</code> ä½œä¸ºé¡¹ç›®å…¥å£ã€‚</p><p>ğŸ”¹ ç¤ºä¾‹ï¼šPython åŒ…æ‰§è¡Œ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">python -m my_package<br></code></pre></td></tr></table></figure><p>ğŸ”´ å¦‚æœ <code>my_package/__main__.py</code> å­˜åœ¨ï¼Œå®ƒå°±ä¼šæ‰§è¡Œï¼Œæ•ˆæœç±»ä¼¼ <code>if __name__ == &quot;__main__&quot;</code>:ã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><table><thead><tr><th>åœºæ™¯</th><th><code>if __name__ == &quot;__main__&quot;:</code> çš„ä½œç”¨</th></tr></thead><tbody><tr><td>ç›´æ¥è¿è¡Œ Python æ–‡ä»¶</td><td>ä»£ç ä¼šæ‰§è¡Œ</td></tr><tr><td>Python æ–‡ä»¶è¢«å¯¼å…¥</td><td>ä»£ç ä¸ä¼šæ‰§è¡Œ</td></tr><tr><td>é€‚ç”¨äºè„šæœ¬å·¥å…·</td><td>è®© Python æ–‡ä»¶æ—¢å¯ç‹¬ç«‹è¿è¡Œï¼Œåˆå¯å¯¼å…¥</td></tr><tr><td>é€‚ç”¨äº Flaskã€Django</td><td>é¿å… import æ—¶å¯åŠ¨æœåŠ¡å™¨</td></tr><tr><td>é€‚ç”¨äºæ•°æ®åº“æ“ä½œ</td><td>é¿å… import æ—¶åˆ›å»ºè¿æ¥</td></tr></tbody></table><p>âœ… å»ºè®®å§‹ç»ˆä½¿ç”¨ <code>if __name__ == &quot;__main__&quot;:</code>ï¼Œä»¥ç¡®ä¿<code> Python</code> æ–‡ä»¶å¯å¤ç”¨ä¸”æ— å‰¯ä½œç”¨ã€‚ğŸš€</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
      <category>Python å¸¸è§å‡½æ•°</category>
      
      <category>Pythonè„šæœ¬ä¸­çš„__main__ä¸­çš„ä½œç”¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pythonå¸¸è§æ¨¡å—ä¹‹osæ¨¡å—è¯¦è§£</title>
    <link href="/2025/03/27/python%E5%B8%B8%E8%A7%81os%E6%A8%A1%E5%9D%97%E8%AF%A6%E8%A7%A3/"/>
    <url>/2025/03/27/python%E5%B8%B8%E8%A7%81os%E6%A8%A1%E5%9D%97%E8%AF%A6%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<h1 id="Pythonå¸¸è§æ¨¡å—ä¹‹osæ¨¡å—è¯¦è§£"><a href="#Pythonå¸¸è§æ¨¡å—ä¹‹osæ¨¡å—è¯¦è§£" class="headerlink" title="Pythonå¸¸è§æ¨¡å—ä¹‹osæ¨¡å—è¯¦è§£"></a>Pythonå¸¸è§æ¨¡å—ä¹‹osæ¨¡å—è¯¦è§£</h1><p><code>os</code> æ˜¯ <code>Python</code> å†…ç½®çš„ æ“ä½œç³»ç»Ÿæ¥å£æ¨¡å—ï¼Œç”¨äºï¼š</p><p>âœ… æ–‡ä»¶å’Œç›®å½•æ“ä½œï¼ˆåˆ›å»ºã€åˆ é™¤ã€ç§»åŠ¨ï¼‰<br>âœ… ç¯å¢ƒå˜é‡ç®¡ç†<br>âœ… æƒé™æ§åˆ¶ï¼ˆä¿®æ”¹æ–‡ä»¶æƒé™ã€ç”¨æˆ·ç»„ï¼‰<br>âœ… è¿›ç¨‹ç®¡ç†ï¼ˆå¤šè¿›ç¨‹ã€shell å‘½ä»¤æ‰§è¡Œï¼‰<br>âœ… ä¼ä¸šå®æˆ˜åº”ç”¨ï¼šæ‰¹é‡æ–‡ä»¶ç®¡ç†ã€æ—¥å¿—åˆ†æã€å®šæ—¶ä»»åŠ¡</p><h1 id="å¯¼å…¥-os-æ¨¡å—"><a href="#å¯¼å…¥-os-æ¨¡å—" class="headerlink" title="å¯¼å…¥ os æ¨¡å—"></a>å¯¼å…¥ os æ¨¡å—</h1><p>ğŸ“Œ è·å–å½“å‰å·¥ä½œç›®å½•ï¼ŒåŠ¨æ€åŠ è½½é…ç½®æ–‡ä»¶</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><br><span class="hljs-comment"># æŸ¥çœ‹æ“ä½œç³»ç»Ÿç±»å‹</span><br><span class="hljs-built_in">print</span>(os.name)  <span class="hljs-comment"># Windows: &#x27;nt&#x27;, Linux/Mac: &#x27;posix&#x27;</span><br><br><span class="hljs-comment"># è·å–å½“å‰ Python è¿è¡Œçš„ç›®å½•</span><br><span class="hljs-built_in">print</span>(os.getcwd())  <br></code></pre></td></tr></table></figure><h1 id="æ–‡ä»¶å’Œç›®å½•æ“ä½œ"><a href="#æ–‡ä»¶å’Œç›®å½•æ“ä½œ" class="headerlink" title="æ–‡ä»¶å’Œç›®å½•æ“ä½œ"></a>æ–‡ä»¶å’Œç›®å½•æ“ä½œ</h1><p>ğŸ”¹ è·å–å½“å‰ç›®å½•</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><br><span class="hljs-comment"># è·å–å½“å‰ç›®å½•</span><br>current_dir = os.getcwd()<br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å½“å‰ç›®å½•: <span class="hljs-subst">&#123;current_dir&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure><p>ğŸ“Œ ä¼ä¸šåº”ç”¨ï¼šåŠ¨æ€è·å–è·¯å¾„ï¼Œé¿å…ç¡¬ç¼–ç </p><p>ğŸ”¹ åˆ—å‡ºç›®å½•å†…å®¹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><br><span class="hljs-comment"># è·å–å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹</span><br>files = os.listdir(<span class="hljs-string">&quot;.&quot;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ç›®å½•å†…å®¹: <span class="hljs-subst">&#123;files&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure><p>ğŸ“Œ ä¼ä¸šåº”ç”¨ï¼šæ‰¹é‡è¯»å–æ–‡ä»¶å¤¹ä¸­çš„æ•°æ®æ–‡ä»¶</p><p>ğŸ”¹ åˆ›å»ºæ–°ç›®å½•</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><br><span class="hljs-comment"># åˆ›å»ºå•å±‚ç›®å½•</span><br>os.mkdir(<span class="hljs-string">&quot;new_folder&quot;</span>)<br><br><span class="hljs-comment"># åˆ›å»ºå¤šå±‚ç›®å½•</span><br>os.makedirs(<span class="hljs-string">&quot;new_folder/sub_folder&quot;</span>)<br></code></pre></td></tr></table></figure><p>ğŸ“Œ ä¼ä¸šåº”ç”¨ï¼šåˆ›å»ºæ—¥å¿—å­˜æ”¾ç›®å½•</p><p>ğŸ”¹ åˆ é™¤ç›®å½•</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><br><span class="hljs-comment"># åˆ é™¤ç©ºç›®å½•</span><br>os.rmdir(<span class="hljs-string">&quot;new_folder&quot;</span>)<br><br><span class="hljs-comment"># åˆ é™¤å¤šçº§ç›®å½•</span><br>os.removedirs(<span class="hljs-string">&quot;new_folder/sub_folder&quot;</span>)<br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ ä¼ä¸šåº”ç”¨ï¼šæ¸…ç†ä¸´æ—¶æ–‡ä»¶å¤¹</p><p>ğŸ”¹ åˆ¤æ–­æ–‡ä»¶&#x2F;ç›®å½•æ˜¯å¦å­˜åœ¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><br><span class="hljs-keyword">if</span> os.path.exists(<span class="hljs-string">&quot;test.txt&quot;</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æ–‡ä»¶å­˜åœ¨&quot;</span>)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æ–‡ä»¶ä¸å­˜åœ¨&quot;</span>)<br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ ä¼ä¸šåº”ç”¨ï¼šé˜²æ­¢æ–‡ä»¶è¯»å†™é”™è¯¯</p><p>ğŸ”¹ é€’å½’éå†ç›®å½•</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><br><span class="hljs-keyword">for</span> root, dirs, files <span class="hljs-keyword">in</span> os.walk(<span class="hljs-string">&quot;.&quot;</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ç›®å½•: <span class="hljs-subst">&#123;root&#125;</span>&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å­ç›®å½•: <span class="hljs-subst">&#123;dirs&#125;</span>&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;æ–‡ä»¶: <span class="hljs-subst">&#123;files&#125;</span>&quot;</span>)<br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ ä¼ä¸šåº”ç”¨ï¼šå¿«é€Ÿåˆ—å‡ºçˆ¶å­ç›®å½•</p><p>ğŸ”¹ æ‹†åˆ†æ–‡ä»¶æ‰©å±•å</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br>file_name, ext = os.path.splitext(<span class="hljs-string">&quot;test.txt&quot;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;æ–‡ä»¶å: <span class="hljs-subst">&#123;file_name&#125;</span>, æ‰©å±•å: <span class="hljs-subst">&#123;ext&#125;</span>&quot;</span>)<br><br></code></pre></td></tr></table></figure><p>ğŸ”¹ æ‹¼æ¥è·¯å¾„</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><br>path = os.path.join(<span class="hljs-string">&quot;home&quot;</span>, <span class="hljs-string">&quot;user&quot;</span>, <span class="hljs-string">&quot;file.txt&quot;</span>)<br><span class="hljs-built_in">print</span>(path)  <span class="hljs-comment"># &quot;home/user/file.txt&quot;</span><br></code></pre></td></tr></table></figure><h1 id="æ–‡ä»¶ç®¡ç†"><a href="#æ–‡ä»¶ç®¡ç†" class="headerlink" title="æ–‡ä»¶ç®¡ç†"></a>æ–‡ä»¶ç®¡ç†</h1><p>ğŸ”¹ åˆ›å»ºå’Œå†™å…¥æ–‡ä»¶</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;test.txt&quot;</span>, <span class="hljs-string">&quot;w&quot;</span>) <span class="hljs-keyword">as</span> f:<br>    f.write(<span class="hljs-string">&quot;Hello, os module!&quot;</span>)<br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ ä¼ä¸šåº”ç”¨ï¼šè‡ªåŠ¨åŒ–æ—¥å¿—ç”Ÿæˆ</p><p>ğŸ”¹ è¯»å–æ–‡ä»¶å†…å®¹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;test.txt&quot;</span>, <span class="hljs-string">&quot;r&quot;</span>) <span class="hljs-keyword">as</span> f:<br>    content = f.read()<br>    <span class="hljs-built_in">print</span>(content)<br></code></pre></td></tr></table></figure><p>ğŸ“Œ ä¼ä¸šåº”ç”¨ï¼šè¯»å–é…ç½®æ–‡ä»¶ã€æ—¥å¿—åˆ†æ</p><p>ğŸ”¹ åˆ é™¤æ–‡ä»¶</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">if</span> os.path.exists(<span class="hljs-string">&quot;test.txt&quot;</span>):<br>    os.remove(<span class="hljs-string">&quot;test.txt&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æ–‡ä»¶å·²åˆ é™¤&quot;</span>)<br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ ä¼ä¸šåº”ç”¨ï¼šå®šæœŸæ¸…ç†æ— ç”¨æ–‡ä»¶</p><h1 id="ä¿®æ”¹æ–‡ä»¶åå’Œè·¯å¾„"><a href="#ä¿®æ”¹æ–‡ä»¶åå’Œè·¯å¾„" class="headerlink" title="ä¿®æ”¹æ–‡ä»¶åå’Œè·¯å¾„"></a>ä¿®æ”¹æ–‡ä»¶åå’Œè·¯å¾„</h1><p>ğŸ”¹ è·å–æ–‡ä»¶è·¯å¾„</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><br>file_path = os.path.abspath(<span class="hljs-string">&quot;test.txt&quot;</span>) <span class="hljs-comment"># os.path.abspath()ï¼šè·å–ç»å¯¹è·¯å¾„</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;æ–‡ä»¶è·¯å¾„: <span class="hljs-subst">&#123;file_path&#125;</span>&quot;</span>)<br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ ä¼ä¸šåº”ç”¨ï¼šæ—¥å¿—åˆ†æã€æ•°æ®å¤„ç†</p><p>ğŸ”¹ æ‹†åˆ†æ–‡ä»¶è·¯å¾„</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><br>path = <span class="hljs-string">&quot;/home/user/data/file.txt&quot;</span><br>dirname, filename = os.path.split(path)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ç›®å½•: <span class="hljs-subst">&#123;dirname&#125;</span>&quot;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;æ–‡ä»¶å: <span class="hljs-subst">&#123;filename&#125;</span>&quot;</span>)<br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ ä¼ä¸šåº”ç”¨ï¼šåŠ¨æ€ç®¡ç†æ–‡ä»¶è·¯å¾„</p><p>ğŸ”¹ ä¿®æ”¹æ–‡ä»¶å</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br>os.rename(<span class="hljs-string">&quot;old_name.txt&quot;</span>, <span class="hljs-string">&quot;new_name.txt&quot;</span>)<br></code></pre></td></tr></table></figure><p>ğŸ“Œ ä¼ä¸šåº”ç”¨ï¼šæ‰¹é‡é‡å‘½åæ–‡ä»¶</p><h1 id="è¿›ç¨‹ç®¡ç†"><a href="#è¿›ç¨‹ç®¡ç†" class="headerlink" title="è¿›ç¨‹ç®¡ç†"></a>è¿›ç¨‹ç®¡ç†</h1><p>ğŸ”¹ è·å–å½“å‰è¿›ç¨‹ ID</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å½“å‰è¿›ç¨‹ ID: <span class="hljs-subst">&#123;os.getpid()&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure><p>ğŸ“Œ ä¼ä¸šåº”ç”¨ï¼šç›‘æ§ç¨‹åºè¿è¡ŒçŠ¶æ€</p><p>ğŸ”¹ è¿è¡Œç³»ç»Ÿå‘½ä»¤</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><br>os.system(<span class="hljs-string">&quot;ls&quot;</span>)  <span class="hljs-comment"># Linux/macOS</span><br>os.system(<span class="hljs-string">&quot;dir&quot;</span>)  <span class="hljs-comment"># Windows</span><br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ ä¼ä¸šåº”ç”¨ï¼šè‡ªåŠ¨æ‰§è¡Œç³»ç»Ÿä»»åŠ¡</p><p>ğŸ”¹ è·å–ç³»ç»Ÿç¯å¢ƒå˜é‡</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><br><span class="hljs-built_in">print</span>(os.environ.get(<span class="hljs-string">&quot;HOME&quot;</span>))  <span class="hljs-comment"># macOS/Linux</span><br><span class="hljs-built_in">print</span>(os.environ.get(<span class="hljs-string">&quot;USERPROFILE&quot;</span>))  <span class="hljs-comment"># Windows</span><br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ ä¼ä¸šåº”ç”¨ï¼šåŠ¨æ€è¯»å–ç³»ç»Ÿé…ç½®</p><h1 id="ä¿®æ”¹æ–‡ä»¶æƒé™"><a href="#ä¿®æ”¹æ–‡ä»¶æƒé™" class="headerlink" title="ä¿®æ”¹æ–‡ä»¶æƒé™"></a>ä¿®æ”¹æ–‡ä»¶æƒé™</h1><p>ğŸ”¹ ä¿®æ”¹æ–‡ä»¶æƒé™</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><br>os.chmod(<span class="hljs-string">&quot;test.txt&quot;</span>, <span class="hljs-number">0o777</span>)  <span class="hljs-comment"># èµ‹äºˆæ‰€æœ‰æƒé™</span><br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ ä¼ä¸šåº”ç”¨ï¼šæ‰¹é‡ä¿®æ”¹æƒé™</p><p>ğŸ”¹ ä¿®æ”¹æ–‡ä»¶æ‰€æœ‰è€…</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> shutil<br>shutil.chown(<span class="hljs-string">&quot;test.txt&quot;</span>, user=<span class="hljs-string">&quot;username&quot;</span>, group=<span class="hljs-string">&quot;groupname&quot;</span>)<br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ ä¼ä¸šåº”ç”¨ï¼šç®¡ç†æœåŠ¡å™¨æ–‡ä»¶æƒé™</p><h1 id="æ‰¹é‡å¤„ç†ä¼ä¸šçº§ä»»åŠ¡"><a href="#æ‰¹é‡å¤„ç†ä¼ä¸šçº§ä»»åŠ¡" class="headerlink" title="æ‰¹é‡å¤„ç†ä¼ä¸šçº§ä»»åŠ¡"></a>æ‰¹é‡å¤„ç†ä¼ä¸šçº§ä»»åŠ¡</h1><p>ğŸ”¹ æ‰¹é‡é‡å‘½åæ–‡ä»¶</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><br>folder = <span class="hljs-string">&quot;data&quot;</span><br><span class="hljs-keyword">for</span> filename <span class="hljs-keyword">in</span> os.listdir(folder):<br>    old_path = os.path.join(folder, filename)<br>    new_path = os.path.join(folder, <span class="hljs-string">&quot;new_&quot;</span> + filename)<br>    os.rename(old_path, new_path)<br></code></pre></td></tr></table></figure><p>ğŸ“Œ ä¼ä¸šåº”ç”¨ï¼šæ‰¹é‡é‡å‘½åæ—¥å¿—æ–‡ä»¶</p><p>ğŸ”¹ æ‰¹é‡åˆ é™¤å¤§æ–‡ä»¶</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><br>folder = <span class="hljs-string">&quot;backup&quot;</span><br><span class="hljs-keyword">for</span> filename <span class="hljs-keyword">in</span> os.listdir(folder):<br>    file_path = os.path.join(folder, filename)<br>    <span class="hljs-keyword">if</span> os.path.getsize(file_path) &gt; <span class="hljs-number">100</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>:  <span class="hljs-comment"># åˆ é™¤å¤§äº 100MB çš„æ–‡ä»¶</span><br>        os.remove(file_path)<br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ ä¼ä¸šåº”ç”¨ï¼šæ¸…ç†ç£ç›˜ç©ºé—´</p><h1 id="é«˜çº§æŠ€å·§"><a href="#é«˜çº§æŠ€å·§" class="headerlink" title="é«˜çº§æŠ€å·§"></a>é«˜çº§æŠ€å·§</h1><p>ğŸ”¹ è·å–ç£ç›˜ä½¿ç”¨æƒ…å†µ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> shutil<br><br>total, used, free = shutil.disk_usage(<span class="hljs-string">&quot;/&quot;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;æ€»å¤§å°: <span class="hljs-subst">&#123;total // (<span class="hljs-number">1024</span>**<span class="hljs-number">3</span>)&#125;</span> GB&quot;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å·²ä½¿ç”¨: <span class="hljs-subst">&#123;used // (<span class="hljs-number">1024</span>**<span class="hljs-number">3</span>)&#125;</span> GB&quot;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å¯ç”¨: <span class="hljs-subst">&#123;free // (<span class="hljs-number">1024</span>**<span class="hljs-number">3</span>)&#125;</span> GB&quot;</span>)<br></code></pre></td></tr></table></figure><p>ğŸ“Œ ä¼ä¸šåº”ç”¨ï¼šæœåŠ¡å™¨ç£ç›˜ç›‘æ§</p><p>ğŸ”¹ æ‰§è¡Œå‘½ä»¤</p><p>1ï¸âƒ£ ä½¿ç”¨ <code>os.system()</code> æ‰§è¡Œ <code>CMD</code> å‘½ä»¤</p><p><code>os.system()</code> ç›´æ¥æ‰§è¡Œå‘½ä»¤ï¼Œä½†å®ƒä¸ä¼šæ•è·å‘½ä»¤çš„è¾“å‡ºï¼Œåªèƒ½è¿”å›å‘½ä»¤çš„é€€å‡ºçŠ¶æ€ï¼ˆ0 è¡¨ç¤ºæˆåŠŸï¼Œå…¶ä»–å€¼è¡¨ç¤ºå¤±è´¥ï¼‰ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><br><span class="hljs-comment"># æ‰§è¡Œ Windows å‘½ä»¤</span><br>os.system(<span class="hljs-string">&quot;dir&quot;</span>)  <span class="hljs-comment"># åˆ—å‡ºå½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼ˆWindowsï¼‰</span><br><br><span class="hljs-comment"># æ‰§è¡Œ Linux / macOS å‘½ä»¤</span><br>os.system(<span class="hljs-string">&quot;ls -la&quot;</span>)  <span class="hljs-comment"># åˆ—å‡ºå½“å‰ç›®å½•çš„è¯¦ç»†ä¿¡æ¯</span><br><br></code></pre></td></tr></table></figure><p>ğŸ”¹ ç¼ºç‚¹ï¼š</p><p>âœ…ä¸èƒ½è·å–å‘½ä»¤æ‰§è¡Œçš„ç»“æœ<br>âœ…ä¸èƒ½ä¼ é€’å‚æ•°<br>âœ…å®‰å…¨æ€§è¾ƒå·®</p><p>2ï¸âƒ£ ä½¿ç”¨ <code>os.popen()</code> è·å–å‘½ä»¤è¾“å‡º</p><p><code>os.popen()</code> æ‰§è¡Œå‘½ä»¤å¹¶è·å–è¿”å›çš„è¾“å‡ºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><br><span class="hljs-comment"># Windows ä¸‹æ‰§è¡Œ &quot;dir&quot; å‘½ä»¤å¹¶è¯»å–è¾“å‡º</span><br>cmd_output = os.popen(<span class="hljs-string">&quot;dir&quot;</span>).read()<br><span class="hljs-built_in">print</span>(cmd_output)<br><br><span class="hljs-comment"># Linux / macOS ä¸‹æ‰§è¡Œ &quot;ls -la&quot; å‘½ä»¤å¹¶è¯»å–è¾“å‡º</span><br>cmd_output = os.popen(<span class="hljs-string">&quot;ls -la&quot;</span>).read()<br><span class="hljs-built_in">print</span>(cmd_output)<br><br></code></pre></td></tr></table></figure><p>ğŸ”¹ ä¼˜ç‚¹ï¼š</p><p>âœ… èƒ½å¤Ÿæ•è·è¾“å‡º<br>âœ… é€‚ç”¨äºç®€å•çš„å‘½ä»¤</p><p>ğŸ”¹ ç¼ºç‚¹ï¼š</p><p>ğŸš« <code>os.popen()</code> åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½é˜»å¡è¿›ç¨‹<br>ğŸš« å®‰å…¨æ€§è¾ƒä½ï¼Œå»ºè®®ç”¨ &#96;&#96;subprocess&#96; ä»£æ›¿</p><p>3ï¸âƒ£ æ¨èä½¿ç”¨ <code>subprocess</code> æ‰§è¡Œ CMD å‘½ä»¤</p><p><code>subprocess.run()</code> å’Œ <code>subprocess.Popen()</code> æ˜¯æ›´å®‰å…¨ã€ç°ä»£çš„æ–¹å¼ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> subprocess<br><br><span class="hljs-comment"># Windows: æ‰§è¡Œ &quot;dir&quot; å¹¶è·å–è¾“å‡º</span><br>result = subprocess.run(<span class="hljs-string">&quot;dir&quot;</span>, shell=<span class="hljs-literal">True</span>, capture_output=<span class="hljs-literal">True</span>, text=<span class="hljs-literal">True</span>)<br><span class="hljs-built_in">print</span>(result.stdout)  <span class="hljs-comment"># è¾“å‡ºå‘½ä»¤æ‰§è¡Œç»“æœ</span><br><br><span class="hljs-comment"># Linux/macOS: æ‰§è¡Œ &quot;ls -la&quot;</span><br>result = subprocess.run(<span class="hljs-string">&quot;ls -la&quot;</span>, shell=<span class="hljs-literal">True</span>, capture_output=<span class="hljs-literal">True</span>, text=<span class="hljs-literal">True</span>)<br><span class="hljs-built_in">print</span>(result.stdout)<br><br></code></pre></td></tr></table></figure><p>ğŸ”¹ ä¼˜ç‚¹ï¼š</p><p>âœ… <code>capture_output=True</code> å¯ä»¥è·å–å‘½ä»¤è¾“å‡º<br>âœ… <code>text=True</code> è‡ªåŠ¨è§£ç æˆå­—ç¬¦ä¸²</p><p>ğŸ”¹ <code>subprocess.Popen()</code>ï¼ˆæ›´çµæ´»ï¼‰</p><p>å¦‚æœä½ æƒ³å¼‚æ­¥æ‰§è¡Œ <code>CMD</code> å‘½ä»¤ï¼Œå¯ä»¥ä½¿ç”¨ <code>Popen()</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> subprocess<br><br>process = subprocess.Popen(<span class="hljs-string">&quot;dir&quot;</span>, shell=<span class="hljs-literal">True</span>, stdout=subprocess.PIPE, stderr=subprocess.PIPE, text=<span class="hljs-literal">True</span>)<br>stdout, stderr = process.communicate()  <span class="hljs-comment"># è·å–è¾“å‡ºå’Œé”™è¯¯ä¿¡æ¯</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æ ‡å‡†è¾“å‡º:&quot;</span>, stdout)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æ ‡å‡†é”™è¯¯:&quot;</span>, stderr)<br><br></code></pre></td></tr></table></figure><p>ğŸ”¹ ä¼˜ç‚¹ï¼š</p><p>âœ… å¯ä»¥æ‰§è¡Œå¤šä¸ªå‘½ä»¤<br>âœ… å¯ä»¥æµå¼å¤„ç†è¾“å‡º<br>âœ… ä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹</p><p>4ï¸âƒ£ åœ¨ <code>CMD</code> è¿è¡Œ <code>Python</code> è„šæœ¬</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> subprocess<br><br><span class="hljs-comment"># è¿è¡Œ test.py</span><br>os.system(<span class="hljs-string">&quot;python test.py&quot;</span>)<br><br><span class="hljs-comment"># æˆ–è€…ç”¨ subprocess</span><br>subprocess.run(<span class="hljs-string">&quot;python test.py&quot;</span>, shell=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><table><thead><tr><th>åŠŸèƒ½</th><th>ä»£ç ç¤ºä¾‹</th></tr></thead><tbody><tr><td>è·å–å½“å‰ç›®å½•</td><td><code>os.getcwd()</code></td></tr><tr><td>åˆ—å‡ºç›®å½•å†…å®¹</td><td><code>os.listdir()</code></td></tr><tr><td>åˆ›å»ºç›®å½•</td><td><code> os.mkdir() / os.makedirs()</code></td></tr><tr><td>åˆ é™¤ç›®å½•</td><td><code> ros.rmdir() / os.removedirs()</code></td></tr><tr><td>ä¿®æ”¹æ–‡ä»¶æƒé™</td><td><code> os.chmod()</code></td></tr><tr><td>æ‰§è¡Œ shell å‘½ä»¤</td><td><code> os.system()</code></td></tr><tr><td>æ‰¹é‡é‡å‘½åæ–‡ä»¶</td><td><code>os.rename()</code></td></tr><tr><td>ç›‘æ§ç£ç›˜ä½¿ç”¨æƒ…å†µ</td><td><code> shutil.disk_usage()</code></td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
      <category>Python å¸¸è§å‡½æ•°</category>
      
      <category>Python å¸¸è§æ¨¡å—ä¹‹osæ¨¡å—è¯¦è§£</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python requests æ¨¡å—çš„ä½¿ç”¨</title>
    <link href="/2025/03/27/python%E5%B8%B8%E8%A7%81request%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <url>/2025/03/27/python%E5%B8%B8%E8%A7%81request%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="Python-requests-æ¨¡å—çš„ä½¿ç”¨"><a href="#Python-requests-æ¨¡å—çš„ä½¿ç”¨" class="headerlink" title="Python requests æ¨¡å—çš„ä½¿ç”¨"></a>Python requests æ¨¡å—çš„ä½¿ç”¨</h1><p><code>requests</code> æ˜¯ <code>Python</code> æœ€æµè¡Œçš„ <code>HTTP </code>å®¢æˆ·ç«¯ï¼Œç”¨äºï¼š </p><p>âœ… å‘é€ <code>GETã€POSTã€PUTã€DELETE</code> ç­‰è¯·æ±‚<br>âœ… å¤„ç† <code>JSON</code> æ•°æ®<br>âœ… è®¾ç½®<code> Headersã€Cookiesã€</code>ä»£ç†ã€è®¤è¯<br>âœ… æ–‡ä»¶ä¸Šä¼ ã€ä¸‹è½½<br>âœ… è¶…æ—¶ã€é‡è¯•ã€å¹¶å‘è¯·æ±‚<br>âœ… ç»“åˆ <code>pytest</code> è¿›è¡Œ <code>API</code> æµ‹è¯•</p><p>ğŸ”¹ å®‰è£… requests</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">pip install requests<br></code></pre></td></tr></table></figure><p>æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><span class="hljs-built_in">print</span>(requests.__version__)  <span class="hljs-comment"># è¾“å‡ºç‰ˆæœ¬å·</span><br></code></pre></td></tr></table></figure><h1 id="requests-å…¥é—¨ï¼šåŸºæœ¬-GETã€POST-è¯·æ±‚"><a href="#requests-å…¥é—¨ï¼šåŸºæœ¬-GETã€POST-è¯·æ±‚" class="headerlink" title="requests å…¥é—¨ï¼šåŸºæœ¬ GETã€POST è¯·æ±‚"></a>requests å…¥é—¨ï¼šåŸºæœ¬ GETã€POST è¯·æ±‚</h1><p>ğŸ”¹ å‘é€ <code>GET</code> è¯·æ±‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><br><span class="hljs-comment"># å‘é€ GET è¯·æ±‚</span><br>response = requests.get(<span class="hljs-string">&quot;https://jsonplaceholder.typicode.com/posts/1&quot;</span>)<br><br><span class="hljs-comment"># è¾“å‡ºå“åº”çŠ¶æ€ç </span><br><span class="hljs-built_in">print</span>(response.status_code)  <span class="hljs-comment"># 200</span><br><br><span class="hljs-comment"># è¾“å‡º JSON å“åº”å†…å®¹</span><br><span class="hljs-built_in">print</span>(response.json())  <br><br></code></pre></td></tr></table></figure><p>ğŸ”¹ å‘é€å¸¦å‚æ•°çš„ <code>GET</code> è¯·æ±‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><br>params = &#123;<span class="hljs-string">&quot;q&quot;</span>: <span class="hljs-string">&quot;Python&quot;</span>, <span class="hljs-string">&quot;sort&quot;</span>: <span class="hljs-string">&quot;stars&quot;</span>&#125;<br>response = requests.get(<span class="hljs-string">&quot;https://api.github.com/search/repositories&quot;</span>, params=params)<br><span class="hljs-built_in">print</span>(response.json())  <br></code></pre></td></tr></table></figure><p>ğŸ”¹ å‘é€ <code>POST</code> è¯·æ±‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><br><span class="hljs-comment"># å‘é€ POST è¯·æ±‚</span><br>data = &#123;<span class="hljs-string">&quot;title&quot;</span>: <span class="hljs-string">&quot;Python&quot;</span>, <span class="hljs-string">&quot;body&quot;</span>: <span class="hljs-string">&quot;requests æ¨¡å—&quot;</span>, <span class="hljs-string">&quot;userId&quot;</span>: <span class="hljs-number">1</span>&#125;<br>response = requests.post(<span class="hljs-string">&quot;https://jsonplaceholder.typicode.com/posts&quot;</span>, json=data)<br><br><span class="hljs-comment"># è¾“å‡ºè¿”å›çš„ JSON æ•°æ®</span><br><span class="hljs-built_in">print</span>(response.json())  <br><br></code></pre></td></tr></table></figure><p>ğŸ”¹ è‡ªå®šä¹‰ Headers</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><br>headers = &#123;<br>    <span class="hljs-string">&quot;User-Agent&quot;</span>: <span class="hljs-string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64)&quot;</span><br>&#125;<br>response = requests.get(<span class="hljs-string">&quot;https://httpbin.org/headers&quot;</span>, headers=headers)<br><span class="hljs-built_in">print</span>(response.json())  <br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ ä¼ä¸šåº”ç”¨ï¼šæ¨¡æ‹Ÿæµè§ˆå™¨è®¿é—®ã€é¿å…åçˆ¬</p><p>ğŸ”¹ è®¾ç½® Cookies</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><br>cookies = &#123;<span class="hljs-string">&quot;session_id&quot;</span>: <span class="hljs-string">&quot;123456&quot;</span>&#125;<br>response = requests.get(<span class="hljs-string">&quot;https://httpbin.org/cookies&quot;</span>, cookies=cookies)<br><span class="hljs-built_in">print</span>(response.json())  <br></code></pre></td></tr></table></figure><p>ğŸ“Œ ä¼ä¸šåº”ç”¨ï¼šæ¨¡æ‹Ÿç™»å½•åçš„è¯·æ±‚</p><p>ğŸ“Œ é™¤æ­¤ä¹‹å¤–ï¼Œ<code>requests</code> è¿˜æ”¯æŒ<code>putã€delete</code>ç­‰ <code>Http</code>è¯·æ±‚å¤§åŒå°å¼‚ï¼Œè¿™é‡Œä¸åœ¨èµ˜è¿°</p><h1 id="å¤„ç†Jsonæ•°æ®"><a href="#å¤„ç†Jsonæ•°æ®" class="headerlink" title="å¤„ç†Jsonæ•°æ®"></a>å¤„ç†Jsonæ•°æ®</h1><p>ğŸ”¹ å‘é€ JSON æ•°æ®</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><br>data = &#123;<span class="hljs-string">&quot;username&quot;</span>: <span class="hljs-string">&quot;admin&quot;</span>, <span class="hljs-string">&quot;password&quot;</span>: <span class="hljs-string">&quot;123456&quot;</span>&#125;<br>response = requests.post(<span class="hljs-string">&quot;https://httpbin.org/post&quot;</span>, json=data)<br><br><span class="hljs-built_in">print</span>(response.json())  <br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ ä¼ä¸šåº”ç”¨ï¼šç”¨æˆ·ç™»å½•ã€API æµ‹è¯•</p><p>ğŸ”¹ è§£æ JSON å“åº”</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><br>response = requests.get(<span class="hljs-string">&quot;https://jsonplaceholder.typicode.com/users/1&quot;</span>)<br>data = response.json()<br><span class="hljs-built_in">print</span>(data[<span class="hljs-string">&quot;name&quot;</span>])  <span class="hljs-comment"># è§£æ JSON æ•°æ®</span><br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ ä¼ä¸šåº”ç”¨ï¼šè·å– API è¿”å›çš„ç”¨æˆ·æ•°æ®</p><h1 id="å¤„ç†æ–‡ä»¶"><a href="#å¤„ç†æ–‡ä»¶" class="headerlink" title="å¤„ç†æ–‡ä»¶"></a>å¤„ç†æ–‡ä»¶</h1><p>ğŸ”¹ ä¸Šä¼ æ–‡ä»¶</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><br>files = &#123;<span class="hljs-string">&quot;file&quot;</span>: <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;test.txt&quot;</span>, <span class="hljs-string">&quot;rb&quot;</span>)&#125;<br>response = requests.post(<span class="hljs-string">&quot;https://httpbin.org/post&quot;</span>, files=files)<br><span class="hljs-built_in">print</span>(response.json())  <br></code></pre></td></tr></table></figure><p>ğŸ“Œ ä¼ä¸šåº”ç”¨ï¼šå›¾ç‰‡ä¸Šä¼ ã€Excel æ•°æ®ä¸Šä¼ </p><p>ğŸ”¹ ä¸‹è½½æ–‡ä»¶</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><br>response = requests.get(<span class="hljs-string">&quot;https://www.example.com/image.jpg&quot;</span>)<br><br><span class="hljs-comment"># ä¿å­˜å›¾ç‰‡</span><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;image.jpg&quot;</span>, <span class="hljs-string">&quot;wb&quot;</span>) <span class="hljs-keyword">as</span> f:<br>    f.write(response.content)<br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ ä¼ä¸šåº”ç”¨ï¼šçˆ¬å–å›¾ç‰‡ã€æ–‡æ¡£</p><h1 id="è¶…æ—¶ã€é‡è¯•ã€ä»£ç†"><a href="#è¶…æ—¶ã€é‡è¯•ã€ä»£ç†" class="headerlink" title="è¶…æ—¶ã€é‡è¯•ã€ä»£ç†"></a>è¶…æ—¶ã€é‡è¯•ã€ä»£ç†</h1><p>ğŸ”¹ è®¾ç½®è¶…æ—¶</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><br><span class="hljs-keyword">try</span>:<br>    response = requests.get(<span class="hljs-string">&quot;https://httpbin.org/delay/5&quot;</span>, timeout=<span class="hljs-number">3</span>)<br>    <span class="hljs-built_in">print</span>(response.text)<br><span class="hljs-keyword">except</span> requests.Timeout:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;è¯·æ±‚è¶…æ—¶ï¼&quot;</span>)<br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ ä¼ä¸šåº”ç”¨ï¼šé¿å…å¡æ­»ï¼Œè®¾å®š API è¶…æ—¶æ—¶é—´</p><p>ğŸ”¹ ä»£ç†è¯·æ±‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><br>proxies = &#123;<br>    <span class="hljs-string">&quot;http&quot;</span>: <span class="hljs-string">&quot;http://127.0.0.1:8080&quot;</span>,<br>    <span class="hljs-string">&quot;https&quot;</span>: <span class="hljs-string">&quot;https://127.0.0.1:8080&quot;</span>,<br>&#125;<br>response = requests.get(<span class="hljs-string">&quot;https://httpbin.org/ip&quot;</span>, proxies=proxies)<br><span class="hljs-built_in">print</span>(response.json())  <br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ ä¼ä¸šåº”ç”¨ï¼šçªç ´ IP é™åˆ¶ã€åçˆ¬è™«ç»•è¿‡</p><h1 id="ç»“åˆ-pytest-è¿›è¡Œ-API-æµ‹è¯•"><a href="#ç»“åˆ-pytest-è¿›è¡Œ-API-æµ‹è¯•" class="headerlink" title="ç»“åˆ pytest è¿›è¡Œ API æµ‹è¯•"></a>ç»“åˆ pytest è¿›è¡Œ API æµ‹è¯•</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">import</span> pytest<br><br>BASE_URL = <span class="hljs-string">&quot;https://jsonplaceholder.typicode.com&quot;</span><br><br><span class="hljs-meta">@pytest.mark.parametrize(<span class="hljs-params"><span class="hljs-string">&quot;user_id&quot;</span>, [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_get_user</span>(<span class="hljs-params">user_id</span>):<br>    response = requests.get(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;BASE_URL&#125;</span>/users/<span class="hljs-subst">&#123;user_id&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">assert</span> response.status_code == <span class="hljs-number">200</span><br>    <span class="hljs-keyword">assert</span> <span class="hljs-string">&quot;name&quot;</span> <span class="hljs-keyword">in</span> response.json()<br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ ä¼ä¸šåº”ç”¨ï¼šè‡ªåŠ¨åŒ– API æµ‹è¯•</p><h1 id="ç»“åˆ-allure-ç”Ÿæˆ-API-æµ‹è¯•æŠ¥å‘Š"><a href="#ç»“åˆ-allure-ç”Ÿæˆ-API-æµ‹è¯•æŠ¥å‘Š" class="headerlink" title="ç»“åˆ allure ç”Ÿæˆ API æµ‹è¯•æŠ¥å‘Š"></a>ç»“åˆ allure ç”Ÿæˆ API æµ‹è¯•æŠ¥å‘Š</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">import</span> allure<br><br>BASE_URL = <span class="hljs-string">&quot;https://jsonplaceholder.typicode.com&quot;</span><br><br><span class="hljs-meta">@allure.feature(<span class="hljs-params"><span class="hljs-string">&quot;ç”¨æˆ·ä¿¡æ¯&quot;</span></span>)</span><br><span class="hljs-meta">@allure.story(<span class="hljs-params"><span class="hljs-string">&quot;è·å–ç”¨æˆ·æ•°æ®&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_get_user</span>():<br>    <span class="hljs-keyword">with</span> allure.step(<span class="hljs-string">&quot;å‘é€ API è¯·æ±‚&quot;</span>):<br>        response = requests.get(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;BASE_URL&#125;</span>/users/1&quot;</span>)<br>    <br>    <span class="hljs-keyword">with</span> allure.step(<span class="hljs-string">&quot;æ ¡éªŒè¿”å›çŠ¶æ€ç &quot;</span>):<br>        <span class="hljs-keyword">assert</span> response.status_code == <span class="hljs-number">200</span><br><br>    <span class="hljs-keyword">with</span> allure.step(<span class="hljs-string">&quot;æ ¡éªŒ JSON æ•°æ®&quot;</span>):<br>        <span class="hljs-keyword">assert</span> <span class="hljs-string">&quot;name&quot;</span> <span class="hljs-keyword">in</span> response.json()<br><br>    allure.attach(response.text, name=<span class="hljs-string">&quot;API Response&quot;</span>, attachment_type=allure.attachment_type.JSON)<br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ ä¼ä¸šåº”ç”¨ï¼šç”Ÿæˆç¾è§‚çš„ API æµ‹è¯•æŠ¥å‘Š</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><table><thead><tr><th>åŠŸèƒ½</th><th>ä»£ç ç¤ºä¾‹</th></tr></thead><tbody><tr><td>å‘é€ <code>GET</code> è¯·æ±‚</td><td><code>requests.get(url)</code></td></tr><tr><td>å‘é€ <code>POST</code> è¯·æ±‚</td><td><code>requests.post(url, json=data)</code></td></tr><tr><td>è®¾ç½® <code>Headers</code></td><td><code> wronrequests.get(url, headers=headers)</code></td></tr><tr><td>è¶…æ—¶è®¾ç½®</td><td><code> requests.get(url, timeout=3)</code></td></tr><tr><td>ä»£ç†è¯·æ±‚</td><td><code> requests.get(url, proxies=proxies)</code></td></tr><tr><td>æ–‡ä»¶ä¸Šä¼ </td><td><code> requests.post(url, files=files)</code></td></tr><tr><td>æ–‡ä»¶ä¸‹è½½</td><td><code> requests.get(url).content</code></td></tr><tr><td>è‡ªåŠ¨é‡è¯•</td><td><code> requests.Session().mount(&quot;https://&quot;, adapter)</code></td></tr><tr><td>API æµ‹è¯•</td><td><code> pytest + requests</code></td></tr><tr><td>æµ‹è¯•æŠ¥å‘Š</td><td><code> pytest + allure</code></td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
      <category>Python å¸¸è§å‡½æ•°</category>
      
      <category>Python requests æ¨¡å—çš„ä½¿ç”¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>python</tag>
      
      <tag>requests</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestå’ŒAllureç»“åˆè¯¦ç»†æŒ‡å—</title>
    <link href="/2025/03/26/pytest%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%9710/"/>
    <url>/2025/03/26/pytest%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%9710/</url>
    
    <content type="html"><![CDATA[<h1 id="Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestå’ŒAllureç»“åˆè¯¦ç»†æŒ‡å—"><a href="#Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestå’ŒAllureç»“åˆè¯¦ç»†æŒ‡å—" class="headerlink" title="Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestå’ŒAllureç»“åˆè¯¦ç»†æŒ‡å—"></a>Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestå’ŒAllureç»“åˆè¯¦ç»†æŒ‡å—</h1><p>åœ¨ä¼ä¸šçº§æµ‹è¯•ä¸­ï¼Œ<code>pytest + Allure</code> æ˜¯ç”Ÿæˆ ç¾è§‚ã€è¯¦ç»†ã€å¯äº¤äº’æµ‹è¯•æŠ¥å‘Š çš„æœ€ä½³å®è·µã€‚<br>å®ƒé€‚ç”¨äºï¼š</p><p>âœ… <code>API</code> è‡ªåŠ¨åŒ–æµ‹è¯•</p><p>âœ… <code>UI</code> è‡ªåŠ¨åŒ–æµ‹è¯•<code>ï¼ˆSeleniumã€Appiumï¼‰</code></p><p>âœ… æ•°æ®åº“æµ‹è¯•</p><p>âœ… <code>CI/CD</code> æŒç»­é›†æˆ<code>ï¼ˆJenkinsã€GitLab CI/CDï¼‰</code></p><h1 id="å®‰è£…-pytest-allure"><a href="#å®‰è£…-pytest-allure" class="headerlink" title="å®‰è£… pytest-allure"></a>å®‰è£… pytest-allure</h1><p>ğŸ“Œ å®‰è£… <code>allure-pytest</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">pip install allure-pytest<br></code></pre></td></tr></table></figure><p>ğŸ“Œ å®‰è£… Allure Commandline</p><p><code>Windows</code>: <a href="https://github.com/allure-framework/allure2/releases">https://github.com/allure-framework/allure2/releases</a></p><p><code>Mac/Linux</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">brew install allure<br></code></pre></td></tr></table></figure><p>ğŸ“Œ windows ä¸‹çš„ç¯å¢ƒå˜é‡é…ç½®</p><img src="/2025/03/26/pytest%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%9710/1.png" class=""><p>ğŸ“Œ éªŒè¯å®‰è£…</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">allure --version<br></code></pre></td></tr></table></figure><p>âœ… æ˜¾ç¤ºç‰ˆæœ¬å·ï¼Œè¯´æ˜å®‰è£…æˆåŠŸï¼</p><h1 id="è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆ-Allure-æŠ¥å‘Š"><a href="#è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆ-Allure-æŠ¥å‘Š" class="headerlink" title="è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆ Allure æŠ¥å‘Š"></a>è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆ Allure æŠ¥å‘Š</h1><p>ğŸ“Œ æ‰§è¡Œ <code>Pytest</code> å¹¶ç”Ÿæˆ <code>allure</code> ç»“æœ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">pytest --alluredir=./allure-results<br></code></pre></td></tr></table></figure><p>ğŸ“Œ ç”Ÿæˆ <code>HTML</code> æŠ¥å‘Š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">allure serve ./allure-results<br></code></pre></td></tr></table></figure><p>âœ… æµè§ˆå™¨è‡ªåŠ¨æ‰“å¼€ <code>Allure</code> æŠ¥å‘Šï¼</p><p>ğŸ“Œ é™æ€èµ„æºæ–‡ä»¶æŠ¥å‘Šï¼ˆå¸¦<code>index.htmlã€cssã€js</code>ç­‰æ–‡ä»¶ï¼‰ï¼Œéœ€è¦å°†æŠ¥å‘Šå¸ƒç½®åˆ°<code>web</code>æœåŠ¡å™¨ä¸Šã€‚</p><p>âœ…ç”ŸæˆæŠ¥å‘Šã€‚</p><p><code>--clean</code>ï¼šå¦‚æœæŠ¥å‘Šè·¯å¾„é‡å¤ï¼Œæ¸…ç†ä¸Šä¸€æ¬¡çš„æŠ¥å‘Š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">allure generate ./results --clean<br></code></pre></td></tr></table></figure><p>âœ…<code>-o</code>ï¼šå°†æµ‹è¯•æŠ¥å‘Šç”ŸæˆæŒ‡å®šçš„ç›®å½•</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">allure generate ./results --clean -o ./reports<br></code></pre></td></tr></table></figure><p>âœ…æ‰“å¼€æŠ¥å‘Š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">allure open allure-report<br></code></pre></td></tr></table></figure><p>âœ…æ‰“å¼€æŠ¥å‘ŠæŒ‡å®šIPåœ°å€å’Œç«¯å£å·</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">allure open ./reports -h 127.0.0.1 -p 8888<br></code></pre></td></tr></table></figure><p>âœ… pytest.ini ä¸­çš„é…ç½®</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[pytest]</span><br><span class="hljs-attr">addopts</span> = -v -s --tb=short --alluredir=./allure-results --clean-alluredir<br><span class="hljs-attr">python_files</span> = check_*.py test_*.py *_test.py<br><span class="hljs-attr">log_level</span> = DEBUG     <br><span class="hljs-attr">log_cli</span> = <span class="hljs-literal">true</span>        <br><span class="hljs-attr">log_format</span> = <span class="hljs-string">&quot;%(asctime)s [%(levelname)8s] %(message)s (%(filename)s:%(lineno)s)&quot;</span>  <br><span class="hljs-attr">log_date_format</span> = <span class="hljs-string">&quot;%Y-%m-%d %H:%M:%S&quot;</span> <br><span class="hljs-attr">log_file</span> = logs/pytest.log  <br><span class="hljs-attr">log_file_level</span> = INF<br></code></pre></td></tr></table></figure><p>ğŸ“Œ å¦‚æœéœ€è¦æ¯æ¬¡è¿è¡Œå®Œæ¯•åæ‰“å¼€æŠ¥å‘Šï¼Œå¯ä»¥åœ¨<code>conftest.py</code> ä¸­å®šä¹‰ä¸€ä¸ªé’©å­å‡½æ•°ï¼Œåœ¨æ‰§è¡Œå®Œæ¯•åæ‰“å¼€æˆ‘ä»¬çš„æµ‹è¯•æŠ¥å‘Šã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># conftest.py</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">pytest_unconfigure</span>(<span class="hljs-params">config</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æ‰“å¼€allureæŠ¥å‘Š.&quot;</span>)<br>    <span class="hljs-keyword">import</span> subprocess<br>    subprocess.run(<span class="hljs-string">&quot;allure serve allure-results&quot;</span>, shell=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure><h1 id="ä½¿ç”¨-allure-feature-å’Œ-allure-story-åˆ†ç±»-API-æµ‹è¯•"><a href="#ä½¿ç”¨-allure-feature-å’Œ-allure-story-åˆ†ç±»-API-æµ‹è¯•" class="headerlink" title="ä½¿ç”¨ @allure.feature å’Œ @allure.story åˆ†ç±» API æµ‹è¯•"></a>ä½¿ç”¨ @allure.feature å’Œ @allure.story åˆ†ç±» API æµ‹è¯•</h1><p>ğŸ“Œ ä½œç”¨ï¼š</p><p><code>@allure.feature()</code> â†’ æ¨¡å—çº§åˆ«</p><p><code>@allure.story()</code> â†’ åŠŸèƒ½çº§åˆ«</p><p>ğŸ”¹ ä»£ç ç¤ºä¾‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> allure<br><span class="hljs-keyword">import</span> requests<br><br><span class="hljs-meta">@allure.feature(<span class="hljs-params"><span class="hljs-string">&quot;ç”¨æˆ·ç®¡ç†&quot;</span></span>)</span><br><span class="hljs-meta">@allure.story(<span class="hljs-params"><span class="hljs-string">&quot;ç”¨æˆ·ç™»å½•&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_login</span>():<br>    response = requests.post(<span class="hljs-string">&quot;https://jsonplaceholder.typicode.com/posts&quot;</span>, json=&#123;<span class="hljs-string">&quot;username&quot;</span>: <span class="hljs-string">&quot;admin&quot;</span>, <span class="hljs-string">&quot;password&quot;</span>: <span class="hljs-string">&quot;123456&quot;</span>&#125;)<br>    <span class="hljs-keyword">assert</span> response.status_code == <span class="hljs-number">201</span>  <span class="hljs-comment"># æ–­è¨€è¯·æ±‚æˆåŠŸ</span><br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ åœ¨ <code>Allure</code> æŠ¥å‘Šä¸­ï¼Œæµ‹è¯•ä¼šæŒ‰ç…§ <code>feature</code> å’Œ <code>story</code> åˆ†ç±»</p><h1 id="ä½¿ç”¨-allure-step-è®°å½•-API-è¯·æ±‚æ­¥éª¤"><a href="#ä½¿ç”¨-allure-step-è®°å½•-API-è¯·æ±‚æ­¥éª¤" class="headerlink" title="ä½¿ç”¨ @allure.step() è®°å½• API è¯·æ±‚æ­¥éª¤"></a>ä½¿ç”¨ @allure.step() è®°å½• API è¯·æ±‚æ­¥éª¤</h1><p>ğŸ“Œ ä½œç”¨ï¼š</p><p>âœ…è®°å½• API è¯·æ±‚çš„å…³é”®æ­¥éª¤<br>âœ…æµ‹è¯•å¤±è´¥æ—¶ï¼Œæä¾›è¯¦ç»†æ—¥å¿—</p><p>ğŸ”¹ ä»£ç ç¤ºä¾‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">@allure.feature(<span class="hljs-params"><span class="hljs-string">&quot;API æµ‹è¯•&quot;</span></span>)</span><br><span class="hljs-meta">@allure.story(<span class="hljs-params"><span class="hljs-string">&quot;è·å–ç”¨æˆ·ä¿¡æ¯&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_get_user</span>():<br>    <span class="hljs-keyword">with</span> allure.step(<span class="hljs-string">&quot;å‘é€ GET è¯·æ±‚&quot;</span>):<br>        response = requests.get(<span class="hljs-string">&quot;https://jsonplaceholder.typicode.com/users/1&quot;</span>)<br><br>    <span class="hljs-keyword">with</span> allure.step(<span class="hljs-string">&quot;æ ¡éªŒ HTTP çŠ¶æ€ç &quot;</span>):<br>        <span class="hljs-keyword">assert</span> response.status_code == <span class="hljs-number">200</span><br><br>    <span class="hljs-keyword">with</span> allure.step(<span class="hljs-string">&quot;æ ¡éªŒè¿”å›æ•°æ®&quot;</span>):<br>        data = response.json()<br>        <span class="hljs-keyword">assert</span> data[<span class="hljs-string">&quot;id&quot;</span>] == <span class="hljs-number">1</span><br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ <code>Allure</code> æŠ¥å‘Šä¼šæ¸…æ™°å±•ç¤º <code>API</code> è¯·æ±‚çš„æ­¥éª¤</p><h1 id="ä½¿ç”¨-allure-attach-è®°å½•è¯·æ±‚-å“åº”æ•°æ®"><a href="#ä½¿ç”¨-allure-attach-è®°å½•è¯·æ±‚-å“åº”æ•°æ®" class="headerlink" title="ä½¿ç”¨ @allure.attach() è®°å½•è¯·æ±‚&#x2F;å“åº”æ•°æ®"></a>ä½¿ç”¨ @allure.attach() è®°å½•è¯·æ±‚&#x2F;å“åº”æ•°æ®</h1><p>ğŸ“Œ ä½œç”¨ï¼š</p><p>âœ…è®°å½• <code>API</code> è¯·æ±‚å‚æ•°ã€å“åº”æ•°æ®<br>âœ…æµ‹è¯•å¤±è´¥æ—¶ï¼Œæ–¹ä¾¿æ’æŸ¥é—®é¢˜</p><p>ğŸ”¹ ä»£ç ç¤ºä¾‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">@allure.feature(<span class="hljs-params"><span class="hljs-string">&quot;API æµ‹è¯•&quot;</span></span>)</span><br><span class="hljs-meta">@allure.story(<span class="hljs-params"><span class="hljs-string">&quot;åˆ›å»ºç”¨æˆ·&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_create_user</span>():<br>    url = <span class="hljs-string">&quot;https://jsonplaceholder.typicode.com/users&quot;</span><br>    payload = &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;John Doe&quot;</span>, <span class="hljs-string">&quot;email&quot;</span>: <span class="hljs-string">&quot;john@example.com&quot;</span>&#125;<br><br>    <span class="hljs-keyword">with</span> allure.step(<span class="hljs-string">&quot;å‘é€ POST è¯·æ±‚&quot;</span>):<br>        allure.attach(<span class="hljs-built_in">str</span>(payload), name=<span class="hljs-string">&quot;è¯·æ±‚æ•°æ®&quot;</span>, attachment_type=allure.attachment_type.JSON)<br>        response = requests.post(url, json=payload)<br><br>    <span class="hljs-keyword">with</span> allure.step(<span class="hljs-string">&quot;æ ¡éªŒ HTTP çŠ¶æ€ç &quot;</span>):<br>        allure.attach(<span class="hljs-built_in">str</span>(response.status_code), name=<span class="hljs-string">&quot;å“åº”çŠ¶æ€ç &quot;</span>, attachment_type=allure.attachment_type.TEXT)<br>        <span class="hljs-keyword">assert</span> response.status_code == <span class="hljs-number">201</span><br><br>    <span class="hljs-keyword">with</span> allure.step(<span class="hljs-string">&quot;æ ¡éªŒè¿”å›æ•°æ®&quot;</span>):<br>        allure.attach(response.text, name=<span class="hljs-string">&quot;å“åº”æ•°æ®&quot;</span>, attachment_type=allure.attachment_type.JSON)<br>        <span class="hljs-keyword">assert</span> response.json()[<span class="hljs-string">&quot;name&quot;</span>] == <span class="hljs-string">&quot;John Doe&quot;</span><br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ <code>Allure</code> æŠ¥å‘Šä¼šæ˜¾ç¤º <code>API</code> è¯·æ±‚çš„ <code>JSON</code> </p><h1 id="allure-attach-file-æ·»åŠ æ–‡ä»¶ï¼ˆExcelã€æ—¥å¿—ã€æˆªå›¾ï¼‰"><a href="#allure-attach-file-æ·»åŠ æ–‡ä»¶ï¼ˆExcelã€æ—¥å¿—ã€æˆªå›¾ï¼‰" class="headerlink" title="allure.attach.file() æ·»åŠ æ–‡ä»¶ï¼ˆExcelã€æ—¥å¿—ã€æˆªå›¾ï¼‰"></a>allure.attach.file() æ·»åŠ æ–‡ä»¶ï¼ˆExcelã€æ—¥å¿—ã€æˆªå›¾ï¼‰</h1><p>ğŸ“Œ ä½œç”¨ï¼š</p><p>âœ…ä¸Šä¼  <code>Excel</code>ã€æ—¥å¿—æ–‡ä»¶</p><p>âœ…<code>Selenium</code> å¤±è´¥æ—¶æˆªå›¾</p><p>ğŸ”¹ ä»£ç ç¤ºä¾‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> allure<br><br><span class="hljs-meta">@allure.feature(<span class="hljs-params"><span class="hljs-string">&quot;æ•°æ®å¯¼å…¥&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_upload_excel</span>():<br>    allure.attach.file(<span class="hljs-string">&quot;test_data.xlsx&quot;</span>, name=<span class="hljs-string">&quot;Excel æ•°æ®&quot;</span>, attachment_type=allure.attachment_type.CSV)<br>    <span class="hljs-keyword">assert</span> <span class="hljs-literal">True</span><br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ <code>Allure</code> æŠ¥å‘Šä¸­ï¼Œ<code>Excel</code> æ–‡ä»¶å¯ä¸‹è½½æŸ¥çœ‹</p><p>ğŸ“Œ <code>Selenium </code>ç»“åˆ <code>allure.attach.file()</code>è¿›è¡Œæˆªå›¾</p><p>ğŸ”¹ ä»£ç ç¤ºä¾‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> selenium <span class="hljs-keyword">import</span> webdriver<br><br><span class="hljs-meta">@allure.feature(<span class="hljs-params"><span class="hljs-string">&quot;UI æµ‹è¯•&quot;</span></span>)</span><br><span class="hljs-meta">@allure.story(<span class="hljs-params"><span class="hljs-string">&quot;ç™»å½•é¡µé¢&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_ui_login</span>():<br>    driver = webdriver.Chrome()<br>    driver.get(<span class="hljs-string">&quot;https://example.com&quot;</span>)<br><br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-keyword">assert</span> <span class="hljs-string">&quot;ç™»å½•æˆåŠŸ&quot;</span> <span class="hljs-keyword">in</span> driver.page_source<br>    <span class="hljs-keyword">except</span> AssertionError:<br>        driver.save_screenshot(<span class="hljs-string">&quot;failure.png&quot;</span>)<br>        allure.attach.file(<span class="hljs-string">&quot;failure.png&quot;</span>, name=<span class="hljs-string">&quot;å¤±è´¥æˆªå›¾&quot;</span>, attachment_type=allure.attachment_type.PNG)<br>        <span class="hljs-keyword">raise</span><br>    <span class="hljs-keyword">finally</span>:<br>        driver.quit()<br></code></pre></td></tr></table></figure><p>ğŸ“Œ æµ‹è¯•å¤±è´¥æ—¶ï¼Œ<code>Allure </code>æŠ¥å‘Šä¼šè‡ªåŠ¨æ·»åŠ æˆªå›¾</p><h1 id="ä½¿ç”¨-allure-severity-è®¾ç½®æµ‹è¯•ä¼˜å…ˆçº§"><a href="#ä½¿ç”¨-allure-severity-è®¾ç½®æµ‹è¯•ä¼˜å…ˆçº§" class="headerlink" title="ä½¿ç”¨ @allure.severity() è®¾ç½®æµ‹è¯•ä¼˜å…ˆçº§"></a>ä½¿ç”¨ @allure.severity() è®¾ç½®æµ‹è¯•ä¼˜å…ˆçº§</h1><p>ğŸ“Œ <code>Allure </code>æä¾› 5 ä¸ªä¸¥é‡çº§åˆ«</p><p>âœ…<code>BLOCKER</code>ï¼šå…³é”®é—®é¢˜ï¼Œå¿…é¡»ä¿®å¤<br>âœ…<code>CRITICAL</code>ï¼šä¸¥é‡ç¼ºé™·<br>âœ…<code>NORMAL</code>ï¼šæ™®é€šé—®é¢˜<br>âœ…<code>MINOR</code>ï¼šæ¬¡è¦é—®é¢˜<br>âœ…<code>TRIVIAL</code>ï¼šæç¤ºä¿¡æ¯</p><p>ğŸ”¹ ä»£ç ç¤ºä¾‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">@allure.severity(<span class="hljs-params">allure.severity_level.CRITICAL</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_critical_bug</span>():<br>    <span class="hljs-keyword">assert</span> <span class="hljs-number">1</span> == <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p>ğŸ“Œ <code>Allure</code> æŠ¥å‘Šä¼šçªå‡ºæ˜¾ç¤º <code>CRITICAL</code> çº§åˆ«çš„å¤±è´¥æµ‹è¯•</p><h1 id="ç»“åˆ-pytest-mark-parametrize-è¿›è¡Œ-API-æµ‹è¯•"><a href="#ç»“åˆ-pytest-mark-parametrize-è¿›è¡Œ-API-æµ‹è¯•" class="headerlink" title="ç»“åˆ pytest.mark.parametrize è¿›è¡Œ API æµ‹è¯•"></a>ç»“åˆ pytest.mark.parametrize è¿›è¡Œ API æµ‹è¯•</h1><p>ğŸ“Œ ä½œç”¨ï¼š</p><p>âœ…æ‰¹é‡æµ‹è¯• <code>API</code> è¯·æ±‚<br>âœ…ä¸åŒå‚æ•°è‡ªåŠ¨ç”Ÿæˆå¤šç»„æµ‹è¯•</p><p>ğŸ”¹ ä»£ç ç¤ºä¾‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pytest<br><br><span class="hljs-meta">@allure.feature(<span class="hljs-params"><span class="hljs-string">&quot;API æµ‹è¯•&quot;</span></span>)</span><br><span class="hljs-meta">@allure.story(<span class="hljs-params"><span class="hljs-string">&quot;ä¸åŒç”¨æˆ·è·å–ä¿¡æ¯&quot;</span></span>)</span><br><span class="hljs-meta">@pytest.mark.parametrize(<span class="hljs-params"><span class="hljs-string">&quot;user_id&quot;</span>, [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_get_users</span>(<span class="hljs-params">user_id</span>):<br>    <span class="hljs-keyword">with</span> allure.step(<span class="hljs-string">f&quot;æŸ¥è¯¢ç”¨æˆ· ID: <span class="hljs-subst">&#123;user_id&#125;</span>&quot;</span>):<br>        response = requests.get(<span class="hljs-string">f&quot;https://jsonplaceholder.typicode.com/users/<span class="hljs-subst">&#123;user_id&#125;</span>&quot;</span>)<br>        allure.attach(response.text, name=<span class="hljs-string">&quot;å“åº”æ•°æ®&quot;</span>, attachment_type=allure.attachment_type.JSON)<br>        <span class="hljs-keyword">assert</span> response.status_code == <span class="hljs-number">200</span><br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ <code>Allure</code> æŠ¥å‘Šä¼šæ˜¾ç¤ºå¤šä¸ªç”¨æˆ·è¯·æ±‚ç»“æœ</p><h1 id="å¤±è´¥æ—¶è‡ªåŠ¨æˆªå›¾ï¼ˆé€‚ç”¨äº-UI-æµ‹è¯•ï¼‰"><a href="#å¤±è´¥æ—¶è‡ªåŠ¨æˆªå›¾ï¼ˆé€‚ç”¨äº-UI-æµ‹è¯•ï¼‰" class="headerlink" title="å¤±è´¥æ—¶è‡ªåŠ¨æˆªå›¾ï¼ˆé€‚ç”¨äº UI æµ‹è¯•ï¼‰"></a>å¤±è´¥æ—¶è‡ªåŠ¨æˆªå›¾ï¼ˆé€‚ç”¨äº UI æµ‹è¯•ï¼‰</h1><p>ğŸ“Œ é€‚ç”¨äº <code>Selenium</code> è‡ªåŠ¨åŒ–æµ‹è¯•</p><p>ğŸ”¹ ä»£ç ç¤ºä¾‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> selenium <span class="hljs-keyword">import</span> webdriver<br><br><span class="hljs-meta">@allure.feature(<span class="hljs-params"><span class="hljs-string">&quot;UI æµ‹è¯•&quot;</span></span>)</span><br><span class="hljs-meta">@allure.story(<span class="hljs-params"><span class="hljs-string">&quot;ç™»å½•é¡µé¢&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_ui_login</span>():<br>    driver = webdriver.Chrome()<br>    driver.get(<span class="hljs-string">&quot;https://example.com&quot;</span>)<br><br>    <span class="hljs-keyword">with</span> allure.step(<span class="hljs-string">&quot;è¾“å…¥ç”¨æˆ·å&quot;</span>):<br>        driver.find_element(<span class="hljs-string">&quot;id&quot;</span>, <span class="hljs-string">&quot;username&quot;</span>).send_keys(<span class="hljs-string">&quot;test_user&quot;</span>)<br><br>    <span class="hljs-keyword">with</span> allure.step(<span class="hljs-string">&quot;è¾“å…¥å¯†ç &quot;</span>):<br>        driver.find_element(<span class="hljs-string">&quot;id&quot;</span>, <span class="hljs-string">&quot;password&quot;</span>).send_keys(<span class="hljs-string">&quot;123456&quot;</span>)<br><br>    <span class="hljs-keyword">with</span> allure.step(<span class="hljs-string">&quot;ç‚¹å‡»ç™»å½•&quot;</span>):<br>        driver.find_element(<span class="hljs-string">&quot;id&quot;</span>, <span class="hljs-string">&quot;login-button&quot;</span>).click()<br><br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-keyword">assert</span> <span class="hljs-string">&quot;æ¬¢è¿&quot;</span> <span class="hljs-keyword">in</span> driver.page_source<br>    <span class="hljs-keyword">except</span> AssertionError:<br>        allure.attach(driver.get_screenshot_as_png(), name=<span class="hljs-string">&quot;å¤±è´¥æˆªå›¾&quot;</span>, attachment_type=allure.attachment_type.PNG)<br>        <span class="hljs-keyword">raise</span><br>    <span class="hljs-keyword">finally</span>:<br>        driver.quit()<br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ æµ‹è¯•å¤±è´¥æ—¶ï¼Œ<code>Allure</code> æŠ¥å‘Šä¼šè‡ªåŠ¨æ·»åŠ æˆªå›¾</p><h1 id="ç»“åˆ-CI-CD-è‡ªåŠ¨ç”ŸæˆæŠ¥å‘Š"><a href="#ç»“åˆ-CI-CD-è‡ªåŠ¨ç”ŸæˆæŠ¥å‘Š" class="headerlink" title="ç»“åˆ CI&#x2F;CD è‡ªåŠ¨ç”ŸæˆæŠ¥å‘Š"></a>ç»“åˆ CI&#x2F;CD è‡ªåŠ¨ç”ŸæˆæŠ¥å‘Š</h1><p>ğŸ“Œ <code>Jenkins Pipeline</code></p><p>ğŸ”¹ ä»£ç ç¤ºä¾‹</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs groovy">pipeline &#123;<br>    agent any<br>    stages &#123;<br>        stage(<span class="hljs-string">&#x27;Run Tests&#x27;</span>) &#123;<br>            steps &#123;<br>                sh <span class="hljs-string">&#x27;pytest --alluredir=allure-results&#x27;</span><br>            &#125;<br>        &#125;<br>        stage(<span class="hljs-string">&#x27;Generate Report&#x27;</span>) &#123;<br>            steps &#123;<br>                sh <span class="hljs-string">&#x27;allure generate allure-results -o allure-report --clean&#x27;</span><br>            &#125;<br>        &#125;<br>        stage(<span class="hljs-string">&#x27;Publish Report&#x27;</span>) &#123;<br>            steps &#123;<br>                publishHTML([<span class="hljs-attr">allowMissing:</span> <span class="hljs-literal">false</span>, <span class="hljs-attr">alwaysLinkToLastBuild:</span> <span class="hljs-literal">true</span>, <span class="hljs-attr">keepAll:</span> <span class="hljs-literal">true</span>,<br>                    <span class="hljs-symbol">reportDir:</span> <span class="hljs-string">&#x27;allure-report&#x27;</span>, <span class="hljs-attr">reportFiles:</span> <span class="hljs-string">&#x27;index.html&#x27;</span>, <span class="hljs-attr">reportName:</span> <span class="hljs-string">&#x27;Allure Test Report&#x27;</span>])<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ <code>Jenkins</code> è‡ªåŠ¨ç”Ÿæˆ <code>Allure</code> æŠ¥å‘Šå¹¶å±•ç¤ºåœ¨ç½‘é¡µ</p><h1 id="allure-dynamic-title-åŠ¨æ€æ›´æ–°æµ‹è¯•æ ‡é¢˜"><a href="#allure-dynamic-title-åŠ¨æ€æ›´æ–°æµ‹è¯•æ ‡é¢˜" class="headerlink" title="allure.dynamic.title() åŠ¨æ€æ›´æ–°æµ‹è¯•æ ‡é¢˜"></a>allure.dynamic.title() åŠ¨æ€æ›´æ–°æµ‹è¯•æ ‡é¢˜</h1><p>ğŸ“Œ åœºæ™¯ï¼š</p><p>âœ…æ ¹æ® ä¸åŒå‚æ•° ç”Ÿæˆ ä¸åŒæµ‹è¯•æ ‡é¢˜<br>âœ…é€‚ç”¨äº æ•°æ®é©±åŠ¨æµ‹è¯•ï¼ˆDDTï¼‰</p><p>ğŸ”¹ ä»£ç ç¤ºä¾‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> allure<br><span class="hljs-keyword">import</span> pytest<br><br><span class="hljs-meta">@allure.feature(<span class="hljs-params"><span class="hljs-string">&quot;ç”¨æˆ·ç®¡ç†&quot;</span></span>)</span><br><span class="hljs-meta">@pytest.mark.parametrize(<span class="hljs-params"><span class="hljs-string">&quot;username, password&quot;</span>, [(<span class="hljs-params"><span class="hljs-string">&quot;admin&quot;</span>, <span class="hljs-string">&quot;admin123&quot;</span></span>), (<span class="hljs-params"><span class="hljs-string">&quot;user1&quot;</span>, <span class="hljs-string">&quot;pass123&quot;</span></span>)]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_dynamic_title</span>(<span class="hljs-params">username, password</span>):<br>    allure.dynamic.title(<span class="hljs-string">f&quot;ç™»å½•æµ‹è¯• - ç”¨æˆ·å: <span class="hljs-subst">&#123;username&#125;</span>&quot;</span>)  <span class="hljs-comment"># åŠ¨æ€æ›´æ–°æµ‹è¯•æ ‡é¢˜</span><br>    <span class="hljs-keyword">assert</span> username == <span class="hljs-string">&quot;admin&quot;</span><br></code></pre></td></tr></table></figure><p>ğŸ“Œ <code>Allure</code> æŠ¥å‘Šä¸­ï¼Œæ¯ä¸ªæµ‹è¯•ç”¨ä¾‹çš„æ ‡é¢˜ä¸åŒï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs text">âœ… ç™»å½•æµ‹è¯• - ç”¨æˆ·å: admin<br>âœ… ç™»å½•æµ‹è¯• - ç”¨æˆ·å: user1<br></code></pre></td></tr></table></figure><h1 id="allure-title-é™æ€è‡ªå®šä¹‰æµ‹è¯•æ ‡é¢˜"><a href="#allure-title-é™æ€è‡ªå®šä¹‰æµ‹è¯•æ ‡é¢˜" class="headerlink" title="@allure.title() é™æ€è‡ªå®šä¹‰æµ‹è¯•æ ‡é¢˜"></a>@allure.title() é™æ€è‡ªå®šä¹‰æµ‹è¯•æ ‡é¢˜</h1><p>ğŸ“Œ åœºæ™¯ï¼š</p><p>âœ…ç”¨äºæ‰‹åŠ¨å®šä¹‰ å›ºå®šçš„ æµ‹è¯•æ ‡é¢˜</p><p>ğŸ”¹ ä»£ç ç¤ºä¾‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">@allure.feature(<span class="hljs-params"><span class="hljs-string">&quot;è®¢å•ç®¡ç†&quot;</span></span>)</span><br><span class="hljs-meta">@allure.title(<span class="hljs-params"><span class="hljs-string">&quot;æµ‹è¯•åˆ›å»ºè®¢å•åŠŸèƒ½&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_create_order</span>():<br>    <span class="hljs-keyword">assert</span> <span class="hljs-string">&quot;order&quot;</span> <span class="hljs-keyword">in</span> <span class="hljs-string">&quot;order_123&quot;</span><br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ <code>Allure</code> æŠ¥å‘Šä¸­çš„æ ‡é¢˜ä¼šå±•ç¤ºï¼šæµ‹è¯•åˆ›å»ºè®¢å•åŠŸèƒ½</p><h1 id="allure-description-æ·»åŠ æµ‹è¯•ç”¨ä¾‹æè¿°"><a href="#allure-description-æ·»åŠ æµ‹è¯•ç”¨ä¾‹æè¿°" class="headerlink" title="@allure.description() æ·»åŠ æµ‹è¯•ç”¨ä¾‹æè¿°"></a>@allure.description() æ·»åŠ æµ‹è¯•ç”¨ä¾‹æè¿°</h1><p>ğŸ“Œ ä½œç”¨ï¼š</p><p>âœ…è¯¦ç»†æè¿° æµ‹è¯•ç”¨ä¾‹çš„ç›®çš„ã€æ­¥éª¤ã€æœŸæœ›ç»“æœ<br>âœ…å¢å¼ºå¯è¯»æ€§</p><p>ğŸ”¹ ä»£ç ç¤ºä¾‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">@allure.feature(<span class="hljs-params"><span class="hljs-string">&quot;æ”¯ä»˜ç³»ç»Ÿ&quot;</span></span>)</span><br><span class="hljs-meta">@allure.story(<span class="hljs-params"><span class="hljs-string">&quot;å¾®ä¿¡æ”¯ä»˜&quot;</span></span>)</span><br><span class="hljs-meta">@allure.title(<span class="hljs-params"><span class="hljs-string">&quot;å¾®ä¿¡æ”¯ä»˜ - è®¢å•æˆåŠŸæµ‹è¯•&quot;</span></span>)</span><br><span class="hljs-meta">@allure.description(<span class="hljs-params"><span class="hljs-string">&quot;&quot;&quot;</span></span></span><br><span class="hljs-string"><span class="hljs-params"><span class="hljs-meta">### æµ‹è¯•æ­¥éª¤ï¼š</span></span></span><br><span class="hljs-string"><span class="hljs-params"><span class="hljs-meta">1. åˆ›å»ºä¸€ä¸ªè®¢å•</span></span></span><br><span class="hljs-string"><span class="hljs-params"><span class="hljs-meta">2. é€‰æ‹©å¾®ä¿¡æ”¯ä»˜</span></span></span><br><span class="hljs-string"><span class="hljs-params"><span class="hljs-meta">3. æ¨¡æ‹Ÿæ”¯ä»˜æˆåŠŸ</span></span></span><br><span class="hljs-string"><span class="hljs-params"><span class="hljs-meta">4. æ ¡éªŒè®¢å•çŠ¶æ€</span></span></span><br><span class="hljs-string"><span class="hljs-params"><span class="hljs-meta">&quot;&quot;&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_wechat_pay</span>():<br>    <span class="hljs-keyword">assert</span> <span class="hljs-literal">True</span><br></code></pre></td></tr></table></figure><p>ğŸ“Œ <code>Allure</code> æŠ¥å‘Šä¸­ï¼Œæµ‹è¯•ç”¨ä¾‹ä¼šæœ‰è¯¦ç»†æè¿°</p><h1 id="åœ¨-Allure-æŠ¥å‘Šä¸­æ·»åŠ ç”¨ä¾‹é“¾æ¥"><a href="#åœ¨-Allure-æŠ¥å‘Šä¸­æ·»åŠ ç”¨ä¾‹é“¾æ¥" class="headerlink" title="åœ¨ Allure æŠ¥å‘Šä¸­æ·»åŠ ç”¨ä¾‹é“¾æ¥"></a>åœ¨ Allure æŠ¥å‘Šä¸­æ·»åŠ ç”¨ä¾‹é“¾æ¥</h1><p>ğŸ“Œ ä½œç”¨ï¼š</p><p>âœ…å…³è” Bugã€TestCaseã€æ–‡æ¡£<br>âœ…ç‚¹å‡»é“¾æ¥å¯è·³è½¬åˆ° JIRAã€Testrailã€éœ€æ±‚æ–‡æ¡£</p><p>ğŸ”¹ ä»£ç ç¤ºä¾‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">@allure.feature(<span class="hljs-params"><span class="hljs-string">&quot;ç”¨æˆ·ç®¡ç†&quot;</span></span>)</span><br><span class="hljs-meta">@allure.issue(<span class="hljs-params"><span class="hljs-string">&quot;https://jira.company.com/browse/BUG-1234&quot;</span>, <span class="hljs-string">&quot;JIRA Bug 1234&quot;</span></span>)</span><br><span class="hljs-meta">@allure.testcase(<span class="hljs-params"><span class="hljs-string">&quot;https://testrail.company.com/testcase/5678&quot;</span>, <span class="hljs-string">&quot;æµ‹è¯•ç”¨ä¾‹ 5678&quot;</span></span>)</span><br><span class="hljs-meta">@allure.link(<span class="hljs-params"><span class="hljs-string">&quot;https://wiki.company.com/test-plan&quot;</span>, name=<span class="hljs-string">&quot;æµ‹è¯•è®¡åˆ’&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_with_links</span>():<br>    <span class="hljs-keyword">assert</span> <span class="hljs-literal">True</span><br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ <code>Allure</code> æŠ¥å‘Šä¸­ï¼Œä¼šæ˜¾ç¤ºå¯ç‚¹å‡»çš„é“¾æ¥</p><h1 id="ä¿®æ”¹-Allure-é¡µé¢-LOGO"><a href="#ä¿®æ”¹-Allure-é¡µé¢-LOGO" class="headerlink" title="ä¿®æ”¹ Allure é¡µé¢ LOGO"></a>ä¿®æ”¹ Allure é¡µé¢ LOGO</h1><p>ğŸ“Œ è‡ªå®šä¹‰ <code>LOGO</code> é€‚ç”¨äºä¼ä¸šå“ç‰ŒåŒ–</p><p>ğŸ”¹ ä¿®æ”¹ <code>Allure</code> ä¸»é¢˜</p><p>âœ…ä¿®æ”¹ <code>allure-report/widgets/summary.json</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;reportName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;å…¬å¸å†…éƒ¨æµ‹è¯•æŠ¥å‘Š&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;logo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://company.com/logo.png&quot;</span><br><span class="hljs-punctuation">&#125;</span><br><br></code></pre></td></tr></table></figure><p>âœ…é‡æ–°ç”ŸæˆæŠ¥å‘Š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">allure generate allure-results -o allure-report --clean<br></code></pre></td></tr></table></figure><p>ğŸ“Œ ä¿®æ”¹åï¼Œ&#96;&#96;Allure<code>æŠ¥å‘Šé¡µé¢æ˜¾ç¤ºå…¬å¸</code>LOGO&#96;</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><table><thead><tr><th>ä»£ç ç¤ºä¾‹</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td><code>@allure.feature(&quot;ç”¨æˆ·ç®¡ç†&quot;)</code></td><td>åˆ†ç±» Feature&#x2F;Story</td></tr><tr><td><code>with allure.step(&quot;æ­¥éª¤å&quot;):</code></td><td>æ·»åŠ æµ‹è¯•æ­¥éª¤</td></tr><tr><td><code>allure.attach(driver.get_screenshot_as_png(), &quot;æˆªå›¾&quot;, allure.attachment_type.PNG)</code></td><td>å¤±è´¥æˆªå›¾</td></tr><tr><td><code>environment.properties</code></td><td>æ·»åŠ ç¯å¢ƒä¿¡æ¯</td></tr><tr><td><code>@allure.severity(allure.severity_level.CRITICAL)</code></td><td>è®¾ç½®ä¼˜å…ˆçº§</td></tr><tr><td><code>allure.dynamic.title(f&quot;æµ‹è¯• - &#123;param&#125;&quot;)</code></td><td>åŠ¨æ€æ›´æ–°æ ‡é¢˜</td></tr><tr><td><code>@allure.title(&quot;å›ºå®šæ ‡é¢˜&quot;)</code></td><td>é™æ€æ ‡é¢˜</td></tr><tr><td><code>@allure.description(&quot;è¯¦ç»†æµ‹è¯•æ­¥éª¤&quot;)</code></td><td>æµ‹è¯•æè¿°</td></tr><tr><td><code>allure.attach.file(&quot;file.png&quot;, name=&quot;æˆªå›¾&quot;)</code></td><td>ä¸Šä¼ æ–‡ä»¶</td></tr><tr><td><code>summary.json</code></td><td>ä¿®æ”¹ LOGO</td></tr></tbody></table><p>ğŸ¯ <code>pytest + allure</code> è®©è‡ªåŠ¨åŒ–æµ‹è¯•æŠ¥å‘Šæ›´ä¸“ä¸šï¼Œé€‚ç”¨äºä¼ä¸šçº§ <code>CI/CD</code> ğŸš€</p>]]></content>
    
    
    <categories>
      
      <category>Pytest</category>
      
      <category>Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestå’ŒAllureç»“åˆè¯¦ç»†æŒ‡å—</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>pytest</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„å‚æ•°åŒ–</title>
    <link href="/2025/03/25/pytest%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%979/"/>
    <url>/2025/03/25/pytest%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%979/</url>
    
    <content type="html"><![CDATA[<h1 id="Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„å‚æ•°åŒ–"><a href="#Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„å‚æ•°åŒ–" class="headerlink" title="Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„å‚æ•°åŒ–"></a>Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„å‚æ•°åŒ–</h1><p><code>pytest</code> å‚æ•°åŒ– å…è®¸æˆ‘ä»¬åœ¨åŒä¸€ä¸ªæµ‹è¯•å‡½æ•°ä¸­è¿è¡Œå¤šä¸ªè¾“å…¥ç»„åˆï¼Œé¿å…é‡å¤ä»£ç ï¼Œæé«˜æµ‹è¯•è¦†ç›–ç‡ï¼Œç‰¹åˆ«é€‚ç”¨äºï¼š</p><p>âœ…å•å…ƒæµ‹è¯•ï¼ˆå¤šä¸ªè¾“å…¥è¾“å‡ºç»„åˆï¼‰<br>âœ…<code>API</code> æµ‹è¯•ï¼ˆä¸åŒè¯·æ±‚å‚æ•°ï¼‰<br>âœ…æ•°æ®åº“æµ‹è¯•ï¼ˆä¸åŒæ•°æ®é›†ï¼‰<br>âœ…å‰ç«¯ UI æµ‹è¯•ï¼ˆä¸åŒæµè§ˆå™¨ï¼‰</p><h1 id="pytest-mark-parametrize-åŸºæœ¬ç”¨æ³•"><a href="#pytest-mark-parametrize-åŸºæœ¬ç”¨æ³•" class="headerlink" title="@pytest.mark.parametrize åŸºæœ¬ç”¨æ³•"></a>@pytest.mark.parametrize åŸºæœ¬ç”¨æ³•</h1><p>ğŸ”¹ ç¤ºä¾‹ï¼šæµ‹è¯•åŠ æ³•å‡½æ•°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pytest<br><br><span class="hljs-comment"># è¢«æµ‹è¯•å‡½æ•°ï¼šç®€å•åŠ æ³•</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">x, y</span>):<br>    <span class="hljs-keyword">return</span> x + y<br><br><span class="hljs-comment"># å‚æ•°åŒ–ï¼šæµ‹è¯•å¤šä¸ªè¾“å…¥ç»„åˆ</span><br><span class="hljs-meta">@pytest.mark.parametrize(<span class="hljs-params"><span class="hljs-string">&quot;a, b, expected&quot;</span>, [</span></span><br><span class="hljs-params"><span class="hljs-meta">    (<span class="hljs-params"><span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span></span>),   <span class="hljs-comment"># 1 + 2 = 3</span></span></span><br><span class="hljs-params"><span class="hljs-meta">    (<span class="hljs-params">-<span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">4</span></span>),  <span class="hljs-comment"># -1 + 5 = 4</span></span></span><br><span class="hljs-params"><span class="hljs-meta">    (<span class="hljs-params"><span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span></span>),   <span class="hljs-comment"># 0 + 0 = 0</span></span></span><br><span class="hljs-params"><span class="hljs-meta">]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_add</span>(<span class="hljs-params">a, b, expected</span>):<br>    <span class="hljs-keyword">assert</span> add(a, b) == expected  <span class="hljs-comment"># éªŒè¯ç»“æœæ˜¯å¦æ­£ç¡®</span><br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ æ‰§è¡Œæµ‹è¯•</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">pytest -v<br></code></pre></td></tr></table></figure><p>ğŸ“Œ æµ‹è¯•è¾“å‡º</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">test_example.py::test_add[1-2-3] PASSED<br>test_example.py::test_add[-1-5-4] PASSED<br>test_example.py::test_add[0-0-0] PASSED<br></code></pre></td></tr></table></figure><p>ğŸ“Œ è§£æ</p><p><code>@pytest.mark.parametrize</code>(â€œå‚æ•°å1, å‚æ•°å2, æœŸæœ›å€¼â€, [ï¼ˆå‚æ•°1, å‚æ•°2, æœŸæœ›å€¼ï¼‰])</p><p>æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹éƒ½ä¼šè¿è¡Œä¸€æ¬¡ï¼Œä¼ å…¥ä¸åŒå‚æ•°ã€‚</p><p>é¿å…é‡å¤ç¼–å†™å¤šä¸ª test_add_xxx æµ‹è¯•å‡½æ•°ï¼Œæé«˜å¯è¯»æ€§ã€‚</p><h1 id="ä¼ä¸šå®æˆ˜ï¼šå‚æ•°åŒ–-API-æµ‹è¯•"><a href="#ä¼ä¸šå®æˆ˜ï¼šå‚æ•°åŒ–-API-æµ‹è¯•" class="headerlink" title="ä¼ä¸šå®æˆ˜ï¼šå‚æ•°åŒ– API æµ‹è¯•"></a>ä¼ä¸šå®æˆ˜ï¼šå‚æ•°åŒ– API æµ‹è¯•</h1><p>ğŸ“Œ åº”ç”¨åœºæ™¯</p><p>âœ…<code>API</code> éœ€è¦æµ‹è¯•å¤šä¸ªè¯·æ±‚å‚æ•°<br>âœ…æ£€æŸ¥ <code>API</code>è¿”å›çš„ <code>HTTP</code> çŠ¶æ€ç <br>âœ…éªŒè¯ <code>API</code> è¿”å›çš„æ•°æ®ç»“æ„</p><p>ğŸ”¹ ç¤ºä¾‹ï¼šæµ‹è¯• API å“åº”</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pytest<br><span class="hljs-keyword">import</span> requests<br><br>BASE_URL = <span class="hljs-string">&quot;https://jsonplaceholder.typicode.com/posts&quot;</span><br><br><span class="hljs-comment"># å‚æ•°åŒ– API è¯·æ±‚æµ‹è¯•</span><br><span class="hljs-meta">@pytest.mark.parametrize(<span class="hljs-params"><span class="hljs-string">&quot;post_id, expected_status&quot;</span>, [</span></span><br><span class="hljs-params"><span class="hljs-meta">    (<span class="hljs-params"><span class="hljs-number">1</span>, <span class="hljs-number">200</span></span>),   <span class="hljs-comment"># æµ‹è¯• ID 1ï¼ŒæœŸæœ› 200</span></span></span><br><span class="hljs-params"><span class="hljs-meta">    (<span class="hljs-params"><span class="hljs-number">100</span>, <span class="hljs-number">200</span></span>), <span class="hljs-comment"># æµ‹è¯• ID 100ï¼ŒæœŸæœ› 200</span></span></span><br><span class="hljs-params"><span class="hljs-meta">    (<span class="hljs-params"><span class="hljs-number">9999</span>, <span class="hljs-number">404</span></span>),<span class="hljs-comment"># æµ‹è¯• ID ä¸å­˜åœ¨ï¼ŒæœŸæœ› 404</span></span></span><br><span class="hljs-params"><span class="hljs-meta">]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_api_response</span>(<span class="hljs-params">post_id, expected_status</span>):<br>    response = requests.get(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;BASE_URL&#125;</span>/<span class="hljs-subst">&#123;post_id&#125;</span>&quot;</span>)  <span class="hljs-comment"># å‘é€è¯·æ±‚</span><br>    <span class="hljs-keyword">assert</span> response.status_code == expected_status  <span class="hljs-comment"># éªŒè¯ HTTP çŠ¶æ€ç </span><br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ æ‰§è¡Œæµ‹è¯•</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">pytest -v<br></code></pre></td></tr></table></figure><p>ğŸ“Œ æµ‹è¯•è¾“å‡º</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">test_api.py::test_api_response[1-200] PASSED<br>test_api.py::test_api_response[100-200] PASSED<br>test_api.py::test_api_response[9999-404] PASSED<br></code></pre></td></tr></table></figure><p>ğŸ“Œ è§£æ</p><p>ä¸åŒ <code>post_id</code> å‘é€ <code>API</code> è¯·æ±‚</p><p>æ£€æŸ¥ <code>response.status_code</code> æ˜¯å¦ç¬¦åˆé¢„æœŸ</p><p>åŒä¸€å‡½æ•°å¯æµ‹è¯•å¤šä¸ª <code>API</code> åœºæ™¯ï¼Œæå‡æµ‹è¯•æ•ˆç‡</p><h1 id="å‚æ•°åŒ–-UI-è‡ªåŠ¨åŒ–æµ‹è¯•"><a href="#å‚æ•°åŒ–-UI-è‡ªåŠ¨åŒ–æµ‹è¯•" class="headerlink" title="å‚æ•°åŒ– UI è‡ªåŠ¨åŒ–æµ‹è¯•"></a>å‚æ•°åŒ– UI è‡ªåŠ¨åŒ–æµ‹è¯•</h1><p>ğŸ“Œ åº”ç”¨åœºæ™¯</p><p>âœ…è·¨æµè§ˆå™¨æµ‹è¯•<br>âœ…ä¸åŒç”¨æˆ·è§’è‰²æµ‹è¯•</p><p>ğŸ”¹ ç¤ºä¾‹: UI æµ‹è¯•</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pytest<br><span class="hljs-keyword">from</span> selenium <span class="hljs-keyword">import</span> webdriver<br><br><span class="hljs-comment"># å‚æ•°åŒ–ï¼šæ”¯æŒä¸åŒæµè§ˆå™¨</span><br><span class="hljs-meta">@pytest.mark.parametrize(<span class="hljs-params"><span class="hljs-string">&quot;browser&quot;</span>, [<span class="hljs-string">&quot;chrome&quot;</span>, <span class="hljs-string">&quot;firefox&quot;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_open_google</span>(<span class="hljs-params">browser</span>):<br>    <span class="hljs-keyword">if</span> browser == <span class="hljs-string">&quot;chrome&quot;</span>:<br>        driver = webdriver.Chrome()  <span class="hljs-comment"># å¯åŠ¨ Chrome</span><br>    <span class="hljs-keyword">elif</span> browser == <span class="hljs-string">&quot;firefox&quot;</span>:<br>        driver = webdriver.Firefox()  <span class="hljs-comment"># å¯åŠ¨ Firefox</span><br>    <span class="hljs-keyword">else</span>:<br>        pytest.fail(<span class="hljs-string">&quot;âŒ ä¸æ”¯æŒçš„æµè§ˆå™¨&quot;</span>)<br><br>    driver.get(<span class="hljs-string">&quot;https://www.google.com&quot;</span>)  <span class="hljs-comment"># æ‰“å¼€ Google</span><br>    <span class="hljs-keyword">assert</span> <span class="hljs-string">&quot;Google&quot;</span> <span class="hljs-keyword">in</span> driver.title  <span class="hljs-comment"># æ–­è¨€é¡µé¢æ ‡é¢˜</span><br>    driver.quit()  <span class="hljs-comment"># å…³é—­æµè§ˆå™¨</span><br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ æ‰§è¡Œæµ‹è¯•</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">pytest -v<br></code></pre></td></tr></table></figure><p>ğŸ“Œ æµ‹è¯•è¾“å‡º</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">test_ui.py::test_open_google[chrome] PASSED<br>test_ui.py::test_open_google[firefox] PASSED<br></code></pre></td></tr></table></figure><p>ğŸ“Œ è§£æ</p><p>åœ¨ <code>test_open_google</code> é‡Œï¼Œè‡ªåŠ¨è¿è¡Œ 2 æ¬¡ï¼Œåˆ†åˆ«æµ‹è¯• <code>Chrome</code> å’Œ <code>Firefox</code></p><p>æå‡ &#96;&#96;UI&#96; è‡ªåŠ¨åŒ–æµ‹è¯•çš„å…¼å®¹æ€§</p><h1 id="å‚æ•°ç»„åˆï¼ˆç¬›å¡å°”ç§¯ï¼‰"><a href="#å‚æ•°ç»„åˆï¼ˆç¬›å¡å°”ç§¯ï¼‰" class="headerlink" title="å‚æ•°ç»„åˆï¼ˆç¬›å¡å°”ç§¯ï¼‰"></a>å‚æ•°ç»„åˆï¼ˆç¬›å¡å°”ç§¯ï¼‰</h1><p>ğŸ“Œ æµ‹è¯•ä¸åŒæµè§ˆå™¨ + ç”¨æˆ·è§’è‰²çš„ç»„åˆ</p><p>ğŸ”¹ ç¤ºä¾‹ï¼šå‚æ•°ç»„åˆ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">@pytest.mark.parametrize(<span class="hljs-params"><span class="hljs-string">&quot;browser&quot;</span>, [<span class="hljs-string">&quot;chrome&quot;</span>, <span class="hljs-string">&quot;firefox&quot;</span>]</span>)</span><br><span class="hljs-meta">@pytest.mark.parametrize(<span class="hljs-params"><span class="hljs-string">&quot;user_role&quot;</span>, [<span class="hljs-string">&quot;admin&quot;</span>, <span class="hljs-string">&quot;guest&quot;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_login</span>(<span class="hljs-params">browser, user_role</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ–¥ï¸ æµè§ˆå™¨: <span class="hljs-subst">&#123;browser&#125;</span>, ğŸ‘¤ ç”¨æˆ·è§’è‰²: <span class="hljs-subst">&#123;user_role&#125;</span>&quot;</span>)<br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ æ‰§è¡Œæµ‹è¯•</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">pytest -v<br></code></pre></td></tr></table></figure><p>ğŸ“Œ ç”Ÿæˆçš„ç»„åˆ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">test_login[chrome-admin] PASSED<br>test_login[chrome-guest] PASSED<br>test_login[firefox-admin] PASSED<br>test_login[firefox-guest] PASSED<br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ 4 ç»„æµ‹è¯•ç»„åˆï¼Œè‡ªåŠ¨ç”Ÿæˆï¼ˆç¬›å¡å°”ç§¯ï¼‰</p><h1 id="ä½¿ç”¨-pytest-param-è¿›è¡Œæ ‡è®°"><a href="#ä½¿ç”¨-pytest-param-è¿›è¡Œæ ‡è®°" class="headerlink" title="ä½¿ç”¨ pytest.param è¿›è¡Œæ ‡è®°"></a>ä½¿ç”¨ pytest.param è¿›è¡Œæ ‡è®°</h1><p>ğŸ“Œ <code>pytest.param</code> å…è®¸ï¼š</p><p>âœ…å•ç‹¬è®¾ç½® <code>pytest.mark.xfail</code>ï¼ˆé¢„æœŸå¤±è´¥ï¼‰<br>âœ…å•ç‹¬ä¸ºæµ‹è¯•æ·»åŠ <code> id</code> æ–¹ä¾¿åŒºåˆ†</p><p>ğŸ”¹ ç¤ºä¾‹ï¼šéƒ¨åˆ†æµ‹è¯•æ ‡è®° xfail</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">@pytest.mark.parametrize(<span class="hljs-params"><span class="hljs-string">&quot;a, b, expected&quot;</span>, [</span></span><br><span class="hljs-params"><span class="hljs-meta">    (<span class="hljs-params"><span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span></span>),  <span class="hljs-comment"># æ­£å¸¸é€šè¿‡</span></span></span><br><span class="hljs-params"><span class="hljs-meta">    pytest.param(<span class="hljs-params"><span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">5</span>, marks=pytest.mark.xfail(<span class="hljs-params">reason=<span class="hljs-string">&quot;å·²çŸ¥é—®é¢˜&quot;</span></span>)</span>), <span class="hljs-comment"># é¢„æœŸå¤±è´¥</span></span></span><br><span class="hljs-params"><span class="hljs-meta">]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_math</span>(<span class="hljs-params">a, b, expected</span>):<br>    <span class="hljs-keyword">assert</span> a + b == expected<br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ æ‰§è¡Œæµ‹è¯•</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">pytest -v<br></code></pre></td></tr></table></figure><p>ğŸ“Œ è¾“å‡º</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">test_math[1-2-3] PASSED<br>test_math[2-2-5] XFAIL  <span class="hljs-comment"># é¢„æœŸå¤±è´¥ï¼Œä¸å½±å“æ•´ä½“æµ‹è¯•</span><br></code></pre></td></tr></table></figure><p>ğŸ“Œ é€‚ç”¨äº</p><p>âœ…æ ‡è®°å·²çŸ¥ç¼ºé™·<br>âœ…è·³è¿‡ç‰¹å®šæµ‹è¯•</p><h1 id="ä»-Excel-Yaml-Json-æ•°æ®åº“-åŠ¨æ€åŠ è½½å‚æ•°"><a href="#ä»-Excel-Yaml-Json-æ•°æ®åº“-åŠ¨æ€åŠ è½½å‚æ•°" class="headerlink" title="ä» Excel&#x2F;Yaml&#x2F;Json&#x2F;æ•°æ®åº“ åŠ¨æ€åŠ è½½å‚æ•°"></a>ä» Excel&#x2F;Yaml&#x2F;Json&#x2F;æ•°æ®åº“ åŠ¨æ€åŠ è½½å‚æ•°</h1><h2 id="ä»-Excel-è¯»å–å‚æ•°åŒ–æ•°æ®"><a href="#ä»-Excel-è¯»å–å‚æ•°åŒ–æ•°æ®" class="headerlink" title="ä» Excel è¯»å–å‚æ•°åŒ–æ•°æ®"></a>ä» Excel è¯»å–å‚æ•°åŒ–æ•°æ®</h2><p>ğŸ“Œ åœºæ™¯ï¼š</p><p><code>Excel</code> æ–‡ä»¶ å¸¸ç”¨äºç®¡ç† æµ‹è¯•æ•°æ®ï¼Œæ¯”å¦‚ï¼š<br>âœ… ç”¨æˆ·ç™»å½•æµ‹è¯•ï¼ˆè´¦å·ã€å¯†ç ï¼‰<br>âœ… æ¥å£æµ‹è¯•ï¼ˆAPI å‚æ•°ï¼‰<br>âœ… å‰ç«¯ UI æµ‹è¯•ï¼ˆä¸åŒè¾“å…¥æ•°æ®ï¼‰</p><p>ğŸ“Œ ä¸ºä»€ä¹ˆä½¿ç”¨ <code>pandas</code> å¤„ç† <code>Excel</code>?</p><p>æ›´å¿«ï¼šæ¯” <code>openpyxl</code> è§£æé€Ÿåº¦å¿«</p><p>åŠŸèƒ½æ›´å¼ºï¼šå¯ä»¥å¤„ç† å¤§è§„æ¨¡æ•°æ®</p><p>æ•°æ®è¿‡æ»¤ã€è½¬æ¢æ›´æ–¹ä¾¿</p><p>ğŸ”¹ å®‰è£… <code>pandas</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">pip install pandas<br></code></pre></td></tr></table></figure><p>ğŸ“Œ <code>pandas</code> ç”¨äºè§£æ <code>Excel</code></p><p>ğŸ”¹ åˆ›å»º <code>Excel</code> æ–‡ä»¶<code>ï¼ˆtest_data.xlsxï¼‰</code></p><p>ğŸ“Œ <code>Excel</code> ç¤ºä¾‹æ•°æ®</p><table><thead><tr><th>ç”¨æˆ·å</th><th>å¯†ç </th><th>é¢„æœŸç»“æœ</th></tr></thead><tbody><tr><td><code>admin </code></td><td><code>admin123</code></td><td><code>success</code></td></tr><tr><td><code> user1</code></td><td><code>pass123</code></td><td><code>success</code></td></tr><tr><td><code>guest</code></td><td><code> wrongpwd</code></td><td><code>failure</code></td></tr></tbody></table><p>ğŸ”¹ ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pytest<br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br><br><span class="hljs-comment"># è¯»å– Excel æ–‡ä»¶</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">load_excel_data</span>(<span class="hljs-params">file, sheet_name</span>):<br>    df = pd.read_excel(file, sheet_name=sheet_name)  <span class="hljs-comment"># è¯»å– Excel</span><br>    <span class="hljs-keyword">return</span> df.values.tolist()  <span class="hljs-comment"># è½¬æ¢ä¸ºåˆ—è¡¨</span><br><br><span class="hljs-comment"># å‚æ•°åŒ–æµ‹è¯•ï¼Œè¯»å– Excel æ•°æ®</span><br><span class="hljs-meta">@pytest.mark.parametrize(<span class="hljs-params"><span class="hljs-string">&quot;username, password, expected&quot;</span>, load_excel_data(<span class="hljs-params"><span class="hljs-string">&quot;test_data.xlsx&quot;</span>, <span class="hljs-string">&quot;Sheet1&quot;</span></span>)</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_login_excel</span>(<span class="hljs-params">username, password, expected</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ” æµ‹è¯•ç™»å½• - ç”¨æˆ·å: <span class="hljs-subst">&#123;username&#125;</span>, å¯†ç : <span class="hljs-subst">&#123;password&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">assert</span> (username == <span class="hljs-string">&quot;admin&quot;</span> <span class="hljs-keyword">and</span> password == <span class="hljs-string">&quot;admin123&quot;</span>) == (expected == <span class="hljs-string">&quot;success&quot;</span>)<br><br></code></pre></td></tr></table></figure><p>ğŸ”¹ æ¡ˆä¾‹ï¼š <code>Excel</code> å¤æ‚æ•°æ®å¤„ç†</p><p>ğŸ“Œ å¤„ç†æ•°æ®æ ¼å¼</p><p>âœ…å»æ‰ <code>NaN</code> å€¼<br>âœ…è¿‡æ»¤æ‰æŸäº›åˆ—<br>âœ…ä¿®æ”¹æ•°æ®æ ¼å¼</p><p>ğŸ”¹ ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">load_cleaned_excel_data</span>(<span class="hljs-params">file, sheet_name</span>):<br>    df = pd.read_excel(file, sheet_name=sheet_name)<br>    df = df.dropna()  <span class="hljs-comment"># åˆ é™¤ NaN æ•°æ®</span><br>    df[<span class="hljs-string">&quot;username&quot;</span>] = df[<span class="hljs-string">&quot;username&quot;</span>].astype(<span class="hljs-built_in">str</span>)  <span class="hljs-comment"># ç¡®ä¿æ‰€æœ‰ç”¨æˆ·åä¸ºå­—ç¬¦ä¸²</span><br>    <span class="hljs-keyword">return</span> df[[<span class="hljs-string">&quot;username&quot;</span>, <span class="hljs-string">&quot;password&quot;</span>, <span class="hljs-string">&quot;expected&quot;</span>]].values.tolist()  <span class="hljs-comment"># åªä¿ç•™ä¸‰åˆ—</span><br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ ä½¿ç”¨ <code>pytest.mark.parametrize</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">@pytest.mark.parametrize(<span class="hljs-params"><span class="hljs-string">&quot;username, password, expected&quot;</span>, load_cleaned_excel_data(<span class="hljs-params"><span class="hljs-string">&quot;test_data.xlsx&quot;</span>, <span class="hljs-string">&quot;Sheet1&quot;</span></span>)</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_login_excel_clean</span>(<span class="hljs-params">username, password, expected</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ” æµ‹è¯•ç™»å½• - ç”¨æˆ·å: <span class="hljs-subst">&#123;username&#125;</span>, å¯†ç : <span class="hljs-subst">&#123;password&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">assert</span> (username == <span class="hljs-string">&quot;admin&quot;</span> <span class="hljs-keyword">and</span> password == <span class="hljs-string">&quot;admin123&quot;</span>) == (expected == <span class="hljs-string">&quot;success&quot;</span>)<br></code></pre></td></tr></table></figure><h1 id="ä»-YAML-è¯»å–å‚æ•°åŒ–æ•°æ®"><a href="#ä»-YAML-è¯»å–å‚æ•°åŒ–æ•°æ®" class="headerlink" title="ä» YAML è¯»å–å‚æ•°åŒ–æ•°æ®"></a>ä» YAML è¯»å–å‚æ•°åŒ–æ•°æ®</h1><p>ğŸ“Œ åœºæ™¯ï¼š</p><p><code>YAML</code> é€‚ç”¨äº é…ç½®ç±»æµ‹è¯•ï¼ˆå¦‚ç¯å¢ƒå˜é‡ã€<code>API</code> æµ‹è¯•ï¼‰</p><p>ğŸ”¹ å®‰è£…ä¾èµ–</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">pip install pyyaml<br></code></pre></td></tr></table></figure><p>ğŸ”¹ åˆ›å»º <code>YAML</code> æ–‡ä»¶ <code>(config.yaml)</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">users:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">username:</span> <span class="hljs-string">&quot;admin&quot;</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-string">&quot;admin123&quot;</span><br>    <span class="hljs-attr">expected:</span> <span class="hljs-string">&quot;success&quot;</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">username:</span> <span class="hljs-string">&quot;user1&quot;</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-string">&quot;pass123&quot;</span><br>    <span class="hljs-attr">expected:</span> <span class="hljs-string">&quot;success&quot;</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">username:</span> <span class="hljs-string">&quot;guest&quot;</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-string">&quot;wrongpwd&quot;</span><br>    <span class="hljs-attr">expected:</span> <span class="hljs-string">&quot;failure&quot;</span><br><br></code></pre></td></tr></table></figure><p>ğŸ”¹ ä»£ç ç¤ºä¾‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pytest<br><span class="hljs-keyword">import</span> yaml<br><br><span class="hljs-comment"># è¯»å– YAML æ•°æ®</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">load_yaml_data</span>(<span class="hljs-params">file</span>):<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file, <span class="hljs-string">&quot;r&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> f:<br>        data = yaml.safe_load(f)<br>    <span class="hljs-keyword">return</span> [(user[<span class="hljs-string">&quot;username&quot;</span>], user[<span class="hljs-string">&quot;password&quot;</span>], user[<span class="hljs-string">&quot;expected&quot;</span>]) <span class="hljs-keyword">for</span> user <span class="hljs-keyword">in</span> data[<span class="hljs-string">&quot;users&quot;</span>]]<br><br><span class="hljs-comment"># å‚æ•°åŒ– YAML æ•°æ®</span><br><span class="hljs-meta">@pytest.mark.parametrize(<span class="hljs-params"><span class="hljs-string">&quot;username, password, expected&quot;</span>, load_yaml_data(<span class="hljs-params"><span class="hljs-string">&quot;config.yaml&quot;</span></span>)</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_login_yaml</span>(<span class="hljs-params">username, password, expected</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ” YAML æµ‹è¯•ç™»å½• - ç”¨æˆ·å: <span class="hljs-subst">&#123;username&#125;</span>, å¯†ç : <span class="hljs-subst">&#123;password&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">assert</span> (username == <span class="hljs-string">&quot;admin&quot;</span> <span class="hljs-keyword">and</span> password == <span class="hljs-string">&quot;admin123&quot;</span>) == (expected == <span class="hljs-string">&quot;success&quot;</span>)<br></code></pre></td></tr></table></figure><p>ğŸ“Œ é€‚ç”¨äº</p><p>âœ… æµ‹è¯•ç¯å¢ƒå˜é‡ã€é…ç½®ç±»å‚æ•°<br>âœ… <code>API</code> æµ‹è¯•æ•°æ®ç»´æŠ¤</p><h1 id="ä»-JSON-è¯»å–å‚æ•°åŒ–æ•°æ®"><a href="#ä»-JSON-è¯»å–å‚æ•°åŒ–æ•°æ®" class="headerlink" title="ä» JSON è¯»å–å‚æ•°åŒ–æ•°æ®"></a>ä» JSON è¯»å–å‚æ•°åŒ–æ•°æ®</h1><p>ğŸ“Œ åœºæ™¯ï¼š</p><p>âœ…<code>JSON</code> é€‚ç”¨äº <code>API</code> æµ‹è¯•<br>âœ…æ¥å£å…¥å‚å­˜å‚¨åœ¨ <code>JSON</code> æ–‡ä»¶ä¸­</p><p>ğŸ”¹ åˆ›å»º <code>JSON</code> æ–‡ä»¶ <code>(test_data.json)</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span> <span class="hljs-attr">&quot;username&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;admin&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">&quot;password&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;admin123&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">&quot;expected&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;success&quot;</span> <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span> <span class="hljs-attr">&quot;username&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;user1&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">&quot;password&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;pass123&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">&quot;expected&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;success&quot;</span> <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span> <span class="hljs-attr">&quot;username&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;guest&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">&quot;password&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;wrongpwd&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">&quot;expected&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;failure&quot;</span> <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">]</span><br><br></code></pre></td></tr></table></figure><p>ğŸ”¹ ä»£ç ç¤ºä¾‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pytest<br><span class="hljs-keyword">import</span> json<br><br><span class="hljs-comment"># è¯»å– JSON æ•°æ®</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">load_json_data</span>(<span class="hljs-params">file</span>):<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file, <span class="hljs-string">&quot;r&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> f:<br>        data = json.load(f)<br>    <span class="hljs-keyword">return</span> [(user[<span class="hljs-string">&quot;username&quot;</span>], user[<span class="hljs-string">&quot;password&quot;</span>], user[<span class="hljs-string">&quot;expected&quot;</span>]) <span class="hljs-keyword">for</span> user <span class="hljs-keyword">in</span> data]<br><br><span class="hljs-comment"># å‚æ•°åŒ– JSON æ•°æ®</span><br><span class="hljs-meta">@pytest.mark.parametrize(<span class="hljs-params"><span class="hljs-string">&quot;username, password, expected&quot;</span>, load_json_data(<span class="hljs-params"><span class="hljs-string">&quot;test_data.json&quot;</span></span>)</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_login_json</span>(<span class="hljs-params">username, password, expected</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ” JSON æµ‹è¯•ç™»å½• - ç”¨æˆ·å: <span class="hljs-subst">&#123;username&#125;</span>, å¯†ç : <span class="hljs-subst">&#123;password&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">assert</span> (username == <span class="hljs-string">&quot;admin&quot;</span> <span class="hljs-keyword">and</span> password == <span class="hljs-string">&quot;admin123&quot;</span>) == (expected == <span class="hljs-string">&quot;success&quot;</span>)<br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ é€‚ç”¨äº<br>âœ… <code>REST API</code> æµ‹è¯•<br>âœ… æ•°æ®é©±åŠ¨æµ‹è¯•<code>ï¼ˆDDTï¼‰</code></p><h1 id="ä»-MySQL-æ•°æ®åº“è¯»å–å‚æ•°åŒ–æ•°æ®"><a href="#ä»-MySQL-æ•°æ®åº“è¯»å–å‚æ•°åŒ–æ•°æ®" class="headerlink" title="ä» MySQL æ•°æ®åº“è¯»å–å‚æ•°åŒ–æ•°æ®"></a>ä» MySQL æ•°æ®åº“è¯»å–å‚æ•°åŒ–æ•°æ®</h1><p>ğŸ“Œ åœºæ™¯ï¼š</p><p>âœ…ç›´æ¥ä» MySQL è·å–æµ‹è¯•æ•°æ®ï¼ˆå¦‚ç”¨æˆ·ä¿¡æ¯ã€è®¢å•ä¿¡æ¯ï¼‰<br>âœ…é€‚ç”¨äº æ•°æ®é©±åŠ¨æµ‹è¯•ï¼ˆDDTï¼‰</p><p>ğŸ”¹ å®‰è£… <code>pymysql</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">pip install pymysql<br></code></pre></td></tr></table></figure><p>ğŸ”¹ åˆ›å»ºæµ‹è¯•æ•°æ®åº“</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> DATABASE test_db;<br>USE test_db;<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> users (<br>    id <span class="hljs-type">INT</span> AUTO_INCREMENT <span class="hljs-keyword">PRIMARY</span> KEY,<br>    username <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>),<br>    password <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>),<br>    expected <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">10</span>)<br>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> users (username, password, expected) <span class="hljs-keyword">VALUES</span> <br>(&quot;admin&quot;, &quot;admin123&quot;, &quot;success&quot;),<br>(&quot;user1&quot;, &quot;pass123&quot;, &quot;success&quot;),<br>(&quot;guest&quot;, &quot;wrongpwd&quot;, &quot;failure&quot;);<br><br></code></pre></td></tr></table></figure><p>ğŸ”¹ ä»£ç ç¤ºä¾‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pytest<br><span class="hljs-keyword">import</span> pymysql<br><br><span class="hljs-comment"># è¿æ¥ MySQLï¼ŒæŸ¥è¯¢æ•°æ®</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">load_mysql_data</span>():<br>    conn = pymysql.connect(host=<span class="hljs-string">&quot;localhost&quot;</span>, user=<span class="hljs-string">&quot;root&quot;</span>, password=<span class="hljs-string">&quot;root&quot;</span>, database=<span class="hljs-string">&quot;test_db&quot;</span>)<br>    cursor = conn.cursor()<br>    cursor.execute(<span class="hljs-string">&quot;SELECT username, password, expected FROM users&quot;</span>)<br>    data = cursor.fetchall()<br>    conn.close()<br>    <span class="hljs-keyword">return</span> data<br><br><span class="hljs-comment"># å‚æ•°åŒ–æ•°æ®åº“æ•°æ®</span><br><span class="hljs-meta">@pytest.mark.parametrize(<span class="hljs-params"><span class="hljs-string">&quot;username, password, expected&quot;</span>, load_mysql_data(<span class="hljs-params"></span>)</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_login_mysql</span>(<span class="hljs-params">username, password, expected</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ” MySQL æµ‹è¯•ç™»å½• - ç”¨æˆ·å: <span class="hljs-subst">&#123;username&#125;</span>, å¯†ç : <span class="hljs-subst">&#123;password&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">assert</span> (username == <span class="hljs-string">&quot;admin&quot;</span> <span class="hljs-keyword">and</span> password == <span class="hljs-string">&quot;admin123&quot;</span>) == (expected == <span class="hljs-string">&quot;success&quot;</span>)<br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ é€‚ç”¨äº<br>âœ… æ•°æ®åº“æµ‹è¯•ï¼ˆå¦‚è®¢å•ã€ç”¨æˆ·æ•°æ®ï¼‰<br>âœ… æµ‹è¯•çœŸå®ä¸šåŠ¡æ•°æ®</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><table><thead><tr><th>æ•°æ®æº</th><th>é€‚ç”¨åœºæ™¯</th><th>é¢„æœŸç»“ä»£ç ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>Excelï¼ˆpandasï¼‰ </code></td><td>æ‰‹åŠ¨ç»´æŠ¤çš„æµ‹è¯•æ•°æ®ï¼ˆå¦‚è´¦å·&#x2F;å¯†ç ï¼‰</td><td><code>load_excel_data(&quot;test_data.xlsx&quot;)</code></td></tr><tr><td><code> YAMLï¼ˆpyyamlï¼‰</code></td><td>é…ç½®æ–‡ä»¶ã€ç¯å¢ƒå˜é‡æµ‹è¯•</td><td><code>load_yaml_data(&quot;config.yaml&quot;)</code></td></tr><tr><td><code>JSONï¼ˆjsonï¼‰</code></td><td>API å‚æ•°æµ‹è¯•</td><td><code>load_json_data(&quot;test_data.json&quot;)</code></td></tr><tr><td><code>MySQLï¼ˆpymysqlï¼‰</code></td><td>æ•°æ®åº“æ•°æ®é©±åŠ¨æµ‹è¯•</td><td><code>load_mysql_data()</code></td></tr></tbody></table><p>ä»¥ä¸Šå‡ ç§çš„å‚æ•°åŒ–éƒ½ä¼šæå¤§çš„æé«˜æˆ‘ä»¬çš„å·¥ä½œæ•ˆç‡ï¼Œè‡³äºé€‰æ‹©ä»€ä¹ˆä½œä¸ºæ•°æ®æºåŸºæœ¬éƒ½å·®ä¸å¤šï¼Œå½“ç„¶è¿˜æ˜¯è¦ç»“åˆä½ çš„å®é™…ä¸šåŠ¡é€‰æ‹©ï¼</p>]]></content>
    
    
    <categories>
      
      <category>Pytest</category>
      
      <category>Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„å‚æ•°åŒ–</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>pytest</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„å¸¸è§ä¸‰æ–¹æ’ä»¶</title>
    <link href="/2025/03/25/pytest%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%978/"/>
    <url>/2025/03/25/pytest%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%978/</url>
    
    <content type="html"><![CDATA[<h1 id="Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„å¸¸è§ä¸‰æ–¹æ’ä»¶"><a href="#Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„å¸¸è§ä¸‰æ–¹æ’ä»¶" class="headerlink" title="Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„å¸¸è§ä¸‰æ–¹æ’ä»¶"></a>Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„å¸¸è§ä¸‰æ–¹æ’ä»¶</h1><p><code>pytest</code> æä¾›äº†å¤§é‡æ’ä»¶ï¼Œå¯ä»¥å¢å¼ºæµ‹è¯•èƒ½åŠ›ï¼Œæ¯”å¦‚ï¼š </p><p>âœ… å¹¶è¡Œæ‰§è¡Œ<br>âœ… ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š<br>âœ… æµ‹è¯•è¦†ç›–ç‡ç»Ÿè®¡<br>âœ… <code>Mock</code> æ•°æ®<br>âœ… æ•°æ®åº“æµ‹è¯•<br>âœ… è‡ªåŠ¨å¤±è´¥é‡è¯•<br>âœ… <code>API</code> æµ‹è¯•</p><h1 id="pytest-xdistï¼šå¹¶è¡Œæ‰§è¡Œï¼Œæé«˜æµ‹è¯•é€Ÿåº¦"><a href="#pytest-xdistï¼šå¹¶è¡Œæ‰§è¡Œï¼Œæé«˜æµ‹è¯•é€Ÿåº¦" class="headerlink" title="pytest-xdistï¼šå¹¶è¡Œæ‰§è¡Œï¼Œæé«˜æµ‹è¯•é€Ÿåº¦"></a>pytest-xdistï¼šå¹¶è¡Œæ‰§è¡Œï¼Œæé«˜æµ‹è¯•é€Ÿåº¦</h1><p>ğŸ“Œ <code>pytest-xdist</code> å¯ä»¥å¹¶è¡Œè¿è¡Œå¤šä¸ªæµ‹è¯•ï¼Œæå‡æ‰§è¡Œæ•ˆç‡ã€‚é€‚ç”¨äºï¼š</p><p>âœ…å¤§è§„æ¨¡æµ‹è¯•å¥—ä»¶<br>âœ…<code>APIã€UI</code>è‡ªåŠ¨åŒ–æµ‹è¯•<br>âœ…<code>CI/CD</code> æé€Ÿ</p><p>ğŸ”¹ å®‰è£…</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">pip install pytest-xdist<br></code></pre></td></tr></table></figure><p>ğŸ”¹ ç”¨æ³•</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">pytest -n 4  <span class="hljs-comment"># 4 ä¸ª CPU æ ¸å¿ƒå¹¶è¡Œæ‰§è¡Œ</span><br>pytest -n auto  <span class="hljs-comment"># è‡ªåŠ¨æ£€æµ‹ CPU æ ¸å¿ƒæ•°</span><br><br></code></pre></td></tr></table></figure><p>ğŸ”¹ å®æˆ˜æ¡ˆä¾‹ï¼šåŠ é€Ÿ API æµ‹è¯•</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">import</span> time<br><br>API_ENDPOINTS = [<br>    <span class="hljs-string">&quot;https://jsonplaceholder.typicode.com/posts/1&quot;</span>,<br>    <span class="hljs-string">&quot;https://jsonplaceholder.typicode.com/posts/2&quot;</span>,<br>    <span class="hljs-string">&quot;https://jsonplaceholder.typicode.com/posts/3&quot;</span>,<br>]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">fetch_api</span>(<span class="hljs-params">url</span>):<br>    response = requests.get(url)<br>    <span class="hljs-keyword">return</span> response.json()<br><br><span class="hljs-keyword">import</span> pytest<br><br><span class="hljs-meta">@pytest.mark.parametrize(<span class="hljs-params"><span class="hljs-string">&quot;url&quot;</span>, API_ENDPOINTS</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_api_performance</span>(<span class="hljs-params">url</span>):<br>    start_time = time.time()<br>    data = fetch_api(url)<br>    duration = time.time() - start_time<br>    <span class="hljs-keyword">assert</span> <span class="hljs-string">&quot;userId&quot;</span> <span class="hljs-keyword">in</span> data<br>    <span class="hljs-keyword">assert</span> duration &lt; <span class="hljs-number">2</span>  <span class="hljs-comment"># API å“åº”å¿…é¡»åœ¨ 2 ç§’å†…</span><br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ å¹¶è¡Œæ‰§è¡Œ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">pytest -n 3<br></code></pre></td></tr></table></figure><p>ğŸ“Œ å•çº¿ç¨‹ï¼š3sï¼Œ4 çº¿ç¨‹å¹¶è¡Œï¼š1s ğŸš€</p><h1 id="pytest-htmlï¼šç”Ÿæˆå¯è§†åŒ–-HTML-æµ‹è¯•æŠ¥å‘Š"><a href="#pytest-htmlï¼šç”Ÿæˆå¯è§†åŒ–-HTML-æµ‹è¯•æŠ¥å‘Š" class="headerlink" title="pytest-htmlï¼šç”Ÿæˆå¯è§†åŒ– HTML æµ‹è¯•æŠ¥å‘Š"></a>pytest-htmlï¼šç”Ÿæˆå¯è§†åŒ– HTML æµ‹è¯•æŠ¥å‘Š</h1><p>ğŸ“Œ <code>pytest-html</code> ç”Ÿæˆè¯¦ç»†çš„ <code>HTML</code> æŠ¥å‘Šï¼Œé€‚ç”¨äºï¼š</p><p>âœ…CI&#x2F;CD æŒç»­é›†æˆ<br>âœ…æµ‹è¯•æ•°æ®å¯è§†åŒ–<br>âœ…å›¢é˜Ÿæµ‹è¯•æŠ¥å‘Šå…±äº«</p><p>ğŸ”¹ å®‰è£…</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">pip install pytest-html<br></code></pre></td></tr></table></figure><p>ğŸ”¹ ç”Ÿæˆ HTML æŠ¥å‘Š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">pytest --html=report.html --self-contained-html<br></code></pre></td></tr></table></figure><p>ğŸ”¹ å®æˆ˜æ¡ˆä¾‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_addition</span>():<br>    <span class="hljs-keyword">assert</span> <span class="hljs-number">1</span> + <span class="hljs-number">1</span> == <span class="hljs-number">2</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_string</span>():<br>    <span class="hljs-keyword">assert</span> <span class="hljs-string">&quot;pytest&quot;</span> <span class="hljs-keyword">in</span> <span class="hljs-string">&quot;pytest is awesome&quot;</span><br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ æ‰“å¼€ report.htmlï¼ŒæŸ¥çœ‹å¯è§†åŒ–æŠ¥å‘Š</p><h1 id="pytest-covï¼šä»£ç è¦†ç›–ç‡åˆ†æ"><a href="#pytest-covï¼šä»£ç è¦†ç›–ç‡åˆ†æ" class="headerlink" title="pytest-covï¼šä»£ç è¦†ç›–ç‡åˆ†æ"></a>pytest-covï¼šä»£ç è¦†ç›–ç‡åˆ†æ</h1><p>ğŸ“Œ <code>pytest-cov</code> ç”¨äº ç»Ÿè®¡æµ‹è¯•è¦†ç›–ç‡ï¼Œæ‰¾å‡ºæœªæµ‹è¯•çš„ä»£ç ã€‚é€‚ç”¨äºï¼š</p><p>âœ…å•å…ƒæµ‹è¯•<br>âœ…é‡æ„ä»£ç ï¼Œæ‰¾å‡ºæœªè¦†ç›–éƒ¨åˆ†<br>âœ…CI&#x2F;CD è´¨é‡æ£€æŸ¥</p><p>ğŸ”¹ å®‰è£…</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">pip install pytest-cov<br></code></pre></td></tr></table></figure><p>ğŸ”¹ è¿è¡Œæµ‹è¯• + ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">pytest --cov=my_project<br></code></pre></td></tr></table></figure><p>ğŸ”¹ ä»£ç ç¤ºä¾‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># my_project/calculator.py</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">x, y</span>):<br>    <span class="hljs-keyword">return</span> x + y<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">multiply</span>(<span class="hljs-params">x, y</span>):<br>    <span class="hljs-keyword">return</span> x * y<br><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># test_calculator.py</span><br><span class="hljs-keyword">from</span> my_project.calculator <span class="hljs-keyword">import</span> add<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_add</span>():<br>    <span class="hljs-keyword">assert</span> add(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>) == <span class="hljs-number">5</span><br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ è¿è¡Œ <code>pytest --cov=my_project</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">----------- coverage: 50% -----------<br>calculator.py | 2 | 1 | 50%<br></code></pre></td></tr></table></figure><p>ğŸ“Œ å‘ç° <code>multiply()</code> æ²¡æœ‰æµ‹è¯•ï¼</p><h1 id="pytest-mockï¼šæ¨¡æ‹Ÿ-HTTP-è¯·æ±‚ï¼Œæ•°æ®åº“ï¼Œå‡½æ•°"><a href="#pytest-mockï¼šæ¨¡æ‹Ÿ-HTTP-è¯·æ±‚ï¼Œæ•°æ®åº“ï¼Œå‡½æ•°" class="headerlink" title="pytest-mockï¼šæ¨¡æ‹Ÿ HTTP è¯·æ±‚ï¼Œæ•°æ®åº“ï¼Œå‡½æ•°"></a>pytest-mockï¼šæ¨¡æ‹Ÿ HTTP è¯·æ±‚ï¼Œæ•°æ®åº“ï¼Œå‡½æ•°</h1><p>ğŸ“Œ <code>pytest-mock</code> ç”¨äº<code> Mock</code> ä¾èµ–çš„å‡½æ•°&#x2F;å¯¹è±¡ï¼Œé¿å…çœŸå®è¯·æ±‚ï¼Œé€‚ç”¨äºï¼š</p><p>âœ…æ¨¡æ‹Ÿ <code>API</code> è¿”å›æ•°æ®<br>âœ…æ¨¡æ‹Ÿæ•°æ®åº“è¿æ¥<br>âœ…<code>Mock</code> ç±»æ–¹æ³•</p><p>ğŸ”¹ å®‰è£…</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">pip install pytest-mock<br></code></pre></td></tr></table></figure><p>ğŸ”¹ å®æˆ˜æ¡ˆä¾‹ï¼š<code>Mock HTTP</code> è¯·æ±‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">fetch_data</span>():<br>    response = requests.get(<span class="hljs-string">&quot;https://api.example.com/data&quot;</span>)<br>    <span class="hljs-keyword">return</span> response.json()<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_mock_api</span>(<span class="hljs-params">mocker</span>):<br>    mock_response = mocker.Mock()<br>    mock_response.json.return_value = &#123;<span class="hljs-string">&quot;key&quot;</span>: <span class="hljs-string">&quot;mock_value&quot;</span>&#125;<br>    mocker.patch(<span class="hljs-string">&quot;requests.get&quot;</span>, return_value=mock_response)<br><br>    result = fetch_data()<br>    <span class="hljs-keyword">assert</span> result == &#123;<span class="hljs-string">&quot;key&quot;</span>: <span class="hljs-string">&quot;mock_value&quot;</span>&#125;<br></code></pre></td></tr></table></figure><p>ğŸ“Œ <code>requests.get</code> ä¸ä¼šçœŸçš„è¯·æ±‚ <code>API</code>ï¼Œè€Œæ˜¯è¿”å› <code>Mock</code> æ•°æ®</p><h1 id="pytest-djangoï¼šDjango-é¡¹ç›®ä¸“ç”¨"><a href="#pytest-djangoï¼šDjango-é¡¹ç›®ä¸“ç”¨" class="headerlink" title="pytest-djangoï¼šDjango é¡¹ç›®ä¸“ç”¨"></a>pytest-djangoï¼šDjango é¡¹ç›®ä¸“ç”¨</h1><p>ğŸ“Œ <code>pytest-django</code> ä¼˜åŒ– <code>Django</code> æµ‹è¯•ï¼Œæä¾›æ•°æ®åº“å›æ»šã€<code>ORM</code> æµ‹è¯•æ”¯æŒã€‚</p><p>ğŸ”¹ å®‰è£…</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">pip install pytest-django<br><br></code></pre></td></tr></table></figure><p>ğŸ”¹ é…ç½®</p><p>åœ¨ <code>pytest.ini</code> é‡Œæ·»åŠ ï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[pytest]</span><br><span class="hljs-attr">DJANGO_SETTINGS_MODULE</span> = myproject.settings<br></code></pre></td></tr></table></figure><p>ğŸ”¹ å®æˆ˜æ¡ˆä¾‹ï¼šæµ‹è¯• <code>Django ORM</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pytest<br><span class="hljs-keyword">from</span> myapp.models <span class="hljs-keyword">import</span> User<br><br><span class="hljs-meta">@pytest.mark.django_db</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_create_user</span>():<br>    user = User.objects.create(username=<span class="hljs-string">&quot;testuser&quot;</span>)<br>    <span class="hljs-keyword">assert</span> user.username == <span class="hljs-string">&quot;testuser&quot;</span><br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ æ•°æ®åº“æµ‹è¯•è‡ªåŠ¨å›æ»šï¼Œä¸å½±å“æ•°æ®ã€‚</p><h1 id="pytest-rerunfailuresï¼šå¤±è´¥è‡ªåŠ¨é‡è¯•"><a href="#pytest-rerunfailuresï¼šå¤±è´¥è‡ªåŠ¨é‡è¯•" class="headerlink" title="pytest-rerunfailuresï¼šå¤±è´¥è‡ªåŠ¨é‡è¯•"></a>pytest-rerunfailuresï¼šå¤±è´¥è‡ªåŠ¨é‡è¯•</h1><p>ğŸ“Œ <code>pytest-rerunfailures</code> è®©å¤±è´¥çš„æµ‹è¯•è‡ªåŠ¨é‡è¯•ï¼Œé€‚ç”¨äºï¼š</p><p>âœ…ä¸ç¨³å®šçš„ <code>API / UI</code> æµ‹è¯•<br>âœ…<code>CI/CD</code> é¿å…å› å¶ç„¶å¤±è´¥å¯¼è‡´æ„å»ºå¤±è´¥</p><p>ğŸ”¹ å®‰è£…</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">pip install pytest-rerunfailures<br></code></pre></td></tr></table></figure><p>ğŸ”¹ ç”¨æ³•</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">pytest --reruns 3  <span class="hljs-comment"># å¤±è´¥æ—¶æœ€å¤šé‡è¯• 3 æ¬¡</span><br>pytest --reruns 3 --reruns-delay 2  <span class="hljs-comment"># æ¯æ¬¡é‡è¯•é—´éš” 2 ç§’</span><br></code></pre></td></tr></table></figure><p>ğŸ”¹ ä»£ç ç¤ºä¾‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> random<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_unstable</span>():<br>    <span class="hljs-keyword">assert</span> random.choice([<span class="hljs-literal">True</span>, <span class="hljs-literal">False</span>])<br></code></pre></td></tr></table></figure><p>ğŸ“Œ å¦‚æœå¤±è´¥ï¼Œä¼šè‡ªåŠ¨é‡è¯• 3 æ¬¡</p><h1 id="pytest-fakerï¼šç”Ÿæˆéšæœºæ•°æ®"><a href="#pytest-fakerï¼šç”Ÿæˆéšæœºæ•°æ®" class="headerlink" title="pytest-fakerï¼šç”Ÿæˆéšæœºæ•°æ®"></a>pytest-fakerï¼šç”Ÿæˆéšæœºæ•°æ®</h1><p>ğŸ“Œ <code>pytest-faker</code> è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•æ•°æ®ï¼ˆå¦‚å§“åã€é‚®ç®±ã€åœ°å€ï¼‰ï¼Œé€‚ç”¨äºï¼š</p><p>âœ…ç”¨æˆ·æ³¨å†Œæµ‹è¯•<br>âœ…æ¨¡æ‹Ÿè¡¨å•æäº¤<br>âœ…éšæœºåŒ–æ•°æ®</p><p>ğŸ”¹ å®‰è£…</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">pip install pytest-faker<br></code></pre></td></tr></table></figure><p>ğŸ”¹ ä»£ç ç¤ºä¾‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_faker</span>(<span class="hljs-params">faker</span>):<br>    name = faker.name()<br>    email = faker.email()<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ§‘ ç”Ÿæˆç”¨æˆ·: <span class="hljs-subst">&#123;name&#125;</span>, ğŸ“§ é‚®ç®±: <span class="hljs-subst">&#123;email&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">assert</span> <span class="hljs-string">&quot;@&quot;</span> <span class="hljs-keyword">in</span> email<br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ è¿è¡Œåï¼Œæ¯æ¬¡ç”Ÿæˆä¸åŒçš„åå­—å’Œé‚®ç®±</p><h1 id="pytest-timeoutï¼šé˜²æ­¢æ­»å¾ªç¯"><a href="#pytest-timeoutï¼šé˜²æ­¢æ­»å¾ªç¯" class="headerlink" title="pytest-timeoutï¼šé˜²æ­¢æ­»å¾ªç¯"></a>pytest-timeoutï¼šé˜²æ­¢æ­»å¾ªç¯</h1><p>ğŸ“Œ pytest-timeout é™åˆ¶æµ‹è¯•è¿è¡Œæ—¶é—´ï¼Œé¿å…æ­»å¾ªç¯ï¼Œé€‚ç”¨äºï¼š</p><p>âœ…API &#x2F; UI è¶…æ—¶æ£€æµ‹<br>âœ…é¿å…æ…¢æµ‹è¯•é˜»å¡ CI&#x2F;CD</p><p>ğŸ”¹ å®‰è£…</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">pip install pytest-timeout<br></code></pre></td></tr></table></figure><p>ğŸ”¹ ä»£ç ç¤ºä¾‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> time<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_slow</span>():<br>    time.sleep(<span class="hljs-number">10</span>)  <span class="hljs-comment"># è¶…æ—¶</span><br></code></pre></td></tr></table></figure><p>ğŸ“Œ è¿è¡Œ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">pytest --<span class="hljs-built_in">timeout</span>=5  <span class="hljs-comment"># è¶…è¿‡ 5 ç§’è‡ªåŠ¨å¤±è´¥</span><br></code></pre></td></tr></table></figure><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><table><thead><tr><th>æ’ä»¶</th><th>é€‚ç”¨åœºæ™¯</th><th>å‘½ä»¤ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>pytest-xdist </code></td><td>å¹¶è¡Œæ‰§è¡Œæµ‹è¯•</td><td><code>pytest -n 4</code></td></tr><tr><td><code> pytest-html</code></td><td>ç”Ÿæˆ HTML æŠ¥å‘Š</td><td><code>pytest --html=report.html</code></td></tr><tr><td><code>pytest-cov</code></td><td>æµ‹è¯•è¦†ç›–ç‡</td><td><code>pytest --cov=my_project</code></td></tr><tr><td><code>pytest-mock</code></td><td>Mock æµ‹è¯•</td><td><code>mocker.patch()</code></td></tr><tr><td><code>pytest-django</code></td><td>Django ORM æµ‹è¯•</td><td><code>@pytest.mark.django_db</code></td></tr><tr><td><code>pytest-rerunfailures</code></td><td>æµ‹è¯•å¤±è´¥é‡è¯•</td><td><code>pytest --reruns 3</code></td></tr><tr><td><code>pytest-faker</code></td><td>ç”Ÿæˆå‡æ•°æ®</td><td><code>faker.email()</code></td></tr><tr><td><code>pytest-timeout</code></td><td>æµ‹è¯•è¶…æ—¶</td><td><code>pytest --timeout=5</code></td></tr></tbody></table><p>ä»¥ä¸Šåªæ˜¯å¸¸è§çš„æ’ä»¶ï¼Œpytestæ‹¥æœ‰éå¸¸ä¸°å¯Œçš„æ’ä»¶ï¼Œå¤§å®¶å¯ä»¥åœ¨è¯„è®ºåŒºè¯´ä¸€ä¸‹ä½ ç»å¸¸ç”¨é‚£ä¸ªå‘¢ï¼Ÿ</p>]]></content>
    
    
    <categories>
      
      <category>Pytest</category>
      
      <category>Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„å¸¸è§ä¸‰æ–¹æ’ä»¶</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>pytest</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„hooksåŠŸèƒ½</title>
    <link href="/2025/03/24/pytest%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%977/"/>
    <url>/2025/03/24/pytest%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%977/</url>
    
    <content type="html"><![CDATA[<h1 id="Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„hooksåŠŸèƒ½"><a href="#Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„hooksåŠŸèƒ½" class="headerlink" title="Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„hooksåŠŸèƒ½"></a>Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„hooksåŠŸèƒ½</h1><p>ğŸ“Œ <code>pytest hooks</code> æ˜¯ <code>pytest</code> æä¾›çš„æ’ä»¶æœºåˆ¶ï¼Œå…è®¸å¼€å‘è€…åœ¨æµ‹è¯•è¿è¡Œçš„ä¸åŒé˜¶æ®µæ’å…¥è‡ªå®šä¹‰é€»è¾‘ï¼Œæ¯”å¦‚ï¼š</p><p>âœ…åœ¨æµ‹è¯•å¼€å§‹å‰æ‰§è¡Œåˆå§‹åŒ–</p><p>âœ…åœ¨æµ‹è¯•æ‰§è¡Œåæ”¶é›†ç»“æœ</p><p>âœ…è‡ªå®šä¹‰æµ‹è¯•å‘ç°å’ŒæŠ¥å‘Š</p><p>âœ…ä¿®æ”¹æµ‹è¯•ç”¨ä¾‹æ‰§è¡Œæµç¨‹</p><h1 id="ä»€ä¹ˆæ˜¯-pytest-hooksï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-pytest-hooksï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ pytest hooksï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ pytest hooksï¼Ÿ</h1><p><code>pytest hooks</code> ç”± <code>pytest</code> æä¾›çš„å›è°ƒå‡½æ•° ç»„æˆï¼Œç”¨æˆ·å¯ä»¥é‡å†™è¿™äº›å‡½æ•°æ¥ä¿®æ”¹ <code>pytest</code> è¡Œä¸ºã€‚</p><p><code>pytest hooks</code> çš„å®šä¹‰æ ¼å¼ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">pytest_é’©å­åç§°</span>(<span class="hljs-params">å‚æ•°</span>):<br>    <span class="hljs-comment"># è‡ªå®šä¹‰é€»è¾‘</span><br></code></pre></td></tr></table></figure><p>ğŸ“Œ å¦‚ä½•ä½¿ç”¨ <code>pytest hooks</code>ï¼Ÿ</p><p>æ‰€æœ‰ <code>pytest hooks</code> å¿…é¡»å†™åœ¨ <code>conftest.py </code>ä¸­ã€‚</p><p><code>pytest</code>è‡ªåŠ¨æ£€æµ‹ <code>conftest.py</code> é‡Œçš„ <code>hooks</code>ï¼Œæ— éœ€å¯¼å…¥ã€‚</p><p>ğŸ“Œ ç¤ºä¾‹ï¼šæ‹¦æˆª <code>pytest</code> è¿è¡Œ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># conftest.py</span><br><span class="hljs-keyword">import</span> pytest<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">pytest_runtest_setup</span>(<span class="hljs-params">item</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nğŸ”§ è¿è¡Œå‰ï¼šè®¾ç½®æµ‹è¯•ç¯å¢ƒ - <span class="hljs-subst">&#123;item.name&#125;</span>&quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">pytest_runtest_teardown</span>(<span class="hljs-params">item</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nğŸ—‘ï¸  è¿è¡Œåï¼šæ¸…ç†æµ‹è¯•ç¯å¢ƒ - <span class="hljs-subst">&#123;item.name&#125;</span>&quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_example</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;âœ… è¿è¡Œ test_example&quot;</span>)<br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ è¿è¡Œç»“æœ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">ğŸ”§ è¿è¡Œå‰ï¼šè®¾ç½®æµ‹è¯•ç¯å¢ƒ - test_example<br>âœ… è¿è¡Œ test_example<br>ğŸ—‘ï¸  è¿è¡Œåï¼šæ¸…ç†æµ‹è¯•ç¯å¢ƒ - test_example<br></code></pre></td></tr></table></figure><h1 id="å¸¸è§-pytest-hooks-é€ŸæŸ¥è¡¨"><a href="#å¸¸è§-pytest-hooks-é€ŸæŸ¥è¡¨" class="headerlink" title="å¸¸è§ pytest hooks é€ŸæŸ¥è¡¨"></a>å¸¸è§ pytest hooks é€ŸæŸ¥è¡¨</h1><table><thead><tr><th>Hook åç§°</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>pytest_configure </code></td><td>æµ‹è¯•å¯åŠ¨æ—¶æ‰§è¡Œï¼ˆå…¨å±€è®¾ç½®ï¼‰</td></tr><tr><td><code> pytest_unconfigure</code></td><td>æµ‹è¯•ç»“æŸæ—¶æ‰§è¡Œï¼ˆæ¸…ç†èµ„æºï¼‰</td></tr><tr><td><code>pytest_sessionstart</code></td><td>æµ‹è¯•ä¼šè¯å¼€å§‹æ—¶æ‰§è¡Œ</td></tr><tr><td><code>pytest_sessionfinish</code></td><td>æµ‹è¯•ä¼šè¯ç»“æŸæ—¶æ‰§è¡Œ</td></tr><tr><td><code>pytest_collection_modifyitems</code></td><td>ä¿®æ”¹æ”¶é›†åˆ°çš„æµ‹è¯•ç”¨ä¾‹ï¼ˆé‡å‘½åã€è·³è¿‡ç­‰ï¼‰</td></tr><tr><td><code>pytest_runtest_setup</code></td><td>æµ‹è¯•å‡½æ•°è¿è¡Œå‰æ‰§è¡Œ</td></tr><tr><td><code>pytest_runtest_teardown</code></td><td>æµ‹è¯•å‡½æ•°è¿è¡Œåæ‰§è¡Œ</td></tr><tr><td><code>pytest_runtest_call</code></td><td>å®é™…è¿è¡Œæµ‹è¯•å‡½æ•°</td></tr><tr><td><code>pytest_runtest_logreport</code></td><td>è·å–æµ‹è¯•ç»“æœ</td></tr><tr><td><code>pytest_addoption</code></td><td>è‡ªå®šä¹‰å‘½ä»¤è¡Œå‚æ•°</td></tr><tr><td><code>pytest_terminal_summary</code></td><td>æµ‹è¯•ç»“æŸåè‡ªå®šä¹‰æŠ¥å‘Š</td></tr></tbody></table><h1 id="pytest-configure-pytest-unconfigureï¼šå…¨å±€åˆå§‹åŒ–å’Œæ¸…ç†"><a href="#pytest-configure-pytest-unconfigureï¼šå…¨å±€åˆå§‹åŒ–å’Œæ¸…ç†" class="headerlink" title="pytest_configure &amp; pytest_unconfigureï¼šå…¨å±€åˆå§‹åŒ–å’Œæ¸…ç†"></a>pytest_configure &amp; pytest_unconfigureï¼šå…¨å±€åˆå§‹åŒ–å’Œæ¸…ç†</h1><p>ğŸ“Œ <code>pytest_configure()</code> å’Œ <code>pytest_unconfigure()</code> é€‚ç”¨äºå…¨å±€é…ç½®å’Œæµ‹è¯•ç»“æŸåæ¸…ç†èµ„æºã€‚</p><p>ã€‚</p><p>ğŸ”¹ ç¤ºä¾‹ï¼šæµ‹è¯•å¼€å§‹æ—¶è¿æ¥æ•°æ®åº“ï¼Œæµ‹è¯•ç»“æŸåæ–­å¼€</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># conftest.py</span><br><span class="hljs-keyword">import</span> pytest<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">pytest_configure</span>(<span class="hljs-params">config</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\nğŸ”— è¿æ¥æ•°æ®åº“...&quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">pytest_unconfigure</span>(<span class="hljs-params">config</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\nâŒ æ–­å¼€æ•°æ®åº“è¿æ¥...&quot;</span>)<br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ è¿è¡Œè¾“å‡º</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">ğŸ”— è¿æ¥æ•°æ®åº“...<br>âœ… è¿è¡Œæµ‹è¯•...<br>âŒ æ–­å¼€æ•°æ®åº“è¿æ¥...<br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ é€‚ç”¨äº</p><p>âœ… å…¨å±€èµ„æºåˆå§‹åŒ–</p><p>âœ… æ—¥å¿—è®°å½•</p><p>âœ… è®¾ç½®å…¨å±€å˜é‡</p><h1 id="pytest-runtest-setup-pytest-runtest-teardownï¼šæµ‹è¯•å‡½æ•°å‰åç½®"><a href="#pytest-runtest-setup-pytest-runtest-teardownï¼šæµ‹è¯•å‡½æ•°å‰åç½®" class="headerlink" title="pytest_runtest_setup &amp; pytest_runtest_teardownï¼šæµ‹è¯•å‡½æ•°å‰åç½®"></a>pytest_runtest_setup &amp; pytest_runtest_teardownï¼šæµ‹è¯•å‡½æ•°å‰åç½®</h1><p>ğŸ“Œ é€‚ç”¨äºæµ‹è¯•çº§åˆ«çš„å‰åç½®é€»è¾‘ï¼Œæ¯”å¦‚ï¼š</p><p>âœ…æ‰“å¼€å’Œå…³é—­æ•°æ®åº“è¿æ¥</p><p>âœ…åˆå§‹åŒ–æµ‹è¯•æ•°æ®</p><p>âœ…æ¨¡æ‹Ÿç”¨æˆ·ç™»å½•</p><p>ğŸ”¹ ç¤ºä¾‹ï¼šæµ‹è¯•å¼€å§‹å‰åˆå§‹åŒ–ï¼Œç»“æŸåæ¸…ç†</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># conftest.py</span><br><span class="hljs-keyword">import</span> pytest<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">pytest_runtest_setup</span>(<span class="hljs-params">item</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nğŸ”§ è®¾ç½®æµ‹è¯•ç¯å¢ƒ: <span class="hljs-subst">&#123;item.name&#125;</span>&quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">pytest_runtest_teardown</span>(<span class="hljs-params">item</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nğŸ—‘ï¸ æ¸…ç†æµ‹è¯•ç¯å¢ƒ: <span class="hljs-subst">&#123;item.name&#125;</span>&quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_example</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;âœ… è¿è¡Œ test_example&quot;</span>)<br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ è¿è¡Œè¾“å‡º</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">ğŸ”§ è®¾ç½®æµ‹è¯•ç¯å¢ƒ: test_example<br>âœ… è¿è¡Œ test_example<br>ğŸ—‘ï¸ æ¸…ç†æµ‹è¯•ç¯å¢ƒ: test_example<br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ é€‚ç”¨äº</p><p>âœ…æµ‹è¯•å‰åˆ›å»ºæ•°æ®åº“è¡¨</p><p>âœ…æµ‹è¯•ååˆ é™¤æ–‡ä»¶</p><h1 id="pytest-collection-modifyitemsï¼šä¿®æ”¹æµ‹è¯•ç”¨ä¾‹"><a href="#pytest-collection-modifyitemsï¼šä¿®æ”¹æµ‹è¯•ç”¨ä¾‹" class="headerlink" title="pytest_collection_modifyitemsï¼šä¿®æ”¹æµ‹è¯•ç”¨ä¾‹"></a>pytest_collection_modifyitemsï¼šä¿®æ”¹æµ‹è¯•ç”¨ä¾‹</h1><p>ğŸ“Œ å¯ä»¥ç”¨äºï¼š</p><p>âœ…é‡å‘½åæµ‹è¯•ï¼ˆæ·»åŠ å‰ç¼€ã€è½¬æ¢ç¼–ç ï¼‰</p><p>âœ…è‡ªåŠ¨è·³è¿‡ç‰¹å®šæµ‹è¯•</p><p>âœ…æŒ‰å…³é”®å­—æ’åºæµ‹è¯•</p><p>ğŸ”¹ ç¤ºä¾‹ï¼šä¿®æ”¹æµ‹è¯•åç§°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># conftest.py</span><br><span class="hljs-keyword">import</span> pytest<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">pytest_collection_modifyitems</span>(<span class="hljs-params">items</span>):<br>    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> items:<br>        item.name = item.name.upper()  <span class="hljs-comment"># æŠŠæµ‹è¯•åç§°æ”¹ä¸ºå¤§å†™</span><br>        item._nodeid = item.nodeid.upper()<br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ è¿è¡Œ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">pytest -v<br><br></code></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">test_example.py::TEST_EXAMPLE âœ…<br></code></pre></td></tr></table></figure><p>ğŸ“Œ é€‚ç”¨äº</p><p>âœ…è‡ªåŠ¨ç¿»è¯‘æµ‹è¯•åç§°</p><p>âœ…ä¿®æ”¹æµ‹è¯•è¿è¡Œé¡ºåº</p><h1 id="pytest-addoptionï¼šæ·»åŠ å‘½ä»¤è¡Œå‚æ•°"><a href="#pytest-addoptionï¼šæ·»åŠ å‘½ä»¤è¡Œå‚æ•°" class="headerlink" title="pytest_addoptionï¼šæ·»åŠ å‘½ä»¤è¡Œå‚æ•°"></a>pytest_addoptionï¼šæ·»åŠ å‘½ä»¤è¡Œå‚æ•°</h1><p>ğŸ“Œ è‡ªå®šä¹‰ pytest å‘½ä»¤è¡Œå‚æ•°ï¼Œå¯ç”¨äºï¼š</p><p>âœ…é€‰æ‹©æµ‹è¯•ç¯å¢ƒ</p><p>âœ…å¼€å¯æˆ–å…³é—­è°ƒè¯•æ¨¡å¼</p><p>âœ…ä¼ é€’æµ‹è¯•æ•°æ®</p><p>ğŸ”¹ ç¤ºä¾‹ï¼šæ·»åŠ  â€“env é€‰é¡¹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># conftest.py</span><br><span class="hljs-keyword">import</span> pytest<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">pytest_addoption</span>(<span class="hljs-params">parser</span>):<br>    parser.addoption(<span class="hljs-string">&quot;--env&quot;</span>, action=<span class="hljs-string">&quot;store&quot;</span>, default=<span class="hljs-string">&quot;test&quot;</span>, <span class="hljs-built_in">help</span>=<span class="hljs-string">&quot;é€‰æ‹©ç¯å¢ƒ: dev, test, prod&quot;</span>)<br><br><span class="hljs-meta">@pytest.fixture</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">env</span>(<span class="hljs-params">pytestconfig</span>):<br>    <span class="hljs-keyword">return</span> pytestconfig.getoption(<span class="hljs-string">&quot;--env&quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_env</span>(<span class="hljs-params">env</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;âœ… å½“å‰ç¯å¢ƒ: <span class="hljs-subst">&#123;env&#125;</span>&quot;</span>)<br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ è¿è¡Œä¸åŒç¯å¢ƒ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">pytest test_env.py --<span class="hljs-built_in">env</span>=dev  âœ… è¿è¡Œå¼€å‘ç¯å¢ƒ<br>pytest test_env.py --<span class="hljs-built_in">env</span>=prod âœ… è¿è¡Œç”Ÿäº§ç¯å¢ƒ<br></code></pre></td></tr></table></figure><h1 id="pytest-terminal-summaryï¼šè‡ªå®šä¹‰æµ‹è¯•æŠ¥å‘Š"><a href="#pytest-terminal-summaryï¼šè‡ªå®šä¹‰æµ‹è¯•æŠ¥å‘Š" class="headerlink" title="pytest_terminal_summaryï¼šè‡ªå®šä¹‰æµ‹è¯•æŠ¥å‘Š"></a>pytest_terminal_summaryï¼šè‡ªå®šä¹‰æµ‹è¯•æŠ¥å‘Š</h1><p>ğŸ“Œ pytest_terminal_summary() å¯ç”¨äºè‡ªå®šä¹‰æµ‹è¯•æŠ¥å‘Šï¼Œæ¯”å¦‚ï¼š</p><p>âœ…ç»Ÿè®¡é€šè¿‡&#x2F;å¤±è´¥çš„æµ‹è¯•</p><p>âœ…ç”Ÿæˆ HTML&#x2F;CSV æŠ¥å‘Š</p><p>âœ…åœ¨æµ‹è¯•å®Œæˆåå‘é€é‚®ä»¶é€šçŸ¥</p><p>ğŸ”¹ ç¤ºä¾‹ï¼šç»Ÿè®¡å¤±è´¥çš„æµ‹è¯•</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># conftest.py</span><br><span class="hljs-keyword">import</span> pytest<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">pytest_terminal_summary</span>(<span class="hljs-params">terminalreporter</span>):<br>    total = terminalreporter.stats.get(<span class="hljs-string">&quot;passed&quot;</span>, [])<br>    failed = terminalreporter.stats.get(<span class="hljs-string">&quot;failed&quot;</span>, [])<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nâœ… é€šè¿‡æµ‹è¯•: <span class="hljs-subst">&#123;<span class="hljs-built_in">len</span>(total)&#125;</span>&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;âŒ å¤±è´¥æµ‹è¯•: <span class="hljs-subst">&#123;<span class="hljs-built_in">len</span>(failed)&#125;</span>&quot;</span>)<br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ è¿è¡Œ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">pytest<br></code></pre></td></tr></table></figure><p>ğŸ“Œ ç¤ºä¾‹è¾“å‡º</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">âœ… é€šè¿‡æµ‹è¯•: <span class="hljs-number">3</span><br>âŒ å¤±è´¥æµ‹è¯•: <span class="hljs-number">1</span><br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ é€‚ç”¨äº</p><p>âœ… CI&#x2F;CD æŠ¥å‘Š</p><p>âœ… ç»Ÿè®¡æµ‹è¯•ç»“æœ</p><p>âœ… è‡ªåŠ¨åŒ–é‚®ä»¶é€šçŸ¥</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>ä¸Šé¢åªæ˜¯æä¾›äº†ä¸€äº›ç»å¸¸é‡è§çš„ï¼Œåé¢æœ‰æ—¶é—´ç»§ç»­è¡¥å……å…¶ä»–çš„æ¡ˆä¾‹ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Pytest</category>
      
      <category>Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„hooksåŠŸèƒ½</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>pytest</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„conftest.py</title>
    <link href="/2025/03/21/pytest%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%976/"/>
    <url>/2025/03/21/pytest%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%976/</url>
    
    <content type="html"><![CDATA[<h1 id="Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„conftest-py"><a href="#Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„conftest-py" class="headerlink" title="Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„conftest.py"></a>Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„conftest.py</h1><p><code>pytest</code> çš„æœ¬åœ°æ’ä»¶ç³»ç»Ÿæ ¸å¿ƒæ–‡ä»¶ï¼Œç”¨äºï¼š<br>âœ… å®šä¹‰æµ‹è¯•å¤¹å…·ï¼ˆ<code>fixtures</code>ï¼‰<br>âœ… å®ç°è‡ªå®šä¹‰ <code>hooks</code><br>âœ… åŠ è½½å¤–éƒ¨æ’ä»¶<br>âœ… é…ç½®æµ‹è¯•ç¯å¢ƒ</p><p>ğŸ“Œ ç‰¹æ€§ï¼šç›®å½•çº§ä½œç”¨åŸŸï¼Œæ”¯æŒåµŒå¥—é…ç½®</p><h1 id="åŸºç¡€ç”¨æ³•"><a href="#åŸºç¡€ç”¨æ³•" class="headerlink" title="åŸºç¡€ç”¨æ³•"></a>åŸºç¡€ç”¨æ³•</h1><h2 id="åˆ›å»ºfixture"><a href="#åˆ›å»ºfixture" class="headerlink" title="åˆ›å»ºfixture"></a>åˆ›å»ºfixture</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># tests/conftest.py</span><br><span class="hljs-meta">@pytest.fixture</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">user_data</span>():<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    åŸºç¡€ç”¨æˆ·æ•°æ®å¤¹å…·ï¼ˆå‡½æ•°ä½œç”¨åŸŸï¼‰</span><br><span class="hljs-string">    æ¯æ¬¡æµ‹è¯•å‡½æ•°è°ƒç”¨æ—¶éƒ½ä¼šé‡æ–°åˆå§‹åŒ–</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n[åˆå§‹åŒ–] åˆ›å»ºç”¨æˆ·æ•°æ®...&quot;</span>)<br>    data = &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">30</span>, <span class="hljs-string">&quot;email&quot;</span>: <span class="hljs-string">&quot;alice@example.com&quot;</span>&#125;<br>    <span class="hljs-keyword">yield</span> data  <span class="hljs-comment"># æµ‹è¯•ç”¨ä¾‹è·å–æ•°æ®çš„èŠ‚ç‚¹</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n[æ¸…ç†] æ¸…é™¤ç”¨æˆ·æ•°æ®...&quot;</span>)  <span class="hljs-comment"># æµ‹è¯•å®Œæˆåæ‰§è¡Œ</span><br><br><span class="hljs-comment"># tests/test_basic.py</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_user_age</span>(<span class="hljs-params">user_data</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;éªŒè¯ç”¨æˆ·å¹´é¾„æ˜¯å¦åˆæ³•&quot;&quot;&quot;</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;æµ‹è¯•æ•°æ®ï¼š<span class="hljs-subst">&#123;user_data&#125;</span>&quot;</span>)  <span class="hljs-comment"># æ‰“å°æµ‹è¯•æ•°æ®</span><br>    <span class="hljs-keyword">assert</span> user_data[<span class="hljs-string">&quot;age&quot;</span>] &gt;= <span class="hljs-number">18</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_user_email</span>(<span class="hljs-params">user_data</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;éªŒè¯é‚®ç®±æ ¼å¼&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">assert</span> <span class="hljs-string">&quot;@&quot;</span> <span class="hljs-keyword">in</span> user_data[<span class="hljs-string">&quot;email&quot;</span>]<br></code></pre></td></tr></table></figure><p>ğŸ” æ‰§è¡Œè¿‡ç¨‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">test_basic.py::test_user_age <br>[åˆå§‹åŒ–] åˆ›å»ºç”¨æˆ·æ•°æ®...<br>æµ‹è¯•æ•°æ®ï¼š&#123;<span class="hljs-string">&#x27;name&#x27;</span>: <span class="hljs-string">&#x27;Alice&#x27;</span>, <span class="hljs-string">&#x27;age&#x27;</span>: 30, <span class="hljs-string">&#x27;email&#x27;</span>: <span class="hljs-string">&#x27;alice@example.com&#x27;</span>&#125;<br>PASSED<br>[æ¸…ç†] æ¸…é™¤ç”¨æˆ·æ•°æ®...<br><br>test_basic.py::test_user_email <br>[åˆå§‹åŒ–] åˆ›å»ºç”¨æˆ·æ•°æ®...<br>PASSED<br>[æ¸…ç†] æ¸…é™¤ç”¨æˆ·æ•°æ®...<br><br></code></pre></td></tr></table></figure><h2 id="å…±äº«-fixture"><a href="#å…±äº«-fixture" class="headerlink" title="å…±äº« fixture"></a>å…±äº« fixture</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># tests/conftest.py</span><br><span class="hljs-meta">@pytest.fixture</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">shared_resource</span>():<br>    <span class="hljs-string">&quot;&quot;&quot;è·¨å¤šä¸ªæµ‹è¯•æ–‡ä»¶å…±äº«çš„èµ„æº&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">return</span> &#123;<span class="hljs-string">&quot;counter&quot;</span>: <span class="hljs-number">0</span>&#125;<br><br><span class="hljs-comment"># test_file1.py</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_counter_1</span>(<span class="hljs-params">shared_resource</span>):<br>    shared_resource[<span class="hljs-string">&quot;counter&quot;</span>] += <span class="hljs-number">1</span><br>    <span class="hljs-keyword">assert</span> shared_resource[<span class="hljs-string">&quot;counter&quot;</span>] == <span class="hljs-number">1</span><br><br><span class="hljs-comment"># test_file2.py </span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_counter_2</span>(<span class="hljs-params">shared_resource</span>):<br>    <span class="hljs-keyword">assert</span> shared_resource[<span class="hljs-string">&quot;counter&quot;</span>] == <span class="hljs-number">0</span>  <span class="hljs-comment"># å‡½æ•°ä½œç”¨åŸŸé‡ç½®</span><br></code></pre></td></tr></table></figure><p>ğŸ” å¯ä»¥çœ‹å‡ºä¸ç®¡åœ¨test_file1è¿˜æ˜¯test_file2ä¸­è¿è¡Œå‡å¯ä»¥å¾—åˆ°è¯¥å€¼</p><h1 id="ä¸­çº§ç”¨æ³•"><a href="#ä¸­çº§ç”¨æ³•" class="headerlink" title="ä¸­çº§ç”¨æ³•"></a>ä¸­çº§ç”¨æ³•</h1><h2 id="ä½œç”¨åŸŸæ§åˆ¶"><a href="#ä½œç”¨åŸŸæ§åˆ¶" class="headerlink" title="ä½œç”¨åŸŸæ§åˆ¶"></a>ä½œç”¨åŸŸæ§åˆ¶</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># tests/conftest.py</span><br><span class="hljs-meta">@pytest.fixture(<span class="hljs-params">scope=<span class="hljs-string">&quot;module&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">db_connection</span>():<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    æ•°æ®åº“è¿æ¥å¤¹å…·ï¼ˆæ¨¡å—çº§ä½œç”¨åŸŸï¼‰</span><br><span class="hljs-string">    æ•´ä¸ªæµ‹è¯•æ¨¡å—å…±äº«åŒä¸€ä¸ªè¿æ¥</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n=== å»ºç«‹æ•°æ®åº“è¿æ¥ ===&quot;</span>)<br>    conn = &#123;<span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;connected&quot;</span>, <span class="hljs-string">&quot;handle&quot;</span>: <span class="hljs-string">&quot;DB12345&quot;</span>&#125;<br>    <span class="hljs-keyword">yield</span> conn<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n=== å…³é—­æ•°æ®åº“è¿æ¥ ===&quot;</span>)<br><br><span class="hljs-comment"># tests/test_database.py</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_query_1</span>(<span class="hljs-params">db_connection</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;æ‰§è¡Œç¬¬ä¸€ä¸ªæŸ¥è¯¢&quot;&quot;&quot;</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å½“å‰è¿æ¥ï¼š<span class="hljs-subst">&#123;db_connection&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">assert</span> db_connection[<span class="hljs-string">&quot;status&quot;</span>] == <span class="hljs-string">&quot;connected&quot;</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_query_2</span>(<span class="hljs-params">db_connection</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;æ‰§è¡Œç¬¬äºŒä¸ªæŸ¥è¯¢&quot;&quot;&quot;</span><br>    db_connection[<span class="hljs-string">&quot;last_query&quot;</span>] = <span class="hljs-string">&quot;SELECT * FROM users&quot;</span><br>    <span class="hljs-keyword">assert</span> <span class="hljs-string">&quot;last_query&quot;</span> <span class="hljs-keyword">in</span> db_connection<br><br></code></pre></td></tr></table></figure><p>ğŸ” æ‰§è¡Œç»“æœ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">test_database.py::test_query_1 <br>=== å»ºç«‹æ•°æ®åº“è¿æ¥ ===<br>å½“å‰è¿æ¥ï¼š&#123;<span class="hljs-string">&#x27;status&#x27;</span>: <span class="hljs-string">&#x27;connected&#x27;</span>, <span class="hljs-string">&#x27;handle&#x27;</span>: <span class="hljs-string">&#x27;DB12345&#x27;</span>&#125;<br>PASSED<br><br>test_database.py::test_query_2 <br>PASSED<br>=== å…³é—­æ•°æ®åº“è¿æ¥ ===<br><br></code></pre></td></tr></table></figure><h2 id="å‚æ•°åŒ–-fixture"><a href="#å‚æ•°åŒ–-fixture" class="headerlink" title="å‚æ•°åŒ– fixture"></a>å‚æ•°åŒ– fixture</h2><p>ğŸ“Œ å¤šæµè§ˆå™¨æµ‹è¯•</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># tests/conftest.py</span><br><span class="hljs-meta">@pytest.fixture(<span class="hljs-params">params=[<span class="hljs-string">&quot;chrome&quot;</span>, <span class="hljs-string">&quot;firefox&quot;</span>, <span class="hljs-string">&quot;edge&quot;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">browser</span>(<span class="hljs-params">request</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    å‚æ•°åŒ–æµè§ˆå™¨é©±åŠ¨</span><br><span class="hljs-string">    æ¯ä¸ªå‚æ•°å€¼éƒ½ä¼šç”Ÿæˆç‹¬ç«‹çš„æµ‹è¯•ç”¨ä¾‹</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nå¯åŠ¨ <span class="hljs-subst">&#123;request.param&#125;</span> æµè§ˆå™¨&quot;</span>)<br>    driver = &#123;<br>        <span class="hljs-string">&quot;type&quot;</span>: request.param,<br>        <span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;ready&quot;</span>,<br>        <span class="hljs-string">&quot;version&quot;</span>: <span class="hljs-string">&quot;102.0&quot;</span><br>    &#125;<br>    <span class="hljs-keyword">yield</span> driver<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nå…³é—­ <span class="hljs-subst">&#123;request.param&#125;</span> æµè§ˆå™¨&quot;</span>)<br><br><span class="hljs-comment"># tests/test_browser.py</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_browser_init</span>(<span class="hljs-params">browser</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;éªŒè¯æµè§ˆå™¨åˆå§‹åŒ–çŠ¶æ€&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">assert</span> browser[<span class="hljs-string">&quot;status&quot;</span>] == <span class="hljs-string">&quot;ready&quot;</span><br>    <span class="hljs-keyword">assert</span> browser[<span class="hljs-string">&quot;version&quot;</span>] == <span class="hljs-string">&quot;102.0&quot;</span><br><br></code></pre></td></tr></table></figure><p>ğŸ” æ‰§è¡Œç»“æœ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash">test_browser.py::test_browser_init[chrome] <br>å¯åŠ¨ chrome æµè§ˆå™¨<br>PASSED<br>å…³é—­ chrome æµè§ˆå™¨<br><br>test_browser.py::test_browser_init[firefox] <br>å¯åŠ¨ firefox æµè§ˆå™¨<br>PASSED<br>å…³é—­ firefox æµè§ˆå™¨<br><br>test_browser.py::test_browser_init[edge] <br>å¯åŠ¨ edge æµè§ˆå™¨<br>PASSED<br>å…³é—­ edge æµè§ˆå™¨<br><br></code></pre></td></tr></table></figure><h2 id="è‡ªåŠ¨å¤¹å…·"><a href="#è‡ªåŠ¨å¤¹å…·" class="headerlink" title="è‡ªåŠ¨å¤¹å…·"></a>è‡ªåŠ¨å¤¹å…·</h2><p>ğŸ“Œ å…¨å±€ç¯å¢ƒè®¾ç½®</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># tests/conftest.py</span><br><span class="hljs-meta">@pytest.fixture(<span class="hljs-params">autouse=<span class="hljs-literal">True</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">global_setup</span>():<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    è‡ªåŠ¨åº”ç”¨çš„å…¨å±€è®¾ç½®å¤¹å…·</span><br><span class="hljs-string">    æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹éƒ½ä¼šè‡ªåŠ¨ä½¿ç”¨</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n--- å…¨å±€å‰ç½®æ“ä½œ ---&quot;</span>)<br>    <span class="hljs-keyword">yield</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n--- å…¨å±€åç½®æ“ä½œ ---&quot;</span>)<br><br><span class="hljs-comment"># tests/test_auto.py</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_sample_1</span>():<br>    <span class="hljs-string">&quot;&quot;&quot;ç®€å•æµ‹è¯•ç¤ºä¾‹1&quot;&quot;&quot;</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æ‰§è¡Œæµ‹è¯•1&quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_sample_2</span>():<br>    <span class="hljs-string">&quot;&quot;&quot;ç®€å•æµ‹è¯•ç¤ºä¾‹2&quot;&quot;&quot;</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æ‰§è¡Œæµ‹è¯•2&quot;</span>)<br><br></code></pre></td></tr></table></figure><p>ğŸ” æ‰§è¡Œç»“æœ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">test_auto.py::test_sample_1 <br>--- å…¨å±€å‰ç½®æ“ä½œ ---<br>æ‰§è¡Œæµ‹è¯•1<br>PASSED<br>--- å…¨å±€åç½®æ“ä½œ ---<br><br>test_auto.py::test_sample_2 <br>--- å…¨å±€å‰ç½®æ“ä½œ ---<br>æ‰§è¡Œæµ‹è¯•2<br>PASSED<br>--- å…¨å±€åç½®æ“ä½œ ---<br></code></pre></td></tr></table></figure><h1 id="é«˜çº§ç”¨æ³•"><a href="#é«˜çº§ç”¨æ³•" class="headerlink" title="é«˜çº§ç”¨æ³•"></a>é«˜çº§ç”¨æ³•</h1><h2 id="åŠ¨æ€é…ç½®"><a href="#åŠ¨æ€é…ç½®" class="headerlink" title="åŠ¨æ€é…ç½®"></a>åŠ¨æ€é…ç½®</h2><p>ğŸ“Œ ç¯å¢ƒå˜é‡æ³¨å…¥</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># tests/conftest.py</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">pytest_addoption</span>(<span class="hljs-params">parser</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;æ·»åŠ è‡ªå®šä¹‰å‘½ä»¤è¡Œå‚æ•°&quot;&quot;&quot;</span><br>    parser.addoption(<span class="hljs-string">&quot;--env&quot;</span>, <br>                   action=<span class="hljs-string">&quot;store&quot;</span>,<br>                   default=<span class="hljs-string">&quot;dev&quot;</span>,<br>                   choices=[<span class="hljs-string">&quot;dev&quot;</span>, <span class="hljs-string">&quot;staging&quot;</span>, <span class="hljs-string">&quot;prod&quot;</span>],<br>                   <span class="hljs-built_in">help</span>=<span class="hljs-string">&quot;è®¾ç½®è¿è¡Œç¯å¢ƒ&quot;</span>)<br><br><span class="hljs-meta">@pytest.fixture(<span class="hljs-params">scope=<span class="hljs-string">&quot;session&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">api_config</span>(<span class="hljs-params">request</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;æ ¹æ®ç¯å¢ƒå‚æ•°ç”Ÿæˆé…ç½®&quot;&quot;&quot;</span><br>    env = request.config.getoption(<span class="hljs-string">&quot;--env&quot;</span>)<br>    configs = &#123;<br>        <span class="hljs-string">&quot;dev&quot;</span>: &#123;<span class="hljs-string">&quot;url&quot;</span>: <span class="hljs-string">&quot;https://dev.api.com&quot;</span>, <span class="hljs-string">&quot;timeout&quot;</span>: <span class="hljs-number">5</span>&#125;,<br>        <span class="hljs-string">&quot;staging&quot;</span>: &#123;<span class="hljs-string">&quot;url&quot;</span>: <span class="hljs-string">&quot;https://stage.api.com&quot;</span>, <span class="hljs-string">&quot;timeout&quot;</span>: <span class="hljs-number">10</span>&#125;,<br>        <span class="hljs-string">&quot;prod&quot;</span>: &#123;<span class="hljs-string">&quot;url&quot;</span>: <span class="hljs-string">&quot;https://api.com&quot;</span>, <span class="hljs-string">&quot;timeout&quot;</span>: <span class="hljs-number">15</span>&#125;<br>    &#125;<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nåŠ è½½ <span class="hljs-subst">&#123;env&#125;</span> ç¯å¢ƒé…ç½®&quot;</span>)<br>    <span class="hljs-keyword">return</span> configs[env]<br><br><span class="hljs-comment"># tests/test_api.py</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_api_endpoint</span>(<span class="hljs-params">api_config</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;éªŒè¯æ¥å£åœ°å€&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">assert</span> api_config[<span class="hljs-string">&quot;url&quot;</span>].startswith(<span class="hljs-string">&quot;https://&quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_timeout_setting</span>(<span class="hljs-params">api_config</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;éªŒè¯è¶…æ—¶è®¾ç½®&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">assert</span> api_config[<span class="hljs-string">&quot;timeout&quot;</span>] &gt; <span class="hljs-number">0</span><br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ â€Œæ‰§è¡Œå‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pytest --<span class="hljs-built_in">env</span>=prod tests/test_api.py -v<br></code></pre></td></tr></table></figure><p>ğŸ” æ‰§è¡Œç»“æœ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">åŠ è½½ prod ç¯å¢ƒé…ç½®<br>test_api.py::test_api_endpoint PASSED<br>test_api.py::test_timeout_setting PASSED<br><br></code></pre></td></tr></table></figure><h2 id="è‡ªå®šä¹‰-hooks"><a href="#è‡ªå®šä¹‰-hooks" class="headerlink" title="è‡ªå®šä¹‰ hooks"></a>è‡ªå®šä¹‰ hooks</h2><p>ğŸ“Œ  è¿™é‡Œä¸åšæ·±åˆ»çš„è§£é‡Šï¼Œhooks ä¼šå•ç‹¬ç« èŠ‚è®²è§£</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># tests/conftest.py</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">pytest_runtest_setup</span>(<span class="hljs-params">item</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;åœ¨æ¯ä¸ªæµ‹è¯•æ‰§è¡Œå‰æ·»åŠ è‡ªå®šä¹‰é€»è¾‘&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;slow&quot;</span> <span class="hljs-keyword">in</span> item.keywords:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\næ£€æµ‹åˆ°æ…¢é€Ÿæµ‹è¯•ï¼Œå¼€å§‹ç›‘æ§èµ„æº...&quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">pytest_configure</span>(<span class="hljs-params">config</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;é…ç½®é˜¶æ®µæ·»åŠ è‡ªå®šä¹‰æ ‡è®°&quot;&quot;&quot;</span><br>    config.addinivalue_line(<br>        <span class="hljs-string">&quot;markers&quot;</span>,<br>        <span class="hljs-string">&quot;stress: å‹åŠ›æµ‹è¯•æ ‡è®°&quot;</span><br>    )<br></code></pre></td></tr></table></figure><h1 id="å·¥å‚æ¨¡å¼"><a href="#å·¥å‚æ¨¡å¼" class="headerlink" title="å·¥å‚æ¨¡å¼"></a>å·¥å‚æ¨¡å¼</h1><h2 id="ç”¨æˆ·å¯¹è±¡å·¥å‚"><a href="#ç”¨æˆ·å¯¹è±¡å·¥å‚" class="headerlink" title="ç”¨æˆ·å¯¹è±¡å·¥å‚"></a>ç”¨æˆ·å¯¹è±¡å·¥å‚</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># tests/conftest.py</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">UserFactory</span>:<br>    <span class="hljs-string">&quot;&quot;&quot;å¯å®šåˆ¶çš„ç”¨æˆ·å¯¹è±¡å·¥å‚&quot;&quot;&quot;</span><br><span class="hljs-meta">    @pytest.fixture</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">create_user</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;ç”¨æˆ·åˆ›å»ºæ¨¡æ¿&quot;&quot;&quot;</span><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">_factory</span>(<span class="hljs-params">**overrides</span>):<br>            base_user = &#123;<br>                <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">1000</span>,<br>                <span class="hljs-string">&quot;username&quot;</span>: <span class="hljs-string">&quot;default_user&quot;</span>,<br>                <span class="hljs-string">&quot;role&quot;</span>: <span class="hljs-string">&quot;member&quot;</span>,<br>                <span class="hljs-string">&quot;active&quot;</span>: <span class="hljs-literal">True</span><br>            &#125;<br>            <span class="hljs-keyword">return</span> &#123;zwnj;**base_user, **zwnj;overrides&#125;<br>        <span class="hljs-keyword">return</span> _factory<br><br><span class="hljs-meta">@pytest.fixture</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">user_factory</span>():<br>    <span class="hljs-keyword">return</span> UserFactory()<br><br><span class="hljs-comment"># tests/test_factory.py</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_admin_user</span>(<span class="hljs-params">user_factory</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;åˆ›å»ºç®¡ç†å‘˜ç”¨æˆ·&quot;&quot;&quot;</span><br>    admin = user_factory.create_user(<br>        username=<span class="hljs-string">&quot;admin&quot;</span>,<br>        role=<span class="hljs-string">&quot;admin&quot;</span><br>    )<br>    <span class="hljs-keyword">assert</span> admin[<span class="hljs-string">&quot;role&quot;</span>] == <span class="hljs-string">&quot;admin&quot;</span><br>    <span class="hljs-keyword">assert</span> admin[<span class="hljs-string">&quot;id&quot;</span>] == <span class="hljs-number">1000</span>  <span class="hljs-comment"># ç»§æ‰¿é»˜è®¤å€¼</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_inactive_user</span>(<span class="hljs-params">user_factory</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;åˆ›å»ºç¦ç”¨ç”¨æˆ·&quot;&quot;&quot;</span><br>    user = user_factory.create_user(active=<span class="hljs-literal">False</span>)<br>    <span class="hljs-keyword">assert</span> user[<span class="hljs-string">&quot;active&quot;</span>] <span class="hljs-keyword">is</span> <span class="hljs-literal">False</span><br><br></code></pre></td></tr></table></figure><p>ğŸ” æ‰§è¡Œç»“æœ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">test_factory.py::test_admin_user PASSED<br>test_factory.py::test_inactive_user PASSED<br></code></pre></td></tr></table></figure><h1 id="å®è·µæ€»ç»“"><a href="#å®è·µæ€»ç»“" class="headerlink" title="å®è·µæ€»ç»“"></a>å®è·µæ€»ç»“</h1><h2 id="åˆ†å±‚é…ç½®"><a href="#åˆ†å±‚é…ç½®" class="headerlink" title="åˆ†å±‚é…ç½®"></a>åˆ†å±‚é…ç½®</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs text">project/<br>â”œâ”€â”€ conftest.py          # å…¨å±€åŸºç¡€å¤¹å…·<br>â”‚   â”œâ”€â”€ æ•°æ®åº“è¿æ¥æ± <br>â”‚   â””â”€â”€ é…ç½®åŠ è½½å™¨<br>â”œâ”€â”€ tests/<br>â”‚   â”œâ”€â”€ api/<br>â”‚   â”‚   â””â”€â”€ conftest.py  # APIæµ‹è¯•ä¸“ç”¨å¤¹å…·<br>â”‚   â”‚       â”œâ”€â”€ è®¤è¯ä»¤ç‰Œ<br>â”‚   â”‚       â””â”€â”€ è¯·æ±‚å®¢æˆ·ç«¯<br>â”‚   â””â”€â”€ ui/<br>â”‚       â””â”€â”€ conftest.py  # ç•Œé¢æµ‹è¯•ä¸“ç”¨<br>â”‚           â”œâ”€â”€ æµè§ˆå™¨ç®¡ç†<br>â”‚           â””â”€â”€ é¡µé¢å¯¹è±¡<br>â””â”€â”€ pytest.ini<br><br></code></pre></td></tr></table></figure><h2 id="å¤¹å…·ä¾èµ–å›¾"><a href="#å¤¹å…·ä¾èµ–å›¾" class="headerlink" title="å¤¹å…·ä¾èµ–å›¾"></a>å¤¹å…·ä¾èµ–å›¾</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># å…¸å‹ä¾èµ–å…³ç³»ç¤ºä¾‹</span><br><span class="hljs-meta">@pytest.fixture</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">api_client</span>(<span class="hljs-params">config</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;ä¾èµ–é…ç½®çš„APIå®¢æˆ·ç«¯&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">return</span> APIClient(config[<span class="hljs-string">&quot;url&quot;</span>])<br><br><span class="hljs-meta">@pytest.fixture</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">auth_token</span>(<span class="hljs-params">api_client</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;ä¾èµ–APIå®¢æˆ·ç«¯çš„è®¤è¯ä»¤ç‰Œ&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">return</span> api_client.login()<br><br><span class="hljs-meta">@pytest.fixture</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">user_profile</span>(<span class="hljs-params">auth_token, api_client</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;å¤åˆä¾èµ–çš„ç”¨æˆ·æ¡£æ¡ˆ&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">return</span> api_client.get_profile(auth_token)<br></code></pre></td></tr></table></figure><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>é€šè¿‡åˆç†ä½¿ç”¨ <code>conftest.py</code>ï¼Œå¯ä»¥å®ç°å¾ˆå¤šå¤æ‚çš„ç®¡ç†ä»¥åŠæµ‹è¯•é€»è¾‘çš„é«˜åº¦å¤ç”¨</p>]]></content>
    
    
    <categories>
      
      <category>Pytest</category>
      
      <category>Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„conftest.py</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>pytest</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„inié…ç½®æ–‡ä»¶</title>
    <link href="/2025/03/21/pytest%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%975/"/>
    <url>/2025/03/21/pytest%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%975/</url>
    
    <content type="html"><![CDATA[<h1 id="Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„inié…ç½®æ–‡ä»¶"><a href="#Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„inié…ç½®æ–‡ä»¶" class="headerlink" title="Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„inié…ç½®æ–‡ä»¶"></a>Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„inié…ç½®æ–‡ä»¶</h1><p><code>pytest</code> çš„ä¸»é…ç½®æ–‡ä»¶ï¼Œç”¨äºï¼š<br>âœ…è®¾ç½®é»˜è®¤å‘½ä»¤è¡Œé€‰é¡¹<br>âœ…é…ç½®æµ‹è¯•å‘ç°è§„åˆ™<br>âœ…å®šä¹‰å…¨å±€ <code>Fixture</code> å’Œæ’ä»¶<br>âœ… ç®¡ç†æµ‹è¯•ç¯å¢ƒå‚æ•°</p><h1 id="åŸºç¡€é…ç½®"><a href="#åŸºç¡€é…ç½®" class="headerlink" title="åŸºç¡€é…ç½®"></a>åŸºç¡€é…ç½®</h1><h2 id="æ–‡ä»¶ä½ç½®ä¸ç»“æ„"><a href="#æ–‡ä»¶ä½ç½®ä¸ç»“æ„" class="headerlink" title="æ–‡ä»¶ä½ç½®ä¸ç»“æ„"></a>æ–‡ä»¶ä½ç½®ä¸ç»“æ„</h2><p>ğŸ“Œ é¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ª<code>ini</code>æ–‡ä»¶ï¼Œå–åä¸º<code>pytest.ini</code></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-comment"># é¡¹ç›®æ ¹ç›®å½•åˆ›å»º pytest.ini</span><br><span class="hljs-section">[pytest]</span><br><span class="hljs-comment"># åŸºæœ¬é…ç½®é¡¹</span><br><span class="hljs-attr">addopts</span> = -v --tb=short<br><span class="hljs-attr">testpaths</span> = tests<br><span class="hljs-attr">python_files</span> = test_*.py<br></code></pre></td></tr></table></figure><p>ğŸ” éªŒè¯é…ç½®ç”Ÿæ•ˆï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pytest --<span class="hljs-built_in">help</span> | grep <span class="hljs-string">&quot;config file&quot;</span><br></code></pre></td></tr></table></figure><h2 id="æ ¸å¿ƒé…ç½®é¡¹"><a href="#æ ¸å¿ƒé…ç½®é¡¹" class="headerlink" title="æ ¸å¿ƒé…ç½®é¡¹"></a>æ ¸å¿ƒé…ç½®é¡¹</h2><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[pytest]</span><br><span class="hljs-comment"># é»˜è®¤å‘½ä»¤è¡Œå‚æ•°ï¼ˆå¤šä¸ªå€¼ç”¨ç©ºæ ¼åˆ†éš”ï¼‰</span><br>&quot;&quot;&quot;<br>-ra  æ˜¾ç¤ºæ‰€æœ‰æµ‹è¯•ç»“æœæ‘˜è¦  <br>-q ç²¾ç®€è¾“å‡ºæ¨¡å¼<br><span class="hljs-attr">--durations</span>=<span class="hljs-number">10</span>  <span class="hljs-comment"># æ˜¾ç¤ºæœ€æ…¢çš„10ä¸ªæµ‹è¯•</span><br><span class="hljs-attr">--junitxml</span>=reports/junit.xml  <span class="hljs-comment"># ç”ŸæˆJUnitæŠ¥å‘Š</span><br><span class="hljs-attr">--color</span>=<span class="hljs-literal">yes</span>  å¯ç”¨ç»ˆç«¯ä¿¡æ¯çš„å½©è‰²è¾“å‡º<br>&quot;&quot;&quot;<br><span class="hljs-attr">addopts</span> = -ra -q --durations=<span class="hljs-number">10</span> --junitxml=reports/junit.xml --color=<span class="hljs-literal">yes</span>  <br><span class="hljs-comment"># æµ‹è¯•æ–‡ä»¶åŒ¹é…è§„åˆ™</span><br><span class="hljs-attr">python_files</span> = test_*.py<br><span class="hljs-attr">python_classes</span> = Test* *Test<br><span class="hljs-attr">python_functions</span> = test_*<br><br><span class="hljs-comment"># æµ‹è¯•ç›®å½•ï¼ˆå¤šä¸ªç›®å½•ç”¨ç©ºæ ¼åˆ†éš”ï¼‰</span><br><span class="hljs-attr">testpaths</span> = tests/login tests/team<br><br><span class="hljs-comment"># æ’é™¤ç›®å½•ï¼ˆæ”¯æŒé€šé…ç¬¦ï¼‰</span><br><span class="hljs-attr">norecursedirs</span> = <br>    .git<br>    build<br>    dist<br>    legacy_*<br><br><span class="hljs-comment"># ç¦ç”¨è­¦å‘Š</span><br><span class="hljs-attr">filterwarnings</span> =<br>    ignore:.*deprecated.*:DeprecationWarning<br>    error<br></code></pre></td></tr></table></figure><h1 id="ä¸­çº§é…ç½®"><a href="#ä¸­çº§é…ç½®" class="headerlink" title="ä¸­çº§é…ç½®"></a>ä¸­çº§é…ç½®</h1><h2 id="è‡ªå®šä¹‰æ ‡è®°"><a href="#è‡ªå®šä¹‰æ ‡è®°" class="headerlink" title="è‡ªå®šä¹‰æ ‡è®°"></a>è‡ªå®šä¹‰æ ‡è®°</h2><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[pytest]</span><br>markers =<br>    <span class="hljs-comment"># å†’çƒŸæµ‹è¯•æ ‡è®°ï¼ˆå¯é€šè¿‡ -m smoke é€‰æ‹©ï¼‰</span><br>    smoke: å†’çƒŸæµ‹è¯•ï¼ˆæ¯æ—¥æ‰§è¡Œï¼‰<br>    <span class="hljs-comment"># æ•°æ®åº“æµ‹è¯•æ ‡è®°ï¼ˆè‡ªåŠ¨è·³è¿‡æ— DBç¯å¢ƒï¼‰</span><br>    db: éœ€è¦æ•°æ®åº“è¿æ¥çš„æµ‹è¯•<br>    <span class="hljs-comment"># æ€§èƒ½æµ‹è¯•æ ‡è®°ï¼ˆå•ç‹¬æ‰§è¡Œï¼‰</span><br>    performance: æ€§èƒ½æµ‹è¯•ï¼ˆå•ç‹¬æ‰§è¡Œï¼‰<br>    nightly: å¤œé—´æ‰§è¡Œçš„é•¿è€—æ—¶æµ‹è¯•<br>    <span class="hljs-comment"># è‡ªå®šä¹‰é‡è¯•æœºåˆ¶ï¼ˆéœ€é…åˆpytest-rerunfailuresæ’ä»¶ï¼‰</span><br>    flaky(<span class="hljs-attr">reruns</span>=<span class="hljs-number">2</span>, reruns_delay=<span class="hljs-number">1</span>): ä¸ç¨³å®šçš„æµ‹è¯•ç”¨ä¾‹<br></code></pre></td></tr></table></figure><p>ğŸ”¹ ç¤ºä¾‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">@pytest.mark.smoke</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_login</span>():<br>    <span class="hljs-string">&quot;&quot;&quot;æ ¸å¿ƒç™»å½•åŠŸèƒ½æµ‹è¯•&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">assert</span> auth.login() == <span class="hljs-number">200</span><br><br><span class="hljs-meta">@pytest.mark.db</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_user_query</span>():<br>    <span class="hljs-string">&quot;&quot;&quot;æ•°æ®åº“ç”¨æˆ·æŸ¥è¯¢æµ‹è¯•&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">assert</span> db.query_user(<span class="hljs-number">1</span>) <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span><br><br><br></code></pre></td></tr></table></figure><h2 id="æ—¥å¿—ç³»ç»Ÿé›†æˆ"><a href="#æ—¥å¿—ç³»ç»Ÿé›†æˆ" class="headerlink" title="æ—¥å¿—ç³»ç»Ÿé›†æˆ"></a>æ—¥å¿—ç³»ç»Ÿé›†æˆ</h2><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[pytest]</span><br><span class="hljs-attr">log_level</span> = DEBUG     <span class="hljs-comment"># æ§åˆ¶å°æ—¥å¿—çº§åˆ«</span><br><span class="hljs-attr">log_cli</span> = <span class="hljs-literal">true</span>        <span class="hljs-comment"># å¯ç”¨å®æ—¶å‘½ä»¤è¡Œæ—¥å¿—</span><br><span class="hljs-attr">log_format</span> = <span class="hljs-string">&quot;%(asctime)s [%(levelname)8s] %(message)s (%(filename)s:%(lineno)s)&quot;</span>  <span class="hljs-comment"># æ—¥å¿—æ ¼å¼</span><br><span class="hljs-attr">log_date_format</span> = <span class="hljs-string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>  <span class="hljs-comment"># æ—¶é—´æ ¼å¼</span><br><span class="hljs-attr">log_file</span> = logs/pytest.log  <span class="hljs-comment"># æ–‡ä»¶æ—¥å¿—è·¯å¾„</span><br><span class="hljs-attr">log_file_level</span> = INFO       <span class="hljs-comment"># æ–‡ä»¶æ—¥å¿—çº§åˆ«</span><br><br></code></pre></td></tr></table></figure><h2 id="æµ‹è¯•æ•°æ®éš”ç¦»"><a href="#æµ‹è¯•æ•°æ®éš”ç¦»" class="headerlink" title="æµ‹è¯•æ•°æ®éš”ç¦»"></a>æµ‹è¯•æ•°æ®éš”ç¦»</h2><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[pytest]</span><br><span class="hljs-comment"># æ•°æ®åº“è¿æ¥é…ç½®ï¼ˆé€šè¿‡ç¯å¢ƒå˜é‡è¦†ç›–ï¼‰</span><br><span class="hljs-attr">db_host</span> = localhost      <span class="hljs-comment"># æ•°æ®åº“ä¸»æœº</span><br><span class="hljs-attr">db_port</span> = <span class="hljs-number">5432</span>           <span class="hljs-comment"># é»˜è®¤PostgreSQLç«¯å£</span><br><span class="hljs-attr">db_name</span> = test_db        <span class="hljs-comment"># æµ‹è¯•ä¸“ç”¨æ•°æ®åº“</span><br><span class="hljs-attr">db_timeout</span> = <span class="hljs-number">5</span>           <span class="hljs-comment"># è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰</span><br></code></pre></td></tr></table></figure><p>ğŸ”¹ ç¤ºä¾‹ï¼š ä½¿ç”¨ç¤ºä¾‹ï¼ˆ<code>conftest.py</code>ï¼‰</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">@pytest.fixture(<span class="hljs-params">scope=<span class="hljs-string">&quot;session&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">database</span>(<span class="hljs-params">pytestconfig</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;åˆ›å»ºæ•°æ®åº“è¿æ¥çš„å…¨å±€ Fixture&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">return</span> psycopg2.connect(<br>        host=pytestconfig.getini(<span class="hljs-string">&quot;db_host&quot;</span>),<br>        port=pytestconfig.getini(<span class="hljs-string">&quot;db_port&quot;</span>),<br>        database=pytestconfig.getini(<span class="hljs-string">&quot;db_name&quot;</span>),<br>        connect_timeout=pytestconfig.getini(<span class="hljs-string">&quot;db_timeout&quot;</span>)<br>    )<br></code></pre></td></tr></table></figure><h1 id="é«˜çº§é…ç½®-ä¼ä¸šçº§å®è·µ"><a href="#é«˜çº§é…ç½®-ä¼ä¸šçº§å®è·µ" class="headerlink" title="é«˜çº§é…ç½® (ä¼ä¸šçº§å®è·µ)"></a>é«˜çº§é…ç½® (ä¼ä¸šçº§å®è·µ)</h1><h2 id="åŠ¨æ€é…ç½®ç”Ÿæˆ"><a href="#åŠ¨æ€é…ç½®ç”Ÿæˆ" class="headerlink" title="åŠ¨æ€é…ç½®ç”Ÿæˆ"></a>åŠ¨æ€é…ç½®ç”Ÿæˆ</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># conftest.pyï¼ˆæ ¹æ®ç¯å¢ƒåŠ è½½é…ç½®ï¼‰</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">pytest_configure</span>(<span class="hljs-params">config</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;æ ¹æ®å‘½ä»¤è¡Œå‚æ•°åŠ¨æ€ä¿®æ”¹é…ç½®&quot;&quot;&quot;</span><br>    env = config.getoption(<span class="hljs-string">&quot;--env&quot;</span>)<br>    <span class="hljs-keyword">if</span> env == <span class="hljs-string">&quot;prod&quot;</span>:<br>        <span class="hljs-comment"># ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ä¸åŒçš„æ•°æ®åº“é…ç½®</span><br>        config.inicfg[<span class="hljs-string">&quot;db_host&quot;</span>] = <span class="hljs-string">&quot;prod-db.example.com&quot;</span><br>        config.inicfg[<span class="hljs-string">&quot;db_name&quot;</span>] = <span class="hljs-string">&quot;prod_db&quot;</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">pytest_addoption</span>(<span class="hljs-params">parser</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;æ·»åŠ è‡ªå®šä¹‰å‘½ä»¤è¡Œå‚æ•°&quot;&quot;&quot;</span><br>    parser.addoption(<br>        <span class="hljs-string">&quot;--env&quot;</span>, <br>        action=<span class="hljs-string">&quot;store&quot;</span>,<br>        default=<span class="hljs-string">&quot;dev&quot;</span>,<br>        choices=[<span class="hljs-string">&quot;dev&quot;</span>, <span class="hljs-string">&quot;staging&quot;</span>, <span class="hljs-string">&quot;prod&quot;</span>],<br>        <span class="hljs-built_in">help</span>=<span class="hljs-string">&quot;è®¾ç½®è¿è¡Œç¯å¢ƒ&quot;</span><br>    )<br></code></pre></td></tr></table></figure><h2 id="å¤šç¯å¢ƒé…ç½®æ–¹æ¡ˆ"><a href="#å¤šç¯å¢ƒé…ç½®æ–¹æ¡ˆ" class="headerlink" title="å¤šç¯å¢ƒé…ç½®æ–¹æ¡ˆ"></a>å¤šç¯å¢ƒé…ç½®æ–¹æ¡ˆ</h2><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-comment"># pytest.ini</span><br><span class="hljs-section">[pytest]</span><br><span class="hljs-attr">env_files</span> = <br>    config/env_dev.ini   <span class="hljs-comment"># å¼€å‘ç¯å¢ƒé…ç½®</span><br>    config/env_prod.ini  <span class="hljs-comment"># ç”Ÿäº§ç¯å¢ƒé…ç½®</span><br></code></pre></td></tr></table></figure><p>ğŸ”¹ ç¤ºä¾‹ï¼šç¯å¢ƒé…ç½®æ–‡ä»¶ç¤ºä¾‹ (<code>config/env_prod.ini</code>)ï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[db]</span><br><span class="hljs-attr">host</span> = prod-db.example.com<br><span class="hljs-attr">port</span> = <span class="hljs-number">5432</span><br><span class="hljs-attr">user</span> = prod_user<br><span class="hljs-attr">password</span> = <span class="hljs-variable">$&#123;DB_PASSWORD&#125;</span>  <span class="hljs-comment"># ä»ç¯å¢ƒå˜é‡è¯»å–æ•æ„Ÿä¿¡æ¯</span><br></code></pre></td></tr></table></figure><h2 id="å®‰å…¨é…ç½®è§„èŒƒ"><a href="#å®‰å…¨é…ç½®è§„èŒƒ" class="headerlink" title="å®‰å…¨é…ç½®è§„èŒƒ"></a>å®‰å…¨é…ç½®è§„èŒƒ</h2><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[pytest]</span><br><span class="hljs-attr">xfail_strict</span> = <span class="hljs-literal">true</span>  <span class="hljs-comment"># å°†æ„å¤–æˆåŠŸçš„xfailç”¨ä¾‹æ ‡è®°ä¸ºå¤±è´¥</span><br><span class="hljs-attr">filterwarnings</span> = <br>    error                  <span class="hljs-comment"># å°†è­¦å‘Šå‡çº§ä¸ºé”™è¯¯</span><br>    ignore::DeprecationWarning  <span class="hljs-comment"># å¿½ç•¥æ‰€æœ‰å¼ƒç”¨è­¦å‘Š</span><br>    ignore:.*Unexpected kwargs.*:UserWarning  <span class="hljs-comment"># å¿½ç•¥ç‰¹å®šè­¦å‘Š</span><br><br><br></code></pre></td></tr></table></figure><h1 id="æ•ˆèƒ½ä¼˜åŒ–"><a href="#æ•ˆèƒ½ä¼˜åŒ–" class="headerlink" title="æ•ˆèƒ½ä¼˜åŒ–"></a>æ•ˆèƒ½ä¼˜åŒ–</h1><h2 id="ç¼“å­˜é…ç½®ä¼˜åŒ–"><a href="#ç¼“å­˜é…ç½®ä¼˜åŒ–" class="headerlink" title="ç¼“å­˜é…ç½®ä¼˜åŒ–"></a>ç¼“å­˜é…ç½®ä¼˜åŒ–</h2><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[pytest]</span><br><span class="hljs-attr">cache_dir</span> = .pytest_cache  <span class="hljs-comment"># æŒ‡å®šç¼“å­˜ç›®å½•</span><br><span class="hljs-attr">enable_caching</span> = <span class="hljs-literal">true</span>      <span class="hljs-comment"># å¯ç”¨æµ‹è¯•ç¼“å­˜</span><br><span class="hljs-attr">cache_show</span> = <span class="hljs-literal">true</span>          <span class="hljs-comment"># æ˜¾ç¤ºç¼“å­˜ä½¿ç”¨æƒ…å†µ</span><br></code></pre></td></tr></table></figure><h2 id="å¹¶è¡Œæµ‹è¯•é…ç½®"><a href="#å¹¶è¡Œæµ‹è¯•é…ç½®" class="headerlink" title="å¹¶è¡Œæµ‹è¯•é…ç½®"></a>å¹¶è¡Œæµ‹è¯•é…ç½®</h2><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[pytest]</span><br><span class="hljs-attr">addopts</span> = -n auto         <span class="hljs-comment"># è‡ªåŠ¨æ£€æµ‹CPUæ ¸å¿ƒæ•°</span><br><span class="hljs-attr">dist</span> = loadscope         <span class="hljs-comment"># æŒ‰æµ‹è¯•æ¨¡å—åˆ†å‘ä»»åŠ¡</span><br><span class="hljs-attr">tx</span> = <span class="hljs-number">3</span>                   <span class="hljs-comment"># æ¯ä¸ªworkerçš„è¶…æ—¶æ—¶é—´(åˆ†é’Ÿ)</span><br></code></pre></td></tr></table></figure><h2 id="åˆ†å±‚é…ç½®æ¶æ„"><a href="#åˆ†å±‚é…ç½®æ¶æ„" class="headerlink" title="åˆ†å±‚é…ç½®æ¶æ„"></a>åˆ†å±‚é…ç½®æ¶æ„</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs text">project/<br>â”œâ”€â”€ pytest.ini          # å…¨å±€åŸºç¡€é…ç½®<br>â”œâ”€â”€ conftest.py         # å…¨å±€Fixtureså’Œhooks<br>â”œâ”€â”€ config/<br>â”‚   â”œâ”€â”€ env_dev.ini     # å¼€å‘ç¯å¢ƒå‚æ•°<br>â”‚   â””â”€â”€ env_prod.ini    # ç”Ÿäº§ç¯å¢ƒå‚æ•°<br>â””â”€â”€ tests/<br>    â”œâ”€â”€ conftest.py     # æµ‹è¯•ç›®å½•çº§é…ç½®<br>    â””â”€â”€ api/<br>        â””â”€â”€ conftest.py # APIæµ‹è¯•ä¸“ç”¨é…ç½®<br></code></pre></td></tr></table></figure><h1 id="è°ƒè¯•ä¸éªŒè¯"><a href="#è°ƒè¯•ä¸éªŒè¯" class="headerlink" title="è°ƒè¯•ä¸éªŒè¯"></a>è°ƒè¯•ä¸éªŒè¯</h1><h2 id="é…ç½®éªŒè¯å‘½ä»¤"><a href="#é…ç½®éªŒè¯å‘½ä»¤" class="headerlink" title="é…ç½®éªŒè¯å‘½ä»¤"></a>é…ç½®éªŒè¯å‘½ä»¤</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æŸ¥çœ‹ç”Ÿæ•ˆé…ç½®</span><br>pytest --version<br><br><span class="hljs-comment"># æ£€æŸ¥é…ç½®è¯­æ³•</span><br>pytest --check-config<br><br><span class="hljs-comment"># è°ƒè¯•æ¨¡å¼ï¼ˆæ˜¾ç¤ºåŠ è½½è¿‡ç¨‹ï¼‰</span><br>PYTEST_DEBUG=1 pytest -rA<br><br></code></pre></td></tr></table></figure><h2 id="é…ç½®è¦†ç›–ç¤ºä¾‹"><a href="#é…ç½®è¦†ç›–ç¤ºä¾‹" class="headerlink" title="é…ç½®è¦†ç›–ç¤ºä¾‹"></a>é…ç½®è¦†ç›–ç¤ºä¾‹</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># ä¸´æ—¶è¦†ç›–æ—¥å¿—é…ç½®</span><br>pytest -o <span class="hljs-string">&quot;log_cli=false&quot;</span> -o <span class="hljs-string">&quot;log_file=debug.log&quot;</span><br><br><span class="hljs-comment"># åŠ¨æ€ä¿®æ”¹æµ‹è¯•ç›®å½•</span><br>pytest -o <span class="hljs-string">&quot;testpaths=tests/unit&quot;</span> <br><br></code></pre></td></tr></table></figure><h2 id="å®Œæ•´é…ç½®å®ä¾‹"><a href="#å®Œæ•´é…ç½®å®ä¾‹" class="headerlink" title="å®Œæ•´é…ç½®å®ä¾‹"></a>å®Œæ•´é…ç½®å®ä¾‹</h2><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[pytest]</span><br><span class="hljs-comment"># æ ¸å¿ƒè¿è¡Œé…ç½®</span><br><span class="hljs-attr">addopts</span> = -v -ra --strict-markers --tb=short<br><span class="hljs-attr">testpaths</span> = tests<br><span class="hljs-attr">python_files</span> = test_*.py<br><span class="hljs-attr">python_classes</span> = Test* *Test<br><span class="hljs-attr">python_functions</span> = test_*<br><br><span class="hljs-comment"># æ ‡è®°ç®¡ç†ç³»ç»Ÿ</span><br><span class="hljs-attr">markers</span> =<br>    smoke: æ ¸å¿ƒåŠŸèƒ½éªŒè¯<br>    db: éœ€è¦æ•°æ®åº“è¿æ¥<br>    api: å¤–éƒ¨APIè°ƒç”¨æµ‹è¯•<br><br><span class="hljs-comment"># ç¯å¢ƒé…ç½®ç³»ç»Ÿ</span><br><span class="hljs-attr">env_files</span> = config/env.ini<br><br><span class="hljs-comment"># æ—¥å¿—ç®¡ç†ç³»ç»Ÿ</span><br><span class="hljs-attr">log_cli</span> = <span class="hljs-literal">true</span><br><span class="hljs-attr">log_level</span> = INFO<br><span class="hljs-attr">log_format</span> = <span class="hljs-string">&quot;%(asctime)s [%(levelname)s] %(message)s&quot;</span><br><span class="hljs-attr">log_file</span> = reports/pytest.log<br><br><span class="hljs-comment"># å®‰å…¨é…ç½®</span><br><span class="hljs-attr">filterwarnings</span> = error<br><span class="hljs-attr">xfail_strict</span> = <span class="hljs-literal">true</span><br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ é…ç½®æ–‡ä»¶éœ€ä¿å­˜ä¸º UTF-8 ç¼–ç ï¼Œé¿å…ä¸­æ–‡ä¹±ç é—®é¢˜ã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p><code>pytest.ini</code> å¯ä»¥å¾ˆé«˜æ•ˆçš„æé«˜æˆ‘ä»¬çš„å¼€å‘æ•ˆç‡å’Œè´¨é‡</p>]]></content>
    
    
    <categories>
      
      <category>Pytest</category>
      
      <category>Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„inié…ç½®æ–‡ä»¶</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>pytest</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„å†…ç½®fixture</title>
    <link href="/2025/03/20/pytest%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%974/"/>
    <url>/2025/03/20/pytest%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%974/</url>
    
    <content type="html"><![CDATA[<h1 id="Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„å†…ç½®fixture"><a href="#Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„å†…ç½®fixture" class="headerlink" title="Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„å†…ç½®fixture"></a>Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„å†…ç½®fixture</h1><p><code>pytest</code> æä¾›äº†è®¸å¤šå†…ç½®çš„ <code>fixture</code>ï¼Œç”¨äºå¤„ç†æµ‹è¯•æ‰§è¡Œã€ä¸´æ—¶ç›®å½•ã€å‚æ•°åŒ–ã€æ ‡è®°ç­‰åŠŸèƒ½ï¼Œå¤§å¤§ç®€åŒ–æµ‹è¯•ç¼–å†™ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯-pytest-å†…ç½®-fixtureï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-pytest-å†…ç½®-fixtureï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ pytest å†…ç½® fixtureï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ pytest å†…ç½® fixtureï¼Ÿ</h2><p>åœ¨ <code>pytest</code> ä¸­ï¼Œ<code>fixture</code> æ˜¯ æµ‹è¯•å‰åç½® æœºåˆ¶ï¼Œå…è®¸æˆ‘ä»¬è‡ªåŠ¨åˆå§‹åŒ–èµ„æºï¼Œå¹¶åœ¨æµ‹è¯•å®Œæˆåæ¸…ç†èµ„æºã€‚<code>pytest</code> è¿˜æä¾›äº†ä¸€äº›å†…ç½® <code>fixture</code>ï¼Œå¯ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€æ‰‹åŠ¨åˆ›å»ºã€‚</p><p>ğŸ“Œ å¦‚ä½•ä½¿ç”¨ <code>pytest</code> å†…ç½® <code>fixture</code>ï¼Ÿ</p><p>åªéœ€åœ¨æµ‹è¯•å‡½æ•°å‚æ•°ä¸­ä¼ å…¥ <code>fixture</code> çš„åç§°ï¼Œ<code>pytest</code> ä¼šè‡ªåŠ¨æä¾›ç›¸åº”çš„å¯¹è±¡æˆ–åŠŸèƒ½ã€‚</p><p>æ— éœ€ <code>import</code>ï¼Œå› ä¸ºå®ƒä»¬æ˜¯ <code>pytest</code> é¢„å®šä¹‰çš„ <code>fixture</code>ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_example</span>(<span class="hljs-params">tmp_path</span>):<br>    <span class="hljs-built_in">print</span>(tmp_path)  <span class="hljs-comment"># pytest è‡ªåŠ¨æä¾›ä¸´æ—¶è·¯å¾„</span><br><br></code></pre></td></tr></table></figure><h2 id="å¸¸è§-pytest-å†…ç½®-fixture"><a href="#å¸¸è§-pytest-å†…ç½®-fixture" class="headerlink" title="å¸¸è§ pytest å†…ç½® fixture"></a>å¸¸è§ pytest å†…ç½® fixture</h2><table><thead><tr><th>å†…ç½® <code>fixture</code></th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>request </code></td><td>è®¿é—®å½“å‰æµ‹è¯•ä¿¡æ¯</td></tr><tr><td><code> monkeypatch</code></td><td>ä¿®æ”¹ç¯å¢ƒå˜é‡ã€ç±»ã€å‡½æ•°ç­‰</td></tr><tr><td><code>tmpdir</code></td><td>æä¾›ä¸´æ—¶ç›®å½•<code>ï¼ˆpy.path.local å¯¹è±¡ï¼‰</code></td></tr><tr><td><code>tmp_pathd</code></td><td>æä¾›ä¸´æ—¶ç›®å½•<code>ï¼ˆpathlib.Path å¯¹è±¡ï¼‰</code></td></tr><tr><td><code>capsys</code></td><td>æ•è· <code>sys.stdout</code> å’Œ <code>sys.stderr</code></td></tr><tr><td><code>caplog</code></td><td>æ•è·æ—¥å¿—è¾“å‡º</td></tr><tr><td><code>recwarn</code></td><td>æ•è· <code>warnings</code> è­¦å‘Š</td></tr><tr><td><code>pytestconfig</code></td><td>æ•è· <code>pytest</code> å‘½ä»¤è¡Œå‚æ•°</td></tr><tr><td><code>doctest_namespace</code></td><td>ä¿®æ”¹  <code>doctest_namespace</code> è¿è¡Œç¯å¢ƒ</td></tr></tbody></table><h1 id="request"><a href="#request" class="headerlink" title="request"></a>request</h1><h2 id="requestï¼šè®¿é—®å½“å‰æµ‹è¯•ä¿¡æ¯"><a href="#requestï¼šè®¿é—®å½“å‰æµ‹è¯•ä¿¡æ¯" class="headerlink" title="requestï¼šè®¿é—®å½“å‰æµ‹è¯•ä¿¡æ¯"></a>requestï¼šè®¿é—®å½“å‰æµ‹è¯•ä¿¡æ¯</h2><p>ğŸ“Œ <code>request</code> æ˜¯ <code>pytest</code> å†…ç½®çš„ <code>fixture</code>ï¼Œç”¨äºè·å–å½“å‰æµ‹è¯•ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š</p><p>âœ… è·å–å½“å‰æµ‹è¯•åç§°ã€æ¨¡å—ã€ç±»<br>âœ… è·å– <code>fixture</code> ä¼ é€’çš„å‚æ•°<br>âœ… åŠ¨æ€ä¿®æ”¹ <code>fixture</code> è¡Œä¸ºï¼ˆåŠ¨æ€é…ç½® fixtureï¼‰</p><p>ğŸ”¹ ç¤ºä¾‹ 1ï¼šè·å–å½“å‰æµ‹è¯•ä¿¡æ¯</p><p><code>request.node.name</code> â†’ å½“å‰æµ‹è¯•å‡½æ•°å<br><code>request.module</code> â†’ å½“å‰æµ‹è¯•æ¨¡å—<br><code>request.cls</code> â†’ å½“å‰æµ‹è¯•ç±»ï¼ˆåœ¨ class ä½œç”¨åŸŸå†…ï¼‰<br><code>request.function</code> â†’ å½“å‰æµ‹è¯•å‡½æ•°å¯¹è±¡</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pytest<br><br><span class="hljs-meta">@pytest.fixture</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">my_fixture</span>(<span class="hljs-params">request</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nğŸ“Œ å½“å‰æµ‹è¯•å‡½æ•°: <span class="hljs-subst">&#123;request.node.name&#125;</span>&quot;</span>)  <span class="hljs-comment"># è·å–æµ‹è¯•å‡½æ•°å</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ“Œ æµ‹è¯•æ‰€åœ¨æ¨¡å—: <span class="hljs-subst">&#123;request.module.__name__&#125;</span>&quot;</span>)  <span class="hljs-comment"># è·å–æ¨¡å—å</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ğŸ“Œ æ˜¯å¦åœ¨ç±»ä¸­è¿è¡Œ: <span class="hljs-subst">&#123;request.cls&#125;</span>&quot;</span>)  <span class="hljs-comment"># å¦‚æœæ˜¯ç±»æ–¹æ³•ï¼Œè¿”å›ç±»åï¼›å¦åˆ™è¿”å› None</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Hello, Pytest!&quot;</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_with_request</span>(<span class="hljs-params">my_fixture</span>):<br>    <span class="hljs-built_in">print</span>(my_fixture)<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestExample</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_class_method</span>(<span class="hljs-params">self, my_fixture</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;âœ… è¿è¡Œç±»ä¸­çš„æµ‹è¯•æ–¹æ³•&quot;</span>)<br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ è¿è¡Œåè¾“å‡º</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sh">ğŸ“Œ å½“å‰æµ‹è¯•å‡½æ•°: test_with_request<br>ğŸ“Œ æµ‹è¯•æ‰€åœ¨æ¨¡å—: test_example<br>ğŸ“Œ æ˜¯å¦åœ¨ç±»ä¸­è¿è¡Œ: None<br>Hello, Pytest!<br><br>ğŸ“Œ å½“å‰æµ‹è¯•å‡½æ•°: test_class_method<br>ğŸ“Œ æµ‹è¯•æ‰€åœ¨æ¨¡å—: test_example<br>ğŸ“Œ æ˜¯å¦åœ¨ç±»ä¸­è¿è¡Œ: &lt;class <span class="hljs-string">&#x27;TestExample&#x27;</span>&gt;<br>âœ… è¿è¡Œç±»ä¸­çš„æµ‹è¯•æ–¹æ³•<br><br></code></pre></td></tr></table></figure><p>ğŸ” è§£æ</p><p><code>request.node.name</code> â†’ è·å–å½“å‰æµ‹è¯•å‡½æ•°åç§°<br><code>request.module.__name__</code> â†’ è·å–å½“å‰æµ‹è¯•æ‰€åœ¨çš„æ¨¡å—<br><code>request.cls</code> â†’ å¦‚æœæµ‹è¯•åœ¨ <code>class</code> å†…éƒ¨ï¼Œåˆ™è¿”å›ç±»å¯¹è±¡ï¼Œå¦åˆ™è¿”å› &#96;None&#96;&#96;</p><h2 id="è·å–-fixture-ä¼ é€’çš„å‚æ•°"><a href="#è·å–-fixture-ä¼ é€’çš„å‚æ•°" class="headerlink" title="è·å– fixture ä¼ é€’çš„å‚æ•°"></a>è·å– fixture ä¼ é€’çš„å‚æ•°</h2><p>ğŸ“Œ <code>request</code> å¯ä»¥è·å– <code>fixture</code> ä¼ é€’çš„å‚æ•°ï¼Œä½¿ç”¨ <code>request.param</code>ã€‚</p><p>ğŸ”¹ ç¤ºä¾‹ï¼šå‚æ•°åŒ– <code>fixture</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pytest<br><br><span class="hljs-meta">@pytest.fixture(<span class="hljs-params">params=[<span class="hljs-string">&quot;admin&quot;</span>, <span class="hljs-string">&quot;editor&quot;</span>, <span class="hljs-string">&quot;viewer&quot;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">user_role</span>(<span class="hljs-params">request</span>):<br>    <span class="hljs-keyword">return</span> request.param  <span class="hljs-comment"># è·å–å‚æ•°å€¼</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_user_role</span>(<span class="hljs-params">user_role</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å½“å‰ç”¨æˆ·è§’è‰²: <span class="hljs-subst">&#123;user_role&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">assert</span> user_role <span class="hljs-keyword">in</span> [<span class="hljs-string">&quot;admin&quot;</span>, <span class="hljs-string">&quot;editor&quot;</span>, <span class="hljs-string">&quot;viewer&quot;</span>]<br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ è¿è¡Œæ—¶ï¼Œ<code>pytest</code> ä¼šè‡ªåŠ¨ä¸º <code>user_role</code> ç”Ÿæˆ 3 ç»„æµ‹è¯•</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">test_user_role[admin] âœ…<br>test_user_role[editor] âœ…<br>test_user_role[viewer] âœ…<br><br></code></pre></td></tr></table></figure><p>ğŸ” è§£æ</p><p><code>params=[&quot;admin&quot;, &quot;editor&quot;, &quot;viewer&quot;]</code> è®© <code>fixture</code> è‡ªåŠ¨ç”Ÿæˆå¤šä¸ªæµ‹è¯•<br><code>request.param</code> è·å–ä¼ é€’çš„å€¼ï¼Œæ¯æ¬¡æµ‹è¯• è‡ªåŠ¨æ³¨å…¥ <code>&quot;admin&quot;ã€&quot;editor&quot;ã€&quot;viewer&quot;</code>â€˜</p><h2 id="åŠ¨æ€ä¿®æ”¹-fixture-è¡Œä¸º"><a href="#åŠ¨æ€ä¿®æ”¹-fixture-è¡Œä¸º" class="headerlink" title="åŠ¨æ€ä¿®æ”¹ fixture è¡Œä¸º"></a>åŠ¨æ€ä¿®æ”¹ fixture è¡Œä¸º</h2><p>ğŸ“Œ <code>request</code> å…è®¸æˆ‘ä»¬æ ¹æ® <code>fixture</code> ä¼ é€’çš„å‚æ•° åŠ¨æ€ä¿®æ”¹ <code>fixture </code>è¡Œä¸ºã€‚</p><p>ğŸ”¹ ç¤ºä¾‹ï¼šåŠ¨æ€è°ƒæ•´<code> fixture</code> é€»è¾‘</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pytest<br><br><span class="hljs-meta">@pytest.fixture(<span class="hljs-params">params=[<span class="hljs-string">&quot;mysql&quot;</span>, <span class="hljs-string">&quot;postgres&quot;</span>, <span class="hljs-string">&quot;sqlite&quot;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">db_connection</span>(<span class="hljs-params">request</span>):<br>    db_type = request.param<br>    <span class="hljs-keyword">if</span> db_type == <span class="hljs-string">&quot;mysql&quot;</span>:<br>        conn = <span class="hljs-string">&quot;MySQL Connection&quot;</span><br>    <span class="hljs-keyword">elif</span> db_type == <span class="hljs-string">&quot;postgres&quot;</span>:<br>        conn = <span class="hljs-string">&quot;PostgreSQL Connection&quot;</span><br>    <span class="hljs-keyword">else</span>:<br>        conn = <span class="hljs-string">&quot;SQLite Connection&quot;</span><br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nğŸ”— è¿æ¥åˆ°æ•°æ®åº“: <span class="hljs-subst">&#123;conn&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">yield</span> conn<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nâŒ å…³é—­æ•°æ®åº“è¿æ¥: <span class="hljs-subst">&#123;conn&#125;</span>&quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_database</span>(<span class="hljs-params">db_connection</span>):<br>    <span class="hljs-keyword">assert</span> db_connection <span class="hljs-keyword">in</span> [<span class="hljs-string">&quot;MySQL Connection&quot;</span>, <span class="hljs-string">&quot;PostgreSQL Connection&quot;</span>, <span class="hljs-string">&quot;SQLite Connection&quot;</span>]<br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ è¿è¡Œè¾“å‡º</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sh">ğŸ”— è¿æ¥åˆ°æ•°æ®åº“: MySQL Connection<br>âœ… è¿è¡Œ test_database<br>âŒ å…³é—­æ•°æ®åº“è¿æ¥: MySQL Connection<br><br>ğŸ”— è¿æ¥åˆ°æ•°æ®åº“: PostgreSQL Connection<br>âœ… è¿è¡Œ test_database<br>âŒ å…³é—­æ•°æ®åº“è¿æ¥: PostgreSQL Connection<br><br>ğŸ”— è¿æ¥åˆ°æ•°æ®åº“: SQLite Connection<br>âœ… è¿è¡Œ test_database<br>âŒ å…³é—­æ•°æ®åº“è¿æ¥: SQLite Connection<br><br></code></pre></td></tr></table></figure><p>ğŸ” è§£æ</p><p><code>request.param</code> ä¼ é€’ä¸åŒçš„æ•°æ®åº“ç±»å‹ï¼š<code>&quot;mysql&quot;ã€&quot;postgres&quot;ã€&quot;sqlite&quot;</code><br><code>fixture</code> åŠ¨æ€é€‰æ‹©æ•°æ®åº“è¿æ¥<br><code>yield</code> æµ‹è¯•ç»“æŸåè‡ªåŠ¨å…³é—­æ•°æ®åº“</p><h2 id="ç»“åˆ-pytestconfig-è¿›è¡ŒåŠ¨æ€é…ç½®"><a href="#ç»“åˆ-pytestconfig-è¿›è¡ŒåŠ¨æ€é…ç½®" class="headerlink" title="ç»“åˆ pytestconfig è¿›è¡ŒåŠ¨æ€é…ç½®"></a>ç»“åˆ pytestconfig è¿›è¡ŒåŠ¨æ€é…ç½®</h2><p>ğŸ“Œ <code>request.fixturenames</code> è·å–å½“å‰æµ‹è¯•å‡½æ•°ä½¿ç”¨çš„æ‰€æœ‰ <code>fixture</code>ã€‚</p><p>ğŸ”¹ ç¤ºä¾‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pytest<br><br><span class="hljs-meta">@pytest.fixture</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">fixture1</span>():<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;fixture1_data&quot;</span><br><br><span class="hljs-meta">@pytest.fixture</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">fixture2</span>():<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;fixture2_data&quot;</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_fixtures</span>(<span class="hljs-params">request, fixture1, fixture2</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\nğŸ” å½“å‰æµ‹è¯•ä½¿ç”¨çš„ `fixture`:&quot;</span>)<br>    <span class="hljs-keyword">for</span> fix <span class="hljs-keyword">in</span> request.fixturenames:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;- <span class="hljs-subst">&#123;fix&#125;</span>&quot;</span>)<br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ è¿è¡Œè¾“å‡º</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">ğŸ” å½“å‰æµ‹è¯•ä½¿ç”¨çš„ `fixture`:<br>- request<br>- fixture1<br>- fixture2<br><br></code></pre></td></tr></table></figure><p>ğŸ” è§£æ</p><p><code>request.fixturenames</code> åˆ—å‡ºå½“å‰æµ‹è¯•ä½¿ç”¨çš„æ‰€æœ‰ <code>fixture</code><br>é€‚ç”¨äºè°ƒè¯• <code>fixture</code> ä¾èµ–å…³ç³»</p><h1 id="monkeypatchï¼šä¿®æ”¹ç¯å¢ƒå˜é‡ã€ç±»ã€å‡½æ•°"><a href="#monkeypatchï¼šä¿®æ”¹ç¯å¢ƒå˜é‡ã€ç±»ã€å‡½æ•°" class="headerlink" title="monkeypatchï¼šä¿®æ”¹ç¯å¢ƒå˜é‡ã€ç±»ã€å‡½æ•°"></a>monkeypatchï¼šä¿®æ”¹ç¯å¢ƒå˜é‡ã€ç±»ã€å‡½æ•°</h1><p>ğŸ“Œ monkeypatch å…è®¸åœ¨æµ‹è¯•ä¸­ä¸´æ—¶ä¿®æ”¹ç¯å¢ƒå˜é‡ã€ç±»ã€å‡½æ•°ç­‰ï¼Œæµ‹è¯•ç»“æŸåæ¢å¤ã€‚</p><p>ğŸ”¹ ç¤ºä¾‹ 1ï¼šä¿®æ”¹ç¯å¢ƒå˜é‡</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_env_variable</span>():<br>    <span class="hljs-keyword">return</span> os.getenv(<span class="hljs-string">&quot;MY_VAR&quot;</span>, <span class="hljs-string">&quot;default_value&quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_env_variable</span>(<span class="hljs-params">monkeypatch</span>):<br>    monkeypatch.setenv(<span class="hljs-string">&quot;MY_VAR&quot;</span>, <span class="hljs-string">&quot;pytest_value&quot;</span>)  <span class="hljs-comment"># ä¿®æ”¹ç¯å¢ƒå˜é‡</span><br>    <span class="hljs-keyword">assert</span> get_env_variable() == <span class="hljs-string">&quot;pytest_value&quot;</span><br><br></code></pre></td></tr></table></figure><p>ğŸ”¹ ç¤ºä¾‹ 2ï¼šæ¨¡æ‹Ÿå‡½æ•°è¿”å›å€¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Database</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">connect</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Connected to database&quot;</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_mock_method</span>(<span class="hljs-params">monkeypatch</span>):<br>    db = Database()<br>    monkeypatch.<span class="hljs-built_in">setattr</span>(db, <span class="hljs-string">&quot;connect&quot;</span>, <span class="hljs-keyword">lambda</span>: <span class="hljs-string">&quot;Mocked DB connection&quot;</span>)  <span class="hljs-comment"># ä¿®æ”¹æ–¹æ³•</span><br>    <span class="hljs-keyword">assert</span> db.connect() == <span class="hljs-string">&quot;Mocked DB connection&quot;</span><br><br></code></pre></td></tr></table></figure><h1 id="tmpdir-å’Œ-tmp-pathï¼šåˆ›å»ºä¸´æ—¶ç›®å½•"><a href="#tmpdir-å’Œ-tmp-pathï¼šåˆ›å»ºä¸´æ—¶ç›®å½•" class="headerlink" title="tmpdir å’Œ tmp_pathï¼šåˆ›å»ºä¸´æ—¶ç›®å½•"></a>tmpdir å’Œ tmp_pathï¼šåˆ›å»ºä¸´æ—¶ç›®å½•</h1><p>ğŸ“Œ <code>tmpdir</code> å’Œ <code>tmp_path</code> ç”¨äºåˆ›å»ºä¸´æ—¶æ–‡ä»¶æˆ–ç›®å½•ï¼Œæµ‹è¯•ç»“æŸåè‡ªåŠ¨æ¸…ç†ã€‚</p><p><code>tmpdir</code> è¿”å› <code>py.path.local</code><br><code>tmp_path</code> è¿”å› <code>pathlib.Path</code></p><p>ğŸ”¹ ç¤ºä¾‹ 1ï¼šä½¿ç”¨ tmpdir</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_tmpdir</span>(<span class="hljs-params">tmpdir</span>):<br>    file = tmpdir.join(<span class="hljs-string">&quot;test.txt&quot;</span>)<br>    file.write(<span class="hljs-string">&quot;Hello, pytest!&quot;</span>)<br>    <span class="hljs-keyword">assert</span> file.read() == <span class="hljs-string">&quot;Hello, pytest!&quot;</span><br><br></code></pre></td></tr></table></figure><p>ğŸ”¹ ç¤ºä¾‹ 2ï¼šä½¿ç”¨ tmp_path</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_tmp_path</span>(<span class="hljs-params">tmp_path</span>):<br>    file = tmp_path / <span class="hljs-string">&quot;test.txt&quot;</span><br>    file.write_text(<span class="hljs-string">&quot;Hello, pytest!&quot;</span>)<br>    <span class="hljs-keyword">assert</span> file.read_text() == <span class="hljs-string">&quot;Hello, pytest!&quot;</span><br><br></code></pre></td></tr></table></figure><h1 id="capsysï¼šæ•è·-stdout-å’Œ-stderr"><a href="#capsysï¼šæ•è·-stdout-å’Œ-stderr" class="headerlink" title="capsysï¼šæ•è· stdout å’Œ stderr"></a>capsysï¼šæ•è· stdout å’Œ stderr</h1><p>ğŸ“Œ capsys å…è®¸æ•è· print() è¾“å‡ºï¼Œé€‚ç”¨äºæµ‹è¯• CLI ç¨‹åºã€‚</p><p>ğŸ”¹ ç¤ºä¾‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">greet</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Hello, pytest!&quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_greet</span>(<span class="hljs-params">capsys</span>):<br>    greet()<br>    captured = capsys.readouterr()<br>    <span class="hljs-keyword">assert</span> captured.out == <span class="hljs-string">&quot;Hello, pytest!\n&quot;</span><br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ <code>capsys.readouterr()</code> è·å–<br>   <code>captured.out</code> æ ‡å‡†è¾“å‡º<br>   <code>captured.err</code> é”™è¯¯è¾“å‡º</p><h1 id="caplogï¼šæ•è·æ—¥å¿—"><a href="#caplogï¼šæ•è·æ—¥å¿—" class="headerlink" title="caplogï¼šæ•è·æ—¥å¿—"></a>caplogï¼šæ•è·æ—¥å¿—</h1><p>ğŸ“Œ <code>caplog</code> ç”¨äºæ•è· <code>logging </code>æ—¥å¿—ã€‚</p><p>ğŸ”¹ ç¤ºä¾‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> logging<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">log_message</span>():<br>    logging.warning(<span class="hljs-string">&quot;This is a warning message!&quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_log_message</span>(<span class="hljs-params">caplog</span>):<br>    log_message()<br>    <span class="hljs-keyword">assert</span> <span class="hljs-string">&quot;This is a warning message!&quot;</span> <span class="hljs-keyword">in</span> caplog.text<br><br></code></pre></td></tr></table></figure><h1 id="recwarnï¼šæ•è·-warnings"><a href="#recwarnï¼šæ•è·-warnings" class="headerlink" title="recwarnï¼šæ•è· warnings"></a>recwarnï¼šæ•è· warnings</h1><p>ğŸ“Œ <code>recwarn</code> å…è®¸æ•è· <code>warnings</code>ï¼Œç”¨äºæµ‹è¯•è­¦å‘Šæ˜¯å¦æ­£ç¡®è§¦å‘ã€‚</p><p>ğŸ”¹ ç¤ºä¾‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> warnings<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">deprecated_function</span>():<br>    warnings.warn(<span class="hljs-string">&quot;This function is deprecated&quot;</span>, DeprecationWarning)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_warning</span>(<span class="hljs-params">recwarn</span>):<br>    deprecated_function()<br>    <span class="hljs-keyword">assert</span> <span class="hljs-built_in">len</span>(recwarn) == <span class="hljs-number">1</span><br>    <span class="hljs-keyword">assert</span> <span class="hljs-string">&quot;deprecated&quot;</span> <span class="hljs-keyword">in</span> <span class="hljs-built_in">str</span>(recwarn[<span class="hljs-number">0</span>].message)<br><br></code></pre></td></tr></table></figure><h1 id="pytestconfigï¼šè·å–-pytest-å‘½ä»¤è¡Œå‚æ•°"><a href="#pytestconfigï¼šè·å–-pytest-å‘½ä»¤è¡Œå‚æ•°" class="headerlink" title="pytestconfigï¼šè·å– pytest å‘½ä»¤è¡Œå‚æ•°"></a>pytestconfigï¼šè·å– pytest å‘½ä»¤è¡Œå‚æ•°</h1><p>ğŸ“Œ <code>pytestconfig</code> å…è®¸è®¿é—® <code>pytest</code> å‘½ä»¤è¡Œå‚æ•°ï¼Œä¾‹å¦‚<code> --verbose</code>ã€‚</p><p>ğŸ”¹ ç¤ºä¾‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_pytest_config</span>(<span class="hljs-params">pytestconfig</span>):<br>    <span class="hljs-keyword">assert</span> pytestconfig.getoption(<span class="hljs-string">&quot;verbose&quot;</span>) &gt;= <span class="hljs-number">0</span>  <span class="hljs-comment"># æ£€æŸ¥ `-v` é€‰é¡¹æ˜¯å¦å¯ç”¨</span><br><br></code></pre></td></tr></table></figure><h1 id="doctest-namespaceï¼šä¿®æ”¹-doctest-è¿è¡Œç¯å¢ƒ"><a href="#doctest-namespaceï¼šä¿®æ”¹-doctest-è¿è¡Œç¯å¢ƒ" class="headerlink" title="doctest_namespaceï¼šä¿®æ”¹ doctest è¿è¡Œç¯å¢ƒ"></a>doctest_namespaceï¼šä¿®æ”¹ doctest è¿è¡Œç¯å¢ƒ</h1><p>ğŸ“Œ <code>doctest_namespace </code>å…è®¸åœ¨ <code>doctest</code> è¿è¡Œæ—¶ é¢„å®šä¹‰å˜é‡ã€‚</p><p>ğŸ”¹ ç¤ºä¾‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">@pytest.fixture(<span class="hljs-params">autouse=<span class="hljs-literal">True</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">add_namespace</span>(<span class="hljs-params">doctest_namespace</span>):<br>    doctest_namespace[<span class="hljs-string">&quot;PI&quot;</span>] = <span class="hljs-number">3.1415926</span><br></code></pre></td></tr></table></figure><p>ğŸ“Œ è¿™æ ·ï¼Œåœ¨ <code>doctest</code> ä¸­ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨<code>PI</code> å˜é‡ã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>æˆ‘åˆ—ä¸¾å¹³å¸¸å¯èƒ½ä¼šç”¨åˆ°çš„ï¼Œå½“ç„¶è¿˜æœ‰å…¶ä»–çš„fixureï¼Œåé¢é‡è§ç»§ç»­è¡¥å……ï¼</p>]]></content>
    
    
    <categories>
      
      <category>Pytest</category>
      
      <category>Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„å†…ç½®fixture</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>pytest</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„fixture</title>
    <link href="/2025/03/20/pytest%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%973/"/>
    <url>/2025/03/20/pytest%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%973/</url>
    
    <content type="html"><![CDATA[<h1 id="Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„fixture"><a href="#Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„fixture" class="headerlink" title="Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„fixture"></a>Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„fixture</h1><p>pytest æ˜¯ Python æœ€æµè¡Œçš„æµ‹è¯•æ¡†æ¶ä¹‹ä¸€ï¼Œè€Œ fixture æ˜¯ pytest æä¾›çš„ å¼ºå¤§æµ‹è¯•å‰åç½®æœºåˆ¶ï¼Œç”¨äºç®¡ç†æµ‹è¯•ä¾èµ–ã€åˆå§‹åŒ–æµ‹è¯•ç¯å¢ƒå’Œæ¸…ç†èµ„æºã€‚</p><h2 id="ä»€ä¹ˆæ˜¯-fixtureï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-fixtureï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ fixtureï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ fixtureï¼Ÿ</h2><p>åœ¨ pytest ä¸­ï¼Œfixture æ˜¯ä¸€ç§ç‰¹æ®Šçš„å‡½æ•°ï¼Œç”¨äº åœ¨æµ‹è¯•å¼€å§‹å‰è¿›è¡Œå‡†å¤‡å·¥ä½œï¼Œå¹¶åœ¨æµ‹è¯•ç»“æŸåè¿›è¡Œæ¸…ç†ã€‚<br>å®ƒå¯ä»¥ç”¨äºï¼š<br>âœ… åˆ›å»ºæµ‹è¯•æ•°æ®<br>âœ… æ•°æ®åº“è¿æ¥<br>âœ… åˆå§‹åŒ– WebDriverï¼ˆSeleniumï¼‰<br>âœ… æ–‡ä»¶æ“ä½œ<br>âœ… æ¸…ç†èµ„æº</p><p>ğŸ“Œ åŸºæœ¬è¯­æ³•</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pytest<br><br><span class="hljs-meta">@pytest.fixture</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">sample_data</span>():<br>    <span class="hljs-keyword">return</span> &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">25</span>&#125;<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_sample</span>(<span class="hljs-params">sample_data</span>):<br>    <span class="hljs-keyword">assert</span> sample_data[<span class="hljs-string">&quot;name&quot;</span>] == <span class="hljs-string">&quot;Alice&quot;</span><br><br></code></pre></td></tr></table></figure><p>ğŸ” è§£æï¼š</p><p>@pytest.fixture è®© sample_data() æˆä¸ºä¸€ä¸ª fixtureã€‚<br>test_sample() é€šè¿‡å‚æ•° è‡ªåŠ¨æ¥æ”¶ sample_data() çš„è¿”å›å€¼ã€‚<br>è¿è¡Œæ—¶ pytest è‡ªåŠ¨è°ƒç”¨ fixtureï¼Œæ— éœ€æ‰‹åŠ¨ä¼ å‚ã€‚</p><h2 id="fixture-çš„ä½œç”¨åŸŸ-scope"><a href="#fixture-çš„ä½œç”¨åŸŸ-scope" class="headerlink" title="fixture çš„ä½œç”¨åŸŸ (scope)"></a>fixture çš„ä½œç”¨åŸŸ (scope)</h2><p>fixture é»˜è®¤ ä½œç”¨äºæ¯ä¸ªæµ‹è¯•å‡½æ•°ï¼ˆfunction çº§åˆ«ï¼‰ï¼Œä½† pytest å…è®¸æˆ‘ä»¬é€šè¿‡ scope æ§åˆ¶</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">@pytest.fixture(<span class="hljs-params">scope=<span class="hljs-string">&quot;function&quot;</span></span>)  </span><span class="hljs-comment"># é»˜è®¤ï¼Œæ¯ä¸ªæµ‹è¯•å‡½æ•°æ‰§è¡Œä¸€æ¬¡</span><br><span class="hljs-meta">@pytest.fixture(<span class="hljs-params">scope=<span class="hljs-string">&quot;class&quot;</span></span>)     </span><span class="hljs-comment"># æ¯ä¸ªæµ‹è¯•ç±»æ‰§è¡Œä¸€æ¬¡</span><br><span class="hljs-meta">@pytest.fixture(<span class="hljs-params">scope=<span class="hljs-string">&quot;module&quot;</span></span>)    </span><span class="hljs-comment"># æ¯ä¸ªæ¨¡å—æ‰§è¡Œä¸€æ¬¡</span><br><span class="hljs-meta">@pytest.fixture(<span class="hljs-params">scope=<span class="hljs-string">&quot;session&quot;</span></span>)   </span><span class="hljs-comment"># æ•´ä¸ªæµ‹è¯•æ‰§è¡Œä¸€æ¬¡</span><br></code></pre></td></tr></table></figure><p>ğŸ“Œ ç¤ºä¾‹ï¼šä¸åŒä½œç”¨åŸŸçš„ fixture</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pytest<br><br><span class="hljs-meta">@pytest.fixture(<span class="hljs-params">scope=<span class="hljs-string">&quot;session&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">db_connection</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\nğŸ”— è¿æ¥æ•°æ®åº“&quot;</span>)<br>    <span class="hljs-keyword">yield</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\nâŒ å…³é—­æ•°æ®åº“&quot;</span>)<br><br><span class="hljs-meta">@pytest.fixture(<span class="hljs-params">scope=<span class="hljs-string">&quot;function&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_user</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\nğŸ‘¤ åˆ›å»ºæµ‹è¯•ç”¨æˆ·&quot;</span>)<br>    <span class="hljs-keyword">yield</span> &#123;<span class="hljs-string">&quot;username&quot;</span>: <span class="hljs-string">&quot;test_user&quot;</span>&#125;<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\nğŸ—‘ï¸ åˆ é™¤æµ‹è¯•ç”¨æˆ·&quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_example_1</span>(<span class="hljs-params">db_connection, test_user</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;âœ… è¿è¡Œ test_example_1&quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_example_2</span>(<span class="hljs-params">db_connection, test_user</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;âœ… è¿è¡Œ test_example_2&quot;</span>)<br><br></code></pre></td></tr></table></figure><p>ğŸ” è§£æï¼š</p><p>db_connection() scope&#x3D;â€sessionâ€ â†’ æ•´ä¸ªæµ‹è¯•è¿è¡Œä¸€æ¬¡ã€‚<br>test_user() scope&#x3D;â€functionâ€ â†’ æ¯ä¸ªæµ‹è¯•å‡½æ•°è¿è¡Œä¸€æ¬¡ã€‚</p><p>ğŸ”„ è¿è¡Œé¡ºåº</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">pytest test_example.py -s  <span class="hljs-comment"># -s è®© print è¾“å‡ºå¯è§</span><br></code></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sh">ğŸ”— è¿æ¥æ•°æ®åº“      <span class="hljs-comment"># åªæ‰§è¡Œä¸€æ¬¡ï¼ˆsession çº§åˆ«ï¼‰</span><br>ğŸ‘¤ åˆ›å»ºæµ‹è¯•ç”¨æˆ·   <span class="hljs-comment"># æ¯ä¸ªæµ‹è¯•å‡½æ•°æ‰§è¡Œä¸€æ¬¡</span><br>âœ… è¿è¡Œ test_example_1<br>ğŸ—‘ï¸ åˆ é™¤æµ‹è¯•ç”¨æˆ·<br><br>ğŸ‘¤ åˆ›å»ºæµ‹è¯•ç”¨æˆ·<br>âœ… è¿è¡Œ test_example_2<br>ğŸ—‘ï¸ åˆ é™¤æµ‹è¯•ç”¨æˆ·<br>âŒ å…³é—­æ•°æ®åº“      <span class="hljs-comment"># åªæ‰§è¡Œä¸€æ¬¡ï¼ˆsession çº§åˆ«ï¼‰</span><br><br></code></pre></td></tr></table></figure><h2 id="yield-è¯­å¥ç®¡ç†-fixture"><a href="#yield-è¯­å¥ç®¡ç†-fixture" class="headerlink" title="yield è¯­å¥ç®¡ç† fixture"></a>yield è¯­å¥ç®¡ç† fixture</h2><p>fixture ä¸ä»…å¯ä»¥æä¾›æ•°æ®ï¼Œè¿˜å¯ä»¥æ‰§è¡Œâ€œå‰åç½®â€é€»è¾‘ï¼Œyield å…è®¸åœ¨ æµ‹è¯•ç»“æŸåæ‰§è¡Œæ¸…ç†å·¥ä½œã€‚</p><p>ğŸ“Œ ç¤ºä¾‹ï¼šä½¿ç”¨ yield è¿›è¡Œèµ„æºæ¸…ç†</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pytest<br><br><span class="hljs-meta">@pytest.fixture</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">open_file</span>():<br>    file = <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;test_file.txt&quot;</span>, <span class="hljs-string">&quot;w&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\nğŸ“‚ æ‰“å¼€æ–‡ä»¶&quot;</span>)<br>    <span class="hljs-keyword">yield</span> file  <span class="hljs-comment"># è®©æµ‹è¯•å‡½æ•°ä½¿ç”¨ file</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\nâŒ å…³é—­æ–‡ä»¶&quot;</span>)<br>    file.close()<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_write_file</span>(<span class="hljs-params">open_file</span>):<br>    open_file.write(<span class="hljs-string">&quot;Hello, pytest fixture!&quot;</span>)<br>    <span class="hljs-keyword">assert</span> open_file.closed <span class="hljs-keyword">is</span> <span class="hljs-literal">False</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_file_closed</span>(<span class="hljs-params">open_file</span>):<br>    <span class="hljs-keyword">assert</span> open_file.closed <span class="hljs-keyword">is</span> <span class="hljs-literal">False</span><br><br></code></pre></td></tr></table></figure><p>ğŸ” è¿è¡Œæµç¨‹</p><p>æµ‹è¯•å¼€å§‹å‰ï¼šæ‰§è¡Œ print(â€œ\nğŸ“‚ æ‰“å¼€æ–‡ä»¶â€) å¹¶æ‰“å¼€æ–‡ä»¶ã€‚<br>æµ‹è¯•è¿è¡Œä¸­ï¼šyield è®©æµ‹è¯•å‡½æ•°ä½¿ç”¨ fileã€‚<br>æµ‹è¯•ç»“æŸåï¼šæ‰§è¡Œ file.close() å…³é—­æ–‡ä»¶ã€‚</p><h2 id="autouse-True-è‡ªåŠ¨åº”ç”¨-fixture"><a href="#autouse-True-è‡ªåŠ¨åº”ç”¨-fixture" class="headerlink" title="autouse&#x3D;True è‡ªåŠ¨åº”ç”¨ fixture"></a>autouse&#x3D;True è‡ªåŠ¨åº”ç”¨ fixture</h2><p>ğŸ“Œ å¦‚æœä¸æƒ³æ‰‹åŠ¨ä¼ å…¥ fixtureï¼Œå¯ä»¥ä½¿ç”¨ autouse&#x3D;True è‡ªåŠ¨åº”ç”¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pytest<br><br><span class="hljs-meta">@pytest.fixture(<span class="hljs-params">autouse=<span class="hljs-literal">True</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">setup_teardown</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\nğŸ”§ æµ‹è¯•å‰ç½®æ“ä½œ&quot;</span>)<br>    <span class="hljs-keyword">yield</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\nğŸ—‘ï¸ æµ‹è¯•åç½®æ¸…ç†&quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_case_1</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;âœ… è¿è¡Œ test_case_1&quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_case_2</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;âœ… è¿è¡Œ test_case_2&quot;</span>)<br><br></code></pre></td></tr></table></figure><p>ğŸ” è¿è¡Œè¾“å‡º</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">ğŸ”§ æµ‹è¯•å‰ç½®æ“ä½œ<br>âœ… è¿è¡Œ test_case_1<br>ğŸ—‘ï¸ æµ‹è¯•åç½®æ¸…ç†<br><br>ğŸ”§ æµ‹è¯•å‰ç½®æ“ä½œ<br>âœ… è¿è¡Œ test_case_2<br>ğŸ—‘ï¸ æµ‹è¯•åç½®æ¸…ç†<br></code></pre></td></tr></table></figure><p>ğŸ“Œ é€‚ç”¨äº</p><p>æ—¥å¿—è®°å½•<br>æ•°æ®åº“è¿æ¥<br>å…¨å±€èµ„æºåˆå§‹åŒ–</p><h2 id="conftest-py-è®©-fixture-é€‚ç”¨äºæ‰€æœ‰æµ‹è¯•"><a href="#conftest-py-è®©-fixture-é€‚ç”¨äºæ‰€æœ‰æµ‹è¯•" class="headerlink" title="conftest.py è®© fixture é€‚ç”¨äºæ‰€æœ‰æµ‹è¯•"></a>conftest.py è®© fixture é€‚ç”¨äºæ‰€æœ‰æµ‹è¯•</h2><p>å¦‚æœ fixture åœ¨å¤šä¸ªæµ‹è¯•æ–‡ä»¶ä¸­é€šç”¨ï¼Œå¯ä»¥æ”¾å…¥ conftest.pyï¼Œè¿™æ ·æ‰€æœ‰æµ‹è¯•éƒ½ä¼šè‡ªåŠ¨æ‰¾åˆ°å®ƒã€‚</p><p>ğŸ“Œ conftest.py</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pytest<br><br><span class="hljs-meta">@pytest.fixture</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">global_data</span>():<br>    <span class="hljs-keyword">return</span> &#123;<span class="hljs-string">&quot;project&quot;</span>: <span class="hljs-string">&quot;pytest&quot;</span>&#125;<br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ åœ¨ test_sample.py é‡Œç›´æ¥ä½¿ç”¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_global</span>(<span class="hljs-params">global_data</span>):<br>    <span class="hljs-keyword">assert</span> global_data[<span class="hljs-string">&quot;project&quot;</span>] == <span class="hljs-string">&quot;pytest&quot;</span><br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ è¿™æ ·å¯ä»¥åœ¨ä»»ä½•æµ‹è¯•æ–‡ä»¶é‡Œä½¿ç”¨ global_dataï¼Œæ— éœ€ importã€‚</p><h2 id="fixture-ä¹‹é—´çš„ä¾èµ–"><a href="#fixture-ä¹‹é—´çš„ä¾èµ–" class="headerlink" title="fixture ä¹‹é—´çš„ä¾èµ–"></a>fixture ä¹‹é—´çš„ä¾èµ–</h2><p>fixture å¯ä»¥äº’ç›¸ä¾èµ–:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">@pytest.fixture</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">user_data</span>():<br>    <span class="hljs-keyword">return</span> &#123;<span class="hljs-string">&quot;username&quot;</span>: <span class="hljs-string">&quot;alice&quot;</span>&#125;<br><br><span class="hljs-meta">@pytest.fixture</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">authenticated_user</span>(<span class="hljs-params">user_data</span>):<br>    user_data[<span class="hljs-string">&quot;authenticated&quot;</span>] = <span class="hljs-literal">True</span><br>    <span class="hljs-keyword">return</span> user_data<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_auth_user</span>(<span class="hljs-params">authenticated_user</span>):<br>    <span class="hljs-keyword">assert</span> authenticated_user[<span class="hljs-string">&quot;authenticated&quot;</span>] <span class="hljs-keyword">is</span> <span class="hljs-literal">True</span><br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ è¿è¡Œæ—¶ authenticated_user ä¼šå…ˆè°ƒç”¨ user_dataï¼Œå®ç°ä¾èµ–æ³¨å…¥ã€‚</p><h2 id="å‚æ•°åŒ–-fixture"><a href="#å‚æ•°åŒ–-fixture" class="headerlink" title="å‚æ•°åŒ– fixture"></a>å‚æ•°åŒ– fixture</h2><p>ğŸ“Œ æœ‰æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ fixture ä¼ é€’å¤šä¸ªå€¼ï¼Œå¯ä»¥ç”¨ params å‚æ•°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">@pytest.fixture(<span class="hljs-params">params=[<span class="hljs-string">&quot;admin&quot;</span>, <span class="hljs-string">&quot;editor&quot;</span>, <span class="hljs-string">&quot;viewer&quot;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">user_role</span>(<span class="hljs-params">request</span>):<br>    <span class="hljs-keyword">return</span> request.param  <span class="hljs-comment"># è·å–å‚æ•°å€¼</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_user_role</span>(<span class="hljs-params">user_role</span>):<br>    <span class="hljs-keyword">assert</span> user_role <span class="hljs-keyword">in</span> [<span class="hljs-string">&quot;admin&quot;</span>, <span class="hljs-string">&quot;editor&quot;</span>, <span class="hljs-string">&quot;viewer&quot;</span>]<br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ è¿è¡Œæ—¶ï¼Œpytest ä¼š è‡ªåŠ¨ä¸º user_role ç”Ÿæˆ 3 ç»„æµ‹è¯•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">test_user_role[admin]  âœ…<br>test_user_role[editor] âœ…<br>test_user_role[viewer] âœ…<br></code></pre></td></tr></table></figure><h2 id="ç»„åˆå¤šä¸ª-fixture"><a href="#ç»„åˆå¤šä¸ª-fixture" class="headerlink" title="ç»„åˆå¤šä¸ª fixture"></a>ç»„åˆå¤šä¸ª fixture</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_multiple_fixture</span>(<span class="hljs-params">user_data, authenticated_user</span>):<br>    <span class="hljs-keyword">assert</span> authenticated_user[<span class="hljs-string">&quot;username&quot;</span>] == <span class="hljs-string">&quot;alice&quot;</span><br>    <span class="hljs-keyword">assert</span> authenticated_user[<span class="hljs-string">&quot;authenticated&quot;</span>] <span class="hljs-keyword">is</span> <span class="hljs-literal">True</span><br><br></code></pre></td></tr></table></figure><p>ğŸ“Œ pytest ä¼šè‡ªåŠ¨è§£æä¾èµ–ï¼Œå…ˆæ‰§è¡Œ user_dataï¼Œå†æ‰§è¡Œ authenticated_userã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><table><thead><tr><th>åŠŸèƒ½</th><th>å…³é”®ç‰¹æ€§</th></tr></thead><tbody><tr><td><code>fixture </code> åŸºç¡€</td><td><code> @pytest.fixture</code> å®šä¹‰</td></tr><tr><td>ä½œç”¨åŸŸ<code> (scope)</code></td><td><code>&quot;function&quot;, &quot;class&quot;, &quot;module&quot;, &quot;session&quot;</code></td></tr><tr><td><code>pytest test_sample.py::test_func</code></td><td>è¿è¡ŒæŒ‡å®šæµ‹è¯•å‡½æ•°</td></tr><tr><td><code>yield</code> æ¸…ç†èµ„æº</td><td><code>yield</code> ä¹‹åæ‰§è¡Œæ¸…ç†</td></tr><tr><td>è‡ªåŠ¨åº”ç”¨</td><td><code> autouse=True</code></td></tr><tr><td><code>conftest.py</code></td><td>å…±äº« <code>fixture</code></td></tr><tr><td>å‚æ•°åŒ– <code>fixture</code></td><td><code>params=[...]</code></td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>Pytest</category>
      
      <category>Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„fixture</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>pytest</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„åŸºæœ¬å‘½ä»¤</title>
    <link href="/2025/03/19/pytest%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%972/"/>
    <url>/2025/03/19/pytest%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%972/</url>
    
    <content type="html"><![CDATA[<h1 id="Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„åŸºæœ¬å‘½ä»¤"><a href="#Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„åŸºæœ¬å‘½ä»¤" class="headerlink" title="Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„åŸºæœ¬å‘½ä»¤"></a>Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„åŸºæœ¬å‘½ä»¤</h1><p>pytest ä½œä¸ºä¸€ä¸ªå¼ºå¤§çš„æµ‹è¯•æ¡†æ¶ï¼Œæä¾›äº†éå¸¸ä¸°å¯Œçš„å‘½ä»¤å‚æ•°ï¼Œè¿™äº›å‘½ä»¤åœ¨æˆ‘ä»¬æ—¥å¸¸å·¥ä½œä¸­å¯ä»¥å¤§å¤§çš„å¸®åŠ©åˆ°æˆ‘ä»¬ï¼</p><h2 id="è¿è¡Œæµ‹è¯•çš„åŸºæœ¬å‘½ä»¤"><a href="#è¿è¡Œæµ‹è¯•çš„åŸºæœ¬å‘½ä»¤" class="headerlink" title="è¿è¡Œæµ‹è¯•çš„åŸºæœ¬å‘½ä»¤"></a>è¿è¡Œæµ‹è¯•çš„åŸºæœ¬å‘½ä»¤</h2><h3 id="è¿è¡Œæ‰€æœ‰æµ‹è¯•"><a href="#è¿è¡Œæ‰€æœ‰æµ‹è¯•" class="headerlink" title="è¿è¡Œæ‰€æœ‰æµ‹è¯•"></a>è¿è¡Œæ‰€æœ‰æµ‹è¯•</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pytest<br></code></pre></td></tr></table></figure><p><code>pytest</code> ä¼šè‡ªåŠ¨æœç´¢å½“å‰ç›®å½•åŠå…¶å­ç›®å½•ä¸­æ‰€æœ‰ç¬¦åˆ <code>test_*.py</code> æˆ– <code>*_test.py</code> è§„åˆ™çš„æµ‹è¯•æ–‡ä»¶ï¼Œå¹¶æ‰§è¡Œå…¶ä¸­çš„æµ‹è¯•å‡½æ•°ã€‚</p><h3 id="è¿è¡ŒæŒ‡å®šæµ‹è¯•æ–‡ä»¶"><a href="#è¿è¡ŒæŒ‡å®šæµ‹è¯•æ–‡ä»¶" class="headerlink" title="è¿è¡ŒæŒ‡å®šæµ‹è¯•æ–‡ä»¶"></a>è¿è¡ŒæŒ‡å®šæµ‹è¯•æ–‡ä»¶</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pytest test_sample.py<br></code></pre></td></tr></table></figure><p>ä»…è¿è¡Œ <code>test_sample.py</code> æ–‡ä»¶ä¸­çš„æµ‹è¯•ã€‚</p><h3 id="è¿è¡Œç‰¹å®šçš„æµ‹è¯•ç±»"><a href="#è¿è¡Œç‰¹å®šçš„æµ‹è¯•ç±»" class="headerlink" title="è¿è¡Œç‰¹å®šçš„æµ‹è¯•ç±»"></a>è¿è¡Œç‰¹å®šçš„æµ‹è¯•ç±»</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pytest test_sample.py::TestClass<br></code></pre></td></tr></table></figure><p>ä»…è¿è¡Œ <code>test_sample.py</code> ä¸­ <code>TestClass</code> å†…éƒ¨çš„æµ‹è¯•æ–¹æ³•ã€‚</p><h3 id="è¿è¡Œç‰¹å®šçš„æµ‹è¯•å‡½æ•°"><a href="#è¿è¡Œç‰¹å®šçš„æµ‹è¯•å‡½æ•°" class="headerlink" title="è¿è¡Œç‰¹å®šçš„æµ‹è¯•å‡½æ•°"></a>è¿è¡Œç‰¹å®šçš„æµ‹è¯•å‡½æ•°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pytest test_sample.py::test_function<br></code></pre></td></tr></table></figure><p>ä»…è¿è¡Œ <code>test_sample.py</code> ä¸­ <code>test_function</code> è¿™ä¸ªæµ‹è¯•ã€‚</p><h2 id="æµ‹è¯•é€‰æ‹©ä¸è¿‡æ»¤"><a href="#æµ‹è¯•é€‰æ‹©ä¸è¿‡æ»¤" class="headerlink" title="æµ‹è¯•é€‰æ‹©ä¸è¿‡æ»¤"></a>æµ‹è¯•é€‰æ‹©ä¸è¿‡æ»¤</h2><h3 id="é€šè¿‡-k-å…³é”®å­—åŒ¹é…"><a href="#é€šè¿‡-k-å…³é”®å­—åŒ¹é…" class="headerlink" title="é€šè¿‡ -k å…³é”®å­—åŒ¹é…"></a>é€šè¿‡ -k å…³é”®å­—åŒ¹é…</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pytest -k <span class="hljs-string">&quot;addition&quot;</span><br></code></pre></td></tr></table></figure><p>åªè¿è¡Œåç§°åŒ…å« <code>&quot;addition&quot;</code> çš„æµ‹è¯•å‡½æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pytest -k <span class="hljs-string">&quot;add or sub&quot;</span><br></code></pre></td></tr></table></figure><p>è¿è¡Œåç§°åŒ…å« <code>add</code> æˆ– <code>sub</code> çš„æµ‹è¯•ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pytest -k <span class="hljs-string">&quot;not multiplication&quot;</span><br></code></pre></td></tr></table></figure><p>æ’é™¤åç§°åŒ…å« <code>&quot;multiplication&quot;</code>çš„æµ‹è¯•ã€‚</p><h3 id="é€šè¿‡-m-è¿è¡Œç‰¹å®šæ ‡è®°çš„æµ‹è¯•"><a href="#é€šè¿‡-m-è¿è¡Œç‰¹å®šæ ‡è®°çš„æµ‹è¯•" class="headerlink" title="é€šè¿‡ -m è¿è¡Œç‰¹å®šæ ‡è®°çš„æµ‹è¯•"></a>é€šè¿‡ -m è¿è¡Œç‰¹å®šæ ‡è®°çš„æµ‹è¯•</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pytest -m slow<br></code></pre></td></tr></table></figure><p>ä»…è¿è¡Œ <code>@pytest.mark.slow</code> æ ‡è®°çš„æµ‹è¯•ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pytest<br><br><span class="hljs-meta">@pytest.mark.slow</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_slow_function</span>():<br>    <span class="hljs-keyword">import</span> time<br>    time.sleep(<span class="hljs-number">3</span>)<br>    <span class="hljs-keyword">assert</span> <span class="hljs-literal">True</span><br></code></pre></td></tr></table></figure><h2 id="æ§åˆ¶æµ‹è¯•æ‰§è¡Œ"><a href="#æ§åˆ¶æµ‹è¯•æ‰§è¡Œ" class="headerlink" title="æ§åˆ¶æµ‹è¯•æ‰§è¡Œ"></a>æ§åˆ¶æµ‹è¯•æ‰§è¡Œ</h2><h3 id="å¤±è´¥åç«‹å³åœæ­¢"><a href="#å¤±è´¥åç«‹å³åœæ­¢" class="headerlink" title="å¤±è´¥åç«‹å³åœæ­¢"></a>å¤±è´¥åç«‹å³åœæ­¢</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pytest -x<br></code></pre></td></tr></table></figure><p>ç¬¬ä¸€ä¸ªæµ‹è¯•å¤±è´¥åç«‹å³åœæ­¢ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pytest --maxfail=<span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><p>å…è®¸æœ€å¤š 3 ä¸ªæµ‹è¯•å¤±è´¥ï¼Œè¶…è¿‡å°±åœæ­¢ã€‚</p><h3 id="åªè¿è¡Œä¸Šæ¬¡å¤±è´¥çš„æµ‹è¯•"><a href="#åªè¿è¡Œä¸Šæ¬¡å¤±è´¥çš„æµ‹è¯•" class="headerlink" title="åªè¿è¡Œä¸Šæ¬¡å¤±è´¥çš„æµ‹è¯•"></a>åªè¿è¡Œä¸Šæ¬¡å¤±è´¥çš„æµ‹è¯•</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pytest --lf<br></code></pre></td></tr></table></figure><p>ä»…è¿è¡Œä¸Šä¸€æ¬¡å¤±è´¥çš„æµ‹è¯•ï¼ˆlast failedï¼‰ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pytest --ff<br></code></pre></td></tr></table></figure><p>å…ˆè¿è¡Œä¸Šæ¬¡å¤±è´¥çš„æµ‹è¯•ï¼Œå†è¿è¡Œå…¶ä»–æµ‹è¯•ï¼ˆfailed firstï¼‰ã€‚</p><h3 id="pytest-mark-skip-æ— æ¡ä»¶è·³è¿‡"><a href="#pytest-mark-skip-æ— æ¡ä»¶è·³è¿‡" class="headerlink" title="@pytest.mark.skip æ— æ¡ä»¶è·³è¿‡"></a>@pytest.mark.skip æ— æ¡ä»¶è·³è¿‡</h3><p><code>@pytest.mark.skip</code> ç›´æ¥è·³è¿‡æµ‹è¯•ï¼Œä¸æ‰§è¡Œè¯¥æµ‹è¯•å‡½æ•°ã€‚é€‚ç”¨äºæµ‹è¯•æš‚æ—¶æ— æ„ä¹‰çš„æƒ…å†µã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pytest<br><br><span class="hljs-meta">@pytest.mark.skip(<span class="hljs-params">reason=<span class="hljs-string">&quot;å½“å‰åŠŸèƒ½æœªå®ç°&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_not_implemented</span>():<br>    <span class="hljs-keyword">assert</span> <span class="hljs-literal">False</span>  <span class="hljs-comment"># è¿™ä¸ªæµ‹è¯•ä¸ä¼šè¿è¡Œ</span><br><br></code></pre></td></tr></table></figure><h3 id="pytest-mark-skipif-condition-reason-â€â€¦â€-æ¡ä»¶è·³è¿‡"><a href="#pytest-mark-skipif-condition-reason-â€â€¦â€-æ¡ä»¶è·³è¿‡" class="headerlink" title="@pytest.mark.skipif(condition, reason&#x3D;â€â€¦â€) æ¡ä»¶è·³è¿‡"></a>@pytest.mark.skipif(condition, reason&#x3D;â€â€¦â€) æ¡ä»¶è·³è¿‡</h3><p><code>skipif</code> å…è®¸æ ¹æ®ç‰¹å®šæ¡ä»¶å†³å®šæ˜¯å¦è·³è¿‡æµ‹è¯•ã€‚ä¾‹å¦‚ï¼š</p><p>ä»…åœ¨ç‰¹å®š <code>Python</code> ç‰ˆæœ¬ä¸‹è·³è¿‡æµ‹è¯•ã€‚<br>ä»…åœ¨ <code>Windows</code> ç¯å¢ƒä¸‹è·³è¿‡æµ‹è¯•ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pytest<br><span class="hljs-keyword">import</span> sys<br><span class="hljs-comment"># è·³è¿‡ Python 3.6 åŠä»¥ä¸‹ç‰ˆæœ¬</span><br><span class="hljs-meta">@pytest.mark.skipif(<span class="hljs-params">sys.version_info &lt; (<span class="hljs-params"><span class="hljs-number">3</span>, <span class="hljs-number">7</span></span>), reason=<span class="hljs-string">&quot;éœ€è¦ Python 3.7 åŠä»¥ä¸Šç‰ˆæœ¬&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_python_version</span>():<br>    <span class="hljs-keyword">assert</span> sys.version_info &gt;= (<span class="hljs-number">3</span>, <span class="hljs-number">7</span>)<br><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># ä»…åœ¨ Windows è·³è¿‡</span><br><span class="hljs-meta">@pytest.mark.skipif(<span class="hljs-params">sys.platform == <span class="hljs-string">&quot;win32&quot;</span>, reason=<span class="hljs-string">&quot;Windows ç¯å¢ƒä¸‹è·³è¿‡&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_not_for_windows</span>():<br>    <span class="hljs-keyword">assert</span> <span class="hljs-literal">True</span><br></code></pre></td></tr></table></figure><h3 id="pytest-mark-xfail-é¢„æœŸå¤±è´¥"><a href="#pytest-mark-xfail-é¢„æœŸå¤±è´¥" class="headerlink" title="@pytest.mark.xfail é¢„æœŸå¤±è´¥"></a>@pytest.mark.xfail é¢„æœŸå¤±è´¥</h3><p><code>xfailï¼ˆexpected failureï¼‰</code>ç”¨äºæ ‡è®° å·²çŸ¥å¯èƒ½å¤±è´¥çš„æµ‹è¯•ï¼Œä½†ä»ç„¶è®©å®ƒè¿è¡Œã€‚</p><p>æµ‹è¯•é€šè¿‡ï¼šæ˜¾ç¤º <code>XPASS</code>ï¼ˆæ„å¤–é€šè¿‡ï¼‰ã€‚<br>æµ‹è¯•å¤±è´¥ï¼šæ˜¾ç¤º <code>XFAIL</code>ï¼ˆç¬¦åˆé¢„æœŸçš„å¤±è´¥ï¼‰ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pytest<br><br><span class="hljs-meta">@pytest.mark.xfail(<span class="hljs-params">reason=<span class="hljs-string">&quot;è¿™ä¸ª bug è¿˜æ²¡ä¿®å¤&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_known_bug</span>():<br>    <span class="hljs-keyword">assert</span> <span class="hljs-number">1</span> + <span class="hljs-number">1</span> == <span class="hljs-number">3</span>  <span class="hljs-comment"># é¢„æœŸå¤±è´¥</span><br></code></pre></td></tr></table></figure><p>ä¸ä¼šå½±å“æ•´ä½“æµ‹è¯•é€šè¿‡ç‡ï¼ˆå³ä¾¿å¤±è´¥ï¼Œpytest ä¹Ÿä¸ä¼šå°†å…¶è§†ä¸ºçœŸæ­£çš„å¤±è´¥ï¼‰ã€‚</p><h3 id="xfail-ç»“åˆ-condition"><a href="#xfail-ç»“åˆ-condition" class="headerlink" title="xfail ç»“åˆ condition"></a>xfail ç»“åˆ condition</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">@pytest.mark.xfail(<span class="hljs-params">sys.platform == <span class="hljs-string">&quot;win32&quot;</span>, reason=<span class="hljs-string">&quot;Windows ä¸‹æ­¤åŠŸèƒ½æœªä¿®å¤&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_windows_bug</span>():<br>    <span class="hljs-keyword">assert</span> <span class="hljs-literal">False</span><br><br></code></pre></td></tr></table></figure><p>ä»…åœ¨ Windows ä¸‹ xfailï¼Œå…¶ä»–å¹³å°ä¸ä¼šå—å½±å“</p><h3 id="strict-True-è®©-XPASS-å˜æˆå¤±è´¥"><a href="#strict-True-è®©-XPASS-å˜æˆå¤±è´¥" class="headerlink" title="strict&#x3D;True è®© XPASS å˜æˆå¤±è´¥"></a>strict&#x3D;True è®© XPASS å˜æˆå¤±è´¥</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœ xfail æ ‡è®°çš„æµ‹è¯• æ„å¤–é€šè¿‡ï¼ˆXPASSï¼‰ï¼Œpytest ä»è®¤ä¸ºæµ‹è¯•é€šè¿‡ã€‚ä½†å¯ä»¥ä½¿ç”¨ strict&#x3D;True å¼ºåˆ¶å¤±è´¥ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">@pytest.mark.xfail(<span class="hljs-params">reason=<span class="hljs-string">&quot;Bug å°šæœªä¿®å¤&quot;</span>, strict=<span class="hljs-literal">True</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_should_fail</span>():<br>    <span class="hljs-keyword">assert</span> <span class="hljs-number">2</span> + <span class="hljs-number">2</span> == <span class="hljs-number">4</span>  <span class="hljs-comment"># å®é™…ä¸Šä¼šé€šè¿‡</span><br></code></pre></td></tr></table></figure><h2 id="è¯¦ç»†åº¦ä¸è¾“å‡ºæ§åˆ¶"><a href="#è¯¦ç»†åº¦ä¸è¾“å‡ºæ§åˆ¶" class="headerlink" title="è¯¦ç»†åº¦ä¸è¾“å‡ºæ§åˆ¶"></a>è¯¦ç»†åº¦ä¸è¾“å‡ºæ§åˆ¶</h2><h3 id="å¢åŠ è¯¦ç»†ä¿¡æ¯"><a href="#å¢åŠ è¯¦ç»†ä¿¡æ¯" class="headerlink" title="å¢åŠ è¯¦ç»†ä¿¡æ¯"></a>å¢åŠ è¯¦ç»†ä¿¡æ¯</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pytest -v<br></code></pre></td></tr></table></figure><p>æ˜¾ç¤ºæ›´è¯¦ç»†çš„æµ‹è¯•ç»“æœï¼ŒåŒ…æ‹¬æ¯ä¸ªæµ‹è¯•çš„åç§°å’ŒçŠ¶æ€ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pytest -q<br></code></pre></td></tr></table></figure><p>åªæ˜¾ç¤ºå¿…è¦çš„ä¿¡æ¯ï¼ˆå®‰é™æ¨¡å¼ï¼‰ã€‚</p><h3 id="æ˜¾ç¤º-print-è¯­å¥è¾“å‡º"><a href="#æ˜¾ç¤º-print-è¯­å¥è¾“å‡º" class="headerlink" title="æ˜¾ç¤º print è¯­å¥è¾“å‡º"></a>æ˜¾ç¤º print è¯­å¥è¾“å‡º</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pytest -s<br></code></pre></td></tr></table></figure><p>å…è®¸æµ‹è¯•è¿‡ç¨‹ä¸­ print() çš„è¾“å‡ºï¼ˆé»˜è®¤ pytest ä¼šæ•è·å¹¶éšè—ï¼‰ã€‚</p><h2 id="é…ç½®å¤±è´¥ä¿¡æ¯"><a href="#é…ç½®å¤±è´¥ä¿¡æ¯" class="headerlink" title="é…ç½®å¤±è´¥ä¿¡æ¯"></a>é…ç½®å¤±è´¥ä¿¡æ¯</h2><h3 id="æ§åˆ¶å›æº¯ï¼ˆtracebackï¼‰ä¿¡æ¯"><a href="#æ§åˆ¶å›æº¯ï¼ˆtracebackï¼‰ä¿¡æ¯" class="headerlink" title="æ§åˆ¶å›æº¯ï¼ˆtracebackï¼‰ä¿¡æ¯"></a>æ§åˆ¶å›æº¯ï¼ˆtracebackï¼‰ä¿¡æ¯</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pytest --tb=short<br></code></pre></td></tr></table></figure><p>æ˜¾ç¤ºç²¾ç®€çš„é”™è¯¯ä¿¡æ¯ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pytest --tb=long<br></code></pre></td></tr></table></figure><p>æ˜¾ç¤ºå®Œæ•´çš„å›æº¯ä¿¡æ¯ï¼ˆé»˜è®¤ï¼‰ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pytest --tb=line<br></code></pre></td></tr></table></figure><p>åªæ˜¾ç¤ºä¸€è¡Œé”™è¯¯ä¿¡æ¯ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pytest --tb=no<br></code></pre></td></tr></table></figure><p>ä¸æ˜¾ç¤ºé”™è¯¯å›æº¯ä¿¡æ¯ã€‚</p><h2 id="è¿è¡Œé€Ÿåº¦ä¸æ€§èƒ½ä¼˜åŒ–"><a href="#è¿è¡Œé€Ÿåº¦ä¸æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="è¿è¡Œé€Ÿåº¦ä¸æ€§èƒ½ä¼˜åŒ–"></a>è¿è¡Œé€Ÿåº¦ä¸æ€§èƒ½ä¼˜åŒ–</h2><h3 id="åªæ”¶é›†æµ‹è¯•ä½†ä¸æ‰§è¡Œ"><a href="#åªæ”¶é›†æµ‹è¯•ä½†ä¸æ‰§è¡Œ" class="headerlink" title="åªæ”¶é›†æµ‹è¯•ä½†ä¸æ‰§è¡Œ"></a>åªæ”¶é›†æµ‹è¯•ä½†ä¸æ‰§è¡Œ</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pytest --collect-only<br></code></pre></td></tr></table></figure><p>ä»…æ”¶é›†æµ‹è¯•å¹¶åˆ—å‡ºå®ƒä»¬ï¼Œä¸æ‰§è¡Œæµ‹è¯•ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pytest --durations=<span class="hljs-number">5</span><br></code></pre></td></tr></table></figure><p>æ˜¾ç¤ºæ‰§è¡Œæœ€æ…¢çš„ 5 ä¸ªæµ‹è¯•ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pytest --durations=<span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><p>æ˜¾ç¤ºæ‰€æœ‰æµ‹è¯•çš„æ‰§è¡Œæ—¶é—´ï¼ŒæŒ‰æ…¢é€Ÿæ’åºã€‚</p><h2 id="å¤±è´¥é‡è¯•"><a href="#å¤±è´¥é‡è¯•" class="headerlink" title="å¤±è´¥é‡è¯•"></a>å¤±è´¥é‡è¯•</h2><h3 id="å¤±è´¥æ—¶è‡ªåŠ¨é‡è¯•"><a href="#å¤±è´¥æ—¶è‡ªåŠ¨é‡è¯•" class="headerlink" title="å¤±è´¥æ—¶è‡ªåŠ¨é‡è¯•"></a>å¤±è´¥æ—¶è‡ªåŠ¨é‡è¯•</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">pip install pytest-rerunfailures<br>pytest --reruns <span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><p>å¤±è´¥çš„æµ‹è¯•æœ€å¤šé‡è¯• 3 æ¬¡ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pytest<br><br><span class="hljs-meta">@pytest.mark.flaky(<span class="hljs-params">reruns=<span class="hljs-number">3</span>, reruns_delay=<span class="hljs-number">2</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_flaky</span>():<br>    <span class="hljs-keyword">import</span> random<br>    <span class="hljs-keyword">assert</span> random.choice([<span class="hljs-literal">True</span>, <span class="hljs-literal">False</span>])<br></code></pre></td></tr></table></figure><p>@pytest.mark.flaky å¯ç”¨äºå•ç‹¬æ ‡è®°æŸäº›ä¸ç¨³å®šçš„æµ‹è¯•è¿›è¡Œé‡è¯•ã€‚</p><h2 id="é…ç½®-pytest"><a href="#é…ç½®-pytest" class="headerlink" title="é…ç½® pytest"></a>é…ç½® pytest</h2><h3 id="ä½¿ç”¨-pytest-ini-é…ç½®é»˜è®¤å‚æ•°"><a href="#ä½¿ç”¨-pytest-ini-é…ç½®é»˜è®¤å‚æ•°" class="headerlink" title="ä½¿ç”¨ pytest.ini é…ç½®é»˜è®¤å‚æ•°"></a>ä½¿ç”¨ pytest.ini é…ç½®é»˜è®¤å‚æ•°</h3><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[pytest]</span><br><span class="hljs-attr">addopts</span> = -v --maxfail=<span class="hljs-number">2</span> --tb=short<br><span class="hljs-attr">python_files</span> = test_*.py *_test.py<br><span class="hljs-attr">python_classes</span> = Test*<br><span class="hljs-attr">python_functions</span> = test_*<br><br></code></pre></td></tr></table></figure><p>addopts æŒ‡å®šé»˜è®¤è¿è¡Œå‚æ•°ã€‚<br>python_files å®šä¹‰æµ‹è¯•æ–‡ä»¶æ ¼å¼ã€‚<br>python_classes å®šä¹‰æµ‹è¯•ç±»çš„å‘½åè§„åˆ™ã€‚<br>python_functions å®šä¹‰æµ‹è¯•å‡½æ•°çš„å‘½åè§„åˆ™ã€‚</p><h2 id="é«˜çº§åŠŸèƒ½"><a href="#é«˜çº§åŠŸèƒ½" class="headerlink" title="é«˜çº§åŠŸèƒ½"></a>é«˜çº§åŠŸèƒ½</h2><h3 id="å¹¶è¡Œè¿è¡Œæµ‹è¯•"><a href="#å¹¶è¡Œè¿è¡Œæµ‹è¯•" class="headerlink" title="å¹¶è¡Œè¿è¡Œæµ‹è¯•"></a>å¹¶è¡Œè¿è¡Œæµ‹è¯•</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">pip install pytest-xdist<br>pytest -n <span class="hljs-number">4</span><br></code></pre></td></tr></table></figure><p>-n 4 è¡¨ç¤ºåŒæ—¶è¿è¡Œ 4 ä¸ªæµ‹è¯•è¿›ç¨‹ï¼Œæé«˜æµ‹è¯•æ‰§è¡Œé€Ÿåº¦ã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><h2 id="pytest-å¸¸ç”¨å‘½ä»¤å‚æ•°æ€»ç»“"><a href="#pytest-å¸¸ç”¨å‘½ä»¤å‚æ•°æ€»ç»“" class="headerlink" title="pytest å¸¸ç”¨å‘½ä»¤å‚æ•°æ€»ç»“"></a><strong>pytest å¸¸ç”¨å‘½ä»¤å‚æ•°æ€»ç»“</strong></h2><table><thead><tr><th>å‚æ•°</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>pytest</code></td><td>è¿è¡Œæ‰€æœ‰æµ‹è¯•</td></tr><tr><td><code>pytest test_sample.py</code></td><td>è¿è¡ŒæŒ‡å®šæ–‡ä»¶</td></tr><tr><td><code>pytest test_sample.py::test_func</code></td><td>è¿è¡ŒæŒ‡å®šæµ‹è¯•å‡½æ•°</td></tr><tr><td><code>pytest -k &quot;å…³é”®å­—&quot;</code></td><td>åªè¿è¡ŒåŒ…å«å…³é”®å­—çš„æµ‹è¯•</td></tr><tr><td><code>pytest -m æ ‡è®°</code></td><td>è¿è¡Œç‰¹å®š <code>@pytest.mark.&lt;æ ‡è®°&gt;</code> æµ‹è¯•</td></tr><tr><td><code>pytest -x</code></td><td>ç¬¬ä¸€ä¸ªå¤±è´¥çš„æµ‹è¯•ååœæ­¢</td></tr><tr><td><code>pytest --lf</code></td><td>ä»…è¿è¡Œä¸Šæ¬¡å¤±è´¥çš„æµ‹è¯•</td></tr><tr><td><code>pytest --ff</code></td><td>å…ˆè¿è¡Œå¤±è´¥çš„æµ‹è¯•</td></tr><tr><td><code>pytest -v</code></td><td>æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯</td></tr><tr><td><code>pytest -s</code></td><td>æ˜¾ç¤º <code>print</code> è¾“å‡º</td></tr><tr><td><code>pytest --tb=short</code></td><td>ç®€åŒ–é”™è¯¯å›æº¯</td></tr><tr><td><code>pytest --durations=5</code></td><td>æ˜¾ç¤ºæœ€æ…¢çš„ 5 ä¸ªæµ‹è¯•</td></tr><tr><td><code>pytest --reruns 3</code></td><td>å¤±è´¥é‡è¯• 3 æ¬¡</td></tr><tr><td><code>pytest --junitxml=report.xml</code></td><td>ç”Ÿæˆ JUnit æ ¼å¼æŠ¥å‘Š</td></tr><tr><td><code>pytest --alluredir=./allure-results</code></td><td>ç”Ÿæˆ Allure æŠ¥å‘Š</td></tr><tr><td><code>pytest -n 4</code></td><td>å¹¶è¡Œè¿è¡Œ 4 ä¸ªæµ‹è¯•</td></tr></tbody></table><h2 id="pytest-skipã€skipifã€xfail-å‚æ•°å¯¹æ¯”æ€»ç»“"><a href="#pytest-skipã€skipifã€xfail-å‚æ•°å¯¹æ¯”æ€»ç»“" class="headerlink" title="pytest skipã€skipifã€xfail å‚æ•°å¯¹æ¯”æ€»ç»“"></a><strong>pytest <code>skip</code>ã€<code>skipif</code>ã€<code>xfail</code> å‚æ•°å¯¹æ¯”æ€»ç»“</strong></h2><table><thead><tr><th>æ ‡è®°</th><th>ä½œç”¨</th><th>é€‚ç”¨åœºæ™¯</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>@pytest.mark.skip</code></td><td>æ— æ¡ä»¶è·³è¿‡</td><td>åŠŸèƒ½æœªå®ç°ã€ä¸é€‚ç”¨çš„æµ‹è¯•</td><td><code>@pytest.mark.skip(reason=&quot;åŠŸèƒ½æœªå®ç°&quot;)</code></td></tr><tr><td><code>@pytest.mark.skipif(condition, reason=&quot;â€¦&quot;)</code></td><td>æ¡ä»¶è·³è¿‡</td><td>æ ¹æ®ç¯å¢ƒã€ä¾èµ–å†³å®šæ˜¯å¦è·³è¿‡</td><td><code>@pytest.mark.skipif(sys.platform == &quot;win32&quot;, reason=&quot;Windows ä¸‹è·³è¿‡&quot;)</code></td></tr><tr><td><code>@pytest.mark.xfail</code></td><td>é¢„æœŸå¤±è´¥ï¼ˆä½†ä»è¿è¡Œï¼‰</td><td>è®°å½•å·²çŸ¥ Bugï¼Œä¸å½±å“æµ‹è¯•é€šè¿‡ç‡</td><td><code>@pytest.mark.xfail(reason=&quot;Bug æœªä¿®å¤&quot;)</code></td></tr><tr><td><code>@pytest.mark.xfail(strict=True)</code></td><td>é¢„æœŸå¤±è´¥ï¼ˆXPASS è§†ä¸ºå¤±è´¥ï¼‰</td><td>ç¡®ä¿ Bug æœªè¢«è¯¯ä¿®å¤</td><td><code>@pytest.mark.xfail(reason=&quot;Bug æœªä¿®å¤&quot;, strict=True)</code></td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>Pytest</category>
      
      <category>Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„åŸºæœ¬å‘½ä»¤</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>pytest</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„å®‰è£…å’ŒåŸºæœ¬ä½¿ç”¨</title>
    <link href="/2025/03/19/pytest%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%971/"/>
    <url>/2025/03/19/pytest%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%971/</url>
    
    <content type="html"><![CDATA[<h1 id="Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„å®‰è£…å’ŒåŸºæœ¬ä½¿ç”¨"><a href="#Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„å®‰è£…å’ŒåŸºæœ¬ä½¿ç”¨" class="headerlink" title="Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„å®‰è£…å’ŒåŸºæœ¬ä½¿ç”¨"></a>Pytestå…¥é—¨ç³»åˆ—ä¹‹pytestçš„å®‰è£…å’ŒåŸºæœ¬ä½¿ç”¨</h1><p>åœ¨ Python ç”Ÿæ€ä¸­ï¼Œpytest æ˜¯ä¸€ä¸ªå¼ºå¤§ä¸”æµè¡Œçš„æµ‹è¯•æ¡†æ¶ï¼Œæä¾›ç®€æ´çš„è¯­æ³•å’Œä¸°å¯Œçš„æ’ä»¶æ”¯æŒã€‚</p><h2 id="pytest-çš„å®‰è£…"><a href="#pytest-çš„å®‰è£…" class="headerlink" title="pytest çš„å®‰è£…"></a>pytest çš„å®‰è£…</h2><p>pytest çš„å®‰è£…æ–¹æ³•</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pip install pytest<br></code></pre></td></tr></table></figure><p>å®‰è£…å®Œæ¯•åï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥pytestç‰ˆæœ¬ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pytest --version<br></code></pre></td></tr></table></figure><h2 id="pytest-å…¥é—¨æ¡ˆä¾‹"><a href="#pytest-å…¥é—¨æ¡ˆä¾‹" class="headerlink" title="pytest å…¥é—¨æ¡ˆä¾‹"></a>pytest å…¥é—¨æ¡ˆä¾‹</h2><p>åˆ›å»º test_sample.py æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_addition</span>():<br>    <span class="hljs-keyword">assert</span> <span class="hljs-number">1</span> + <span class="hljs-number">1</span> == <span class="hljs-number">2</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_subtraction</span>():<br>    <span class="hljs-keyword">assert</span> <span class="hljs-number">5</span> - <span class="hljs-number">3</span> == <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p>è¿è¡Œæµ‹è¯•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pytest test_sample.py<br></code></pre></td></tr></table></figure><p>ç»“æœï¼š</p><img src="/2025/03/19/pytest%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%971/1.png" class=""><p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬æ˜¯è¿è¡Œäº†ä¸¤ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œç›®å‰å‡æ˜¯é€šè¿‡çš„æƒ…å†µ</p><h2 id="pytest-å‘½åè§„åˆ™"><a href="#pytest-å‘½åè§„åˆ™" class="headerlink" title="pytest å‘½åè§„åˆ™"></a>pytest å‘½åè§„åˆ™</h2><p>è™½ç„¶æˆ‘ä»¬çœ‹åˆ°å¯ä»¥æ­£å¸¸çš„è¿è¡Œæ–‡ä»¶ï¼Œä½†æ˜¯å¦‚æœä½ çš„æ–‡ä»¶æˆ–è€…å‡½æ•°äº¦æˆ–è€…ç±»å‘½åè§„åˆ™ä¸ç¬¦åˆè¦æ±‚ï¼Œåˆ™æ— æ³•è¿è¡Œåˆ°ä½ æƒ³è¦çš„æ–‡ä»¶æˆ–è€…å‡½æ•°äº¦æˆ–è€…ç±»ï¼Œé‚£ä¹ˆä¸€èµ·æ¥çœ‹ä¸€ä¸‹pytest æ–‡ä»¶å’Œå‡½æ•°ä»¥åŠç±»çš„å‘½åè§„åˆ™å§ï¼</p><h3 id="pytest-æ–‡ä»¶å¤¹å‘½åè§„åˆ™"><a href="#pytest-æ–‡ä»¶å¤¹å‘½åè§„åˆ™" class="headerlink" title="pytest æ–‡ä»¶å¤¹å‘½åè§„åˆ™"></a>pytest æ–‡ä»¶å¤¹å‘½åè§„åˆ™</h3><p>æµ‹è¯•ç›®å½•å¯ä»¥æ˜¯ä»»ä½•åç§°ï¼Œä½†æ¨èä½¿ç”¨ tests&#x2F;ï¼Œtest_cases&#x2F; ç­‰å¸¸è§å‘½åæ–¹å¼ã€‚<br>å¦‚æœç›®å½•åŒ…å« <code>__init__.py</code>ï¼Œå®ƒä¼šè¢«å½“ä½œ Python åŒ…ï¼Œå¯èƒ½ä¼šå½±å“ pytest çš„æµ‹è¯•å‘ç°æœºåˆ¶ï¼Œå› æ­¤ ä¸æ¨èåœ¨ tests&#x2F; ç›®å½•ä¸‹ä½¿ç”¨ <code>__init__.py</code>ã€‚</p><p>ç¤ºä¾‹çš„ç›®å½•ç»“æ„:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs css">project_root/<br>â”œâ”€â”€ <span class="hljs-attribute">src</span>/<br>â”‚   â”œâ”€â”€ app<span class="hljs-selector-class">.py</span><br>â”‚   â”œâ”€â”€ utils<span class="hljs-selector-class">.py</span><br>â”œâ”€â”€ tests/<br>â”‚   â”œâ”€â”€ test_math<span class="hljs-selector-class">.py</span><br>â”‚   â”œâ”€â”€ test_utils<span class="hljs-selector-class">.py</span><br>â”‚   â”œâ”€â”€ sub_tests/<br>â”‚   â”‚   â”œâ”€â”€ test_submodule<span class="hljs-selector-class">.py</span><br></code></pre></td></tr></table></figure><h3 id="pytest-æ–‡ä»¶å‘½åè§„åˆ™"><a href="#pytest-æ–‡ä»¶å‘½åè§„åˆ™" class="headerlink" title="pytest æ–‡ä»¶å‘½åè§„åˆ™"></a>pytest æ–‡ä»¶å‘½åè§„åˆ™</h3><p>pytest é»˜è®¤ä¼šè¯†åˆ«ä»¥ä¸‹å‘½åæ ¼å¼çš„æµ‹è¯•æ–‡ä»¶ï¼š</p><p>æ–‡ä»¶åå¿…é¡»ä»¥ test_ å¼€å¤´ï¼Œæˆ–ä»¥ _test ç»“å°¾ï¼Œä¾‹å¦‚ï¼š<br>âœ… test_example.py<br>âœ… example_test.py<br>âŒ example.pyï¼ˆä¸ä¼šè¢« pytest è¯†åˆ«ä¸ºæµ‹è¯•æ–‡ä»¶ï¼‰</p><p>ä½†æ˜¯å¦‚æœæ–‡ä»¶ä¸ç¬¦åˆé»˜è®¤è§„åˆ™ï¼Œå¯ä»¥åœ¨ pytest.iniæ–‡ä»¶ä¸­è‡ªå®šä¹‰æµ‹è¯•æ–‡ä»¶åŒ¹é…è§„åˆ™ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-comment"># pytest.ini</span><br><span class="hljs-section">[pytest]</span><br><span class="hljs-attr">python_files</span> = check_*.py test_*.py *_test.py<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°é…ç½®å…è®¸ pytest è¯†åˆ« check_xxx.py ä½œä¸ºæµ‹è¯•æ–‡ä»¶ã€‚</p><h3 id="pytest-å‡½æ•°å‘½åè§„åˆ™"><a href="#pytest-å‡½æ•°å‘½åè§„åˆ™" class="headerlink" title="pytest å‡½æ•°å‘½åè§„åˆ™"></a>pytest å‡½æ•°å‘½åè§„åˆ™</h3><p>pytest é»˜è®¤è¯†åˆ«çš„æµ‹è¯•å‡½æ•°æ ¼å¼å¦‚ä¸‹ï¼š</p><p>å‡½æ•°åå¿…é¡»ä»¥ test_ å¼€å¤´ï¼Œä¾‹å¦‚ï¼š<br>âœ… def test_addition():<br>âŒ def addition_test():ï¼ˆä¸ä¼šè¢« pytest è¯†åˆ«ï¼‰</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># test_math.py</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_addition</span>():<br>    <span class="hljs-keyword">assert</span> <span class="hljs-number">1</span> + <span class="hljs-number">1</span> == <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><h3 id="pytest-ç±»çš„å‘½åè§„åˆ™"><a href="#pytest-ç±»çš„å‘½åè§„åˆ™" class="headerlink" title="pytest ç±»çš„å‘½åè§„åˆ™"></a>pytest ç±»çš„å‘½åè§„åˆ™</h3><p>ç±»åå¿…é¡»ä»¥ Test å¼€å¤´ï¼Œæ³¨æ„ï¼šä½†ä¸èƒ½åŒ…å« <code>__init__</code> æ–¹æ³•ï¼Œå¦åˆ™ pytest ä¸ä¼šè¯†åˆ«ã€‚</p><p>ä¾‹å¦‚ï¼š<br>âœ… class TestMathOperations:<br>âŒ class MathTests:ï¼ˆä¸ä¼šè¢« pytest è¯†åˆ«ï¼‰</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># test_class.py</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestMath</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_addition</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">assert</span> <span class="hljs-number">2</span> + <span class="hljs-number">2</span> == <span class="hljs-number">4</span><br></code></pre></td></tr></table></figure><h3 id="pytest-è‡ªå®šä¹‰æµ‹è¯•å‘ç°è§„åˆ™"><a href="#pytest-è‡ªå®šä¹‰æµ‹è¯•å‘ç°è§„åˆ™" class="headerlink" title="pytest è‡ªå®šä¹‰æµ‹è¯•å‘ç°è§„åˆ™"></a>pytest è‡ªå®šä¹‰æµ‹è¯•å‘ç°è§„åˆ™</h3><p>å¦‚æœæƒ³è®© pytest è¯†åˆ«ä¸åŒçš„æ–‡ä»¶æˆ–å‡½æ•°å‘½åï¼Œå¯ä»¥åœ¨ pytest.ini ä¸­é…ç½®ï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[pytest]</span><br><span class="hljs-attr">python_files</span> = check_*.py  <span class="hljs-comment"># å…è®¸æ–‡ä»¶åä»¥ check_ å¼€å¤´</span><br><span class="hljs-attr">python_classes</span> = Check*    <span class="hljs-comment"># å…è®¸ç±»åä»¥ Check å¼€å¤´</span><br><span class="hljs-attr">python_functions</span> = verify_*  <span class="hljs-comment"># å…è®¸å‡½æ•°åä»¥ verify_ å¼€å¤´</span><br></code></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œpytest ä¹Ÿä¼šè¯†åˆ«ä»¥ä¸‹æ–‡ä»¶å’Œå‡½æ•°ï¼š</p><p>check_example.py<br>class CheckOperations:<br>def verify_addition():</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><h2 id="pytest-æ–‡ä»¶å‘½åè§„åˆ™æ€»ç»“"><a href="#pytest-æ–‡ä»¶å‘½åè§„åˆ™æ€»ç»“" class="headerlink" title="pytest æ–‡ä»¶å‘½åè§„åˆ™æ€»ç»“"></a><strong>pytest æ–‡ä»¶å‘½åè§„åˆ™æ€»ç»“</strong></h2><table><thead><tr><th>è§„åˆ™</th><th>é»˜è®¤æ ¼å¼</th><th>å¯è‡ªå®šä¹‰é…ç½®</th></tr></thead><tbody><tr><td><strong>æµ‹è¯•æ–‡ä»¶</strong></td><td><code>test_*.py</code> æˆ– <code>*_test.py</code></td><td><code>python_files = check_*.py</code></td></tr><tr><td><strong>æµ‹è¯•å‡½æ•°</strong></td><td><code>test_*</code></td><td><code>python_functions = verify_*</code></td></tr><tr><td><strong>æµ‹è¯•ç±»</strong></td><td><code>Test*</code></td><td><code>python_classes = Check*</code></td></tr><tr><td><strong>æµ‹è¯•ç›®å½•</strong></td><td>ä»»ä½•åç§°ï¼ˆæ¨è <code>tests/</code>ï¼‰</td><td>æ— éœ€ç‰¹åˆ«é…ç½®</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>Pytest</category>
      
      <category>Pytest å…¥é—¨ç³»åˆ—ä¹‹Pytestçš„å®‰è£…å’ŒåŸºæœ¬ä½¿ç”¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>pytest</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python lambdaå‡½æ•°</title>
    <link href="/2025/03/18/lambda%E5%87%BD%E6%95%B0/"/>
    <url>/2025/03/18/lambda%E5%87%BD%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="Python-lambda-å‡½æ•°è¯¦ç»†ä»‹ç»"><a href="#Python-lambda-å‡½æ•°è¯¦ç»†ä»‹ç»" class="headerlink" title="Python lambda å‡½æ•°è¯¦ç»†ä»‹ç»"></a>Python lambda å‡½æ•°è¯¦ç»†ä»‹ç»</h1><p>åœ¨ Python ä¸­ï¼Œlambda å‡½æ•°æ˜¯ä¸€ç§ åŒ¿åå‡½æ•°ï¼ˆæ²¡æœ‰åç§°çš„å‡½æ•°ï¼‰ï¼Œç”¨äºåˆ›å»ºç®€çŸ­çš„å•è¡Œå‡½æ•°ã€‚lambda å…³é”®å­—å…è®¸ä½ åœ¨ä¸å®šä¹‰æ­£å¼å‡½æ•°çš„æƒ…å†µä¸‹ï¼Œå¿«é€Ÿåˆ›å»ºå°å‹å‡½æ•°ã€‚</p><h2 id="lambad-å‡½æ•°çš„è¯­æ³•"><a href="#lambad-å‡½æ•°çš„è¯­æ³•" class="headerlink" title="lambad å‡½æ•°çš„è¯­æ³•"></a>lambad å‡½æ•°çš„è¯­æ³•</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">lambda</span> å‚æ•°<span class="hljs-number">1</span>, å‚æ•°<span class="hljs-number">2</span>, ...: è¡¨è¾¾å¼<br></code></pre></td></tr></table></figure><p>ç‰¹ç‚¹ï¼š<br>  åªèƒ½åŒ…å« ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå¹¶ä¸” ä¸èƒ½åŒ…å«èµ‹å€¼æ“ä½œï¼ˆå¦‚ &#x3D;ï¼‰ã€‚<br>  é€‚ç”¨äº ç®€å• çš„è®¡ç®—æˆ–æ•°æ®è½¬æ¢ã€‚<br>  è¿”å›å€¼ æ˜¯è¡¨è¾¾å¼çš„è®¡ç®—ç»“æœã€‚</p><h2 id="æ¡ˆä¾‹-è®¡ç®—å’Œ"><a href="#æ¡ˆä¾‹-è®¡ç®—å’Œ" class="headerlink" title="æ¡ˆä¾‹: è®¡ç®—å’Œ"></a>æ¡ˆä¾‹: è®¡ç®—å’Œ</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">x, y</span>):<br>    <span class="hljs-keyword">return</span> x + y<br><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ lambdaå‡½æ•°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">lambda</span> x,y:x+y<br></code></pre></td></tr></table></figure><h2 id="lambdb-å‡½æ•°çš„åŸºæœ¬å®ä¾‹"><a href="#lambdb-å‡½æ•°çš„åŸºæœ¬å®ä¾‹" class="headerlink" title="lambdb å‡½æ•°çš„åŸºæœ¬å®ä¾‹"></a>lambdb å‡½æ•°çš„åŸºæœ¬å®ä¾‹</h2><h2 id="ç®€å•çš„å‡æ³•"><a href="#ç®€å•çš„å‡æ³•" class="headerlink" title="ç®€å•çš„å‡æ³•"></a>ç®€å•çš„å‡æ³•</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">subtraction = <span class="hljs-keyword">lambda</span> x,y:y-x<br><span class="hljs-built_in">print</span>(subtraction(<span class="hljs-number">3</span>,<span class="hljs-number">5</span>)) <span class="hljs-comment"># è¾“å‡º2</span><br></code></pre></td></tr></table></figure><h2 id="å¹³æ–¹è®¡ç®—"><a href="#å¹³æ–¹è®¡ç®—" class="headerlink" title="å¹³æ–¹è®¡ç®—"></a>å¹³æ–¹è®¡ç®—</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">square = <span class="hljs-keyword">lambda</span> x: x ** <span class="hljs-number">2</span><br><span class="hljs-built_in">print</span>(square(<span class="hljs-number">4</span>))  <span class="hljs-comment"># è¾“å‡º: 16</span><br></code></pre></td></tr></table></figure><h2 id="åˆ¤æ–­å¥‡å¶æ•°"><a href="#åˆ¤æ–­å¥‡å¶æ•°" class="headerlink" title="åˆ¤æ–­å¥‡å¶æ•°"></a>åˆ¤æ–­å¥‡å¶æ•°</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">is_even = <span class="hljs-keyword">lambda</span> x: x % <span class="hljs-number">2</span> == <span class="hljs-number">0</span><br><span class="hljs-built_in">print</span>(is_even(<span class="hljs-number">10</span>))  <span class="hljs-comment"># è¾“å‡º: True</span><br><span class="hljs-built_in">print</span>(is_even(<span class="hljs-number">7</span>))   <span class="hljs-comment"># è¾“å‡º: False</span><br></code></pre></td></tr></table></figure><h1 id="lambda-ä¸map-ã€fiter-ã€soretd-ç»“åˆçš„é«˜é˜¶ä½¿ç”¨"><a href="#lambda-ä¸map-ã€fiter-ã€soretd-ç»“åˆçš„é«˜é˜¶ä½¿ç”¨" class="headerlink" title="lambda ä¸map()ã€fiter()ã€soretd() ç»“åˆçš„é«˜é˜¶ä½¿ç”¨"></a>lambda ä¸map()ã€fiter()ã€soretd() ç»“åˆçš„é«˜é˜¶ä½¿ç”¨</h1><h2 id="ä½¿ç”¨map-è¿›è¡Œåˆ—è¡¨è½¬æ¢"><a href="#ä½¿ç”¨map-è¿›è¡Œåˆ—è¡¨è½¬æ¢" class="headerlink" title="ä½¿ç”¨map() è¿›è¡Œåˆ—è¡¨è½¬æ¢"></a>ä½¿ç”¨map() è¿›è¡Œåˆ—è¡¨è½¬æ¢</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">number = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>]<br>squared = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> x:x**<span class="hljs-number">2</span>, numbers))<br><span class="hljs-built_in">print</span>(squared) <span class="hljs-comment"># è¾“å‡º[1,2,9,16,25]</span><br></code></pre></td></tr></table></figure><h2 id="ä½¿ç”¨filter-è¿›è¡Œåˆ—è¡¨ç­›é€‰"><a href="#ä½¿ç”¨filter-è¿›è¡Œåˆ—è¡¨ç­›é€‰" class="headerlink" title="ä½¿ç”¨filter()è¿›è¡Œåˆ—è¡¨ç­›é€‰"></a>ä½¿ç”¨filter()è¿›è¡Œåˆ—è¡¨ç­›é€‰</h2><p>filter() ç”¨äºç­›é€‰ç¬¦åˆæ¡ä»¶çš„å…ƒç´ </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]<br>evens = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">filter</span>(<span class="hljs-keyword">lambda</span> x: x % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>, numbers))<br><span class="hljs-built_in">print</span>(evens)  <span class="hljs-comment"># è¾“å‡º: [2, 4, 6]</span><br></code></pre></td></tr></table></figure><h2 id="ä½¿ç”¨sorted-è¿›è¡Œè‡ªå®šä¹‰æ’åº"><a href="#ä½¿ç”¨sorted-è¿›è¡Œè‡ªå®šä¹‰æ’åº" class="headerlink" title="ä½¿ç”¨sorted()è¿›è¡Œè‡ªå®šä¹‰æ’åº"></a>ä½¿ç”¨sorted()è¿›è¡Œè‡ªå®šä¹‰æ’åº</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">students = [(<span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-number">85</span>), (<span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-number">75</span>), (<span class="hljs-string">&quot;Charlie&quot;</span>, <span class="hljs-number">90</span>)]<br>students_sorted = <span class="hljs-built_in">sorted</span>(students, key=<span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">1</span>])  <span class="hljs-comment"># æŒ‰æˆç»©æ’åº</span><br><span class="hljs-built_in">print</span>(students_sorted)  <span class="hljs-comment"># è¾“å‡º: [(&#x27;Bob&#x27;, 75), (&#x27;Alice&#x27;, 85), (&#x27;Charlie&#x27;, 90)]</span><br></code></pre></td></tr></table></figure><h1 id="lambda-åœ¨reduce-ä¸­çš„é«˜é˜¶åº”ç”¨"><a href="#lambda-åœ¨reduce-ä¸­çš„é«˜é˜¶åº”ç”¨" class="headerlink" title="lambda åœ¨reduce() ä¸­çš„é«˜é˜¶åº”ç”¨"></a>lambda åœ¨reduce() ä¸­çš„é«˜é˜¶åº”ç”¨</h1><p>å¯ä»¥çœ‹ <a href="https://8888666.top/2024/09/04/pythonreduce%E5%87%BD%E6%95%B0/">https://8888666.top/2024/09/04/pythonreduce%E5%87%BD%E6%95%B0/</a> æˆ‘ä¹‹å‰å†™çš„æ–‡ç« </p><h2 id="reduece-è¿›è¡Œç´¯ç§¯è®¡ç®—"><a href="#reduece-è¿›è¡Œç´¯ç§¯è®¡ç®—" class="headerlink" title="reduece() è¿›è¡Œç´¯ç§¯è®¡ç®—"></a>reduece() è¿›è¡Œç´¯ç§¯è®¡ç®—</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> reduce<br><br>numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]<br>product = reduce(<span class="hljs-keyword">lambda</span> x, y: x * y, numbers)<br><span class="hljs-built_in">print</span>(product)  <span class="hljs-comment"># è¾“å‡º: 120</span><br></code></pre></td></tr></table></figure><h1 id="lambda-åœ¨-if-else-è¡¨è¾¾å¼ä¸­çš„åº”ç”¨"><a href="#lambda-åœ¨-if-else-è¡¨è¾¾å¼ä¸­çš„åº”ç”¨" class="headerlink" title="lambda åœ¨ if-else è¡¨è¾¾å¼ä¸­çš„åº”ç”¨"></a>lambda åœ¨ if-else è¡¨è¾¾å¼ä¸­çš„åº”ç”¨</h1><h2 id="if-else-ä¸­åº”ç”¨"><a href="#if-else-ä¸­åº”ç”¨" class="headerlink" title="if-else ä¸­åº”ç”¨"></a>if-else ä¸­åº”ç”¨</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">max_num = <span class="hljs-keyword">lambda</span> x, y: x <span class="hljs-keyword">if</span> x &gt; y <span class="hljs-keyword">else</span> y<br><span class="hljs-built_in">print</span>(max_num(<span class="hljs-number">3</span>, <span class="hljs-number">8</span>))  <span class="hljs-comment"># è¾“å‡º: 8</span><br></code></pre></td></tr></table></figure><h1 id="lambda-ä½œä¸ºå‡½æ•°å‚æ•°"><a href="#lambda-ä½œä¸ºå‡½æ•°å‚æ•°" class="headerlink" title="lambda ä½œä¸ºå‡½æ•°å‚æ•°"></a>lambda ä½œä¸ºå‡½æ•°å‚æ•°</h1><h2 id="lambda-å¯ä»¥ä½œä¸ºå‡½æ•°çš„å‚æ•°ï¼Œç”¨äºåŠ¨æ€å®šä¹‰é€»è¾‘"><a href="#lambda-å¯ä»¥ä½œä¸ºå‡½æ•°çš„å‚æ•°ï¼Œç”¨äºåŠ¨æ€å®šä¹‰é€»è¾‘" class="headerlink" title="lambda å¯ä»¥ä½œä¸ºå‡½æ•°çš„å‚æ•°ï¼Œç”¨äºåŠ¨æ€å®šä¹‰é€»è¾‘"></a>lambda å¯ä»¥ä½œä¸ºå‡½æ•°çš„å‚æ•°ï¼Œç”¨äºåŠ¨æ€å®šä¹‰é€»è¾‘</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">apply_function</span>(<span class="hljs-params">func, value</span>):<br>    <span class="hljs-keyword">return</span> func(value)<br><br><span class="hljs-built_in">print</span>(apply_function(<span class="hljs-keyword">lambda</span> x: x ** <span class="hljs-number">2</span>, <span class="hljs-number">5</span>))  <span class="hljs-comment"># è¾“å‡º: 25</span><br><br></code></pre></td></tr></table></figure><h1 id="lambda-çš„å±€é™æ€§"><a href="#lambda-çš„å±€é™æ€§" class="headerlink" title="lambda çš„å±€é™æ€§"></a>lambda çš„å±€é™æ€§</h1><p>è™½ç„¶ lambda éå¸¸æ–¹ä¾¿ï¼Œä½†å®ƒæœ‰ä¸€äº›å±€é™æ€§ï¼š</p><p>1.åªèƒ½åŒ…å«å•ä¸ªè¡¨è¾¾å¼ï¼Œæ— æ³•å†™å¤šè¡Œä»£ç ã€‚<br>2.ä¸èƒ½ç›´æ¥èµ‹å€¼å˜é‡ï¼Œå¦‚ lambda x: y &#x3D; x + 1 æ˜¯é”™è¯¯çš„ã€‚<br>3.å¯è¯»æ€§å·®ï¼Œå¯¹äºå¤æ‚é€»è¾‘ï¼Œæ™®é€š def å‡½æ•°æ›´æ¸…æ™°ã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>lambda æ˜¯ä¸€ç§ç®€æ´çš„åŒ¿åå‡½æ•°ï¼Œé€‚ç”¨äºç®€å•æ“ä½œï¼Œä½†ä¸è¦æ»¥ç”¨å¤æ‚é€»è¾‘</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
      <category>Python å¸¸è§å‡½æ•°</category>
      
      <category>Python lambdaå‡½æ•°</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ— éœ€æ³¨å†Œåœ¨çº¿è®¿é—®æ»¡è¡€DeepSeek</title>
    <link href="/2025/02/14/DeepSeek%E6%BB%A1%E8%A1%80%E5%9C%A8%E7%BA%BF%E8%AE%BF%E9%97%AE/"/>
    <url>/2025/02/14/DeepSeek%E6%BB%A1%E8%A1%80%E5%9C%A8%E7%BA%BF%E8%AE%BF%E9%97%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="æ— éœ€æ³¨å†Œåœ¨çº¿è®¿é—®æ»¡è¡€DeepSeek"><a href="#æ— éœ€æ³¨å†Œåœ¨çº¿è®¿é—®æ»¡è¡€DeepSeek" class="headerlink" title="æ— éœ€æ³¨å†Œåœ¨çº¿è®¿é—®æ»¡è¡€DeepSeek"></a>æ— éœ€æ³¨å†Œåœ¨çº¿è®¿é—®æ»¡è¡€DeepSeek</h1><p>æœ€è¿‘DeepSeekè¢«åˆ·å±äº†ï¼Œä½†æ˜¯å®˜ç½‘ç»å¸¸ä¼šæœåŠ¡å™¨ç¹å¿™ï¼Œè¿™å‡ å¤©æˆ‘å‘ç°äº†çŒè±¹çš„CEOå‚…ç››ï¼Œéƒ¨ç½²äº†æ»¡è¡€çš„DeepSeekï¼Œä»æˆ‘ä½¿ç”¨æ¥çœ‹æ²¡æœ‰é‡è§æœåŠ¡å™¨ç¹å¿™çš„é—®é¢˜ï¼Œå¯ä»¥å±•ç¤ºå…¶æ¨ç†å·¥ç¨‹ï¼Œé€Ÿåº¦ä¹Ÿæ˜¯éå¸¸çš„å¿«ï¼</p><h2 id="ç½‘ç«™åœ°å€"><a href="#ç½‘ç«™åœ°å€" class="headerlink" title="ç½‘ç«™åœ°å€"></a>ç½‘ç«™åœ°å€</h2><p>åœ°å€ï¼š <a href="https://wechat-aitalk.cmcm.com/">https://wechat-aitalk.cmcm.com/</a></p><img src="/2025/02/14/DeepSeek%E6%BB%A1%E8%A1%80%E5%9C%A8%E7%BA%BF%E8%AE%BF%E9%97%AE/blog.png" class=""><p>ä¸è¿‡è¿™ä¸ªç½‘ç«™ç›®å‰æ²¡æœ‰å…¼å®¹PCæµè§ˆå™¨æ¨¡å¼ï¼Œå¯èƒ½PCç”¨èµ·æ¥æ²¡æœ‰æ‰‹æœºç«¯ç”¨èµ·æ¥é‚£ä¹ˆçš„èˆ’æœï¼Œä¸è¿‡ä¹Ÿè¿˜è¡Œï¼</p><h2 id="éšæœºé—®é¢˜"><a href="#éšæœºé—®é¢˜" class="headerlink" title="éšæœºé—®é¢˜"></a>éšæœºé—®é¢˜</h2><p>ä¾‹å¦‚ï¼šæˆ‘é—®æˆ‘æƒ³ä½¿ç”¨python å®ç°ä¸€ä¸ªåç¨‹è®¿é—® </p><p>ç½‘å€ï¼š <a href="https://image.baidu.com/search/index?tn=baiduimage&ps=1&ct=201326592&lm=-1&cl=2&nc=1&ie=utf-8&dyTabStr=MCwxMiwzLDEsMiwxMyw3LDYsNSw5&word=%E6%9E%AB%E5%8F%B6">https://image.baidu.com/search/index?tn=baiduimage&amp;ps=1&amp;ct=201326592&amp;lm=-1&amp;cl=2&amp;nc=1&amp;ie=utf-8&amp;dyTabStr=MCwxMiwzLDEsMiwxMyw3LDYsNSw5&amp;word=%E6%9E%AB%E5%8F%B6</a></p><p>è¿™ä¸ªæ˜¯ç™¾åº¦å›¾ç‰‡æœç´¢æ«å¶çš„urlã€‚æˆ‘æƒ³ä½¿ç”¨åç¨‹çš„æ–¹å¼ä¸‹è½½ç¬¬ä¸€é¡µçš„æ‰€æœ‰å›¾ç‰‡ï¼Œè¯·DeepSeek å¸®æˆ‘å†™ä¸€ä¸ªè„šæœ¬ï¼</p><p>å¯ä»¥çœ‹åˆ°å¼€å§‹äº†æ¨ç†è¿‡ç¨‹</p><img src="/2025/02/14/DeepSeek%E6%BB%A1%E8%A1%80%E5%9C%A8%E7%BA%BF%E8%AE%BF%E9%97%AE/1.png" class=""><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> asyncio<br><span class="hljs-keyword">import</span> aiohttp<br><span class="hljs-keyword">import</span> aiofiles<br><span class="hljs-keyword">import</span> json<br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">from</span> urllib.parse <span class="hljs-keyword">import</span> urlencode<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">fetch_image_urls</span>(<span class="hljs-params">session, params</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;è·å–å›¾ç‰‡URLåˆ—è¡¨&quot;&quot;&quot;</span><br>    api_url = <span class="hljs-string">&quot;https://image.baidu.com/search/acjson&quot;</span><br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> session.get(api_url, params=params) <span class="hljs-keyword">as</span> response:<br>            <span class="hljs-keyword">if</span> response.status != <span class="hljs-number">200</span>:<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;è¯·æ±‚å¤±è´¥ï¼ŒçŠ¶æ€ç ï¼š&quot;</span>, response.status)<br>                <span class="hljs-keyword">return</span> []<br>            data = <span class="hljs-keyword">await</span> response.json()<br>            urls = []<br>            <span class="hljs-comment"># éå†æ‰€æœ‰å›¾ç‰‡æ•°æ®ï¼ˆè·³è¿‡æ— æ•ˆæ¡ç›®ï¼‰</span><br>            <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> data.get(<span class="hljs-string">&quot;data&quot;</span>, []):<br>                <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(item, <span class="hljs-built_in">dict</span>):<br>                    <span class="hljs-comment"># ä¼˜å…ˆå°è¯•è·å–é«˜æ¸…åŸå›¾URL</span><br>                    url = item.get(<span class="hljs-string">&quot;objURL&quot;</span>) <span class="hljs-keyword">or</span> item.get(<span class="hljs-string">&quot;hoverURL&quot;</span>) <span class="hljs-keyword">or</span> item.get(<span class="hljs-string">&quot;thumbURL&quot;</span>)<br>                    <span class="hljs-keyword">if</span> url <span class="hljs-keyword">and</span> url <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> urls:<br>                        urls.append(url)<br>            <span class="hljs-keyword">return</span> urls<br>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;è·å–å›¾ç‰‡é“¾æ¥æ—¶å‡ºé”™:&quot;</span>, e)<br>        <span class="hljs-keyword">return</span> []<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">download_image</span>(<span class="hljs-params">session, url, index, save_dir</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;å¼‚æ­¥ä¸‹è½½å•ä¸ªå›¾ç‰‡&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-comment"># è®¾ç½®Refererç»•è¿‡åç›—é“¾</span><br>        headers = &#123;<span class="hljs-string">&quot;Referer&quot;</span>: <span class="hljs-string">&quot;https://image.baidu.com/&quot;</span>&#125;<br>        <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> session.get(url, headers=headers, timeout=<span class="hljs-number">10</span>) <span class="hljs-keyword">as</span> response:<br>            <span class="hljs-keyword">if</span> response.status == <span class="hljs-number">200</span>:<br>                <span class="hljs-comment"># é€šè¿‡Content-Typeè·å–æ–‡ä»¶æ‰©å±•å</span><br>                content_type = response.headers.get(<span class="hljs-string">&quot;Content-Type&quot;</span>, <span class="hljs-string">&quot;image/jpeg&quot;</span>)<br>                ext = <span class="hljs-string">&quot;jpg&quot;</span> <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;jpeg&quot;</span> <span class="hljs-keyword">in</span> content_type <span class="hljs-keyword">else</span> content_type.split(<span class="hljs-string">&quot;/&quot;</span>)[-<span class="hljs-number">1</span>]<br>                <br>                <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> aiofiles.<span class="hljs-built_in">open</span>(<br>                    os.path.join(save_dir, <span class="hljs-string">f&quot;image_<span class="hljs-subst">&#123;index&#125;</span>.<span class="hljs-subst">&#123;ext&#125;</span>&quot;</span>), <span class="hljs-string">&quot;wb&quot;</span><br>                ) <span class="hljs-keyword">as</span> f:<br>                    <span class="hljs-keyword">await</span> f.write(<span class="hljs-keyword">await</span> response.read())<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å›¾ç‰‡ <span class="hljs-subst">&#123;index&#125;</span> ä¸‹è½½æˆåŠŸ&quot;</span>)<br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å›¾ç‰‡ <span class="hljs-subst">&#123;index&#125;</span> ä¸‹è½½å¤±è´¥ï¼ŒçŠ¶æ€ç ï¼š<span class="hljs-subst">&#123;response.status&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ä¸‹è½½å›¾ç‰‡ <span class="hljs-subst">&#123;index&#125;</span> æ—¶å‡ºé”™: <span class="hljs-subst">&#123;<span class="hljs-built_in">str</span>(e)&#125;</span>&quot;</span>)<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    <span class="hljs-comment"># åˆ›å»ºä¿å­˜ç›®å½•</span><br>    save_dir = <span class="hljs-string">&quot;baidu_images&quot;</span><br>    os.makedirs(save_dir, exist_ok=<span class="hljs-literal">True</span>)<br><br>    <span class="hljs-comment"># è¯·æ±‚å‚æ•°ï¼ˆåŸºäºæµè§ˆå™¨æŠ“åŒ…å‚æ•°è°ƒæ•´ï¼‰</span><br>    params = &#123;<br>        <span class="hljs-string">&quot;tn&quot;</span>: <span class="hljs-string">&quot;resultjson_com&quot;</span>,<br>        <span class="hljs-string">&quot;ipn&quot;</span>: <span class="hljs-string">&quot;rj&quot;</span>,<br>        <span class="hljs-string">&quot;ct&quot;</span>: <span class="hljs-number">201326592</span>,<br>        <span class="hljs-string">&quot;is&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>        <span class="hljs-string">&quot;fp&quot;</span>: <span class="hljs-string">&quot;result&quot;</span>,<br>        <span class="hljs-string">&quot;queryWord&quot;</span>: <span class="hljs-string">&quot;æ«å¶&quot;</span>,<br>        <span class="hljs-string">&quot;cl&quot;</span>: <span class="hljs-number">2</span>,<br>        <span class="hljs-string">&quot;lm&quot;</span>: -<span class="hljs-number">1</span>,<br>        <span class="hljs-string">&quot;ie&quot;</span>: <span class="hljs-string">&quot;utf-8&quot;</span>,<br>        <span class="hljs-string">&quot;oe&quot;</span>: <span class="hljs-string">&quot;utf-8&quot;</span>,<br>        <span class="hljs-string">&quot;word&quot;</span>: <span class="hljs-string">&quot;æ«å¶&quot;</span>,<br>        <span class="hljs-string">&quot;istype&quot;</span>: <span class="hljs-number">2</span>,<br>        <span class="hljs-string">&quot;pn&quot;</span>: <span class="hljs-number">0</span>,  <span class="hljs-comment"># é¡µç ï¼ˆ0è¡¨ç¤ºç¬¬ä¸€é¡µï¼‰</span><br>        <span class="hljs-string">&quot;rn&quot;</span>: <span class="hljs-number">30</span>, <span class="hljs-comment"># æ¯é¡µæ•°é‡</span><br>        <span class="hljs-string">&quot;gsm&quot;</span>: <span class="hljs-string">&quot;3c&quot;</span>,<br>    &#125;<br><br>    <span class="hljs-comment"># è¯·æ±‚å¤´è®¾ç½®</span><br>    headers = &#123;<br>        <span class="hljs-string">&quot;User-Agent&quot;</span>: <span class="hljs-string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/125.0.0.0 Safari/537.36&quot;</span>,<br>        <span class="hljs-string">&quot;Accept-Language&quot;</span>: <span class="hljs-string">&quot;zh-CN,zh;q=0.9&quot;</span>,<br>    &#125;<br><br>    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> aiohttp.ClientSession(headers=headers) <span class="hljs-keyword">as</span> session:<br>        <span class="hljs-comment"># è·å–å›¾ç‰‡URLåˆ—è¡¨</span><br>        image_urls = <span class="hljs-keyword">await</span> fetch_image_urls(session, params)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å…±æ‰¾åˆ° <span class="hljs-subst">&#123;<span class="hljs-built_in">len</span>(image_urls)&#125;</span> å¼ æœ‰æ•ˆå›¾ç‰‡&quot;</span>)<br><br>        <span class="hljs-comment"># åˆ›å»ºå¹¶æ‰§è¡Œä¸‹è½½ä»»åŠ¡</span><br>        tasks = [<br>            download_image(session, url, idx, save_dir)<br>            <span class="hljs-keyword">for</span> idx, url <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(image_urls)<br>        ]<br>        <span class="hljs-keyword">await</span> asyncio.gather(*tasks)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    asyncio.run(main())<br></code></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æ•´ä½“æ¥è¯´æ•ˆæœè¿˜æ˜¯ä¸é”™çš„ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥è¯•è¯•è¿™ä¸ªå·¥å…·å“¦ï¼</p>]]></content>
    
    
    <categories>
      
      <category>æµ‹è¯•å¼€å‘å·¥å…·/æ¡†æ¶</category>
      
      <category>æ•ˆèƒ½å·¥å…·</category>
      
      <category>DeepSeek æ»¡è¡€åœ¨çº¿è®¿é—®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>DeepSeek åœ¨çº¿è®¿é—®</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python åç¨‹å…¥é—¨åˆ°å®è·µ</title>
    <link href="/2025/02/08/python%E5%8D%8F%E7%A8%8B/"/>
    <url>/2025/02/08/python%E5%8D%8F%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="Python-åç¨‹å…¥é—¨åˆ°å®è·µ"><a href="#Python-åç¨‹å…¥é—¨åˆ°å®è·µ" class="headerlink" title="Python åç¨‹å…¥é—¨åˆ°å®è·µ"></a>Python åç¨‹å…¥é—¨åˆ°å®è·µ</h1><p>Python åç¨‹æ˜¯å®ç°å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§é‡è¦æœºåˆ¶ã€‚å®ƒèƒ½å¤Ÿåœ¨å•çº¿ç¨‹ä¸­å®ç°å¹¶å‘æ“ä½œï¼Œé¿å…äº†çº¿ç¨‹çš„åˆ‡æ¢å¼€é”€ï¼Œé€‚ç”¨äº I&#x2F;O å¯†é›†å‹ä»»åŠ¡ã€‚Python çš„åç¨‹ä¸»è¦é€šè¿‡ <code>asyncio</code> æ¨¡å—æ¥ç®¡ç†ï¼Œç»“åˆ <code>async</code> å’Œ <code>await</code> å…³é”®å­—ï¼Œå¯ä»¥è®©ä»£ç åœ¨ç­‰å¾… I&#x2F;O æ“ä½œæ—¶ä¸é˜»å¡å…¶ä»–ä»»åŠ¡ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯åç¨‹ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯åç¨‹ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯åç¨‹ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯åç¨‹ï¼Ÿ</h2><p>åç¨‹æ˜¯ä¸€ç§ç‰¹æ®Šçš„å‡½æ•°ï¼Œå®ƒèƒ½å¤Ÿåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æš‚åœï¼Œå¹¶åœ¨æœªæ¥æŸä¸ªæ—¶é—´æ¢å¤æ‰§è¡Œã€‚åç¨‹å‡½æ•°ç”± <code>async def</code> å®šä¹‰ï¼Œè°ƒç”¨æ—¶è¿”å›ä¸€ä¸ªåç¨‹å¯¹è±¡ã€‚</p><h3 id="åç¨‹çš„åŸºæœ¬ç‰¹æ€§"><a href="#åç¨‹çš„åŸºæœ¬ç‰¹æ€§" class="headerlink" title="åç¨‹çš„åŸºæœ¬ç‰¹æ€§"></a>åç¨‹çš„åŸºæœ¬ç‰¹æ€§</h3><ol><li><strong>å¼‚æ­¥æ‰§è¡Œ</strong>ï¼šåç¨‹å¯ä»¥åœ¨ç­‰å¾… I&#x2F;O æ“ä½œæ—¶é‡Šæ”¾æ§åˆ¶æƒï¼Œè®©å…¶ä»–ä»»åŠ¡è¿è¡Œã€‚</li><li><strong>åä½œå¼å¤šä»»åŠ¡</strong>ï¼šåç¨‹é€šè¿‡ <code>await</code> å…³é”®å­—ä¸»åŠ¨è®©å‡ºæ§åˆ¶æƒï¼Œæ‰§è¡Œå…¶ä»–ä»»åŠ¡ï¼Œå‡å°‘äº†ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€ã€‚</li></ol><h2 id="åç¨‹çš„åˆ›å»ºä¸ä½¿ç”¨"><a href="#åç¨‹çš„åˆ›å»ºä¸ä½¿ç”¨" class="headerlink" title="åç¨‹çš„åˆ›å»ºä¸ä½¿ç”¨"></a>åç¨‹çš„åˆ›å»ºä¸ä½¿ç”¨</h2><h3 id="åˆ›å»ºåç¨‹å‡½æ•°"><a href="#åˆ›å»ºåç¨‹å‡½æ•°" class="headerlink" title="åˆ›å»ºåç¨‹å‡½æ•°"></a>åˆ›å»ºåç¨‹å‡½æ•°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-keyword">import</span> asyncio<br><br><span class="hljs-comment"># ä½¿ç”¨ async å®šä¹‰åç¨‹å‡½æ•°</span><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">say_hello</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Hello, World!&quot;</span>)<br><br></code></pre></td></tr></table></figure><h3 id="æ‰§è¡Œåç¨‹"><a href="#æ‰§è¡Œåç¨‹" class="headerlink" title="æ‰§è¡Œåç¨‹"></a>æ‰§è¡Œåç¨‹</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-comment"># é€šè¿‡ asyncio.run æ¥å¯åŠ¨åç¨‹</span><br>asyncio.run(say_hello())  <span class="hljs-comment"># è¾“å‡º: Hello, World!</span><br><br></code></pre></td></tr></table></figure><p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œasyncio.run ä¼šè¿è¡Œä¸€ä¸ªäº‹ä»¶å¾ªç¯å¹¶æ‰§è¡Œåç¨‹ã€‚</p><h2 id="å¼‚æ­¥-I-O-æ“ä½œ"><a href="#å¼‚æ­¥-I-O-æ“ä½œ" class="headerlink" title="å¼‚æ­¥ I&#x2F;O æ“ä½œ"></a>å¼‚æ­¥ I&#x2F;O æ“ä½œ</h2><p>åç¨‹çš„ä¸»è¦ç”¨é€”æ˜¯æ‰§è¡Œå¼‚æ­¥ I&#x2F;O æ“ä½œï¼Œé€šå¸¸æ¶‰åŠåˆ°ç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶è¯»å–ç­‰ä»»åŠ¡ã€‚ä½¿ç”¨ await å¯ä»¥ç­‰å¾…ä¸€ä¸ªè€—æ—¶æ“ä½œå®Œæˆè€Œä¸é˜»å¡å…¶ä»–ä»»åŠ¡ã€‚</p><h3 id="å¼‚æ­¥IOå®ä¾‹"><a href="#å¼‚æ­¥IOå®ä¾‹" class="headerlink" title="å¼‚æ­¥IOå®ä¾‹"></a>å¼‚æ­¥IOå®ä¾‹</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> asyncio<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">fetch_data</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å¼€å§‹è·å–æ•°æ®...&quot;</span>)<br>    <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">2</span>)  <span class="hljs-comment"># æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚ï¼Œç­‰å¾… 2 ç§’</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æ•°æ®è·å–å®Œæ¯•&quot;</span>)<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;æ•°æ®å†…å®¹&quot;</span><br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ä»»åŠ¡å¼€å§‹&quot;</span>)<br>    data = <span class="hljs-keyword">await</span> fetch_data()<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;è·å–åˆ°çš„æ•°æ®: <span class="hljs-subst">&#123;data&#125;</span>&quot;</span>)<br><br><span class="hljs-comment"># è¿è¡Œä¸»ä»»åŠ¡</span><br>asyncio.run(main())<br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œfetch_data æ˜¯ä¸€ä¸ªæ¨¡æ‹Ÿå¼‚æ­¥ I&#x2F;O æ“ä½œçš„åç¨‹ï¼Œå®ƒé€šè¿‡ await asyncio.sleep(2) æ¥æ¨¡æ‹Ÿç­‰å¾…ç½‘ç»œè¯·æ±‚çš„æ—¶é—´ã€‚</p><p>è¾“å‡ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><br>ä»»åŠ¡å¼€å§‹<br>å¼€å§‹è·å–æ•°æ®...<br>æ•°æ®è·å–å®Œæ¯•<br>è·å–åˆ°çš„æ•°æ®: æ•°æ®å†…å®¹<br><br></code></pre></td></tr></table></figure><p>æ³¨æ„åˆ°ï¼Œå°½ç®¡ fetch_data å†…éƒ¨æœ‰ await æ“ä½œï¼Œmain åç¨‹ä¼šç­‰åˆ° fetch_data å®Œæˆä¹‹åæ‰ç»§ç»­æ‰§è¡Œã€‚</p><h2 id="åç¨‹ä»»åŠ¡å¹¶å‘æ‰§è¡Œ"><a href="#åç¨‹ä»»åŠ¡å¹¶å‘æ‰§è¡Œ" class="headerlink" title="åç¨‹ä»»åŠ¡å¹¶å‘æ‰§è¡Œ"></a>åç¨‹ä»»åŠ¡å¹¶å‘æ‰§è¡Œ</h2><p>å¦‚æœä½ éœ€è¦åŒæ—¶æ‰§è¡Œå¤šä¸ªåç¨‹ä»»åŠ¡ï¼Œå¯ä»¥ä½¿ç”¨ asyncio.gather æ¥å¹¶å‘æ‰§è¡Œå¤šä¸ªåç¨‹ã€‚</p><h3 id="å¤šä¸ªåç¨‹å¹¶å‘æ‰§è¡Œ"><a href="#å¤šä¸ªåç¨‹å¹¶å‘æ‰§è¡Œ" class="headerlink" title="å¤šä¸ªåç¨‹å¹¶å‘æ‰§è¡Œ"></a>å¤šä¸ªåç¨‹å¹¶å‘æ‰§è¡Œ</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> asyncio<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">task_1</span>():<br>    <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">1</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ä»»åŠ¡ 1 å®Œæˆ&quot;</span>)<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">task_2</span>():<br>    <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">2</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ä»»åŠ¡ 2 å®Œæˆ&quot;</span>)<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    <span class="hljs-keyword">await</span> asyncio.gather(task_1(), task_2())<br><br>asyncio.run(main())<br><br></code></pre></td></tr></table></figure><p>è¿™é‡Œï¼Œtask_1 å’Œ task_2 è¢«å¹¶å‘æ‰§è¡Œã€‚asyncio.gather ä¼šç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆã€‚</p><p>è¾“å‡ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">ä»»åŠ¡ 1 å®Œæˆ<br>ä»»åŠ¡ 2 å®Œæˆ<br><br></code></pre></td></tr></table></figure><p>è™½ç„¶ task_2 èŠ±è´¹äº† 2 ç§’ï¼Œè€Œ task_1 åªèŠ±è´¹äº† 1 ç§’ï¼Œä½†ç”±äºæ˜¯å¹¶å‘æ‰§è¡Œçš„ï¼Œæœ€ç»ˆä»»åŠ¡åªèŠ±è´¹äº† 2 ç§’ã€‚</p><h2 id="å¼‚å¸¸å¤„ç†"><a href="#å¼‚å¸¸å¤„ç†" class="headerlink" title="å¼‚å¸¸å¤„ç†"></a>å¼‚å¸¸å¤„ç†</h2><p>åœ¨åç¨‹ä¸­ï¼Œå¦‚æœæŸä¸ªä»»åŠ¡å‡ºç°å¼‚å¸¸ï¼Œé€šå¸¸ä¼šè¢« tryâ€¦except è¯­å¥æ•è·ã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¼‚å¸¸å¤„ç†å¯èƒ½ä¼šå½±å“åˆ°å…¶ä»–å¹¶å‘æ‰§è¡Œçš„ä»»åŠ¡ã€‚</p><h3 id="åç¨‹ä¸­çš„å¼‚å¸¸å¤„ç†"><a href="#åç¨‹ä¸­çš„å¼‚å¸¸å¤„ç†" class="headerlink" title="åç¨‹ä¸­çš„å¼‚å¸¸å¤„ç†"></a>åç¨‹ä¸­çš„å¼‚å¸¸å¤„ç†</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> asyncio<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">task_with_exception</span>():<br>    <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">raise</span> Exception(<span class="hljs-string">&quot;ä»»åŠ¡å‘ç”Ÿäº†å¼‚å¸¸&quot;</span>)<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-keyword">await</span> asyncio.gather(task_with_exception())<br>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;æ•è·åˆ°å¼‚å¸¸: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<br><br>asyncio.run(main())<br><br></code></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">æ•è·åˆ°å¼‚å¸¸: ä»»åŠ¡å‘ç”Ÿäº†å¼‚å¸¸<br></code></pre></td></tr></table></figure><p>åœ¨å¹¶å‘ä»»åŠ¡ä¸­ï¼Œå¦‚æœå‘ç”Ÿå¼‚å¸¸ï¼Œå¯ä»¥é€šè¿‡ asyncio.gather çš„ return_exceptions&#x3D;True å‚æ•°æ¥å¿½ç•¥å¼‚å¸¸ï¼Œç»§ç»­æ‰§è¡Œå…¶ä»–ä»»åŠ¡ã€‚</p><h3 id="æ•è·æ‰€æœ‰å¼‚å¸¸"><a href="#æ•è·æ‰€æœ‰å¼‚å¸¸" class="headerlink" title="æ•è·æ‰€æœ‰å¼‚å¸¸"></a>æ•è·æ‰€æœ‰å¼‚å¸¸</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> asyncio<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">task_with_exception</span>():<br>    <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">raise</span> Exception(<span class="hljs-string">&quot;ä»»åŠ¡å‘ç”Ÿäº†å¼‚å¸¸&quot;</span>)<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    result = <span class="hljs-keyword">await</span> asyncio.gather(<br>        task_with_exception(), <br>        return_exceptions=<span class="hljs-literal">True</span><br>    )<br>    <span class="hljs-built_in">print</span>(result)<br><br>asyncio.run(main())<br></code></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">[Exception(&#x27;ä»»åŠ¡å‘ç”Ÿäº†å¼‚å¸¸&#x27;)]<br><br></code></pre></td></tr></table></figure><p>asyncio.gather å°†ä¼šè¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰ä»»åŠ¡ç»“æœçš„åˆ—è¡¨ï¼Œè‹¥ä»»åŠ¡æœ‰å¼‚å¸¸ï¼Œåˆ™è¿”å›å¼‚å¸¸å¯¹è±¡ã€‚</p><h2 id="è¿›é˜¶ç¤ºä¾‹ï¼šæ¨¡æ‹Ÿ-HTTP-è¯·æ±‚"><a href="#è¿›é˜¶ç¤ºä¾‹ï¼šæ¨¡æ‹Ÿ-HTTP-è¯·æ±‚" class="headerlink" title="è¿›é˜¶ç¤ºä¾‹ï¼šæ¨¡æ‹Ÿ HTTP è¯·æ±‚"></a>è¿›é˜¶ç¤ºä¾‹ï¼šæ¨¡æ‹Ÿ HTTP è¯·æ±‚</h2><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åç¨‹æ¥æ¨¡æ‹Ÿå¼‚æ­¥çš„ HTTP è¯·æ±‚ï¼Œåˆ©ç”¨ aiohttp åº“æ¥å®ç°ã€‚</p><p>ä½¿ç”¨ aiohttp å®ç°å¹¶å‘ HTTP è¯·æ±‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> aiohttp<br><span class="hljs-keyword">import</span> asyncio<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">fetch_url</span>(<span class="hljs-params">url</span>):<br>    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> aiohttp.ClientSession() <span class="hljs-keyword">as</span> session:<br>        <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> session.get(url) <span class="hljs-keyword">as</span> response:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;è¯»å– <span class="hljs-subst">&#123;url&#125;</span> å®Œæˆï¼ŒçŠ¶æ€ç : <span class="hljs-subst">&#123;response.status&#125;</span>&quot;</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> response.text()<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    urls = [<br>        <span class="hljs-string">&#x27;https://www.baidu.com&#x27;</span>,<br>        <span class="hljs-string">&#x27;https://www.python.org&#x27;</span>,<br>        <span class="hljs-string">&#x27;https://www.github.com&#x27;</span>,<br>    ]<br>    <br>    <span class="hljs-comment"># å¹¶å‘åœ°è¯·æ±‚å¤šä¸ª URL</span><br>    tasks = [fetch_url(url) <span class="hljs-keyword">for</span> url <span class="hljs-keyword">in</span> urls]<br>    <span class="hljs-keyword">await</span> asyncio.gather(*tasks)<br><br>asyncio.run(main())<br><br></code></pre></td></tr></table></figure><p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ aiohttp åº“å‘é€ HTTP GET è¯·æ±‚ï¼Œå¹¶ä¸”ä½¿ç”¨ asyncio.gather æ¥å¹¶å‘åœ°æ‰§è¡Œå¤šä¸ªè¯·æ±‚ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>1.åç¨‹ æ˜¯å®ç°å¼‚æ­¥ I&#x2F;O æ“ä½œçš„ä¸€ç§æ–¹æ³•ï¼Œé€šè¿‡ async å’Œ await å¯ä»¥è®©ç¨‹åºåœ¨ç­‰å¾…æŸäº›æ“ä½œæ—¶ä¸ä¼šé˜»å¡ï¼Œè¾¾åˆ°é«˜æ•ˆæ‰§è¡Œçš„ç›®çš„ã€‚</p><p>2.asyncio æ¨¡å— æä¾›äº†äº‹ä»¶å¾ªç¯å’Œä»»åŠ¡è°ƒåº¦çš„æœºåˆ¶ï¼Œä½¿å¾—åç¨‹å¯ä»¥æ–¹ä¾¿åœ°å¹¶å‘æ‰§è¡Œã€‚</p><p>3.asyncio.gather å¯ä»¥ç”¨äºå¹¶å‘å¤šä¸ªä»»åŠ¡ï¼Œawait ç”¨æ¥ç­‰å¾…ä»»åŠ¡çš„å®Œæˆã€‚</p><p>4.åç¨‹ä¸ä»…å¯ä»¥æå‡æ€§èƒ½ï¼Œè¿˜èƒ½ä½¿ä»£ç æ›´åŠ ç®€æ´ä¸æ˜“äºç†è§£ï¼Œå°¤å…¶æ˜¯åœ¨é¢å¯¹å¤§é‡ I&#x2F;O å¯†é›†å‹ä»»åŠ¡æ—¶ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
      <category>Python å¸¸è§å‡½æ•°</category>
      
      <category>Python åç¨‹å…¥é—¨åˆ°å®è·µ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python åƒåœ¾å›æ”¶æœºåˆ¶</title>
    <link href="/2025/01/22/python%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/"/>
    <url>/2025/01/22/python%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/</url>
    
    <content type="html"><![CDATA[<h1 id="Python-åƒåœ¾å›æ”¶æœºåˆ¶"><a href="#Python-åƒåœ¾å›æ”¶æœºåˆ¶" class="headerlink" title="Python åƒåœ¾å›æ”¶æœºåˆ¶"></a>Python åƒåœ¾å›æ”¶æœºåˆ¶</h1><p>Python çš„åƒåœ¾å›æ”¶æœºåˆ¶è´Ÿè´£è‡ªåŠ¨ç®¡ç†å†…å­˜ï¼Œä»¥å‡å°‘å¼€å‘è€…æ‰‹åŠ¨ç®¡ç†å†…å­˜çš„å¤æ‚æ€§ã€‚å®ƒé€šè¿‡ <strong>å¼•ç”¨è®¡æ•°</strong> å’Œ <strong>åƒåœ¾å›æ”¶å™¨ï¼ˆGarbage Collectorï¼‰</strong> ä¸¤ç§æ–¹å¼æ¥å¤„ç†å†…å­˜ä¸­çš„å¯¹è±¡ã€‚</p><hr><h2 id="1-å¼•ç”¨è®¡æ•°"><a href="#1-å¼•ç”¨è®¡æ•°" class="headerlink" title="1. å¼•ç”¨è®¡æ•°"></a>1. å¼•ç”¨è®¡æ•°</h2><p>å¼•ç”¨è®¡æ•°æ˜¯ Python å†…å­˜ç®¡ç†çš„æ ¸å¿ƒæœºåˆ¶ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½ç»´æŠ¤ä¸€ä¸ª <strong>å¼•ç”¨è®¡æ•°å™¨</strong>ï¼Œè¡¨ç¤ºæœ‰å¤šå°‘ä¸ªå¼•ç”¨æŒ‡å‘å®ƒã€‚</p><h3 id="1-1-å¼•ç”¨è®¡æ•°çš„è§„åˆ™"><a href="#1-1-å¼•ç”¨è®¡æ•°çš„è§„åˆ™" class="headerlink" title="1.1 å¼•ç”¨è®¡æ•°çš„è§„åˆ™"></a>1.1 å¼•ç”¨è®¡æ•°çš„è§„åˆ™</h3><ul><li><strong>å¼•ç”¨å¢åŠ </strong>ï¼šå½“ä¸€ä¸ªæ–°çš„å¼•ç”¨æŒ‡å‘å¯¹è±¡æ—¶ï¼Œè®¡æ•°å¢åŠ ã€‚</li><li><strong>å¼•ç”¨å‡å°‘</strong>ï¼šå½“å¼•ç”¨è¢«åˆ é™¤æˆ–è¦†ç›–æ—¶ï¼Œè®¡æ•°å‡å°‘ã€‚</li><li><strong>å¯¹è±¡é”€æ¯</strong>ï¼šå½“å¼•ç”¨è®¡æ•°ä¸º <code>0</code> æ—¶ï¼Œå¯¹è±¡ä¼šè¢«ç«‹å³é”€æ¯ï¼Œé‡Šæ”¾å†…å­˜ã€‚</li></ul><h3 id="1-2-ç¤ºä¾‹"><a href="#1-2-ç¤ºä¾‹" class="headerlink" title="1.2 ç¤ºä¾‹"></a>1.2 ç¤ºä¾‹</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># åˆ›å»ºå¯¹è±¡</span><br>a = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]  <span class="hljs-comment"># å¼•ç”¨è®¡æ•°ä¸º 1</span><br>b = a           <span class="hljs-comment"># å¼•ç”¨è®¡æ•°ä¸º 2</span><br><span class="hljs-keyword">del</span> a           <span class="hljs-comment"># å¼•ç”¨è®¡æ•°ä¸º 1</span><br><span class="hljs-keyword">del</span> b           <span class="hljs-comment"># å¼•ç”¨è®¡æ•°ä¸º 0ï¼Œå¯¹è±¡è¢«é”€æ¯</span><br><br></code></pre></td></tr></table></figure><h3 id="1-3-å¼•ç”¨è®¡æ•°çš„ä¼˜åŠ¿"><a href="#1-3-å¼•ç”¨è®¡æ•°çš„ä¼˜åŠ¿" class="headerlink" title="1.3 å¼•ç”¨è®¡æ•°çš„ä¼˜åŠ¿"></a>1.3 å¼•ç”¨è®¡æ•°çš„ä¼˜åŠ¿</h3><ul><li><strong>å®ç°ç®€å•ï¼Œå›æ”¶åŠæ—¶.</strong></li><li><strong>é€‚åˆå¤§å¤šæ•°å¸¸è§çš„å†…å­˜ç®¡ç†åœºæ™¯.</strong></li></ul><h3 id="1-4-å¼•ç”¨è®¡æ•°çš„ç¼ºé™·"><a href="#1-4-å¼•ç”¨è®¡æ•°çš„ç¼ºé™·" class="headerlink" title="1.4 å¼•ç”¨è®¡æ•°çš„ç¼ºé™·"></a>1.4 å¼•ç”¨è®¡æ•°çš„ç¼ºé™·</h3><ul><li><strong>å¾ªç¯å¼•ç”¨é—®é¢˜</strong>: æ— æ³•å¤„ç†å¯¹è±¡ä¹‹é—´å­˜åœ¨å¾ªç¯å¼•ç”¨çš„æƒ…å†µã€‚</li></ul><hr><h2 id="2-å¾ªç¯å¼•ç”¨é—®é¢˜"><a href="#2-å¾ªç¯å¼•ç”¨é—®é¢˜" class="headerlink" title="2. å¾ªç¯å¼•ç”¨é—®é¢˜"></a>2. å¾ªç¯å¼•ç”¨é—®é¢˜</h2><p>å¾ªç¯å¼•ç”¨æŒ‡çš„æ˜¯ä¸¤ä¸ªæˆ–å¤šä¸ªå¯¹è±¡ç›¸äº’å¼•ç”¨ï¼Œå¯¼è‡´å®ƒä»¬çš„å¼•ç”¨è®¡æ•°æ— æ³•å½’é›¶ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Node</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, value</span>):<br>        self.value = value<br>        self.<span class="hljs-built_in">next</span> = <span class="hljs-literal">None</span><br><br>a = Node(<span class="hljs-number">1</span>)<br>b = Node(<span class="hljs-number">2</span>)<br>a.<span class="hljs-built_in">next</span> = b<br>b.<span class="hljs-built_in">next</span> = a  <span class="hljs-comment"># å½¢æˆå¾ªç¯å¼•ç”¨</span><br><br><span class="hljs-keyword">del</span> a<br><span class="hljs-keyword">del</span> b  <span class="hljs-comment"># å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ä»ç„¶ä¸º 1ï¼Œæ— æ³•å›æ”¶</span><br><br></code></pre></td></tr></table></figure><hr><h2 id="3-åƒåœ¾å›æ”¶å™¨"><a href="#3-åƒåœ¾å›æ”¶å™¨" class="headerlink" title="3. åƒåœ¾å›æ”¶å™¨"></a>3. åƒåœ¾å›æ”¶å™¨</h2><p>ä¸ºäº†å¤„ç†å¾ªç¯å¼•ç”¨é—®é¢˜ï¼ŒPython æä¾›äº†ä¸€ä¸ªåŸºäº åˆ†ä»£å›æ”¶ çš„åƒåœ¾å›æ”¶å™¨ã€‚</p><h3 id="3-1-åˆ†ä»£å›æ”¶æœºåˆ¶"><a href="#3-1-åˆ†ä»£å›æ”¶æœºåˆ¶" class="headerlink" title="3.1 åˆ†ä»£å›æ”¶æœºåˆ¶"></a>3.1 åˆ†ä»£å›æ”¶æœºåˆ¶</h3><p>Python å°†æ‰€æœ‰å¯¹è±¡åˆ†ä¸ºä¸‰ä»£ï¼š</p><ul><li><strong>ç¬¬ 0 ä»£</strong>: æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚</li><li><strong>ç¬¬ 1 ä»£</strong>: ç»è¿‡ä¸€æ¬¡åƒåœ¾å›æ”¶åæœªè¢«é”€æ¯çš„å¯¹è±¡ã€‚</li><li><strong>ç¬¬ 2 ä»£</strong>: ç»è¿‡å¤šæ¬¡åƒåœ¾å›æ”¶ä»æœªè¢«é”€æ¯çš„å¯¹è±¡ã€‚</li></ul><p> åƒåœ¾å›æ”¶å™¨é€šè¿‡ä»¥ä¸‹æ–¹å¼æé«˜æ•ˆç‡ï¼š</p><ul><li>ä¼˜å…ˆå›æ”¶ç”Ÿå‘½å‘¨æœŸçŸ­çš„å¯¹è±¡ï¼ˆç¬¬ 0 ä»£ï¼‰ã€‚</li><li>å‡å°‘å¯¹é«˜ä»£å¯¹è±¡çš„æ£€æŸ¥é¢‘ç‡ã€‚</li></ul><h3 id="3-2-å›æ”¶è¿‡ç¨‹"><a href="#3-2-å›æ”¶è¿‡ç¨‹" class="headerlink" title="3.2 å›æ”¶è¿‡ç¨‹"></a>3.2 å›æ”¶è¿‡ç¨‹</h3><ul><li>åƒåœ¾å›æ”¶å™¨ä¼šå®šæœŸæ£€æŸ¥å¾ªç¯å¼•ç”¨ã€‚</li><li>æ£€æµ‹å¯¹è±¡æ˜¯å¦å¯è¾¾ï¼ˆæ˜¯å¦è¿˜æœ‰å¼•ç”¨æŒ‡å‘å®ƒï¼‰ã€‚</li><li>å¦‚æœä¸å¯è¾¾ï¼Œåˆ™å°†å…¶æ ‡è®°ä¸ºåƒåœ¾å¹¶å›æ”¶ã€‚</li></ul><h3 id="3-3-è°ƒç”¨åƒåœ¾å›æ”¶å™¨"><a href="#3-3-è°ƒç”¨åƒåœ¾å›æ”¶å™¨" class="headerlink" title="3.3 è°ƒç”¨åƒåœ¾å›æ”¶å™¨"></a>3.3 è°ƒç”¨åƒåœ¾å›æ”¶å™¨</h3><p>  å¯ä»¥ä½¿ç”¨ gc æ¨¡å—æ‰‹åŠ¨æ§åˆ¶åƒåœ¾å›æ”¶ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python">  <span class="hljs-keyword">import</span> gc<br><br><span class="hljs-comment"># å¼ºåˆ¶æ‰§è¡Œåƒåœ¾å›æ”¶</span><br>gc.collect()<br><br><span class="hljs-comment"># ç¦ç”¨è‡ªåŠ¨åƒåœ¾å›æ”¶</span><br>gc.disable()<br><br><span class="hljs-comment"># å¯ç”¨è‡ªåŠ¨åƒåœ¾å›æ”¶</span><br>gc.enable()<br><br></code></pre></td></tr></table></figure><hr><h2 id="4-åƒåœ¾å›æ”¶çš„æ€§èƒ½ä¼˜åŒ–"><a href="#4-åƒåœ¾å›æ”¶çš„æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="4. åƒåœ¾å›æ”¶çš„æ€§èƒ½ä¼˜åŒ–"></a>4. åƒåœ¾å›æ”¶çš„æ€§èƒ½ä¼˜åŒ–</h2><ul><li><p><strong>1.å‡å°‘å¾ªç¯å¼•ç”¨</strong>ï¼š</p><ul><li>ä½¿ç”¨å¼±å¼•ç”¨ï¼ˆweakref æ¨¡å—ï¼‰æ¥æ›¿ä»£å¼ºå¼•ç”¨ã€‚</li><li>åˆç†è®¾è®¡æ•°æ®ç»“æ„ï¼Œé¿å…ä¸å¿…è¦çš„å¾ªç¯å¼•ç”¨ã€‚</li></ul></li><li><p><strong>2.æ§åˆ¶åƒåœ¾å›æ”¶è¡Œä¸º</strong>ï¼š</p><ul><li>è°ƒæ•´åƒåœ¾å›æ”¶å™¨çš„é˜ˆå€¼ã€‚</li></ul></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-keyword">import</span> gc<br>gc.set_threshold(<span class="hljs-number">700</span>, <span class="hljs-number">10</span>, <span class="hljs-number">10</span>)<br><br></code></pre></td></tr></table></figure><ul><li><strong>3.ç›‘æ§å†…å­˜ä½¿ç”¨</strong>ï¼š<ul><li>ä½¿ç”¨ objgraph æˆ– tracemalloc æ¨¡å—åˆ†æå†…å­˜åˆ†é…å’Œæ³„æ¼é—®é¢˜ã€‚</li></ul></li></ul><hr><h2 id="5-å¸¸è§è¯¯åŒº"><a href="#5-å¸¸è§è¯¯åŒº" class="headerlink" title="5. å¸¸è§è¯¯åŒº"></a>5. å¸¸è§è¯¯åŒº</h2><ul><li><p><strong>1.åƒåœ¾å›æ”¶ä¼šç«‹åˆ»é‡Šæ”¾å†…å­˜</strong>ï¼š åƒåœ¾å›æ”¶åªä¼šæ ‡è®°ä¸å¯è¾¾å¯¹è±¡å¹¶é‡Šæ”¾å†…å­˜å—ï¼Œä½†å…·ä½“çš„å†…å­˜é‡Šæ”¾å¯èƒ½ç”±åº•å±‚ç®¡ç†å™¨å»¶è¿Ÿæ‰§è¡Œã€‚</p></li><li><p><strong>2.å¤§å¯¹è±¡çš„å†…å­˜å›æ”¶</strong>ï¼šå¤§å¯¹è±¡å¯èƒ½ç›´æ¥åˆ†é…åœ¨ç³»ç»Ÿå†…å­˜ä¸­ï¼ˆé Python å †å†…å­˜ï¼‰ï¼Œå›æ”¶çš„æ•ˆç‡ä¾èµ–äºæ“ä½œç³»ç»Ÿã€‚</p></li></ul><hr><h2 id="6-æ€»ç»“"><a href="#6-æ€»ç»“" class="headerlink" title="6. æ€»ç»“"></a>6. æ€»ç»“</h2><ul><li><p><strong>å¼•ç”¨è®¡æ•°</strong> æ˜¯ Python åƒåœ¾å›æ”¶çš„åŸºç¡€ï¼Œä½†æ— æ³•å¤„ç†å¾ªç¯å¼•ç”¨ã€‚</p></li><li><p><strong>åƒåœ¾å›æ”¶å™¨</strong>  é€šè¿‡åˆ†ä»£å›æ”¶æœºåˆ¶å’Œä¸å¯è¾¾å¯¹è±¡æ£€æµ‹ï¼Œè§£å†³äº†å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚</p></li></ul><p>åˆç†ä½¿ç”¨åƒåœ¾å›æ”¶æœºåˆ¶å¯ä»¥æå‡ç¨‹åºçš„å†…å­˜ç®¡ç†æ•ˆç‡ã€‚</p><ul><li><p><strong>æ€§èƒ½è°ƒä¼˜å»ºè®®</strong> ï¼š</p><ul><li>å°½é‡é¿å…åˆ›å»ºä¸å¿…è¦çš„å¯¹è±¡ã€‚</li><li>åŠæ—¶è§£é™¤ä¸å†ä½¿ç”¨çš„å¼•ç”¨ï¼Œå‡å°‘å¾ªç¯å¼•ç”¨çš„å‘ç”Ÿã€‚</li><li>å¯¹äºéœ€è¦é¢‘ç¹åˆ†é…å’Œé‡Šæ”¾å†…å­˜çš„åœºæ™¯ï¼Œå¯ä»¥é‡‡ç”¨å¯¹è±¡æ± æˆ–ç¼“å­˜æŠ€æœ¯ä¼˜åŒ–æ€§èƒ½ã€‚</li></ul></li><li><p><strong>æ³¨æ„å†…å­˜æ³„æ¼</strong> ï¼š</p><ul><li>è™½ç„¶ Python è‡ªåŠ¨ç®¡ç†å†…å­˜ï¼Œä½†ä¸æ­£ç¡®çš„å¼•ç”¨æˆ–è®¾è®¡ä»ç„¶å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ï¼Œä¾‹å¦‚é•¿æ—¶é—´å­˜åœ¨çš„å…¨å±€å˜é‡ã€æœªå…³é—­çš„æ–‡ä»¶å¥æŸ„ç­‰ã€‚</li></ul></li></ul>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
      <category>Python å†…éƒ¨åŸç†</category>
      
      <category>Python åƒåœ¾å›æ”¶æœºåˆ¶</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python è‡ªå¸¦é­”æ³•æ–¹æ³•é‡ç‚¹è§£æ</title>
    <link href="/2024/12/12/python%E9%AD%94%E6%B3%95%E6%96%B9%E6%B3%95/"/>
    <url>/2024/12/12/python%E9%AD%94%E6%B3%95%E6%96%B9%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h1 id="Python-è‡ªå¸¦é­”æ³•æ–¹æ³•æŒæ¡äº†å°±äº‹åŠåŠŸå€"><a href="#Python-è‡ªå¸¦é­”æ³•æ–¹æ³•æŒæ¡äº†å°±äº‹åŠåŠŸå€" class="headerlink" title="Python è‡ªå¸¦é­”æ³•æ–¹æ³•æŒæ¡äº†å°±äº‹åŠåŠŸå€"></a>Python è‡ªå¸¦é­”æ³•æ–¹æ³•æŒæ¡äº†å°±äº‹åŠåŠŸå€</h1><p>Python çš„é­”æ³•æ–¹æ³•æ˜¯ä»¥åŒä¸‹åˆ’çº¿å¼€å¤´å’Œç»“å°¾çš„ç‰¹æ®Šæ–¹æ³•ã€‚å®ƒä»¬å…è®¸æˆ‘ä»¬åœ¨è‡ªå®šä¹‰ç±»ä¸­å®ç°ç±»ä¼¼å†…ç½®ç±»å‹çš„è¡Œä¸ºï¼Œå¦‚æ”¯æŒç®—æœ¯è¿ç®—ã€ç´¢å¼•ã€è¿­ä»£ç­‰ã€‚ä»¥ä¸‹æ˜¯æŒ‰åŠŸèƒ½åˆ†ç±»çš„å…¨é¢æ€»ç»“ï¼Œæ¯ä¸ªåˆ†ç±»éƒ½æœ‰ä»£ç æ¡ˆä¾‹å’Œè¯¦ç»†è§£é‡Šã€‚</p><h2 id="1-å¯¹è±¡åˆå§‹åŒ–ä¸è¡¨ç¤º"><a href="#1-å¯¹è±¡åˆå§‹åŒ–ä¸è¡¨ç¤º" class="headerlink" title="1. å¯¹è±¡åˆå§‹åŒ–ä¸è¡¨ç¤º"></a>1. <strong>å¯¹è±¡åˆå§‹åŒ–ä¸è¡¨ç¤º</strong></h2><h3 id="1-1-init-å’Œ-new"><a href="#1-1-init-å’Œ-new" class="headerlink" title="1.1 __init__ å’Œ __new__"></a>1.1 <code>__init__</code> å’Œ <code>__new__</code></h3><ul><li><strong>ä½œç”¨</strong>: åˆå§‹åŒ–å¯¹è±¡å’Œæ§åˆ¶å¯¹è±¡çš„åˆ›å»ºã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyClass</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__new__</span>(<span class="hljs-params">cls, *args, **kwargs</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;__new__ is called&quot;</span>)<br>        instance = <span class="hljs-built_in">super</span>().__new__(cls)<br>        <span class="hljs-keyword">return</span> instance<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, value</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;__init__ is called&quot;</span>)<br>        self.value = value<br><br>obj = MyClass(<span class="hljs-number">42</span>)<br></code></pre></td></tr></table></figure><ul><li><strong>è§£é‡Š</strong>:</li></ul><p>1.<code>__new__</code>:</p><p>  æ§åˆ¶å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ã€‚<br>  å¿…é¡»è¿”å›ä¸€ä¸ªå®ä¾‹å¯¹è±¡ã€‚<br>  é€šå¸¸ç”¨åœ¨éœ€è¦å®šåˆ¶å®ä¾‹åŒ–æµç¨‹çš„åœºæ™¯ï¼Œæ¯”å¦‚å®ç°å•ä¾‹æ¨¡å¼ã€‚</p><p>2.<code>__init__</code>:</p><p>  åˆå§‹åŒ–å¯¹è±¡çš„å±æ€§ã€‚<br>  æ¥å—å®ä¾‹åˆ›å»ºåçš„æ•°æ®ï¼Œå¹¶è®¾ç½®åˆå§‹çŠ¶æ€ã€‚</p><h3 id="1-2-repr-å’Œ-str"><a href="#1-2-repr-å’Œ-str" class="headerlink" title="1.2 __repr__  å’Œ __str__"></a>1.2 <code>__repr__ </code> å’Œ <code>__str__</code></h3><ul><li><strong>ä½œç”¨</strong>: å®šä¹‰å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Point</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, x, y</span>):<br>        self.x = x<br>        self.y = y<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__repr__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;Point(<span class="hljs-subst">&#123;self.x&#125;</span>, <span class="hljs-subst">&#123;self.y&#125;</span>)&quot;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__str__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;Point at (<span class="hljs-subst">&#123;self.x&#125;</span>, <span class="hljs-subst">&#123;self.y&#125;</span>)&quot;</span><br><br>p = Point(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">repr</span>(p))  <span class="hljs-comment"># è¾“å‡ºï¼šPoint(1, 2)</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">str</span>(p))   <span class="hljs-comment"># è¾“å‡ºï¼šPoint at (1, 2)</span><br></code></pre></td></tr></table></figure><ul><li><strong>è§£é‡Š</strong>:</li></ul><p>1.<code>__repr__</code>:</p><p>  è¿”å›å¼€å‘è€…å‹å¥½çš„è¡¨ç¤ºï¼Œé€šå¸¸ç”¨äºè°ƒè¯•ã€‚<br>  é€šå¸¸è¦æ±‚è¾“å‡ºçš„å­—ç¬¦ä¸²èƒ½ç”¨ eval() é‡å»ºè¯¥å¯¹è±¡ã€‚</p><p>2.<code>__str__</code>:</p><p>  è¿”å›ç”¨æˆ·å‹å¥½çš„å­—ç¬¦ä¸²ï¼Œé€‚åˆæ˜¾ç¤ºç»™æœ€ç»ˆç”¨æˆ·ã€‚</p><h2 id="2-ç®—æœ¯è¿ç®—"><a href="#2-ç®—æœ¯è¿ç®—" class="headerlink" title="2.ç®—æœ¯è¿ç®—"></a>2.ç®—æœ¯è¿ç®—</h2><h3 id="2-1-ç®—æ•°è¿ç®—ç¬¦-add-å’Œ-sub"><a href="#2-1-ç®—æ•°è¿ç®—ç¬¦-add-å’Œ-sub" class="headerlink" title="2.1 ç®—æ•°è¿ç®—ç¬¦ __add__  å’Œ __sub__"></a>2.1 ç®—æ•°è¿ç®—ç¬¦ <code>__add__ </code> å’Œ <code>__sub__</code></h3><ul><li><p><strong>ä½œç”¨</strong>: æ”¯æŒè‡ªå®šä¹‰ç±»çš„åŠ ã€å‡ã€ä¹˜ç­‰è¿ç®—ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Number</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, value</span>):<br>        self.value = value<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__add__</span>(<span class="hljs-params">self, other</span>):<br>        <span class="hljs-keyword">return</span> Number(self.value + other.value)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__sub__</span>(<span class="hljs-params">self, other</span>):<br>        <span class="hljs-keyword">return</span> Number(self.value - other.value)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__repr__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;Number(<span class="hljs-subst">&#123;self.value&#125;</span>)&quot;</span><br><br>n1 = Number(<span class="hljs-number">10</span>)<br>n2 = Number(<span class="hljs-number">20</span>)<br><span class="hljs-built_in">print</span>(n1 + n2)  <span class="hljs-comment"># è¾“å‡ºï¼šNumber(30)</span><br><span class="hljs-built_in">print</span>(n1 - n2)  <span class="hljs-comment"># è¾“å‡ºï¼šNumber(-10)</span><br></code></pre></td></tr></table></figure></li><li><p><strong>è§£é‡Š</strong>:</p></li></ul><p>1.<code>__add__</code>:</p><p>   å®šä¹‰åŠ æ³•æ“ä½œ +ã€‚<br>   æ¥å—å¦ä¸€ä¸ªå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›æ–°çš„ç»“æœã€‚</p><p>2.<code>__sub__</code>:</p><p>   å®šä¹‰å‡æ³•æ“ä½œ -ã€‚<br>   ç±»ä¼¼çš„é­”æ³•æ–¹æ³•è¿˜æœ‰:<br>      <code>__mul__</code>: å®šä¹‰ä¹˜æ³• *ã€‚<br>      <code>__truediv__</code>: å®šä¹‰é™¤æ³• &#x2F;ã€‚<br>      <code>__floordiv__</code>: å®šä¹‰æ•´é™¤ &#x2F;&#x2F;ã€‚<br>      <code>__mod__</code>: å®šä¹‰å–æ¨¡ %ã€‚<br>      <code>__pow__</code>: å®šä¹‰å¹‚è¿ç®— **</p><h3 id="2-2-åå‘è¿ç®—-radd"><a href="#2-2-åå‘è¿ç®—-radd" class="headerlink" title="2.2 åå‘è¿ç®— _radd_ "></a>2.2 åå‘è¿ç®— <code>_radd_ </code></h3><ul><li><strong>ä½œç”¨</strong>: å½“å·¦æ“ä½œæ•°ä¸æ”¯æŒè¿ç®—æ—¶è°ƒç”¨ã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Number</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, value</span>):<br>        self.value = value<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__radd__</span>(<span class="hljs-params">self, other</span>):<br>        <span class="hljs-keyword">return</span> Number(self.value + other)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__repr__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;Number(<span class="hljs-subst">&#123;self.value&#125;</span>)&quot;</span><br><br>n = Number(<span class="hljs-number">10</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-number">5</span> + n)  <span class="hljs-comment"># è¾“å‡ºï¼šNumber(15)</span><br></code></pre></td></tr></table></figure><ul><li><strong>è§£é‡Š</strong>:</li></ul><p>1.<code>__radd__</code>:</p><p>  å®šä¹‰åå‘åŠ æ³•ã€‚<br>  åœ¨å¸¸è§„ <code>__add__</code> ä¸è¢«è°ƒç”¨æ—¶ï¼ˆå¦‚å·¦æ“ä½œæ•°æ˜¯éè‡ªå®šä¹‰ç±»å‹ï¼‰ä½¿ç”¨ã€‚</p><p>2.ç±»ä¼¼çš„åå‘è¿ç®—ç¬¦è¿˜æœ‰:<br>    <code>__rsub__</code>: åå‘å‡æ³•ã€‚<br>    <code>__rmul__</code>: åå‘ä¹˜æ³•ã€‚<br>    <code>__rtruediv__</code>: åå‘é™¤æ³•ã€‚</p><h2 id="3-å®¹å™¨æ“ä½œ"><a href="#3-å®¹å™¨æ“ä½œ" class="headerlink" title="3.å®¹å™¨æ“ä½œ"></a>3.å®¹å™¨æ“ä½œ</h2><h3 id="3-1-ç´¢å¼•è®¿é—®-getitem-å’Œ-setitem-ä»¥åŠ-delitem"><a href="#3-1-ç´¢å¼•è®¿é—®-getitem-å’Œ-setitem-ä»¥åŠ-delitem" class="headerlink" title="3.1 ç´¢å¼•è®¿é—® __getitem__  å’Œ __setitem__ä»¥åŠ__delitem__ "></a>3.1 ç´¢å¼•è®¿é—® <code>__getitem__ </code> å’Œ <code>__setitem__</code>ä»¥åŠ<code>__delitem__ </code></h3><ul><li><strong>ä½œç”¨</strong>: æ”¯æŒå¯¹è±¡çš„ç´¢å¼•æ“ä½œã€‚<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomList</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, items</span>):<br>        self.items = items<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__getitem__</span>(<span class="hljs-params">self, index</span>):<br>        <span class="hljs-keyword">return</span> self.items[index]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__setitem__</span>(<span class="hljs-params">self, index, value</span>):<br>        self.items[index] = value<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__delitem__</span>(<span class="hljs-params">self, index</span>):<br>        <span class="hljs-keyword">del</span> self.items[index]<br><br>cl = CustomList([<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>])<br><span class="hljs-built_in">print</span>(cl[<span class="hljs-number">1</span>])   <span class="hljs-comment"># è¾“å‡ºï¼š20</span><br>cl[<span class="hljs-number">1</span>] = <span class="hljs-number">99</span><br><span class="hljs-built_in">print</span>(cl[<span class="hljs-number">1</span>])   <span class="hljs-comment"># è¾“å‡ºï¼š99</span><br><span class="hljs-keyword">del</span> cl[<span class="hljs-number">1</span>]<br><span class="hljs-built_in">print</span>(cl.items)  <span class="hljs-comment"># è¾“å‡ºï¼š[10, 30]</span><br></code></pre></td></tr></table></figure></li><li><strong>è§£é‡Š</strong>:</li></ul><p>1.<code>__getitem__</code>:</p><p>   å®šä¹‰å¯¹è±¡çš„ç´¢å¼•è¯»å–ã€‚<br>   å…è®¸ä½¿ç”¨ obj[index] çš„å½¢å¼è®¿é—®ã€‚</p><p>2.<code>__setitem__</code>:</p><p>  å®šä¹‰ç´¢å¼•èµ‹å€¼ã€‚<br>  æ”¯æŒ obj[index] &#x3D; valueã€‚</p><p>3.<code>__delitem__</code>:</p><p>  å®šä¹‰ç´¢å¼•åˆ é™¤ã€‚<br>  æ”¯æŒ del obj[index]ã€‚</p><h3 id="3-2-å®¹å™¨é•¿åº¦ä¸æˆå‘˜æ£€æŸ¥-len-å’Œ-contains"><a href="#3-2-å®¹å™¨é•¿åº¦ä¸æˆå‘˜æ£€æŸ¥-len-å’Œ-contains" class="headerlink" title="3.2 å®¹å™¨é•¿åº¦ä¸æˆå‘˜æ£€æŸ¥ __len__  å’Œ __contains__"></a>3.2 å®¹å™¨é•¿åº¦ä¸æˆå‘˜æ£€æŸ¥ <code>__len__ </code> å’Œ <code>__contains__</code></h3><ul><li><strong>ä½œç”¨</strong>: æ”¯æŒ len() å’Œ in æ“ä½œã€‚<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Bag</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, items</span>):<br>        self.items = items<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__len__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(self.items)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__contains__</span>(<span class="hljs-params">self, item</span>):<br>        <span class="hljs-keyword">return</span> item <span class="hljs-keyword">in</span> self.items<br><br>bag = Bag([<span class="hljs-string">&quot;apple&quot;</span>, <span class="hljs-string">&quot;banana&quot;</span>, <span class="hljs-string">&quot;cherry&quot;</span>])<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">len</span>(bag))  <span class="hljs-comment"># è¾“å‡ºï¼š3</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;apple&quot;</span> <span class="hljs-keyword">in</span> bag)  <span class="hljs-comment"># è¾“å‡ºï¼šTrue</span><br><br></code></pre></td></tr></table></figure></li><li><strong>è§£é‡Š</strong>:</li></ul><p>1.<code>___len__</code>:</p><p>  å®šä¹‰å¯¹è±¡çš„é•¿åº¦ã€‚<br>  æ”¯æŒ len(obj)ã€‚</p><p>2.<code>__contains__</code>:</p><p>  å®šä¹‰æˆå‘˜å…³ç³»æ“ä½œã€‚<br>  æ”¯æŒ item in objã€‚</p><h2 id="4-è¿­ä»£å™¨åè®®"><a href="#4-è¿­ä»£å™¨åè®®" class="headerlink" title="4.è¿­ä»£å™¨åè®®"></a>4.è¿­ä»£å™¨åè®®</h2><h3 id="4-1-è¿­ä»£æ”¯æŒ-iter-å’Œ-next"><a href="#4-1-è¿­ä»£æ”¯æŒ-iter-å’Œ-next" class="headerlink" title="4.1 è¿­ä»£æ”¯æŒ __iter__  å’Œ __next__"></a>4.1 è¿­ä»£æ”¯æŒ <code>__iter__ </code> å’Œ <code>__next__</code></h3><ul><li><strong>ä½œç”¨</strong>: è‡ªå®šä¹‰å¯¹è±¡æ”¯æŒè¿­ä»£ã€‚<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyRange</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, start, end</span>):<br>        self.current = start<br>        self.end = end<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__iter__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> self<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__next__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">if</span> self.current &gt;= self.end:<br>            <span class="hljs-keyword">raise</span> StopIteration<br>        self.current += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> self.current - <span class="hljs-number">1</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> MyRange(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>):<br>    <span class="hljs-built_in">print</span>(i)  <span class="hljs-comment"># è¾“å‡ºï¼š1 2 3 4</span><br><br></code></pre></td></tr></table></figure></li><li><strong>è§£é‡Š</strong>:</li></ul><p>1.<code>__iter__</code>:</p><p> è¿”å›è¿­ä»£å™¨æœ¬èº«ã€‚</p><p>2.<code>__next__</code>:</p><p> å®šä¹‰æ¯æ¬¡è¿­ä»£è¿”å›çš„å€¼ã€‚<br> å½“æ²¡æœ‰å€¼å¯è¿”å›æ—¶ï¼ŒæŠ›å‡º StopIterationã€‚</p><h2 id="5-ä¸Šä¸‹æ–‡ç®¡ç†"><a href="#5-ä¸Šä¸‹æ–‡ç®¡ç†" class="headerlink" title="5.ä¸Šä¸‹æ–‡ç®¡ç†"></a>5.ä¸Šä¸‹æ–‡ç®¡ç†</h2><h3 id="5-1-ä¸Šä¸‹æ–‡ç®¡ç†åè®®-enter-å’Œ-exit"><a href="#5-1-ä¸Šä¸‹æ–‡ç®¡ç†åè®®-enter-å’Œ-exit" class="headerlink" title="5.1 ä¸Šä¸‹æ–‡ç®¡ç†åè®® __enter__  å’Œ __exit__"></a>5.1 ä¸Šä¸‹æ–‡ç®¡ç†åè®® <code>__enter__ </code> å’Œ <code>__exit__</code></h3><ul><li><strong>ä½œç”¨</strong>: æ”¯æŒ with è¯­å¥ã€‚<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">File</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, filename, mode</span>):<br>        self.filename = filename<br>        self.mode = mode<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__enter__</span>(<span class="hljs-params">self</span>):<br>        self.file = <span class="hljs-built_in">open</span>(self.filename, self.mode)<br>        <span class="hljs-keyword">return</span> self.file<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__exit__</span>(<span class="hljs-params">self, exc_type, exc_value, traceback</span>):<br>        self.file.close()<br><br><span class="hljs-keyword">with</span> File(<span class="hljs-string">&quot;example.txt&quot;</span>, <span class="hljs-string">&quot;w&quot;</span>) <span class="hljs-keyword">as</span> f:<br>    f.write(<span class="hljs-string">&quot;Hello, World!&quot;</span>)<br><br></code></pre></td></tr></table></figure></li><li><strong>è§£é‡Š</strong>:</li></ul><p>1.<code>__enter__</code>:</p><p>  åœ¨è¿›å…¥ä¸Šä¸‹æ–‡æ—¶æ‰§è¡Œã€‚<br>  è¿”å›èµ„æºå¯¹è±¡ã€‚</p><p>2.<code>__exit__</code>:</p><p>  åœ¨ç¦»å¼€ä¸Šä¸‹æ–‡æ—¶æ‰§è¡Œã€‚<br>  è´Ÿè´£æ¸…ç†èµ„æºã€‚</p><h2 id="6-å…¶ä»–å¸¸ç”¨é­”æ³•æ–¹æ³•"><a href="#6-å…¶ä»–å¸¸ç”¨é­”æ³•æ–¹æ³•" class="headerlink" title="6.å…¶ä»–å¸¸ç”¨é­”æ³•æ–¹æ³•"></a>6.å…¶ä»–å¸¸ç”¨é­”æ³•æ–¹æ³•</h2><h3 id="6-1-call"><a href="#6-1-call" class="headerlink" title="6.1 __call__ "></a>6.1 <code>__call__ </code></h3><ul><li><strong>ä½œç”¨</strong>: ä½¿å¯¹è±¡åƒå‡½æ•°ä¸€æ ·è°ƒç”¨ã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Greeter</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__call__</span>(<span class="hljs-params">self, name</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;Hello, <span class="hljs-subst">&#123;name&#125;</span>!&quot;</span><br><br>greet = Greeter()<br><span class="hljs-built_in">print</span>(greet(<span class="hljs-string">&quot;Alice&quot;</span>))  <span class="hljs-comment"># è¾“å‡ºï¼šHello, Alice!</span><br><br></code></pre></td></tr></table></figure><ul><li><strong>è§£é‡Š</strong>:</li></ul><p>1.<code>__call__</code>:<br>  è¿è¡Œçš„æ—¶å€™å¯ä»¥ç›´æ¥è°ƒç”¨å‡½æ•°</p><h3 id="6-2-del"><a href="#6-2-del" class="headerlink" title="6.2 __del__ "></a>6.2 <code>__del__ </code></h3><ul><li><strong>ä½œç”¨</strong>: å®šä¹‰å¯¹è±¡é”€æ¯æ—¶çš„è¡Œä¸ºã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Resource</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__del__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Cleaning up resources!&quot;</span>)<br><br>res = Resource()<br><span class="hljs-keyword">del</span> res  <span class="hljs-comment"># è¾“å‡ºï¼šCleaning up resources!</span><br><br></code></pre></td></tr></table></figure><ul><li><strong>è§£é‡Š</strong>:</li></ul><p>1.<code>__del__</code>:<br>  è¿è¡Œçš„æ—¶å€™å¯ä»¥ç›´æ¥åœ¨é”€æ¯å¯¹è±¡æ‰§è¡Œçš„è¡Œä¸º</p><h3 id="6-3-æ¯”è¾ƒæ“ä½œç¬¦-eq-å’Œ-lt"><a href="#6-3-æ¯”è¾ƒæ“ä½œç¬¦-eq-å’Œ-lt" class="headerlink" title="6.3 æ¯”è¾ƒæ“ä½œç¬¦ __eq_  å’Œ __lt__ "></a>6.3 æ¯”è¾ƒæ“ä½œç¬¦ <code>__eq_ </code> å’Œ <code>__lt__ </code></h3><ul><li><strong>ä½œç”¨</strong>: æ”¯æŒæ¯”è¾ƒè¿ç®—ç¬¦ã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Number</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, value</span>):<br>        self.value = value<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__eq__</span>(<span class="hljs-params">self, other</span>):<br>        <span class="hljs-keyword">return</span> self.value == other.value<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__lt__</span>(<span class="hljs-params">self, other</span>):<br>        <span class="hljs-keyword">return</span> self.value &lt; other.value<br><br>n1 = Number(<span class="hljs-number">10</span>)<br>n2 = Number(<span class="hljs-number">20</span>)<br><span class="hljs-built_in">print</span>(n1 == n2)  <span class="hljs-comment"># è¾“å‡ºï¼šFalse</span><br><span class="hljs-built_in">print</span>(n1 &lt; n2)   <span class="hljs-comment"># è¾“å‡ºï¼šTrue</span><br><br></code></pre></td></tr></table></figure><ul><li><strong>è§£é‡Š</strong>:</li></ul><p>1.<code>__eq__</code>:<br>  å®šä¹‰ &#x3D;&#x3D;ã€‚</p><p>2.<code>__lt__</code>:<br>  å®šä¹‰ &lt;ã€‚</p><p>3.è¿˜æœ‰ç±»ä¼¼çš„:<br>  <code>__le__</code> (&lt;&#x3D;)<br>  <code>__gt__</code> (&gt;)<br>  <code>__ge__</code> (&gt;&#x3D;)</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ä¸Šé¢çš„è¿™äº›é­”æ³•æ–¹æ³•åªæ˜¯pythonä¸­ç”¨çš„æ¯”è¾ƒå¤šçš„ä¸€éƒ¨åˆ†ï¼Œè¿˜æœ‰å¾ˆå¤šï¼Œæœ‰æ—¶å€™åœ¨ç¼–ç¨‹çš„æ—¶å€™ä½¿ç”¨è¿™äº›é«˜æ•ˆçš„é­”æ³•æ–¹æ³•ä¹Ÿæ˜¯å¾ˆä¸é”™çš„é€‰æ‹©ï¼</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
      <category>Python å¸¸è§å‡½æ•°</category>
      
      <category>Python é­”æ³•æ–¹æ³•</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä¸€æ–‡è®²æ¸… Git åŸºæœ¬å¸¸ç”¨å‘½ä»¤</title>
    <link href="/2024/12/12/git/"/>
    <url>/2024/12/12/git/</url>
    
    <content type="html"><![CDATA[<h1 id="Git-ä»å…¥é—¨åˆ°ç²¾é€šå‘½ä»¤æ€»ç»“"><a href="#Git-ä»å…¥é—¨åˆ°ç²¾é€šå‘½ä»¤æ€»ç»“" class="headerlink" title="Git ä»å…¥é—¨åˆ°ç²¾é€šå‘½ä»¤æ€»ç»“"></a>Git ä»å…¥é—¨åˆ°ç²¾é€šå‘½ä»¤æ€»ç»“</h1><h2 id="ä¸€ã€é…ç½®-Git"><a href="#ä¸€ã€é…ç½®-Git" class="headerlink" title="ä¸€ã€é…ç½® Git"></a>ä¸€ã€é…ç½® Git</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># è®¾ç½®ç”¨æˆ·åå’Œé‚®ç®±</span><br>git config --global user.name <span class="hljs-string">&quot;Your Name&quot;</span><br>git config --global user.email <span class="hljs-string">&quot;your.email@example.com&quot;</span><br> <br><span class="hljs-comment"># æŸ¥çœ‹é…ç½®ä¿¡æ¯</span><br>git config --list<br> <br><span class="hljs-comment"># é…ç½®é»˜è®¤ç¼–è¾‘å™¨</span><br>git config --global core.editor <span class="hljs-string">&quot;vim&quot;</span><br></code></pre></td></tr></table></figure><h2 id="äºŒã€åˆ›å»ºå’Œåˆå§‹åŒ–ä»“åº“"><a href="#äºŒã€åˆ›å»ºå’Œåˆå§‹åŒ–ä»“åº“" class="headerlink" title="äºŒã€åˆ›å»ºå’Œåˆå§‹åŒ–ä»“åº“"></a>äºŒã€åˆ›å»ºå’Œåˆå§‹åŒ–ä»“åº“</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„ Git ä»“åº“</span><br>git init<br> <br><span class="hljs-comment"># å…‹éš†è¿œç¨‹ä»“åº“</span><br>git <span class="hljs-built_in">clone</span> &lt;repository_url&gt;<br></code></pre></td></tr></table></figure><h2 id="ä¸‰ã€åŸºæœ¬æ“ä½œ"><a href="#ä¸‰ã€åŸºæœ¬æ“ä½œ" class="headerlink" title="ä¸‰ã€åŸºæœ¬æ“ä½œ"></a>ä¸‰ã€åŸºæœ¬æ“ä½œ</h2><h3 id="1-æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒº"><a href="#1-æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒº" class="headerlink" title="1. æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒº"></a>1. æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒº</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æ·»åŠ å•ä¸ªæ–‡ä»¶</span><br>git add &lt;file&gt;<br> <br><span class="hljs-comment"># æ·»åŠ æ‰€æœ‰æ–‡ä»¶</span><br>git add .<br></code></pre></td></tr></table></figure><h3 id="2-æäº¤åˆ°æœ¬åœ°ä»“åº“"><a href="#2-æäº¤åˆ°æœ¬åœ°ä»“åº“" class="headerlink" title="2. æäº¤åˆ°æœ¬åœ°ä»“åº“"></a>2. æäº¤åˆ°æœ¬åœ°ä»“åº“</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æäº¤æš‚å­˜åŒºçš„å†…å®¹åˆ°ä»“åº“</span><br>git commit -m <span class="hljs-string">&quot;Commit message&quot;</span><br> <br><span class="hljs-comment"># æäº¤å¹¶è·³è¿‡æš‚å­˜åŒºï¼ˆç›´æ¥ä»å·¥ä½œåŒºæäº¤ï¼‰</span><br>git commit -a -m <span class="hljs-string">&quot;Commit message&quot;</span><br></code></pre></td></tr></table></figure><h3 id="3-æŸ¥çœ‹çŠ¶æ€ä¸æ—¥å¿—"><a href="#3-æŸ¥çœ‹çŠ¶æ€ä¸æ—¥å¿—" class="headerlink" title="3. æŸ¥çœ‹çŠ¶æ€ä¸æ—¥å¿—"></a>3. æŸ¥çœ‹çŠ¶æ€ä¸æ—¥å¿—</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æŸ¥çœ‹å½“å‰ä»“åº“çŠ¶æ€</span><br>git status<br> <br><span class="hljs-comment"># æŸ¥çœ‹æäº¤å†å²</span><br>git <span class="hljs-built_in">log</span><br> <br><span class="hljs-comment"># ç®€åŒ–æ˜¾ç¤ºæäº¤å†å²</span><br>git <span class="hljs-built_in">log</span> --oneline<br></code></pre></td></tr></table></figure><h3 id="4-æ¯”è¾ƒä¿®æ”¹"><a href="#4-æ¯”è¾ƒä¿®æ”¹" class="headerlink" title="4. æ¯”è¾ƒä¿®æ”¹"></a>4. æ¯”è¾ƒä¿®æ”¹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æŸ¥çœ‹å·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„å·®å¼‚</span><br>git diff<br> <br><span class="hljs-comment"># æŸ¥çœ‹æš‚å­˜åŒºå’Œæœ€åä¸€æ¬¡æäº¤çš„å·®å¼‚</span><br>git diff --cached<br></code></pre></td></tr></table></figure><h3 id="5-åˆ é™¤ä¸æ¢å¤æ–‡ä»¶"><a href="#5-åˆ é™¤ä¸æ¢å¤æ–‡ä»¶" class="headerlink" title="5. åˆ é™¤ä¸æ¢å¤æ–‡ä»¶"></a>5. åˆ é™¤ä¸æ¢å¤æ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># åˆ é™¤æ–‡ä»¶å¹¶æäº¤</span><br>git <span class="hljs-built_in">rm</span> &lt;file&gt;<br> <br><span class="hljs-comment"># æ¢å¤æš‚å­˜åŒºçš„æ–‡ä»¶åˆ°å·¥ä½œåŒº</span><br>git restore &lt;file&gt;<br> <br><span class="hljs-comment"># å–æ¶ˆæš‚å­˜çš„æ–‡ä»¶</span><br>git restore --staged &lt;file&gt;<br></code></pre></td></tr></table></figure><h2 id="å››ã€åˆ†æ”¯ç®¡ç†"><a href="#å››ã€åˆ†æ”¯ç®¡ç†" class="headerlink" title="å››ã€åˆ†æ”¯ç®¡ç†"></a>å››ã€åˆ†æ”¯ç®¡ç†</h2><h3 id="1-åˆ›å»ºä¸åˆ‡æ¢åˆ†æ”¯"><a href="#1-åˆ›å»ºä¸åˆ‡æ¢åˆ†æ”¯" class="headerlink" title="1. åˆ›å»ºä¸åˆ‡æ¢åˆ†æ”¯"></a>1. åˆ›å»ºä¸åˆ‡æ¢åˆ†æ”¯</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># åˆ›å»ºæ–°åˆ†æ”¯</span><br>git branch &lt;branch_name&gt;<br> <br><span class="hljs-comment"># åˆ‡æ¢åˆ†æ”¯</span><br>git checkout &lt;branch_name&gt;<br> <br><span class="hljs-comment"># åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æ–°åˆ†æ”¯</span><br>git checkout -b &lt;branch_name&gt;<br></code></pre></td></tr></table></figure><h3 id="2-æŸ¥çœ‹åˆ†æ”¯"><a href="#2-æŸ¥çœ‹åˆ†æ”¯" class="headerlink" title="2. æŸ¥çœ‹åˆ†æ”¯"></a>2. æŸ¥çœ‹åˆ†æ”¯</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯</span><br>git branch<br> <br><span class="hljs-comment"># æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯</span><br>git branch -r<br></code></pre></td></tr></table></figure><h3 id="3-åˆå¹¶åˆ†æ”¯"><a href="#3-åˆå¹¶åˆ†æ”¯" class="headerlink" title="3. åˆå¹¶åˆ†æ”¯"></a>3. åˆå¹¶åˆ†æ”¯</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># åˆå¹¶åˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯</span><br>git merge &lt;branch_name&gt;<br></code></pre></td></tr></table></figure><h3 id="4-åˆ é™¤åˆ†æ”¯"><a href="#4-åˆ é™¤åˆ†æ”¯" class="headerlink" title="4. åˆ é™¤åˆ†æ”¯"></a>4. åˆ é™¤åˆ†æ”¯</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># åˆ é™¤æœ¬åœ°åˆ†æ”¯</span><br>git branch -d &lt;branch_name&gt;<br> <br><span class="hljs-comment"># å¼ºåˆ¶åˆ é™¤æœ¬åœ°åˆ†æ”¯</span><br>git branch -D &lt;branch_name&gt;<br></code></pre></td></tr></table></figure><h2 id="äº”ã€è¿œç¨‹ä»“åº“"><a href="#äº”ã€è¿œç¨‹ä»“åº“" class="headerlink" title="äº”ã€è¿œç¨‹ä»“åº“"></a>äº”ã€è¿œç¨‹ä»“åº“</h2><h3 id="1-ç®¡ç†è¿œç¨‹ä»“åº“"><a href="#1-ç®¡ç†è¿œç¨‹ä»“åº“" class="headerlink" title="1. ç®¡ç†è¿œç¨‹ä»“åº“"></a>1. ç®¡ç†è¿œç¨‹ä»“åº“</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æŸ¥çœ‹å½“å‰è¿œç¨‹ä»“åº“</span><br>git remote -v<br> <br><span class="hljs-comment"># æ·»åŠ è¿œç¨‹ä»“åº“</span><br>git remote add &lt;name&gt; &lt;url&gt;<br> <br><span class="hljs-comment"># åˆ é™¤è¿œç¨‹ä»“åº“</span><br>git remote remove &lt;name&gt;<br></code></pre></td></tr></table></figure><h3 id="2-æ‹‰å–ä¸æ¨é€"><a href="#2-æ‹‰å–ä¸æ¨é€" class="headerlink" title="2. æ‹‰å–ä¸æ¨é€"></a>2. æ‹‰å–ä¸æ¨é€</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># ä»è¿œç¨‹ä»“åº“æ‹‰å–ä»£ç </span><br>git pull &lt;remote&gt; &lt;branch&gt;<br> <br><span class="hljs-comment"># æ¨é€ä»£ç åˆ°è¿œç¨‹ä»“åº“</span><br>git push &lt;remote&gt; &lt;branch&gt;<br></code></pre></td></tr></table></figure><h3 id="3-å…‹éš†ä»“åº“"><a href="#3-å…‹éš†ä»“åº“" class="headerlink" title="3. å…‹éš†ä»“åº“"></a>3. å…‹éš†ä»“åº“</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># å…‹éš†è¿œç¨‹ä»“åº“</span><br>git <span class="hljs-built_in">clone</span> &lt;repository_url&gt;<br></code></pre></td></tr></table></figure><h2 id="å…­ã€æ ‡ç­¾ç®¡ç†"><a href="#å…­ã€æ ‡ç­¾ç®¡ç†" class="headerlink" title="å…­ã€æ ‡ç­¾ç®¡ç†"></a>å…­ã€æ ‡ç­¾ç®¡ç†</h2><h3 id="1-åˆ›å»ºæ ‡ç­¾"><a href="#1-åˆ›å»ºæ ‡ç­¾" class="headerlink" title="1. åˆ›å»ºæ ‡ç­¾"></a>1. åˆ›å»ºæ ‡ç­¾</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># åˆ›å»ºè½»é‡æ ‡ç­¾</span><br>git tag &lt;tag_name&gt;<br> <br><span class="hljs-comment"># åˆ›å»ºé™„æ³¨æ ‡ç­¾</span><br>git tag -a &lt;tag_name&gt; -m <span class="hljs-string">&quot;Tag message&quot;</span><br></code></pre></td></tr></table></figure><h3 id="2-æŸ¥çœ‹ä¸åˆ é™¤æ ‡ç­¾"><a href="#2-æŸ¥çœ‹ä¸åˆ é™¤æ ‡ç­¾" class="headerlink" title="2. æŸ¥çœ‹ä¸åˆ é™¤æ ‡ç­¾"></a>2. æŸ¥çœ‹ä¸åˆ é™¤æ ‡ç­¾</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æŸ¥çœ‹æ‰€æœ‰æ ‡ç­¾</span><br>git tag<br> <br><span class="hljs-comment"># åˆ é™¤æ ‡ç­¾</span><br>git tag -d &lt;tag_name&gt;<br></code></pre></td></tr></table></figure><h3 id="3-æ¨é€æ ‡ç­¾åˆ°è¿œç¨‹ä»“åº“"><a href="#3-æ¨é€æ ‡ç­¾åˆ°è¿œç¨‹ä»“åº“" class="headerlink" title="3. æ¨é€æ ‡ç­¾åˆ°è¿œç¨‹ä»“åº“"></a>3. æ¨é€æ ‡ç­¾åˆ°è¿œç¨‹ä»“åº“</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æ¨é€å•ä¸ªæ ‡ç­¾</span><br>git push &lt;remote&gt; &lt;tag_name&gt;<br> <br><span class="hljs-comment"># æ¨é€æ‰€æœ‰æ ‡ç­¾</span><br>git push &lt;remote&gt; --tags<br></code></pre></td></tr></table></figure><h2 id="ä¸ƒã€é«˜çº§æ“ä½œ"><a href="#ä¸ƒã€é«˜çº§æ“ä½œ" class="headerlink" title="ä¸ƒã€é«˜çº§æ“ä½œ"></a>ä¸ƒã€é«˜çº§æ“ä½œ</h2><h3 id="1-æš‚å­˜ä¿®æ”¹"><a href="#1-æš‚å­˜ä¿®æ”¹" class="headerlink" title="1. æš‚å­˜ä¿®æ”¹"></a>1. æš‚å­˜ä¿®æ”¹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># ä¿å­˜å½“å‰å·¥ä½œè¿›åº¦</span><br>git stash<br> <br><span class="hljs-comment"># æŸ¥çœ‹æš‚å­˜åˆ—è¡¨</span><br>git stash list<br> <br><span class="hljs-comment"># æ¢å¤æš‚å­˜å†…å®¹å¹¶åˆ é™¤è¯¥æ¡è®°å½•</span><br>git stash pop<br> <br><span class="hljs-comment"># æ¢å¤æš‚å­˜å†…å®¹ä½†ä¿ç•™è®°å½•</span><br>git stash apply<br></code></pre></td></tr></table></figure><h3 id="2-ä¿®æ”¹å†å²"><a href="#2-ä¿®æ”¹å†å²" class="headerlink" title="2. ä¿®æ”¹å†å²"></a>2. ä¿®æ”¹å†å²</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># ä¿®æ”¹æœ€åä¸€æ¬¡æäº¤</span><br>git commit --amend -m <span class="hljs-string">&quot;New commit message&quot;</span><br> <br><span class="hljs-comment"># é‡å†™å†å²è®°å½•ï¼ˆæ…ç”¨ï¼‰</span><br>git rebase -i &lt;commit_hash&gt;<br></code></pre></td></tr></table></figure><h3 id="3-å›æ»š"><a href="#3-å›æ»š" class="headerlink" title="3. å›æ»š"></a>3. å›æ»š</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æ¢å¤åˆ°æŒ‡å®šç‰ˆæœ¬ï¼ˆä¿ç•™å†å²ï¼‰</span><br>git revert &lt;commit_hash&gt;<br> <br><span class="hljs-comment"># ç¡¬å›æ»šåˆ°æŒ‡å®šç‰ˆæœ¬ï¼ˆä¸¢å¼ƒä¿®æ”¹ï¼‰</span><br>git reset --hard &lt;commit_hash&gt;<br></code></pre></td></tr></table></figure><h2 id="å…«ã€å…¶ä»–æœ‰ç”¨çš„å‘½ä»¤"><a href="#å…«ã€å…¶ä»–æœ‰ç”¨çš„å‘½ä»¤" class="headerlink" title="å…«ã€å…¶ä»–æœ‰ç”¨çš„å‘½ä»¤"></a>å…«ã€å…¶ä»–æœ‰ç”¨çš„å‘½ä»¤</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æŸ¥çœ‹æ–‡ä»¶çš„æäº¤å†å²</span><br>git blame &lt;file&gt;<br> <br><span class="hljs-comment"># æ˜¾ç¤ºæŸä¸ªæ–‡ä»¶åœ¨å„ç‰ˆæœ¬ä¸­çš„å˜åŒ–</span><br>git <span class="hljs-built_in">log</span> -p &lt;file&gt;<br> <br><span class="hljs-comment"># æ˜¾ç¤ºç®€è¦çš„ä»“åº“çŠ¶æ€</span><br>git shortlog<br></code></pre></td></tr></table></figure><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>åŸºæœ¬ä¸Šé€šè¿‡è¿™äº›å‘½ä»¤ï¼Œå¯ä»¥é€æ­¥æŒæ¡ Git çš„åŸºæœ¬æ“ä½œåŠå…¶è¿›é˜¶åŠŸèƒ½ï¼Œä»è€Œé«˜æ•ˆç®¡ç†ä»£ç ç‰ˆæœ¬ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Git</category>
      
      <category>GitåŸºæœ¬å¸¸ç”¨å‘½ä»¤</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python é¢è¯•é¢˜ä¹‹å¤šæ–¹æ³•å®ç°ç¨‹åºè¶…æ—¶æ£€æµ‹æŠ¥é”™</title>
    <link href="/2024/11/26/360%E7%AC%94%E8%AF%95%E9%A2%98/"/>
    <url>/2024/11/26/360%E7%AC%94%E8%AF%95%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h1 id="Python-é¢è¯•é¢˜ä¹‹å¤šæ–¹æ³•å®ç°ç¨‹åºè¶…æ—¶æ£€æµ‹æŠ¥é”™"><a href="#Python-é¢è¯•é¢˜ä¹‹å¤šæ–¹æ³•å®ç°ç¨‹åºè¶…æ—¶æ£€æµ‹æŠ¥é”™" class="headerlink" title="Python é¢è¯•é¢˜ä¹‹å¤šæ–¹æ³•å®ç°ç¨‹åºè¶…æ—¶æ£€æµ‹æŠ¥é”™"></a>Python é¢è¯•é¢˜ä¹‹å¤šæ–¹æ³•å®ç°ç¨‹åºè¶…æ—¶æ£€æµ‹æŠ¥é”™</h1><p>é¢˜ç›®æè¿°ï¼šæ£€æµ‹å½“å‰ç¨‹åºè¿è¡Œå¦‚æœè¶…è¿‡äº†æˆ‘ä»¬æŒ‡å®šçš„æ—¶é—´åˆ™ä¸ºå¤±è´¥æŠ¥é”™ï¼</p><p>ä¸‹é¢æ˜¯éœ€è¦æ£€æµ‹çš„ä»£ç ä¿¡æ¯</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleTest</span>():<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        self.tests = []<br>       <br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">add_test</span>(<span class="hljs-params">self, test_func</span>):<br>        self.tests.append(test_func)<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run_tests</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">for</span> test_func <span class="hljs-keyword">in</span> self.tests:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Running <span class="hljs-subst">&#123;test_func.__name__&#125;</span>...&quot;</span>)<br>            <span class="hljs-keyword">try</span>:<br>                test_func()<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;test_func.__name__&#125;</span> passed\n&quot;</span>)<br>            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;test_func.__name__&#125;</span> failed: <span class="hljs-subst">&#123;e&#125;</span>\n&quot;</span>)<br><br><br><span class="hljs-comment"># ç¤ºä¾‹æµ‹è¯•ç”¨ä¾‹</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_example</span>():<br>    <span class="hljs-keyword">assert</span> <span class="hljs-number">1</span> + <span class="hljs-number">1</span> == <span class="hljs-number">2</span><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_failure</span>():<br>    <span class="hljs-keyword">assert</span> <span class="hljs-number">1</span> + <span class="hljs-number">1</span> == <span class="hljs-number">3</span><br><br><br><span class="hljs-comment"># åˆ›å»ºæµ‹è¯•æ¡†æ¶å®ä¾‹</span><br>test_runner = SimpleTest()<br><span class="hljs-comment"># æ·»åŠ æµ‹è¯•ç”¨ä¾‹</span><br>test_runner.add_test(test_example)  <span class="hljs-comment"># è¯¥æµ‹è¯•ç”¨ä¾‹åº”é€šè¿‡</span><br>test_runner.add_test(test_failure)  <span class="hljs-comment"># è¯¥æµ‹è¯•ç”¨ä¾‹åº”å¤±è´¥</span><br><span class="hljs-comment"># è¿è¡Œæµ‹è¯•ç”¨ä¾‹</span><br>test_runner.run_tests()<br></code></pre></td></tr></table></figure><h2 id="ä½¿ç”¨è£…é¥°å™¨å®ç°"><a href="#ä½¿ç”¨è£…é¥°å™¨å®ç°" class="headerlink" title="ä½¿ç”¨è£…é¥°å™¨å®ç°"></a>ä½¿ç”¨è£…é¥°å™¨å®ç°</h2><p>è¿™æ ·çš„ç›®çš„æ˜¯æˆ‘ä»¬ä¸éœ€è¦å…¥ä¾µæºä»£ç ï¼Œå°±å¯ä»¥å®ç°è¯¥åŠŸèƒ½ï¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> datetime<br><span class="hljs-keyword">import</span> functools<br><span class="hljs-keyword">import</span> time<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">run_time</span>(<span class="hljs-params">expire_time</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decorator</span>(<span class="hljs-params">func</span>):<br><span class="hljs-meta">        @functools.wraps(<span class="hljs-params">func</span>)</span><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kwargs</span>):<br>            start_time = datetime.datetime.now()<br>            <span class="hljs-keyword">try</span>:<br>                result = func(*args, **kwargs)<br>            <span class="hljs-keyword">finally</span>:<br>                end_time = datetime.datetime.now()<br>                elapsed_time = end_time - start_time<br>                <span class="hljs-keyword">if</span> elapsed_time &gt; expire_time:<br>                    <span class="hljs-keyword">raise</span> TimeoutError(<span class="hljs-string">f&quot;Function <span class="hljs-subst">&#123;func.__name__&#125;</span> timed out after <span class="hljs-subst">&#123;elapsed_time&#125;</span> (longer than <span class="hljs-subst">&#123;expire_time&#125;</span>)&quot;</span>)<br>            <span class="hljs-keyword">return</span> result<br>        <span class="hljs-keyword">return</span> wrapper<br>    <span class="hljs-keyword">return</span> decorator<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleTest</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        self.tests = []<br>       <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">add_test</span>(<span class="hljs-params">self, test_func</span>):<br>        self.tests.append(test_func)<br>    <br><span class="hljs-meta">    @run_time(<span class="hljs-params">expire_time=datetime.timedelta(<span class="hljs-params">seconds=<span class="hljs-number">2</span></span>)</span>)</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run_individual_test</span>(<span class="hljs-params">self, test_func</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Running <span class="hljs-subst">&#123;test_func.__name__&#125;</span>...&quot;</span>)<br>        <span class="hljs-keyword">try</span>:<br>            test_func()<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;test_func.__name__&#125;</span> passed\n&quot;</span>)<br>        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;test_func.__name__&#125;</span> failed: <span class="hljs-subst">&#123;e&#125;</span>\n&quot;</span>)<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run_tests</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">for</span> test_func <span class="hljs-keyword">in</span> self.tests:<br>            <span class="hljs-keyword">try</span>:<br>                self.run_individual_test(test_func)<br>            <span class="hljs-keyword">except</span> TimeoutError <span class="hljs-keyword">as</span> te:<br>                <span class="hljs-built_in">print</span>(te)<br><br><span class="hljs-comment"># ç¤ºä¾‹æµ‹è¯•ç”¨ä¾‹</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_example</span>():<br>    time.sleep(<span class="hljs-number">1</span>)  <span class="hljs-comment"># Simulate a test that takes 1 second</span><br>    <span class="hljs-keyword">assert</span> <span class="hljs-number">1</span> + <span class="hljs-number">1</span> == <span class="hljs-number">2</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_failure</span>():<br>    time.sleep(<span class="hljs-number">3</span>)  <span class="hljs-comment"># Simulate a test that takes 3 seconds and should timeout</span><br>    <span class="hljs-keyword">assert</span> <span class="hljs-number">1</span> + <span class="hljs-number">1</span> == <span class="hljs-number">3</span><br><br><span class="hljs-comment"># åˆ›å»ºæµ‹è¯•æ¡†æ¶å®ä¾‹</span><br>test_runner = SimpleTest()<br><span class="hljs-comment"># æ·»åŠ æµ‹è¯•ç”¨ä¾‹</span><br>test_runner.add_test(test_example)  <span class="hljs-comment"># è¯¥æµ‹è¯•ç”¨ä¾‹åº”é€šè¿‡</span><br>test_runner.add_test(test_failure)  <span class="hljs-comment"># è¯¥æµ‹è¯•ç”¨ä¾‹åº”å¤±è´¥ï¼ˆè¶…æ—¶ï¼‰</span><br><span class="hljs-comment"># è¿è¡Œæµ‹è¯•ç”¨ä¾‹</span><br>test_runner.run_tests()<br></code></pre></td></tr></table></figure><p>ä»£ç è§£é‡Šï¼šé€šè¿‡è£…é¥°å™¨ä¼ å…¥çš„è¿‡æœŸæ—¶é—´ï¼Œç„¶åè·å–è¿è¡Œå‰çš„æ—¶é—´å’Œè¿è¡Œåçš„æ—¶é—´ï¼Œä¸¤è€…è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœå·®å€¼å°äºæŒ‡å®šçš„æ—¶é—´åˆ™é€šè¿‡ï¼Œå¦åˆ™å¤±è´¥ï¼</p><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">Running test_example...<br>test_example passed<br><br>Running test_failure...<br>test_failure failed: <br><br>Function run_individual_test timed out after 0:00:03.000197 (longer than 0:00:02)<br></code></pre></td></tr></table></figure><h2 id="ä½¿ç”¨çº¿ç¨‹æ± å®ç°"><a href="#ä½¿ç”¨çº¿ç¨‹æ± å®ç°" class="headerlink" title="ä½¿ç”¨çº¿ç¨‹æ± å®ç°"></a>ä½¿ç”¨çº¿ç¨‹æ± å®ç°</h2><p>å¦‚æœæˆ‘ä»¬æƒ³è¦é€šè¿‡çº¿ç¨‹æ¥å®ç°åˆ™å¯ä»¥:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">from</span> concurrent.futures <span class="hljs-keyword">import</span> ThreadPoolExecutor, as_completed, TimeoutError<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleTest</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        self.tests = []<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">add_test</span>(<span class="hljs-params">self, test_func</span>):<br>        self.tests.append(test_func)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run_tests_with_timeout</span>(<span class="hljs-params">self, timeout_seconds</span>):<br>        <span class="hljs-keyword">with</span> ThreadPoolExecutor(max_workers=<span class="hljs-built_in">len</span>(self.tests)) <span class="hljs-keyword">as</span> executor:<br>            future_to_test = &#123;executor.submit(test_func): test_func <span class="hljs-keyword">for</span> test_func <span class="hljs-keyword">in</span> self.tests&#125;<br>            <span class="hljs-keyword">try</span>:<br>                <span class="hljs-keyword">for</span> future <span class="hljs-keyword">in</span> as_completed(future_to_test, timeout=timeout_seconds):<br>                    test_func = future_to_test[future]<br>                    <span class="hljs-keyword">try</span>:<br>                        future.result()  <span class="hljs-comment"># è¿™å°†ç­‰å¾…ä»»åŠ¡å®Œæˆæˆ–æŠ›å‡ºå¼‚å¸¸</span><br>                        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;test_func.__name__&#125;</span> passed&quot;</span>)<br>                    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>                        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;test_func.__name__&#125;</span> failed: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<br>            <span class="hljs-keyword">except</span> TimeoutError:<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;One or more tests timed out.&quot;</span>)<br>                <span class="hljs-comment"># æ³¨æ„ï¼šè¿™é‡Œä¸èƒ½ç›´æ¥ä¸­æ­¢æœªå®Œæˆçš„æµ‹è¯•ï¼Œä½†ä½ å¯ä»¥è®°å½•å®ƒä»¬çš„çŠ¶æ€</span><br><br><span class="hljs-comment"># ç¤ºä¾‹æµ‹è¯•ç”¨ä¾‹</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_example</span>():<br>    time.sleep(<span class="hljs-number">1</span>)  <span class="hljs-comment"># æ¨¡æ‹Ÿä¸€ä¸ªè€—æ—¶1ç§’çš„æµ‹è¯•</span><br>    <span class="hljs-keyword">assert</span> <span class="hljs-number">1</span> + <span class="hljs-number">1</span> == <span class="hljs-number">2</span>, <span class="hljs-string">&quot;Assertion failed in test_example&quot;</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_failure</span>():<br>    time.sleep(<span class="hljs-number">3</span>)  <span class="hljs-comment"># æ¨¡æ‹Ÿä¸€ä¸ªè€—æ—¶3ç§’å¹¶ä¼šè¶…æ—¶çš„æµ‹è¯•</span><br>    <span class="hljs-keyword">assert</span> <span class="hljs-number">1</span> + <span class="hljs-number">1</span> == <span class="hljs-number">3</span>, <span class="hljs-string">&quot;Assertion failed in test_failure&quot;</span><br><br><span class="hljs-comment"># åˆ›å»ºæµ‹è¯•æ¡†æ¶å®ä¾‹</span><br>test_runner = SimpleTest()<br><span class="hljs-comment"># æ·»åŠ æµ‹è¯•ç”¨ä¾‹</span><br>test_runner.add_test(test_example)  <span class="hljs-comment"># è¯¥æµ‹è¯•ç”¨ä¾‹åº”é€šè¿‡</span><br>test_runner.add_test(test_failure)  <span class="hljs-comment"># è¯¥æµ‹è¯•ç”¨ä¾‹åº”è¶…æ—¶</span><br><span class="hljs-comment"># è¿è¡Œæµ‹è¯•ç”¨ä¾‹å¹¶è®¾ç½®è¶…æ—¶æ—¶é—´ä¸º2ç§’</span><br>test_runner.run_tests_with_timeout(<span class="hljs-number">2</span>)<br></code></pre></td></tr></table></figure><p>ä»£ç è§£é‡Šï¼š å½“å‰é€šè¿‡çº¿ç¨‹æ± å¯åŠ¨ï¼Œè·å–å½“å‰test_funcçš„é•¿åº¦ï¼Œä½œä¸ºå¯åŠ¨çº¿ç¨‹æ± çš„ä¸ªæ•°ï¼Œé€šè¿‡as_completed å»æ£€æµ‹å½“å‰æ˜¯å¦å®Œæˆï¼Œç„¶åå¯¹æ¯”è¶…æ—¶æ—¶é—´ï¼Œè¶…è¿‡äº†åˆ™æŠ¥é”™ï¼</p><p>è¿è¡Œç»“æœ:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">test_example passed<br>One or more tests timed out.<br></code></pre></td></tr></table></figure><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>ä¸Šè¿°è¿˜æœ‰å…¶ä»–çš„åŠæ³•ï¼Œç›®å‰åœ¨é¢è¯•ä¸­å¯ä»¥é‡‡å–è¿™ä¸¤ç§ï¼</p>]]></content>
    
    
    <categories>
      
      <category>é¢è¯•é¢˜ç›®æœé›†</category>
      
      <category>Python ç®—æ³•é¢˜ç›®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>python</tag>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä¸€æ¬¡è®²æ¸…SQLçš„å„ç§å†…å¤–æŸ¥è¯¢è¿æ¥</title>
    <link href="/2024/11/18/sql/"/>
    <url>/2024/11/18/sql/</url>
    
    <content type="html"><![CDATA[<h1 id="ä¸€æ¬¡è®²æ¸…SQLçš„å„ç§å†…å¤–è¿æ¥æŸ¥è¯¢"><a href="#ä¸€æ¬¡è®²æ¸…SQLçš„å„ç§å†…å¤–è¿æ¥æŸ¥è¯¢" class="headerlink" title="ä¸€æ¬¡è®²æ¸…SQLçš„å„ç§å†…å¤–è¿æ¥æŸ¥è¯¢"></a>ä¸€æ¬¡è®²æ¸…SQLçš„å„ç§å†…å¤–è¿æ¥æŸ¥è¯¢</h1><p>åœ¨MySQLä¸­ï¼Œè¿æ¥ï¼ˆJOINï¼‰æ“ä½œç”¨äºä»ä¸¤ä¸ªæˆ–å¤šä¸ªè¡¨ä¸­æ£€ç´¢ç›¸å…³æ•°æ®ã€‚ä¸»è¦çš„è¿æ¥ç±»å‹åŒ…æ‹¬å†…è¿æ¥ã€å¤–è¿æ¥å’Œè‡ªè¿æ¥ï¼Œä»¥åŠäº¤å‰è¿æ¥ç­‰ã€‚ä»¥ä¸‹æ˜¯å¯¹è¿™äº›è¿æ¥ç±»å‹çš„è¯¦ç»†è§£é‡Šï¼š</p><h2 id="ä¸€ã€å†…è¿æ¥ï¼ˆINNER-JOINï¼‰"><a href="#ä¸€ã€å†…è¿æ¥ï¼ˆINNER-JOINï¼‰" class="headerlink" title="ä¸€ã€å†…è¿æ¥ï¼ˆINNER JOINï¼‰"></a>ä¸€ã€å†…è¿æ¥ï¼ˆINNER JOINï¼‰</h2><p>å†…è¿æ¥æ˜¯æœ€å¸¸ç”¨çš„è¿æ¥æ–¹å¼ï¼Œå®ƒè¿”å›ä¸¤ä¸ªè¡¨ä¸­åŒ¹é…çš„è®°å½•ã€‚å¦‚æœåœ¨ä¸€ä¸ªè¡¨ä¸­æœ‰è®°å½•è€Œåœ¨å¦ä¸€ä¸ªè¡¨ä¸­æ²¡æœ‰åŒ¹é…çš„è®°å½•ï¼Œåˆ™è¿™äº›è®°å½•ä¸ä¼šå‡ºç°åœ¨ç»“æœä¸­ã€‚</p><ul><li><strong>è¯­æ³•</strong>ï¼š</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> columns<br><span class="hljs-keyword">FROM</span> table1<br><span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> table2<br><span class="hljs-keyword">ON</span> table1.common_field <span class="hljs-operator">=</span> table2.common_field;<br></code></pre></td></tr></table></figure><ul><li><strong>ç¤ºä¾‹</strong>ï¼š</li></ul><p>å‡è®¾æœ‰ä¸¤ä¸ªè¡¨ï¼Œ<code>employees</code>ï¼ˆå‘˜å·¥è¡¨ï¼‰å’Œ<code>departments</code>ï¼ˆéƒ¨é—¨è¡¨ï¼‰ï¼Œè¦æŸ¥è¯¢æ¯ä¸ªå‘˜å·¥åŠå…¶æ‰€åœ¨çš„éƒ¨é—¨åç§°ï¼Œå¯ä»¥ä½¿ç”¨å†…è¿æ¥ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> e.name <span class="hljs-keyword">AS</span> employee_name, d.department_name<br><span class="hljs-keyword">FROM</span> employees e<br><span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> departments d<br><span class="hljs-keyword">ON</span> e.department_id <span class="hljs-operator">=</span> d.department_id;<br></code></pre></td></tr></table></figure><h2 id="äºŒã€å¤–è¿æ¥ï¼ˆOUTER-JOINï¼‰"><a href="#äºŒã€å¤–è¿æ¥ï¼ˆOUTER-JOINï¼‰" class="headerlink" title="äºŒã€å¤–è¿æ¥ï¼ˆOUTER JOINï¼‰"></a>äºŒã€å¤–è¿æ¥ï¼ˆOUTER JOINï¼‰</h2><p>å¤–è¿æ¥è¿”å›ä¸¤ä¸ªè¡¨ä¸­åŒ¹é…çš„è®°å½•ä»¥åŠä¸€ä¸ªè¡¨ä¸­çš„æ‰€æœ‰è®°å½•ï¼ˆå³ä½¿åœ¨å¦ä¸€ä¸ªè¡¨ä¸­æ²¡æœ‰åŒ¹é…é¡¹ï¼‰ã€‚å¤–è¿æ¥åˆ†ä¸ºå·¦å¤–è¿æ¥ï¼ˆLEFT JOINï¼‰ã€å³å¤–è¿æ¥ï¼ˆRIGHT JOINï¼‰å’Œå…¨å¤–è¿æ¥ï¼ˆFULL OUTER JOINï¼‰ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒMySQLæœ¬èº«ä¸ç›´æ¥æ”¯æŒå…¨å¤–è¿æ¥ï¼Œä½†å¯ä»¥é€šè¿‡è”åˆå·¦è¿æ¥å’Œå³è¿æ¥çš„ç»“æœæ¥æ¨¡æ‹Ÿå…¨å¤–è¿æ¥ã€‚</p><ul><li><strong>å·¦å¤–è¿æ¥ï¼ˆLEFT JOINï¼‰</strong>ï¼š</li></ul><p>è¿”å›å·¦è¡¨çš„æ‰€æœ‰è®°å½•ï¼Œä»¥åŠå³è¡¨ä¸­åŒ¹é…çš„è®°å½•ã€‚å¦‚æœå·¦è¡¨ä¸­çš„è®°å½•åœ¨å³è¡¨ä¸­æ²¡æœ‰åŒ¹é…é¡¹ï¼Œåˆ™ç»“æœä¸­è¿™äº›è®°å½•çš„å³è¡¨éƒ¨åˆ†å°†åŒ…å«NULLã€‚</p><ul><li><strong>è¯­æ³•</strong>ï¼š</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> columns<br><span class="hljs-keyword">FROM</span> table1<br><span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> table2<br><span class="hljs-keyword">ON</span> table1.common_field <span class="hljs-operator">=</span> table2.common_field;<br></code></pre></td></tr></table></figure><ul><li><strong>ç¤ºä¾‹</strong>ï¼š</li></ul><p>æŸ¥è¯¢æ¯ä¸ªå‘˜å·¥åŠå…¶æ‰€åœ¨çš„éƒ¨é—¨åç§°ï¼ŒåŒ…æ‹¬é‚£äº›æ²¡æœ‰éƒ¨é—¨çš„å‘˜å·¥ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> e.name <span class="hljs-keyword">AS</span> employee_name, d.department_name<br><span class="hljs-keyword">FROM</span> employees e<br><span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> departments d<br><span class="hljs-keyword">ON</span> e.department_id <span class="hljs-operator">=</span> d.department_id;<br></code></pre></td></tr></table></figure><ul><li><strong>å³å¤–è¿æ¥ï¼ˆRIGHT JOINï¼‰</strong>ï¼š</li></ul><p>è¿”å›å³è¡¨çš„æ‰€æœ‰è®°å½•ï¼Œä»¥åŠå·¦è¡¨ä¸­åŒ¹é…çš„è®°å½•ã€‚å¦‚æœå³è¡¨ä¸­çš„è®°å½•åœ¨å·¦è¡¨ä¸­æ²¡æœ‰åŒ¹é…é¡¹ï¼Œåˆ™ç»“æœä¸­è¿™äº›è®°å½•çš„å·¦è¡¨éƒ¨åˆ†å°†åŒ…å«NULLã€‚</p><ul><li><strong>è¯­æ³•</strong>ï¼š</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> columns<br><span class="hljs-keyword">FROM</span> table1<br><span class="hljs-keyword">RIGHT</span> <span class="hljs-keyword">JOIN</span> table2<br><span class="hljs-keyword">ON</span> table1.common_field <span class="hljs-operator">=</span> table2.common_field;<br></code></pre></td></tr></table></figure><ul><li><strong>ç¤ºä¾‹</strong>ï¼š</li></ul><p>ï¼ˆå‡è®¾æœ‰ä¸€ä¸ªä¸<code>employees</code>è¡¨ç›¸å…³çš„å¦ä¸€ä¸ªè¡¨ï¼Œä¸ºäº†ç¤ºä¾‹éœ€è¦ï¼Œè¿™é‡Œä¸å…·ä½“ç»™å‡ºè¡¨ç»“æ„å’Œæ•°æ®ï¼‰</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> columns<br><span class="hljs-keyword">FROM</span> table1<br><span class="hljs-keyword">RIGHT</span> <span class="hljs-keyword">JOIN</span> table2<br><span class="hljs-keyword">ON</span> table1.common_field <span class="hljs-operator">=</span> table2.common_field;<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªæŸ¥è¯¢ä¼šè¿”å›<code>table2</code>çš„æ‰€æœ‰è¡Œï¼Œä»¥åŠ<code>table1</code>ä¸­ä¸<code>table2</code>åŒ¹é…çš„è¡Œã€‚</p><ul><li><strong>å…¨å¤–è¿æ¥ï¼ˆFULL OUTER JOINï¼ŒMySQLä¸ç›´æ¥æ”¯æŒï¼Œä½†å¯é€šè¿‡UNIONæ¨¡æ‹Ÿï¼‰</strong>ï¼š</li></ul><p>ç»“åˆå·¦è¿æ¥å’Œå³è¿æ¥çš„åŠŸèƒ½ï¼Œè¿”å›å·¦è¡¨å’Œå³è¡¨ä¸­æ‰€æœ‰çš„è®°å½•ã€‚å¦‚æœå·¦è¡¨ä¸­çš„æŸè¡Œåœ¨å³è¡¨æ²¡æœ‰åŒ¹é…ï¼Œæˆ–è€…å³è¡¨ä¸­çš„æŸè¡Œåœ¨å·¦è¡¨æ²¡æœ‰åŒ¹é…ï¼Œåˆ™è¿™äº›è¡Œçš„å¦ä¸€ä¾§å°†åŒ…å«NULLã€‚</p><ul><li><strong>æ¨¡æ‹Ÿè¯­æ³•</strong>ï¼š</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> columns<br><span class="hljs-keyword">FROM</span> table1<br><span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> table2<br><span class="hljs-keyword">ON</span> table1.common_field <span class="hljs-operator">=</span> table2.common_field<br><span class="hljs-keyword">UNION</span><br><span class="hljs-keyword">SELECT</span> columns<br><span class="hljs-keyword">FROM</span> table1<br><span class="hljs-keyword">RIGHT</span> <span class="hljs-keyword">JOIN</span> table2<br><span class="hljs-keyword">ON</span> table1.common_field <span class="hljs-operator">=</span> table2.common_field;<br></code></pre></td></tr></table></figure><h2 id="ä¸‰ã€è‡ªè¿æ¥ï¼ˆSELF-JOINï¼‰"><a href="#ä¸‰ã€è‡ªè¿æ¥ï¼ˆSELF-JOINï¼‰" class="headerlink" title="ä¸‰ã€è‡ªè¿æ¥ï¼ˆSELF JOINï¼‰"></a>ä¸‰ã€è‡ªè¿æ¥ï¼ˆSELF JOINï¼‰</h2><p>ä¸€ä¸ªè¡¨ä¸å…¶è‡ªèº«è¿æ¥ï¼Œé€šå¸¸ç”¨äºæŸ¥æ‰¾è¡¨ä¸­ä¸å…¶ä»–è®°å½•ç›¸å…³çš„æ•°æ®ã€‚å½“è¡¨ä¸­è®°å½•ä¹‹é—´å­˜åœ¨å…³ç³»ï¼Œéœ€è¦æ¯”è¾ƒåŒä¸€è¡¨ä¸­çš„ä¸åŒè®°å½•æ—¶ä½¿ç”¨ã€‚</p><ul><li><strong>è¯­æ³•</strong>ï¼š</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> a.columns, b.columns<br><span class="hljs-keyword">FROM</span> <span class="hljs-keyword">table</span> a<br><span class="hljs-keyword">JOIN</span> <span class="hljs-keyword">table</span> b<br><span class="hljs-keyword">ON</span> a.common_field <span class="hljs-operator">=</span> b.related_field;<br></code></pre></td></tr></table></figure><ul><li><strong>ç¤ºä¾‹</strong>ï¼š</li></ul><p>æŸ¥è¯¢æ¯ä¸ªå‘˜å·¥åŠå…¶éƒ¨é—¨ä¸­å…¶ä»–å‘˜å·¥çš„åå­—ï¼ˆä¾‹å¦‚ï¼Œå¯»æ‰¾ä¸åŒéƒ¨é—¨å‘˜å·¥ç›¸å…³çš„è®°å½•ï¼‰ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> e1.name <span class="hljs-keyword">AS</span> employee_name, e2.name <span class="hljs-keyword">AS</span> colleague_name<br><span class="hljs-keyword">FROM</span> employees e1<br><span class="hljs-keyword">JOIN</span> employees e2<br><span class="hljs-keyword">ON</span> e1.department_id <span class="hljs-operator">=</span> e2.department_id<br><span class="hljs-keyword">WHERE</span> e1.employee_id <span class="hljs-operator">!=</span> e2.employee_id;<br></code></pre></td></tr></table></figure><h2 id="å››ã€äº¤å‰è¿æ¥ï¼ˆCROSS-JOINï¼‰"><a href="#å››ã€äº¤å‰è¿æ¥ï¼ˆCROSS-JOINï¼‰" class="headerlink" title="å››ã€äº¤å‰è¿æ¥ï¼ˆCROSS JOINï¼‰"></a>å››ã€äº¤å‰è¿æ¥ï¼ˆCROSS JOINï¼‰</h2><p>äº¤å‰è¿æ¥è¿”å›ä¸¤ä¸ªè¡¨çš„ç¬›å¡å°”ç§¯ï¼Œå³å°†ç¬¬ä¸€ä¸ªè¡¨çš„æ¯ä¸€è¡Œä¸ç¬¬äºŒä¸ªè¡¨çš„æ¯ä¸€è¡Œè¿›è¡Œé…å¯¹ã€‚è¿™ç§ç±»å‹çš„è¿æ¥ä¸éœ€è¦æŒ‡å®šè¿æ¥æ¡ä»¶ï¼Œå› ä¸ºå®ƒç®€å•åœ°å°†æ‰€æœ‰å¯èƒ½çš„è¡Œç»„åˆåœ¨ä¸€èµ·ã€‚é€šå¸¸ä¸å¸¦WHEREå­å¥ä½¿ç”¨ï¼Œå› ä¸ºå®ƒä¼šè¿”å›å¤§é‡çš„æ•°æ®ã€‚</p><ul><li><strong>è¯­æ³•</strong>ï¼š</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> columns<br><span class="hljs-keyword">FROM</span> table1<br><span class="hljs-keyword">CROSS</span> <span class="hljs-keyword">JOIN</span> table2;<br></code></pre></td></tr></table></figure><ul><li><strong>ç¤ºä¾‹</strong>ï¼š</li></ul><p>ï¼ˆå‡è®¾æœ‰ä¸¤ä¸ªè¡¨<code>table1</code>å’Œ<code>table2</code>ï¼Œä¸ºäº†ç¤ºä¾‹éœ€è¦ï¼Œè¿™é‡Œä¸å…·ä½“ç»™å‡ºè¡¨ç»“æ„å’Œæ•°æ®ï¼‰</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> columns<br><span class="hljs-keyword">FROM</span> table1<br><span class="hljs-keyword">CROSS</span> <span class="hljs-keyword">JOIN</span> table2;<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªæŸ¥è¯¢å°†äº§ç”Ÿä¸€ä¸ªç»“æœé›†ï¼Œå…¶ä¸­åŒ…å«<code>table1</code>ä¸­çš„æ¯ä¸€è¡Œä¸<code>table2</code>ä¸­çš„æ¯ä¸€è¡Œçš„æ‰€æœ‰ç»„åˆã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ä»¥ä¸Šå°±æ˜¯å¯¹MySQLä¸­å„ç§è¿æ¥ç±»å‹çš„è¯¦ç»†è§£é‡Šå’Œç¤ºä¾‹ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œåº”æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©åˆé€‚çš„è¿æ¥ç±»å‹æ¥æ£€ç´¢ç›¸å…³æ•°æ®ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>SQL</category>
      
      <category>SQL å„ç§å†…å¤–æŸ¥è¯¢è¿æ¥</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>SQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Jmeter ä¿å­˜æ¥å£æ•°æ®åˆ°csvæ–‡ä»¶ä¸­</title>
    <link href="/2024/10/28/jmeter%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE%E5%88%B0csv/"/>
    <url>/2024/10/28/jmeter%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE%E5%88%B0csv/</url>
    
    <content type="html"><![CDATA[<h1 id="Jmeter-å¦‚ä½•å°†æ¥å£æ•°æ®ä¿å­˜åˆ°CSVæ–‡ä»¶ä¸­"><a href="#Jmeter-å¦‚ä½•å°†æ¥å£æ•°æ®ä¿å­˜åˆ°CSVæ–‡ä»¶ä¸­" class="headerlink" title="Jmeter å¦‚ä½•å°†æ¥å£æ•°æ®ä¿å­˜åˆ°CSVæ–‡ä»¶ä¸­"></a>Jmeter å¦‚ä½•å°†æ¥å£æ•°æ®ä¿å­˜åˆ°CSVæ–‡ä»¶ä¸­</h1><p>ä»Šå¤©æˆ‘ä»¬æ¥ä»‹ç»å¦‚ä½•å°†é€šè¿‡Jmetetå°†æˆ‘ä»¬è¯·æ±‚çš„æ¥å£æ•°æ®ï¼Œå°†å…¶å¯¼å‡ºåˆ°CSVæ–‡ä»¶ä¸­ï¼ç›¸ä¿¡è¿™ä¸€ç¯‡æ–‡ç« å¯ä»¥ç»™å¾ˆå¤šåŒå­¦å¾—åˆ°æ›´å¤šçš„çŸ¥è¯†ï¼</p><h2 id="Jmetet-è®¾ç½®è¯·æ±‚æ¥å£"><a href="#Jmetet-è®¾ç½®è¯·æ±‚æ¥å£" class="headerlink" title="Jmetet è®¾ç½®è¯·æ±‚æ¥å£"></a>Jmetet è®¾ç½®è¯·æ±‚æ¥å£</h2><p>é¦–å…ˆè®¾ç½®è¯·æ±‚çº¿ç¨‹ç»„ï¼Œè¿™é‡Œæˆ‘ä»¬è®¾ç½®è¯·æ±‚çš„çº¿ç¨‹ç»„ï¼ŒRamp-Upç§’ï¼Œå¾ªç¯æ¬¡æ•° å‡è®¾ä¸º1.</p><img src="/2024/10/28/jmeter%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE%E5%88%B0csv/jmeter%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE1.png" class=""><p>ç„¶åæ·»åŠ ä¸€ä¸ªHTTPè¯·æ±‚</p><img src="/2024/10/28/jmeter%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE%E5%88%B0csv/jmeter%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE2.png" class=""><p>æ­¤æ—¶è¿™æ—¶å€™æˆ‘ä»¬å·²ç»é…ç½®å¥½äº†è¯·æ±‚çš„ç›¸å…³ä¿¡æ¯ã€‚</p><h2 id="Jmeter-è®¾ç½®æå–æ¥å£è¿”å›"><a href="#Jmeter-è®¾ç½®æå–æ¥å£è¿”å›" class="headerlink" title="Jmeter è®¾ç½®æå–æ¥å£è¿”å›"></a>Jmeter è®¾ç½®æå–æ¥å£è¿”å›</h2><p>é¦–å…ˆæˆ‘ä»¬è§‚å¯Ÿæ¥å£çš„è¿”å›å€¼ï¼Œç„¶åé€šè¿‡jsonæ•°æ®æå–å™¨ï¼Œå°†æˆ‘ä»¬éœ€è¦æå–çš„æ•°æ®è¿›è¡Œæå–ï¼Œé¦–å…ˆè§‚å¯Ÿè¿”å›ä½“ç»“æ„ï¼Œç„¶åæå–æ•°æ®ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;bizCode&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">10000</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;https://test.matchplay.com/static//page/detail/soccer/football_match_started.png&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;football_match_started&quot;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;https://test.matchplay.com/static//page/detail/soccer/football_match_ended.png&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;football_match_ended&quot;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;https://test.matchplay.com/static//page/detail/soccer/football_video_assistant_referee_over.png&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;football_video_assistant_referee_over&quot;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;innerMsg&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;success&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;success&quot;</span><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>å‡å¦‚æˆ‘ä»¬æƒ³è¦æå–å…¶ä¸­çš„iconå­—æ®µï¼Œé‚£ä¹ˆä½ å°±å¯ä»¥é€šè¿‡Jsonæå–ï¼Œæ·»åŠ ä¸€ä¸ªJsonæå–å™¨</p><p>é‚£ä¹ˆæˆ‘ä»¬çš„æå–å…¬å¼å°±æ˜¯<code>$.data.icon[*].icon</code> å…¶ä¸­[*] è¡¨ç¤ºæå–å¤šä¸ªåŒ¹é…,ç„¶ååœ¨Match No. è¾“å…¥-1 è¡¨ç¤ºåŒ¹é…æ‰€æœ‰ã€‚</p><img src="/2024/10/28/jmeter%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE%E5%88%B0csv/jmeter%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE3.png" class=""><p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥æ·»åŠ å¤šä¸ªJson æå–å™¨ï¼Œç„¶åå†™å…¥å…·ä½“çš„è§„åˆ™å³å¯ï¼</p><h2 id="Benshell-å¤„ç†å†™å…¥csvè„šæœ¬"><a href="#Benshell-å¤„ç†å†™å…¥csvè„šæœ¬" class="headerlink" title="Benshell å¤„ç†å†™å…¥csvè„šæœ¬"></a>Benshell å¤„ç†å†™å…¥csvè„šæœ¬</h2><p>é¦–å…ˆæ·»åŠ ä¸€ä¸ªåç½®å¤„ç†å™¨Benshell</p><img src="/2024/10/28/jmeter%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE%E5%88%B0csv/jmeter%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE4.png" class=""><p>ç„¶åæ·»åŠ ä¸€ä¸ªè°ƒè¯•åç½®å¤„ç†å™¨ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°æŠ“å–çš„æ•°æ®ä¿¡æ¯</p><img src="/2024/10/28/jmeter%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE%E5%88%B0csv/jmeter%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE5.png" class=""><h3 id="ç¼–å†™Benshell-è„šæœ¬"><a href="#ç¼–å†™Benshell-è„šæœ¬" class="headerlink" title="ç¼–å†™Benshell è„šæœ¬"></a>ç¼–å†™Benshell è„šæœ¬</h3><p>åœ¨Benshell ä¸­å†™å…¥è„šæœ¬å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs shell">import java.io.BufferedWriter;  <br>import java.io.FileWriter;  <br>import java.io.IOException;  <br>  <br>// æ–‡ä»¶è·¯å¾„  <br>String filePath = &quot;C:\\Users\\15424\\Desktop\\æ¯”èµ›\\biz.csv&quot;;  <br>  <br>  <br>// æ‰“å¼€æ–‡ä»¶ä»¥è¿½åŠ æ¨¡å¼å†™å…¥ï¼ˆå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œå®ƒå°†è¢«åˆ›å»ºï¼‰  <br>FileWriter fstream = new FileWriter(filePath);  <br>BufferedWriter out = new BufferedWriter(fstream);  <br><br>int invoiceCodeMatchNr = Integer.parseInt(vars.get(&quot;bizcode_matchNr&quot;));<br>int invoiceNumberMatchNr = Integer.parseInt(vars.get(&quot;id_matchNr&quot;));<br>// int billingDateMatchNr = Integer.parseInt(vars.get(&quot;bb_matchNr&quot;));<br>//int eInvoiceNumberMatchNr = Integer.parseInt(vars.get(&quot;eInvoiceNumber_matchNr&quot;));<br>  <br>try &#123; <br>    // ä½¿ç”¨ for å¾ªç¯å†™å…¥æ•°æ®  <br>    for (int i = 1; i &lt;= invoiceCodeMatchNr; i++) &#123;  <br>        // æ„é€ è¦å†™å…¥çš„æ•°æ®ï¼Œè¿™é‡Œåªæ˜¯ç®€å•çš„ç¤ºä¾‹ï¼Œä½ å¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹ <br>        String line = vars.get(&quot;bizcode_&quot;+i);<br>        String line2 = vars.get(&quot;id_&quot;+i);<br>        log.info(line);<br>          <br>        // å†™å…¥æ•°æ®åˆ°æ–‡ä»¶  <br>        out.write(line+&quot;,&quot;+line2);<br>        out.newLine();   <br>    &#125;<br><br>    out.write(&quot;,&quot;);<br>&#125; catch (IOException e) &#123;  <br>    // å¤„ç†å¯èƒ½çš„ IOException  <br>    log.error(&quot;Error writing to file: &quot; + e.getMessage());  <br>&#125; finally &#123;  <br>    // ç¡®ä¿æ–‡ä»¶è¢«å…³é—­  <br>    try &#123;  <br>        if (out != null) &#123;  <br>            out.close();  <br>        &#125;  <br>        if (fstream != null) &#123;  <br>            fstream.close();  <br>        &#125;  <br>    &#125; catch (IOException ex) &#123;  <br>        // å¤„ç†å…³é—­æ–‡ä»¶æ—¶çš„å¼‚å¸¸  <br>        log.error(&quot;Error closing file: &quot; + ex.getMessage());  <br>    &#125;  <br>&#125;<br></code></pre></td></tr></table></figure><h3 id="è„šæœ¬è§£æ"><a href="#è„šæœ¬è§£æ" class="headerlink" title="è„šæœ¬è§£æ"></a>è„šæœ¬è§£æ</h3><p>é¦–å…ˆæˆ‘ä»¬çœ‹åˆ°æŸ¥çœ‹ç»“æœæ ‘é‡Œé¢å·²ç»æœ‰äº†åŒ¹é…çš„ä¸ªæ•°</p><img src="/2024/10/28/jmeter%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE%E5%88%B0csv/jmeter%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE6.png" class=""><p>ä¹Ÿå°±æ˜¯ bizcode_matchNrï¼Œid_matchNr é€šè¿‡è¿™ä¸ªæˆ‘ä»¬å°±å¯ä»¥çŸ¥é“å…·ä½“åŒ¹é…äº†å¤šå°‘ä¸ªï¼Œé‚£ä¹ˆå°±å¯ä»¥é€šè¿‡forå¾ªç¯æ¥å®ç°å¾ªç¯å»è·å–æˆ‘ä»¬å¯¹åº”çš„å€¼ï¼Œç„¶ååœ¨è§‚å¯Ÿå¯¹åº”çš„keyçš„è§„åˆ™ï¼š</p><img src="/2024/10/28/jmeter%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE%E5%88%B0csv/jmeter%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE7.png" class=""><p>å¯ä»¥è§‚å¯Ÿåˆ°æ˜¯ä½ çš„å˜é‡å+_+é¡ºåºæ•°å­—ç»„æˆï¼Œé‚£ä¹ˆæˆ‘ä»¬çŸ¥é“äº†å…·ä½“è§„åˆ™å°±å¯ä»¥å†™for å¾ªç¯äº†ï¼</p><p>é¦–å…ˆå®šä¹‰æˆ‘ä»¬çš„å˜é‡ä¹Ÿå°±æ˜¯åŒ¹é…çš„æ€»ä¸ªæ•°:bizcode_matchNr</p><p><code>int invoiceCodeMatchNr = Integer.parseInt(vars.get(&quot;bizcode_matchNr&quot;));</code></p><p>ç„¶åæˆ‘ä»¬éå†æ ¹æ®è§„åˆ™è·å–å¯¹åº”çš„å€¼:</p><pre><code class="hljs">for (int i = 1; i &lt;= invoiceCodeMatchNr; i++) &#123;      // æ„é€ è¦å†™å…¥çš„æ•°æ®ï¼Œè¿™é‡Œåªæ˜¯ç®€å•çš„ç¤ºä¾‹ï¼Œä½ å¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹     String line = vars.get(&quot;bizcode_&quot;+i);    String line2 = vars.get(&quot;id_&quot;+i);    log.info(line);        &#125;</code></pre><p>ç„¶åå°†æˆ‘ä»¬å¯¹åº”çš„ä¿¡æ¯å†™å…¥csv</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs shell">import java.io.BufferedWriter;  <br>import java.io.FileWriter;  <br>import java.io.IOException;  <br>  <br>// æ–‡ä»¶è·¯å¾„  <br>String filePath = &quot;C:\\Users\\15424\\Desktop\\æ¯”èµ›\\biz.csv&quot;;  <br>  <br>  <br>// æ‰“å¼€æ–‡ä»¶ä»¥è¿½åŠ æ¨¡å¼å†™å…¥ï¼ˆå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œå®ƒå°†è¢«åˆ›å»ºï¼‰  <br>FileWriter fstream = new FileWriter(filePath);  <br>BufferedWriter out = new BufferedWriter(fstream);<br><br>  // å†™å…¥æ•°æ®åˆ°æ–‡ä»¶  <br>   out.write(line+&quot;,&quot;+line2);<br><br></code></pre></td></tr></table></figure><p>å®Œæˆçš„for å¾ªç¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs shell">int invoiceCodeMatchNr = Integer.parseInt(vars.get(&quot;bizcode_matchNr&quot;));<br>int invoiceNumberMatchNr = Integer.parseInt(vars.get(&quot;id_matchNr&quot;));<br><br>    for (int i = 1; i &lt;= invoiceCodeMatchNr; i++) &#123;  <br>        // æ„é€ è¦å†™å…¥çš„æ•°æ®ï¼Œè¿™é‡Œåªæ˜¯ç®€å•çš„ç¤ºä¾‹ï¼Œä½ å¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹ <br>        String line = vars.get(&quot;bizcode_&quot;+i);<br>        String line2 = vars.get(&quot;id_&quot;+i);<br>        log.info(line);<br>          <br>        // å†™å…¥æ•°æ®åˆ°æ–‡ä»¶  <br>        out.write(line+&quot;,&quot;+line2);<br>        out.newLine();<br>        <br>        <br>    &#125;<br></code></pre></td></tr></table></figure><p>é‚£ä¹ˆä»¥ä¸Šå°±æ˜¯æˆ‘ä»¬çš„shellè„šæœ¬çš„å®Œæ•´ä¿¡æ¯ã€‚</p><h2 id="æŸ¥çœ‹ç»“æœ"><a href="#æŸ¥çœ‹ç»“æœ" class="headerlink" title="æŸ¥çœ‹ç»“æœ"></a>æŸ¥çœ‹ç»“æœ</h2><p>è¿™æ ·å°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„æ•°æ®éƒ½å·²ç»å†™å…¥è¿‘csvæ–‡ä»¶å•¦ï¼</p><img src="/2024/10/28/jmeter%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE%E5%88%B0csv/jmeter%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE8.png" class=""><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>è¿™é‡Œæˆ‘ä»¬å°±å®Œæˆäº†æ‰€æœ‰çš„csvå†™å…¥æ“ä½œäº†ï¼Œå¦‚æœå„ä½åŒå­¦æœ‰ä¸æ˜ç™½çš„åœ°æ–¹æ¬¢è¿éšæ—¶ç•™è¨€ï¼</p>]]></content>
    
    
    <categories>
      
      <category>æµ‹è¯•å¼€å‘å·¥å…·/æ¡†æ¶</category>
      
      <category>Jmeter</category>
      
      <category>Jmeter ä¿å­˜æ•°æ®åˆ°CSVæ–‡ä»¶</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Jmeter</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>12306 ç«è½¦ç¥¨ä½™ç¥¨æŸ¥è¯¢è„šæœ¬å¼€å‘</title>
    <link href="/2024/10/08/12306%E4%BD%99%E7%A5%A8%E6%9F%A5%E8%AF%A2/"/>
    <url>/2024/10/08/12306%E4%BD%99%E7%A5%A8%E6%9F%A5%E8%AF%A2/</url>
    
    <content type="html"><![CDATA[<h1 id="12306-ä½™ç¥¨æŸ¥è¯¢å¼€å‘åˆè¡·"><a href="#12306-ä½™ç¥¨æŸ¥è¯¢å¼€å‘åˆè¡·" class="headerlink" title="12306 ä½™ç¥¨æŸ¥è¯¢å¼€å‘åˆè¡·"></a>12306 ä½™ç¥¨æŸ¥è¯¢å¼€å‘åˆè¡·</h1><p>å¯èƒ½å¾ˆå¤šåŒå­¦æœ‰ç–‘æƒ‘éƒ½2024å¹´äº†ï¼Œæ€ä¹ˆè¿˜éœ€è¦è‡ªå·±å¼€å‘è¿™ä¸ªä½™ç¥¨æŸ¥è¯¢åŠŸèƒ½å‘¢ï¼Ÿæ¯•ç«Ÿå½“å‰å¸‚é¢å¤ªå¤šè‡ªåŠ¨åŒ–æŠ¢ç¥¨å·¥å…·äº†ï¼Œåªéœ€è¦å¡«å†™åŸºæœ¬ä¿¡æ¯å°±å¯ä»¥å®Œæˆä»æŠ¢ç¥¨åˆ°ä¸‹å•ç­‰ä¸€ç³»åˆ—æ“ä½œï¼Œç¡®å®ï¼Œç°åœ¨æœ‰å¾ˆå¤šæŠ¢ç¥¨è½¯ä»¶åšçš„éƒ½å¾ˆå®Œç¾ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªç—›ç‚¹ç›®å‰æ˜¯æˆ‘é‡åˆ°çš„ï¼Œé‚£å°±æ˜¯</p><p>1.æˆ‘æƒ³æŸ¥ä¾‹å¦‚ åŒ—äº¬â€”&gt; çŸ³å®¶åº„çš„ç¥¨ï¼Œåœ¨è¿™æ ·çš„å¤§å‹èŠ‚å‡æ—¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬éƒ½ä¼šé€‰æ‹©æŠ¢ç¥¨ï¼Œä½†æ˜¯æŠ¢ç¥¨è½¯ä»¶éƒ½æ˜¯é€‰æ‹©ä½ å…³æ³¨çš„çš„ï¼Œè™½ç„¶æŠ¢ç¥¨è½¯ä»¶å¯ä»¥è‡ªåŠ¨æŠ¢æ–°å¼€åˆ—è½¦ï¼Œä½†æ˜¯å¦‚æœæ–°å¼€çš„åˆ—è½¦ä¸æ˜¯ä½ æ‰€æœŸæœ›çš„æ—¶é—´ï¼Œè¿™æ—¶é—´æŠŠé’±ä»˜äº†ï¼Œä½ è¿˜è¦é€€ç¥¨ï¼Œé‚£ä¹ˆå°±è¦é¢ä¸´æ‰‹ç»­è´¹ï¼</p><p>2.å¦ä¸€æ–¹é¢ï¼Œæˆ‘æƒ³çœ‹å½“å‰é‚£äº›æœ‰ä½™ç¥¨çš„ï¼Œæˆ‘å°±éœ€è¦æ¯æ¬¡æ‰“å¼€è½¯ä»¶å»æŸ¥è¯¢ï¼Œæ²¡æœ‰ä¸€ä¸ªå¾ˆæ–¹ä¾¿çš„ç›´æ¥å‘Šè¯‰æˆ‘ï¼Œå“ªåˆ—è½¦å½“å‰æœ‰ç¥¨ï¼ä¼šæ„Ÿè§‰å¾ˆéº»çƒ¦ï¼Œå¦‚æœæœ‰ä¸€ä¸ªç¨‹åºå¯ä»¥å¸®æˆ‘è‡ªåŠ¨æŸ¥è¯¢ç„¶åå‘Šè¯‰æˆ‘ï¼Œé‚£ä¹ˆå°±å¾ˆå®Œç¾äº†ï¼</p><p>é‚£ä¹ˆæˆ‘å¼€å‘çš„è¿™ä¸ªè„šæœ¬å°±å¯ä»¥å®Œç¾çš„è§£å†³ä¸Šè¿°çš„ä¸¤ä¸ªé—®é¢˜ï¼Œä½†æ˜¯ç›®å‰ä»…é™äºæŸ¥è¯¢ä½™ç¥¨ï¼Œå…¶ä½™è¿˜æ˜¯åšä¸åˆ°çš„ï¼åç»­åŠŸèƒ½å¯ä»¥æ…¢æ…¢åŠ ä¸Šï¼</p><h2 id="12306-ç½‘ç«™æ¥å£å‰–æ"><a href="#12306-ç½‘ç«™æ¥å£å‰–æ" class="headerlink" title="12306 ç½‘ç«™æ¥å£å‰–æ"></a>12306 ç½‘ç«™æ¥å£å‰–æ</h2><p>å¦‚æœæˆ‘ä»¬æƒ³æŸ¥è¯¢ä½™ç¥¨ï¼Œå„ä½åŒå­¦è‚¯å®šä¼šæƒ³åˆ°çš„æ—¶å€™é€šè¿‡æ¥å£æŸ¥è¯¢ï¼Œé‚£ä¹ˆæˆ‘ä»¬é¦–å…ˆè§‚å¯Ÿ12306 ç½‘ç«™åœ¨æŸ¥è¯¢çš„æ—¶å€™éƒ½ç”¨äº†é‚£äº›æ¥å£å‘¢ï¼Ÿå‡å¦‚æˆ‘ä»¬è¿™æ—¶å€™æŸ¥è¯¢ åŒ—äº¬â€”&gt; çŸ³å®¶åº„ 2024å¹´10æœˆ9é¢˜çš„ç«è½¦ç¥¨ï¼Œé€šè¿‡æŸ¥è¯¢NetWorké¢æ¿æˆ‘ä»¬å‘ç°ä¸€å…±è¯·æ±‚äº†2ä¸ªæ¥å£ï¼</p><img src="/2024/10/08/12306%E4%BD%99%E7%A5%A8%E6%9F%A5%E8%AF%A2/12306_1.png" class=""><p>é‚£ä¹ˆè¿™ä¸¤ä¸ªæ¥å£å…·ä½“æ˜¯å¹²å˜›çš„å‘¢ï¼Ÿ ä¸‹é¢æˆ‘ä»¬å°±å…ˆå‰–æç¬¬ä¸€ä¸ªæ¥å£</p><p>url_1: <a href="https://kyfw.12306.cn/otn/leftTicket/queryG?leftTicketDTO.train_date=2024-10-09&leftTicketDTO.from_station=BJP&leftTicketDTO.to_station=SJP&purpose_codes=ADULT">https://kyfw.12306.cn/otn/leftTicket/queryG?leftTicketDTO.train_date=2024-10-09&amp;leftTicketDTO.from_station=BJP&amp;leftTicketDTO.to_station=SJP&amp;purpose_codes=ADULT</a></p><p>è¿™ä¸ªurl_1 å®ç°äº†æˆ‘ä»¬çš„æŸ¥è¯¢åŠŸèƒ½å°±æ˜¯æŸ¥è¯¢åŒ—äº¬â€”&gt;çŸ³å®¶åº„ 10æœˆ09æ—¥çš„ç¥¨ï¼Œå¯ä»¥çœ‹è¿”å›ä½“ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;httpstatus&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;result&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>            <span class="hljs-string">&quot;IN8i2mjU4pcjjt%2FuzxOnHM4uHCelK7W%2FFIJqW4sNvITAIkDPEQXWDCZRPUOlCQDyzvC2TBDcOaw8%0AHDSJMjOYT%2FZUGmDFoxGjVSeCZ0m3vuq11L0d5I8BhBL%2FcWpvvt%2FQzFHg57AgDF%2B24iCwm1rNRfvx%0A8WqPrdaBsIa7ffyQ9%2FNMxitJVEF9AAv0kc8VjDK0wqGAqS%2F6QlXILrQTUeh830ahknr0%2F017eIrI%0A67tFo0WX2HUhszbtLo7mEk%2FFWu%2BovNguW%2BOG7%2BB%2Bh1GBf61lRTktO03u0XOz3Di3NY%2FUKARr7vE5%0AnqcGhjzJ9uFZrXc2Q2gMq04L2uz43U0jxNqtkb9ZmnXO%2BeYC|é¢„è®¢|25000K772836|K7725|QTP|HDP|FTP|SJP|05:10|08:44|03:34|Y|Jz1NB7nb1uVJBAoXtjLOZGJ20tRCNaJVqDZwRJdiCitslCNE|20241008|3|P4|05|10|1|0|||||||æœ‰||æœ‰|æœ‰|||||1030W0|131|1|0||100415002130087500211004153540|0|||||1|0#0#0#0#z#0#3#z||7|CHN,CHN|||N#N#|330087531009553200925||202409250800|&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-string">&quot;4y1ZRp%2BUDU05TDqqGv5db0B8Ihr2U1k%2FUeqFOAFBuD7D4figNevZqpZ6BhdLoptjhZm0o1VkTITk%0A3ls1ZBfEW%2BM3gjtMX5jVAt7kltUotA8BR7mIkjeKOO1p0%2F6xN13lF5egt%2BVI3l5OH2HCdNox%2BJR0%0AXYaq%2BW%2BIJfFMsylSFQ4VzXzuZT2LZIgB4vJi2L5xnxBbUMWNMVC%2BE2uLm8%2BYUSLVjtA23UYLJCvZ%0AotZroMKl5%2FWYzSTg5t%2BsDf0IWJflfP9oUFRJQ71joO5iAhRO7K2ztONUGpXeegX8iLvFAgGyEy9h%0Af3bbljnIxuSs8earw%2FBRl4QpP5%2F9vcCPe7%2BgkeRHKIA%3D|é¢„è®¢|24000G67010K|G6701|BXP|HPP|BXP|SJP|05:34|06:52|01:18|Y|gM8t0dYOT81RRsMTXqzAZBNqGbCT0vYlvM9nnLI%2F6hDnhC7c|20241009|3|P2|01|03|1|0|||||||||||æœ‰|æœ‰|9||90M0O0|9MO|1|0||9040700009M016300021O010200021|0|||||1|0#1#0#0#z#0#z#z||7|CHN,CHN|||N#N#||90076M0066O0066|202409250800|&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-string">&quot;aJBRnhEtmXAILBbtHPZE5sGXxKlGgBMT4oHXCbUtcPuZ3qg3wWoFgPftibMhjuGeeMyWLj%2FOMpA4%0A1S0xBnV93r8DZd%2BjeZ4ctKY8mrxeTZqQS2hC%2FQdik20TK%2FDIeoXiTcCkZvD6gVUqMgIDBkb21q1J%0Alo5s%2BHidvNoHsOGvFqN4LHScUsfRvT8bWgW0gjuHs%2F%2FD2LRYdoWI4huvq1ymE112foQZCBFBaMTG%0AerGlG%2BMeFF6Yuk8nfv0jFZ90L3M9LmjZ3juZOklCSAl1bTGx5R31iszI%2BmrAd1NPGazE7VglF5Rz%0A0dxDkY27GSnazC6iVP40G4koVDk8EhXfl81rLTHtopE%3D|é¢„è®¢|24000G67030M|G6703|BXP|SJP|BXP|SJP|06:09|07:38|01:29|Y|3xnb0KoZxbzyVOsX6Abi3Bt1wPSt82%2FVpCTzaT73xMwj4JKw|20241009|3|P3|01|04|1|0|||||||||||æœ‰|æœ‰|æœ‰||90M0O0|9MO|1|0||9040700021M013600021O008500021|0|||||1|0#0#0#0#z#0#z#z||7|CHN,CHN|||N#N#||90076M0056O0055|202409250800|&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-string">&quot;Ogwl8J7aObJfs%2F3CMJhpSdQGFSiYlTW3BFiMMI6XfFv9oGNvbzSdPewztg4FaP7YVypFXeKH4IVI%0AjZs0qTz2jKFKllmW2I3Vb9VQMW6WYOcNk1lX3rJF7vnglUOsQQPQnXeYWPlasqgPchyVoX0lcab3%0AUJJ8p4PRgz1%2BDV11X%2FxqrgBMajeH3oceMve6xFuZPx0hv1ULSLmqzs4soBc4aAqXG1NhnyUn8Cle%0A%2BfIbM%2FGoWvBxny3boSaGHqG0RtOqkSz57MCHny4lhKzj0unAJk9PHWuEKD9pBcZKzMco2FQAZa81%0ABn2yKz%2Fj%2Ff5pL0P93yXy5RrXg9soKhdEzYp40T0DTL8%3D|é¢„è®¢|240000G55920|G559|BXP|JGF|BXP|SJP|06:15|07:26|01:11|Y|IItRSsrNtZYpYkCJw54WZ92Lec8RbTDQ%2BJpF4yOQO%2Bv1U21q|20241009|3|P4|01|02|1|0|||||||||||æœ‰|5|æ— ||90M0O0|9MO|0|1||9040700000M020600005O012900021|0|||||1|0#0#0#0#z#0#z#z||7|CHN,CHN|||N#N#||90076M0084O0084|202409250800|&quot;</span><br>        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;flag&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;level&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;sametlc&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Y&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;map&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;VVP&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;çŸ³å®¶åº„åŒ—&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;IFP&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;åŒ—äº¬æœé˜³&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;FTP&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;åŒ—äº¬ä¸°å°&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;SJP&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;çŸ³å®¶åº„&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;BJP&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;åŒ—äº¬&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;QIP&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;æ¸…æ²³&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;BXP&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;åŒ—äº¬è¥¿&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;GIP&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;é«˜é‚‘&quot;</span><br>        <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;messages&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>ä¸Šè¿°çš„è¿”å›ä½“ä¸­æˆ‘æˆªå–äº†resultä¸­çš„éƒ¨åˆ†æ•°æ®ï¼Œå› ä¸ºè¿”å›å¤ªå¤šäº†æˆ‘ä»¬åªéœ€è¦å¯¹ä¸€ä¸ªè§‚å¯Ÿå°±å¯ä»¥æ‰¾åˆ°å…·ä½“çš„è§„å¾‹ï¼Œæ­¤æ—¶æˆ‘ä»¬çœ‹åˆ°</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">&quot;IN8i2mjU4pcjjt%2FuzxOnHM4uHCelK7W%2FFIJqW4sNvITAIkDPEQXWDCZRPUOlCQDyzvC2TBDcOaw8%0AHDSJMjOYT%2FZUGmDFoxGjVSeCZ0m3vuq11L0d5I8BhBL%2FcWpvvt%2FQzFHg57AgDF%2B24iCwm1rNRfvx%0A8WqPrdaBsIa7ffyQ9%2FNMxitJVEF9AAv0kc8VjDK0wqGAqS%2F6QlXILrQTUeh830ahknr0%2F017eIrI%0A67tFo0WX2HUhszbtLo7mEk%2FFWu%2BovNguW%2BOG7%2BB%2Bh1GBf61lRTktO03u0XOz3Di3NY%2FUKARr7vE5%0AnqcGhjzJ9uFZrXc2Q2gMq04L2uz43U0jxNqtkb9ZmnXO%2BeYC|é¢„è®¢|25000K772836|K7725|QTP|HDP|FTP|SJP|05:10|08:44|03:34|Y|Jz1NB7nb1uVJBAoXtjLOZGJ20tRCNaJVqDZwRJdiCitslCNE|20241008|3|P4|05|10|1|0|||||||æœ‰||æœ‰|æœ‰|||||1030W0|131|1|0||100415002130087500211004153540|0|||||1|0#0#0#0#z#0#3#z||7|CHN,CHN|||N#N#|330087531009553200925||202409250800|&quot;<br></code></pre></td></tr></table></figure><p>é¦–å…ˆæ˜¯ä¸€å †ä¹±ç ï¼Œåé¢æˆ‘ä»¬çœ‹åˆ°æœ‰ä¸­æ–‡çš„é¢„å®šï¼Œç„¶åæˆ‘ä»¬ç»§ç»­è§‚å¯Ÿçœ‹åˆ°æœ‰ K7725 è¿™ä¸ªç«è½¦ç¼–å·çš„ ä¿¡æ¯ï¼Œç„¶ååé¢åæœ‰éƒ¨åˆ†æ—¶é—´ä¿¡æ¯ï¼Œä»¥åŠåç»­çš„ç¥¨åŠ¡ä¿¡æ¯ï¼š|||||||æœ‰||æœ‰|æœ‰|||||, é‚£ä¹ˆæœ‰äººè¦é—®äº†è¿™äº›<code>|</code>è¡¨ç¤ºä»€ä¹ˆå‘¢ï¼Ÿå…ˆä¸ç®¡ï¼Œè¿™é‡Œæˆ‘ä»¬è®¤ä¸ºæ˜¯ç¥¨åŠ¡çš„ä¿¡æ¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å‘ç°ä¹Ÿå°±è¿™äº›æ˜¯æˆ‘ä»¬èƒ½çœ‹æ‡‚çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆåˆ©ç”¨ç°æœ‰ä¿¡æ¯æ¥å®ç°ä½™ç¥¨æŸ¥è¯¢å‘¢ï¼Ÿåˆ«ç€æ€¥åç»­ç»§ç»­è§£é‡Šã€‚</p><p>url_2:<a href="https://kyfw.12306.cn/lcquery/queryG?train_date=2024-10-09&from_station_telecode=BJP&to_station_telecode=SJP&result_index=0&can_query=Y&isShowWZ=Y&sort_type=2&purpose_codes=00&is_loop_transfer=S&channel=E&_json_att=">https://kyfw.12306.cn/lcquery/queryG?train_date=2024-10-09&amp;from_station_telecode=BJP&amp;to_station_telecode=SJP&amp;result_index=0&amp;can_query=Y&amp;isShowWZ=Y&amp;sort_type=2&amp;purpose_codes=00&amp;is_loop_transfer=S&amp;channel=E&amp;_json_att=</a></p><p>url_2 æ˜¯æŸ¥è¯¢ä¸­è½¬çš„æ¥å£ï¼Œä¹Ÿå°±æ˜¯æŸ¥è¯¢åŒ—äº¬â€”&gt;çŸ³å®¶åº„ 10æœˆ09æ—¥çš„å¯ä»¥ä¹˜åå“ªäº›ä¸­è½¬çš„è½¦ï¼Œä¸€èµ·çœ‹è¿”å›ä½“ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;flag&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;result_index&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;can_query&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;N&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;middleList&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>            <span class="hljs-punctuation">&#123;</span><br>                <span class="hljs-attr">&quot;all_lishi&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;3å°æ—¶52åˆ†é’Ÿ&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;all_lishi_minutes&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">232</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;arrive_date&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2024-10-09&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;arrive_time&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;12:14&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;end_station_code&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;SJP&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;end_station_name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;çŸ³å®¶åº„&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;first_train_no&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;24000G780703&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;from_station_code&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;VNP&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;from_station_name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;åŒ—äº¬å—&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;fullList&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>                    <span class="hljs-punctuation">&#123;</span><br>                        <span class="hljs-attr">&quot;arrive_time&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;08:43&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;bed_level_info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;controlled_train_flag&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;country_flag&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;CHN,CHN&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;day_difference&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;dw_flag&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;5#1#0#S#z#0#z#z&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;end_station_name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;å»ŠåŠ&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;end_station_telecode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;LJP&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;from_station_name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;åŒ—äº¬å—&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;from_station_no&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;01&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;from_station_telecode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;VNP&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;gg_num&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;--&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;gr_num&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;--&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;is_support_card&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;lishi&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;00:21&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;local_arrive_time&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;local_start_time&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;qt_num&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;--&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;rw_num&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;--&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;rz_num&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;--&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;seat_discount_info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;90075M0080O0076&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;seat_types&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;9MO&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;srrb_num&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;--&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;start_station_name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;åŒ—äº¬å—&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;start_station_telecode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;VNP&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;start_time&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;08:22&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;start_train_date&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;20241009&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;station_train_code&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;G7807&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;swz_num&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;to_station_name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;å»ŠåŠ&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;to_station_no&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;02&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;to_station_telecode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;LJP&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;train_no&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;24000G780703&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;train_seat_feature&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;3&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;trms_train_flag&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;tz_num&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;--&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;wz_num&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;--&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;yb_num&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;--&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;yp_info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;9008700002M004200018O002500021&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;yw_num&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;--&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;yz_num&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;--&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;ze_num&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;æœ‰&quot;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-attr">&quot;zy_num&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;18&quot;</span><br>                    <span class="hljs-punctuation">&#125;</span><br>                <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;isHeatTrain&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;N&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;isOutStation&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;lCWaitTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;lishi_flag&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;middle_date&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2024-10-09&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;middle_station_code&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;LJP&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;middle_station_name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;å»ŠåŠ&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;same_station&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;same_train&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;N&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;score&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">386</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;score_str&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;276+100+10=386##100#100&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;scretstr&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;MjAyNC0xMC0wOSMwMCNHNzgwNyMwMDoyMSMwODoyMiMyNDAwMEc3ODA3MDMjVk5QI0xKUCMwODo0MyPljJfkuqzljZcj5buK5Z2KIzAxIzAyI2RSWkVHSk9HdTRZdDlVNE0vVkhGaHdRckk5TXpaNGlaYkpYaFJHS1hlNi9RMXo5ZiNQMyMxNCMxMjMwIzMjMzEjMDM1NyMwMSMwMzU4IzAjVk5QI0xKUCMxNzI4MzY4MzQwMjcwIzE3MjcyMzg2MDAwMDAjNSwxLDAsUyx6LDAseix6IyMjQ0hOLENITiM6OjoyMDI0LTEwLTA5IzAwI0c3ODA1IzAyOjQyIzA5OjMyIzJkMDAwRzc4MDUwMyNMSlAjU0pQIzEyOjE0I%2BW7iuWdiiPnn7PlrrbluoQjMDEjMDYjQ1pxYm94dlFlM1Z4Y3ZoYzd4TFlWNnNFN3BjTmNkS2VMSUQ5eXJUWldGTjhxK1k4I1A0IzE0IzE2MDAjMyMwMSMwMzU4IzAxIzAzNDkjMCNMSlAjSFBQIzE3MjgzNjgzNDAyNzAjMTcyNzI1MTIwMDAwMCM1LDEsMCxTLHosMCx6LHojIyNDSE4sQ0hOIzo6Om51bGwjMDo6OjI3RDdGMjg5ODcxODdFNUM3RkJBMEUyMjRDNjkxOTUzOTNCMUY1N0FENThDOUQwMUQ3RkNCN0ZEOjo6MDo6Olk6OjpZ&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;second_train_no&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2d000G780503&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;start_time&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;08:22&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;train_count&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;train_date&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2024-10-09&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;use_time&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;wait_time&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;49åˆ†é’Ÿ&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;wait_time_minutes&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">49</span><br>            <span class="hljs-punctuation">&#125;</span><br>        <span class="hljs-punctuation">]</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;errorMsg&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œè¿”å›çš„ä¿¡æ¯ä¹Ÿä¾æ—§æˆªå–äº†éƒ¨åˆ†è¿”å›ä¿¡æ¯ï¼Œé‚£ä¹ˆå¯ä»¥çœ‹åˆ°è¿™ä¸ªè¿”å›ä½“æ›´åŠ æ¸…æ™°ï¼Œæè¿°äº†ä¸­è½¬è½¦é‡çš„ä¿¡æ¯ï¼Œé‚£ä¹ˆç”±äºæˆ‘ä»¬è¿™é‡Œæš‚æ—¶ä¸è€ƒè™‘ä¸­è½¬ï¼Œé¦–å…ˆå°±å…³å¿ƒè¿™ä¸ªæ¥å£äº†ï¼</p><h2 id="é’ˆå¯¹url-1-æ¥å£çš„è¿”å›ä½“è§£æ"><a href="#é’ˆå¯¹url-1-æ¥å£çš„è¿”å›ä½“è§£æ" class="headerlink" title="é’ˆå¯¹url_1 æ¥å£çš„è¿”å›ä½“è§£æ"></a>é’ˆå¯¹url_1 æ¥å£çš„è¿”å›ä½“è§£æ</h2><p>é‚£ä¹ˆä»ä¸Šé¢æˆ‘ä»¬çœ‹åˆ°äº†è¿”å›ä¿¡æ¯é‡Œé¢åŒ…å«äº†ä¹˜è½¦çš„ç¼–å·ä¿¡æ¯ï¼Œç¥¨åŠ¡ä¿¡æ¯ï¼Œé‚£ä¹ˆå°±å¯ä»¥å®ç°æŸ¥è¯¢äº†ï¼Œé¦–å…ˆæˆ‘ä»¬è§‚å¯Ÿç¬¬ä¸€ä¸ªä¹Ÿæ˜¯ä¸Šé¢é—ç•™çš„é—®é¢˜ï¼š<code>|||||||æœ‰||æœ‰|æœ‰|||||</code>, è¿™äº› <code>|</code> è¡¨ç¤ºä»€ä¹ˆæ„æ€ï¼Ÿä¸‹é¢æˆ‘æ¥è§£é‡Šä¸€ä¸‹ï¼Œé€šè¿‡è§‚å¯Ÿ æˆ‘ä»¬å¯¹æ¯”è¯¥è½¦æ¬¡çš„è¿”å›åœ¨12306é¡µé¢çš„è¡¨è¾¾çœ‹</p><img src="/2024/10/08/12306%E4%BD%99%E7%A5%A8%E6%9F%A5%E8%AF%A2/12306_2.png" class=""><p>è§‚å¯Ÿä¸Šè¿°ä¿¡æ¯å‘ç°ï¼Œç¡¬å§ äºŒç­‰å§ã€ ç¡¬åº§ã€ æ— åº§ å‡æ˜¯æœ‰ï¼Œè€Œå…¶ä»–ç±»å‹çš„ä¾‹å¦‚ ä¸€ç­‰åº§ã€äºŒç­‰åº§ äºŒç­‰åŒ…åº§ç­‰ éƒ½æ˜¯ <code>--</code>ï¼Œé‚£ä¹ˆç°åœ¨å¾ˆæ˜æ˜¾äº†ï¼Œ<code>|</code> è¡¨ç¤ºçš„æ˜¯æ— ï¼Œæœ‰ç¥¨ä»¥åŠç¥¨æœ‰æ•°æ®ï¼Œåˆ™æ˜¯æ˜¾ç¤º æœ‰æˆ–è€…å…·ä½“æ•°æ®ï¼Œé‚£ä¹ˆæ­¤æ—¶æˆ‘ä»¬å·²ç»è§£åˆ¨è¿™ä¸ªæ¥å£å®Œæ¯•äº†ï¼Œæ‰¾åˆ°äº†æˆ‘ä»¬æƒ³è¦çš„ä¿¡æ¯ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥çš„éš¾ç‚¹å°±æ˜¯å¦‚ä½•ä»è¿™äº›è¿”å›ä½“ä¸­å–å‡ºæƒ³è¦çš„æ•°æ®ï¼</p><h3 id="ç¼–å†™è¿”å›ä½“æå–ç¥¨åŠ¡ä¿¡æ¯é€»è¾‘"><a href="#ç¼–å†™è¿”å›ä½“æå–ç¥¨åŠ¡ä¿¡æ¯é€»è¾‘" class="headerlink" title="ç¼–å†™è¿”å›ä½“æå–ç¥¨åŠ¡ä¿¡æ¯é€»è¾‘"></a>ç¼–å†™è¿”å›ä½“æå–ç¥¨åŠ¡ä¿¡æ¯é€»è¾‘</h3><p>é¦–å…ˆè§‚å¯Ÿè¿”å›ä¿¡æ¯ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">&quot;IN8i2mjU4pcjjt%2FuzxOnHM4uHCelK7W%2FFIJqW4sNvITAIkDPEQXWDCZRPUOlCQDyzvC2TBDcOaw8%0AHDSJMjOYT%2FZUGmDFoxGjVSeCZ0m3vuq11L0d5I8BhBL%2FcWpvvt%2FQzFHg57AgDF%2B24iCwm1rNRfvx%0A8WqPrdaBsIa7ffyQ9%2FNMxitJVEF9AAv0kc8VjDK0wqGAqS%2F6QlXILrQTUeh830ahknr0%2F017eIrI%0A67tFo0WX2HUhszbtLo7mEk%2FFWu%2BovNguW%2BOG7%2BB%2Bh1GBf61lRTktO03u0XOz3Di3NY%2FUKARr7vE5%0AnqcGhjzJ9uFZrXc2Q2gMq04L2uz43U0jxNqtkb9ZmnXO%2BeYC|é¢„è®¢|25000K772836|K7725|QTP|HDP|FTP|SJP|05:10|08:44|03:34|Y|Jz1NB7nb1uVJBAoXtjLOZGJ20tRCNaJVqDZwRJdiCitslCNE|20241008|3|P4|05|10|1|0|||||||æœ‰||æœ‰|æœ‰|||||1030W0|131|1|0||100415002130087500211004153540|0|||||1|0#0#0#0#z#0#3#z||7|CHN,CHN|||N#N#|330087531009553200925||202409250800|&quot;<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬çœ‹åˆ°åœ¨ä¸Šé¢ä¸­æœ‰ä¸€ä¸ªé¢„å®šçš„æ±‰å­—ï¼Œé‚£ä¹ˆæˆ‘å°±å¯ä»¥å…ˆä»¥ <code>é¢„å®š</code> è¿›è¡Œåˆ†å‰²ï¼Œæ­¤æ—¶å¯ä»¥è·å–åé¢çš„ä¿¡æ¯ï¼Œé‚£ä¹ˆå°±æ˜¯</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">train_info = train_txt.split(<span class="hljs-string">&quot;é¢„å®š&quot;</span>)[<span class="hljs-number">1</span>]<br></code></pre></td></tr></table></figure><p>é‚£ä¹ˆæˆ‘ä»¬æ‹¿åˆ°ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">|25000K772836|K7725|QTP|HDP|FTP|SJP|05:10|08:44|03:34|Y|Jz1NB7nb1uVJBAoXtjLOZGJ20tRCNaJVqDZwRJdiCitslCNE|20241008|3|P4|05|10|1|0|||||||æœ‰||æœ‰|æœ‰|||||1030W0|131|1|0||100415002130087500211004153540|0|||||1|0#0#0#0#z#0#3#z||7|CHN,CHN|||N#N#|330087531009553200925||202409250800|<br></code></pre></td></tr></table></figure><p>é‚£ä¹ˆæˆ‘ä»¬ç»§ç»­è§‚å¯Ÿå‘ç°åœ¨ä¸Šè¿°ä¿¡æ¯ä¸­æœ‰ä¸€ä¸ª|Y|,ç»§ç»­è§‚å¯Ÿå…¶ä»–çš„å‘ç°è¦ä¸å°±æ˜¯|Y|è¦ä¸å°±æ˜¯|N|ï¼Œé‚£ä¹ˆå°±å¯ä»¥æŒ‰ç…§è¿™ä¸ªè¿›è¡Œåˆ†å‰²ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">train_info = train_txt.split(<span class="hljs-string">&quot;é¢„å®š&quot;</span>)[<span class="hljs-number">1</span>]split(<span class="hljs-string">&quot;|Y|&quot;</span>)[<span class="hljs-number">0</span>] <br></code></pre></td></tr></table></figure><p>ä¹Ÿå°±å¾—åˆ°äº†</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">|25000K772836|K7725|QTP|HDP|FTP|SJP|05:10|08:44|03:34<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶æ‹¿åˆ°äº†å…·ä½“çš„è½¦æ¬¡ä¿¡æ¯ï¼Œé‚£ä¹ˆæƒ³è¦åç»­çš„ä¿¡æ¯å°±å¯ä»¥å– </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">train_info = train_txt.split(<span class="hljs-string">&quot;é¢„å®š&quot;</span>)[<span class="hljs-number">1</span>]split(<span class="hljs-string">&quot;|Y|&quot;</span>)[<span class="hljs-number">1</span>] <br></code></pre></td></tr></table></figure><p>é‚£ä¹ˆæ‹¿åˆ°çš„æ˜¯ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">Jz1NB7nb1uVJBAoXtjLOZGJ20tRCNaJVqDZwRJdiCitslCNE|20241008|3|P4|05|10|1|0|||||||æœ‰||æœ‰|æœ‰|||||1030W0|131|1|0||100415002130087500211004153540|0|||||1|0#0#0#0#z#0#3#z||7|CHN,CHN|||N#N#|330087531009553200925||202409250800|<br></code></pre></td></tr></table></figure><p>é€šè¿‡è§‚å¯Ÿï¼Œåœ¨|20241008| å‰é¢çš„ä¹±ç å‘ç°åŸºæœ¬ä¸Šé•¿åº¦ä¸€è‡´ï¼Œé‚£ä¹ˆæˆ‘å°±å¯ä»¥æŒ‡å®šé•¿åº¦å–æˆªå–</p><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å®ç°äº†ä¿¡æ¯çš„é‡‡é›†å’Œåˆ†å‰²ï¼Œé‚£ä¹ˆæˆ‘ä»¬èƒ½å®ç°æ‹¿åˆ°å…·ä½“è½¦æ¬¡ï¼Œæ˜¯å¦æœ‰ç¥¨è¿™äº›ä¿¡æ¯ã€‚</p><h3 id="åˆ¤æ–­ä¿¡æ¯ä¸­æ˜¯å¦æœ‰ç¥¨"><a href="#åˆ¤æ–­ä¿¡æ¯ä¸­æ˜¯å¦æœ‰ç¥¨" class="headerlink" title="åˆ¤æ–­ä¿¡æ¯ä¸­æ˜¯å¦æœ‰ç¥¨"></a>åˆ¤æ–­ä¿¡æ¯ä¸­æ˜¯å¦æœ‰ç¥¨</h3><p>é‚£ä¹ˆæ‹¿åˆ°æ•°æ®ä¹‹åï¼Œæˆ‘ä»¬å°±è¦åˆ¤æ–­æ˜¯å¦æœ‰ç¥¨ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®æ˜¯å¦æœ‰æœ‰ä»¥åŠæ˜¯å¦æœ‰æ•°å­—å­˜åœ¨å³å¯ï¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">contains_number_or_you</span>(<span class="hljs-params">s</span>):<br>    <span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦åŒ…å«æ•°å­—</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">any</span>(char.isdigit() <span class="hljs-keyword">for</span> char <span class="hljs-keyword">in</span> s):<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>    <span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦åŒ…å«â€œæœ‰â€</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;æœ‰&quot;</span> <span class="hljs-keyword">in</span> s:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>    <span class="hljs-comment"># å¦‚æœéƒ½ä¸åŒ…å«ï¼Œåˆ™è¿”å›False</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br></code></pre></td></tr></table></figure><p>å‡½æ•°é€šè¿‡æ£€æŸ¥æ˜¯å¦æœ‰æ•°å­—ä»¥åŠæ˜¯å¦æœ‰æœ‰ï¼Œè¿”å›å¸ƒå°”å€¼ã€‚</p><h3 id="ç»„è£…è¿”å›ä¿¡æ¯"><a href="#ç»„è£…è¿”å›ä¿¡æ¯" class="headerlink" title="ç»„è£…è¿”å›ä¿¡æ¯"></a>ç»„è£…è¿”å›ä¿¡æ¯</h3><p>ç›®å‰è®¡åˆ’æ˜¯é€šè¿‡é‚®ä»¶å°†ä¿¡æ¯è¿”å›ï¼Œé‚£ä¹ˆæ­¤æ—¶å·²ç»å¯ä»¥åˆ¤æ–­è½¦æ¬¡ï¼Œæ˜¯å¦æœ‰ç¥¨ï¼Œæˆ‘ä»¬å°±éœ€è¦é€šè¿‡å°†æˆ‘ä»¬æ‹¿åˆ°çš„æ•°æ®è¿›è¡Œé‡å†™ç»„è£…ï¼Œç„¶åå°†å…¶è½¬åŒ–ä¸ºä¸€ä¸ªhtmlæ ¼å¼çš„è¡¨æ ¼ä¾¿äºæˆ‘ä»¬æŸ¥çœ‹ï¼Œå…·ä½“ä»£ç :</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">list_to_html</span>(<span class="hljs-params">data</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;+++++++++++++++++++&quot;</span>)<br>    <span class="hljs-comment"># print(data)</span><br>    <span class="hljs-comment"># print(type(data))</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;++++++++++++++++++&quot;</span>)<br>    headers = [<br>        <span class="hljs-string">&quot;åˆ—è½¦å·&quot;</span>, <span class="hljs-string">&quot;èµ·ç‚¹ç«™&quot;</span>, <span class="hljs-string">&quot;é€”ç»ç«™1&quot;</span>, <span class="hljs-string">&quot;é€”ç»ç«™2&quot;</span>, <span class="hljs-string">&quot;ç»ˆç‚¹ç«™&quot;</span>,<br>        <span class="hljs-string">&quot;å‡ºå‘æ—¶é—´&quot;</span>, <span class="hljs-string">&quot;åˆ°è¾¾æ—¶é—´&quot;</span>, <span class="hljs-string">&quot;è€—è´¹æ—¶é—´&quot;</span>, <span class="hljs-string">&quot;æš‚æ— &quot;</span>, <span class="hljs-string">&quot;æš‚æ— &quot;</span>,<br>        <span class="hljs-string">&quot;æš‚æ— &quot;</span>, <span class="hljs-string">&quot;æš‚æ— &quot;</span>, <span class="hljs-string">&quot;æš‚æ— &quot;</span>, <span class="hljs-string">&quot;åº§ä½æ•°ç›®&quot;</span>, <span class="hljs-string">&quot;ä¼˜é€‰ä¸€ç­‰åº§&quot;</span>,<br>        <span class="hljs-string">&quot;åº§ä½æ•°ç›®&quot;</span>, <span class="hljs-string">&quot;åº§ä½æ•°ç›®&quot;</span>, <span class="hljs-string">&quot;è½¯å§/åŠ¨å§&quot;</span>, <span class="hljs-string">&quot;åº§ä½æ•°ç›®&quot;</span>, <span class="hljs-string">&quot;åº§ä½æ•°ç›®&quot;</span>, <span class="hljs-string">&quot;æ— åº§&quot;</span>, <span class="hljs-string">&quot;åº§ä½æ•°ç›®&quot;</span>, <span class="hljs-string">&quot;ç¡¬å§,äºŒç­‰å§&quot;</span>, <span class="hljs-string">&quot;ç¡¬åº§&quot;</span>, <span class="hljs-string">&quot;äºŒç­‰åº§&quot;</span>, <span class="hljs-string">&quot;ä¸€ç­‰åº§&quot;</span>, <span class="hljs-string">&quot;å•†åŠ¡åº§,ç‰¹ç­‰åº§&quot;</span>, <span class="hljs-string">&quot;åº§ä½æ•°ç›®&quot;</span><br>    ]<br><br>    <span class="hljs-comment"># æ„é€ HTMLè¡¨æ ¼çš„å¼€å¤´éƒ¨åˆ†ï¼ŒåŒ…æ‹¬CSSæ ·å¼</span><br>    html_table = <span class="hljs-string">&#x27;&#x27;&#x27;  </span><br><span class="hljs-string">    &lt;style&gt;  </span><br><span class="hljs-string">    .table-container &#123;  </span><br><span class="hljs-string">        height: 90vh;  /* æ ¹æ®è§†å£é«˜åº¦è®¾ç½®ï¼Œä»¥é€‚åº”ä¸åŒå±å¹• */  </span><br><span class="hljs-string">        overflow-y: auto; /* å…è®¸å‚ç›´æ»šåŠ¨ */  </span><br><span class="hljs-string">        display: block; /* å¯èƒ½éœ€è¦ï¼Œå–å†³äºå¸ƒå±€ */  </span><br><span class="hljs-string">        width: 100%; /* æˆ–å›ºå®šå®½åº¦ */  </span><br><span class="hljs-string">    &#125;  </span><br><span class="hljs-string">    th &#123;  </span><br><span class="hljs-string">        position: sticky;  </span><br><span class="hljs-string">        top: 0;  </span><br><span class="hljs-string">        background-color: #f9f9f9; /* è¡¨å¤´èƒŒæ™¯è‰² */  </span><br><span class="hljs-string">    &#125;  </span><br><span class="hljs-string">    table &#123;  </span><br><span class="hljs-string">        width: 100%; /* ç¡®ä¿è¡¨æ ¼å®½åº¦ä¸å®¹å™¨ç›¸åŒ */  </span><br><span class="hljs-string">        border-collapse: collapse; /* è¾¹æ¡†åˆå¹¶ */  </span><br><span class="hljs-string">    &#125;  </span><br><span class="hljs-string">    th, td &#123;  </span><br><span class="hljs-string">        border: 1px solid #ddd; /* è¾¹æ¡†æ ·å¼ */  </span><br><span class="hljs-string">        padding: 8px; /* å•å…ƒæ ¼å†…è¾¹è· */  </span><br><span class="hljs-string">        text-align: left; /* æ–‡æœ¬å¯¹é½æ–¹å¼ */  </span><br><span class="hljs-string">    &#125;  </span><br><span class="hljs-string">    &lt;/style&gt;  </span><br><span class="hljs-string">    &lt;div class=&quot;table-container&quot;&gt;  </span><br><span class="hljs-string">    &lt;table&gt;  </span><br><span class="hljs-string">    &lt;thead&gt;  </span><br><span class="hljs-string">    &lt;tr&gt;  </span><br><span class="hljs-string">    &#x27;&#x27;&#x27;</span><br>    <span class="hljs-keyword">for</span> header <span class="hljs-keyword">in</span> headers:<br>        html_table += <span class="hljs-string">f&#x27;&lt;th&gt;<span class="hljs-subst">&#123;header&#125;</span>&lt;/th&gt;&#x27;</span><br>    html_table += <span class="hljs-string">&#x27;&#x27;&#x27;  </span><br><span class="hljs-string">    &lt;/tr&gt;  </span><br><span class="hljs-string">    &lt;/thead&gt;  </span><br><span class="hljs-string">    &lt;tbody&gt;  </span><br><span class="hljs-string">    &#x27;&#x27;&#x27;</span><br><br>    <span class="hljs-comment"># éå†æ•°æ®ï¼Œå¹¶ä¸ºæ¯ä¸€é¡¹æ·»åŠ ä¸€è¡Œåˆ°è¡¨æ ¼ä½“ï¼ˆtbodyï¼‰ä¸­</span><br>    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> data:<br>        columns = item.split(<span class="hljs-string">&#x27;|&#x27;</span>)<br>        <span class="hljs-comment"># å¡«å……ç¼ºå¤±çš„åˆ—</span><br>        columns += [<span class="hljs-string">&#x27;&#x27;</span>] * (<span class="hljs-built_in">len</span>(headers) - <span class="hljs-built_in">len</span>(columns))<br>        html_row = <span class="hljs-string">&#x27;&lt;tr&gt;&#x27;</span> + <span class="hljs-string">&#x27;&#x27;</span>.join(<span class="hljs-string">f&#x27;&lt;td&gt;<span class="hljs-subst">&#123;column&#125;</span>&lt;/td&gt;&#x27;</span> <span class="hljs-keyword">for</span> column <span class="hljs-keyword">in</span> columns) + <span class="hljs-string">&#x27;&lt;/tr&gt;\n&#x27;</span><br>        html_table += html_row<br><br>        <span class="hljs-comment"># æ·»åŠ è¡¨æ ¼çš„ç»“å°¾éƒ¨åˆ†</span><br>    html_table += <span class="hljs-string">&#x27;&#x27;&#x27;  </span><br><span class="hljs-string">    &lt;/tbody&gt;  </span><br><span class="hljs-string">    &lt;/table&gt;  </span><br><span class="hljs-string">    &lt;/div&gt;  </span><br><span class="hljs-string">    &#x27;&#x27;&#x27;</span><br><br>    <span class="hljs-comment"># è¿”å›å®Œæ•´çš„HTMLå­—ç¬¦ä¸²</span><br>    <span class="hljs-built_in">print</span>(html_table)<br>    <span class="hljs-keyword">return</span> html_table<br></code></pre></td></tr></table></figure><p>ä¸Šé¢çš„å‡½æ•°æ¥æ”¶ä¸€ä¸ªlist,ç„¶åè¿›è¡Œè½¬åŒ–ç”Ÿæˆä¸€ä¸ªhtmlä¿¡æ¯ã€‚</p><h3 id="é‚®ä»¶å‘é€"><a href="#é‚®ä»¶å‘é€" class="headerlink" title="é‚®ä»¶å‘é€"></a>é‚®ä»¶å‘é€</h3><p>æˆ‘ä»¬æ‹¿åˆ°htmlä¿¡æ¯åéœ€è¦ç¬¬ä¸€æ—¶é—´é€šçŸ¥ç»™æˆ‘ï¼Œé‚£ä¹ˆå°±è¦ç”¨åˆ°é‚®ä»¶é€šçŸ¥ï¼Œä¸‹é¢æ˜¯é‚®ä»¶é€šçŸ¥ä»£ç </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">send_mail</span>(<span class="hljs-params">mail_body, receivers</span>):<br>    <span class="hljs-comment"># å‘ä»¶äººé‚®ç®±è´¦å·</span><br>    sender = <span class="hljs-string">&#x27;1542418645@qq.com&#x27;</span><br>    <span class="hljs-comment"># å‘ä»¶äººé‚®ç®±æˆæƒç ï¼ˆä¸æ˜¯QQå¯†ç ï¼‰</span><br>    password = <span class="hljs-string">&#x27;&#x27;</span> <span class="hljs-comment"># æ­¤å¤„å¡«å†™ä½ çš„æˆæƒç </span><br>    <span class="hljs-comment"># SMTPæœåŠ¡å™¨åœ°å€</span><br>    smtp_server = <span class="hljs-string">&#x27;smtp.qq.com&#x27;</span><br>    <span class="hljs-comment"># SMTPæœåŠ¡å™¨ç«¯å£ï¼Œå¯¹äºQQé‚®ç®±ï¼Œä½¿ç”¨SSLçš„465ç«¯å£</span><br>    smtp_port = <span class="hljs-number">465</span><br><br>    <span class="hljs-comment"># é‚®ä»¶å†…å®¹</span><br>    subject = <span class="hljs-string">&#x27;æŠ¢åˆ°ç«è½¦ç¥¨äº†ï¼&#x27;</span><br>    <span class="hljs-comment"># HTMLé‚®ä»¶æ­£æ–‡</span><br>    html_body = mail_body<br><br>    <span class="hljs-comment"># é‚®ä»¶æ¥æ”¶è€…</span><br>    <span class="hljs-comment"># receiver = &#x27;1542418645@qq.com&#x27;</span><br><br>    <span class="hljs-comment"># åˆ›å»ºé‚®ä»¶å¯¹è±¡ï¼ŒæŒ‡å®šå†…å®¹ä¸ºHTML</span><br>    message = MIMEText(html_body, <span class="hljs-string">&#x27;html&#x27;</span>, <span class="hljs-string">&#x27;utf-8&#x27;</span>)<br>    <span class="hljs-comment"># è®¾ç½®Fromå¤´éƒ¨ï¼Œä½¿ç”¨formataddrå‡½æ•°æ¥æ­£ç¡®è®¾ç½®å®Œæ•´çš„Fromå¤´éƒ¨ä¿¡æ¯</span><br>    message[<span class="hljs-string">&#x27;From&#x27;</span>] = formataddr((<span class="hljs-string">&#x27;å‘ä»¶äººå§“å&#x27;</span>, sender))<br>    <span class="hljs-comment"># è®¾ç½®Toå¤´éƒ¨ï¼ŒåŒæ ·ä½¿ç”¨Header</span><br>    <span class="hljs-comment"># message[&#x27;To&#x27;] = Header(receiver, &#x27;utf-8&#x27;)</span><br>    <span class="hljs-comment"># è®¾ç½®Subjectå¤´éƒ¨ï¼Œå¯¹äºä¸­æ–‡ä¸»é¢˜ä¹Ÿä½¿ç”¨Header</span><br>    message[<span class="hljs-string">&#x27;Subject&#x27;</span>] = Header(subject, <span class="hljs-string">&#x27;utf-8&#x27;</span>)<br><br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-comment"># åˆ›å»ºSMTP SSLè¿æ¥</span><br>        smtpObj = smtplib.SMTP_SSL(smtp_server, smtp_port)<br>        smtpObj.login(sender, password)  <span class="hljs-comment"># ç™»å½•åˆ°SMTPæœåŠ¡å™¨</span><br><br>        <span class="hljs-comment"># å¦‚æœreceiversæ˜¯å•ä¸ªå­—ç¬¦ä¸²ï¼Œåˆ™è½¬æ¢ä¸ºåˆ—è¡¨</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(receivers, <span class="hljs-built_in">str</span>):<br>            receivers = [receivers]<br><br>        <span class="hljs-comment"># å‘é€é‚®ä»¶ç»™å¤šä¸ªæ¥æ”¶è€…</span><br>        smtpObj.sendmail(sender, receivers, message.as_string())<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;é‚®ä»¶å‘é€æˆåŠŸ&quot;</span>)<br>        smtpObj.quit()<br>    <span class="hljs-keyword">except</span> smtplib.SMTPException <span class="hljs-keyword">as</span> e:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;é‚®ä»¶å‘é€å¤±è´¥:&quot;</span>, e)<br></code></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä»¬å£°æ˜æ˜¯ä¸€ä¸ªåç¨‹æ–¹æ³•ä¹Ÿå°±æ˜¯å‘é€é‚®ä»¶æ˜¯å¼‚æ­¥çš„ï¼Œæˆ‘æ— éœ€ç­‰å¾…é‚®ä»¶å‘é€åæ‰æ‰§è¡Œä¸‹ä¸€ä¸ªé€»è¾‘ã€‚</p><h3 id="ä¸€äº›å›ºå®šè§„å¾‹çš„è§£å†³"><a href="#ä¸€äº›å›ºå®šè§„å¾‹çš„è§£å†³" class="headerlink" title="ä¸€äº›å›ºå®šè§„å¾‹çš„è§£å†³"></a>ä¸€äº›å›ºå®šè§„å¾‹çš„è§£å†³</h3><p>åœ¨ç»§ç»­æŸ¥çœ‹è¿”å›ä½“çš„æ—¶å€™å‘ç°é‡Œé¢ä¼šæœ‰å›ºå®šçš„ W M F çš„è¿”å›ä¿¡æ¯ï¼Œæ­¤å¤„ä¸º</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">Jz1NB7nb1uVJBAoXtjLOZGJ20tRCNaJVqDZwRJdiCitslCNE|20241008|3|P4|05|10|1|0|||||||æœ‰||æœ‰|æœ‰|||||1030W0|131|1|0||100415002130087500211004153540|0|||||1|0#0#0#0#z#0#3#z||7|CHN,CHN|||N#N#|330087531009553200925||202409250800|<br></code></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯æˆ‘æƒ³å»æ‰ |1030W0| åé¢çš„ä¿¡æ¯ç”±äºåç»­éƒ½æ˜¯æ— è§„å¾‹çš„ï¼Œä½†æ˜¯è‚¯å®šä¼šæœ‰M W F å‡ºç°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è·å–å½“å‰ä½ç½®ç„¶åè¿›è¡Œåˆ†å‰²ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">remove_after_wm</span>(<span class="hljs-params">s</span>):<br>    <span class="hljs-comment"># æŸ¥æ‰¾&#x27;W&#x27;æˆ–&#x27;M&#x27;é¦–æ¬¡å‡ºç°çš„ä½ç½®</span><br>    <span class="hljs-comment"># ä½¿ç”¨minå‡½æ•°å’Œfindæ–¹æ³•ç¡®ä¿æˆ‘ä»¬æ‰¾åˆ°çš„æ˜¯ä¸¤è€…ä¸­è¾ƒæ—©å‡ºç°çš„ä¸€ä¸ª</span><br>    <span class="hljs-comment"># å¦‚æœ&#x27;W&#x27;æˆ–&#x27;M&#x27;éƒ½ä¸å­˜åœ¨ï¼Œfindä¼šè¿”å›-1ï¼Œè€Œmin(-1, -1)ä¹Ÿæ˜¯-1</span><br>    pos_w = s.find(<span class="hljs-string">&#x27;W&#x27;</span>)<br>    pos_m = s.find(<span class="hljs-string">&#x27;M&#x27;</span>)<br>    pos_f = s.find(<span class="hljs-string">&#x27;F&#x27;</span>)<br><br>    <span class="hljs-keyword">if</span> pos_w != -<span class="hljs-number">1</span> <span class="hljs-keyword">and</span> pos_m != -<span class="hljs-number">1</span> <span class="hljs-keyword">and</span> pos_f != -<span class="hljs-number">1</span>:<br>        pos = <span class="hljs-built_in">min</span>(pos_w, pos_m, pos_f)<br>    <span class="hljs-keyword">elif</span> pos_w != -<span class="hljs-number">1</span>:<br>        pos = pos_w<br>    <span class="hljs-keyword">elif</span> pos_m != -<span class="hljs-number">1</span>:<br>        pos = pos_m<br>    <span class="hljs-keyword">elif</span> pos_f != -<span class="hljs-number">1</span>:<br>        pos = pos_f<br>    <span class="hljs-keyword">else</span>:<br>        pos = -<span class="hljs-number">1</span>  <span class="hljs-comment"># è¡¨ç¤º&#x27;W&#x27;å’Œ&#x27;M&#x27;éƒ½ä¸å­˜åœ¨</span><br><br>    <span class="hljs-keyword">return</span> s[:pos]<br></code></pre></td></tr></table></figure><h3 id="æ•´ä½“è§„åˆ’"><a href="#æ•´ä½“è§„åˆ’" class="headerlink" title="æ•´ä½“è§„åˆ’"></a>æ•´ä½“è§„åˆ’</h3><p>åˆ°ç°åœ¨æˆ‘ä»¬å·²ç»æ‹¿åˆ°äº†å…·ä½“çš„ä¿¡æ¯ï¼Œé‚£ä¹ˆå°±å¯ä»¥è§„åˆ’æˆ‘ä»¬çš„å…·ä½“å®ç°ï¼Œé¦–å…ˆæˆ‘ä»¬å¯ä»¥æ”¯æŒ é‚®ä»¶å¤šäººå‘é€ï¼Œè¯·æ±‚12306å»¶è¿Ÿè®¾ç½®é˜²æ­¢IPè®¿é—®é¢‘ç¹è¢«å°ï¼Œç”¨æˆ·å…³æ³¨çš„ç«è½¦ä¿¡æ¯ï¼Œå‡å¦‚æˆ‘å…³æ³¨çš„è½¦æ¬¡åªæƒ³ä»–æœ‰ç¥¨çš„æ—¶å€™æ‰ä¼šé€šçŸ¥ä¹Ÿè¡Œæ”¯æŒå¤šä¸ªè½¦æ¬¡çš„è®¾ç½®ï¼Œå‡å¦‚æˆ‘ä»¬ä¸æƒ³ä¸€ç›´æ¥æ”¶é‚®ä»¶çš„å‘é€ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è®¾ç½®é‚®ä»¶æ¥æ”¶çš„å»¶è¿Ÿæ—¶é—´ï¼Œç›®å‰æ”¯æŒè®¾ç½®åˆ†é’Ÿï¼Œå°æ—¶çº§åˆ«çš„å»¶è¿Ÿã€‚</p><p>é‚£ä¹ˆä¸Šé¢å°±æ˜¯æˆ‘ä»¬è¦å®ç°çš„åŠŸèƒ½ï¼Œä¸‹é¢å°±æ˜¯å·²ç»å®ç°çš„ä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">train_info</span>(<span class="hljs-params">url, address, receivers, sleep_time=<span class="hljs-number">10</span>, user_focus_train=<span class="hljs-literal">None</span>, email_delay_time=<span class="hljs-literal">None</span></span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    =========== dreamshao 12306æŸ¥è¯¢ä½™ç¥¨å‡½æ•°è°ƒç”¨æŒ‡å—=========</span><br><span class="hljs-string"></span><br><span class="hljs-string">    æ”¯æŒå¤šçº¿ç¨‹æŸ¥è¯¢ç«è½¦ç¥¨ä½™ç¥¨ï¼Œä½¿ç”¨æ•™ç¨‹ï¼š</span><br><span class="hljs-string">    ç™»å½•12306 ç½‘ç«™ https://www.12306.cn/index/</span><br><span class="hljs-string">    é€‰æ‹©èµ·ç‚¹ï¼Œç»ˆç‚¹ï¼Œæ—¶é—´ ç‚¹å‡»æŸ¥è¯¢</span><br><span class="hljs-string">    æ­¤æ—¶é¡µé¢è·³è½¬åˆ°åˆ—è½¦è¯¦æƒ…é¡µé¢ï¼Œæ‰“å¼€network é¢æ¿ï¼Œå†æ¬¡ç‚¹å‡»æŸ¥è¯¢æŠ“å–æŸ¥è¯¢æ¥å£</span><br><span class="hljs-string">    æ³¨æ„ï¼š æ­¤æ—¶å¯èƒ½ä¼šç”¨2ä¸ªæ¥å£è¯·æ±‚ï¼Œä¸€ä¸ªæ˜¯ç«è½¦åˆ—è¡¨ä¿¡æ¯ï¼Œ ä¸€ä¸ªæ˜¯ä¸­è½¬ä¿¡æ¯</span><br><span class="hljs-string">    æˆ‘ä»¬éœ€è¦çš„url æ˜¯è¿™æ ·çš„ï¼š https://kyfw.12306.cn/otn/leftTicket/queryG?leftTicketDTO.train_date=2024-09-30&amp;leftTicketDTO.from_station=SJP&amp;leftTicketDTO.to_station=XTP&amp;purpose_codes=ADULT</span><br><span class="hljs-string">    ç„¶åå°†å…¶ä½œä¸ºUrl å‚æ•°ä¼ å…¥ï¼Œç„¶åé€‰æ‹©æ”¹urlå¯¹åº”çš„COOKIE, åœ¨ç¨‹åºä¸­æ›¿æ¢ä¹‹å‰çš„å³å¯ï¼</span><br><span class="hljs-string"></span><br><span class="hljs-string">    =========== dreamshao 12306æŸ¥è¯¢ä½™ç¥¨å‡½æ•°è°ƒç”¨æŒ‡å—=========</span><br><span class="hljs-string">    :param url: è¯·æ±‚url</span><br><span class="hljs-string">    :param address: ç«è½¦èµ·ç‚¹é‡ç‚¹ï¼š åŒ—äº¬-----&gt; é‚¯éƒ¸</span><br><span class="hljs-string">    :param user_focus_train: ä½ å…³æ³¨çš„åˆ—è½¦æœ‰ç¥¨æ‰ä¼šå‘é€é‚®ä»¶ï¼Œæ ¼å¼æ˜¯list [&#x27;G3433&#x27;,&#x27;K333&#x27;]</span><br><span class="hljs-string">    :param sleep_time: è¯·æ±‚æ¥å£ä¼‘çœ æ—¶é—´</span><br><span class="hljs-string">    :param email_delay_time é‚®ä»¶å»¶è¿Ÿå‘é€æ—¶é—´ï¼Œå°±æ˜¯å½“å‰ä¸å¸Œæœ›æ¯æ¬¡éƒ½æ”¶åˆ°é€šçŸ¥ï¼Œåªæ˜¯å¸Œæœ›é—´éš”å¤šä¹…é€šçŸ¥ä¸€æ¬¡ï¼Œ ç›®å‰æ˜¯ minutes, hours æ ¼å¼æ˜¯(1, 0.5) æ˜¯ å°æ—¶, å…¶ä½™æ˜¯æŒ‰ç…§åˆ†é’Ÿå¤„ç†</span><br><span class="hljs-string">    :param receivers é‚®ä»¶æ¥æ”¶äºº å¯ä»¥ä¼ é€’ä¸€ä¸ªåˆ—è¡¨ä¾‹å¦‚ [&#x27;123232@qq.com&#x27;,&#x27;3333@qq.com]  å¤šäººæ¥æ”¶é‚®ä»¶</span><br><span class="hljs-string">    :return:</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-keyword">if</span> url == <span class="hljs-string">&quot;&quot;</span> <span class="hljs-keyword">or</span> address == <span class="hljs-string">&quot;&quot;</span> <span class="hljs-keyword">or</span> receivers == <span class="hljs-string">&quot;&quot;</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;please input right url or address or receivers&quot;</span><br>    <span class="hljs-built_in">print</span>(<br>        <span class="hljs-string">f&quot;å½“å‰è¯·æ±‚åœ°å€æ˜¯<span class="hljs-subst">&#123;url&#125;</span>,è¯·æ±‚ç«è½¦ç¥¨æ–¹å‘æ˜¯<span class="hljs-subst">&#123;address&#125;</span>,é‚®ä»¶æ¥æ”¶äººæ˜¯<span class="hljs-subst">&#123;receivers&#125;</span>,è¯·æ±‚é—´éš”æ—¶é—´æ˜¯<span class="hljs-subst">&#123;sleep_time&#125;</span>ç§’,ç”¨æˆ·å…³æ³¨çš„ç«è½¦åˆ—è¡¨æ˜¯<span class="hljs-subst">&#123;user_focus_train&#125;</span>,é‚®ä»¶é—´éš”æŠ¥è­¦æ—¶é—´æ˜¯<span class="hljs-subst">&#123;email_delay_time&#125;</span>&quot;</span>)<br>    time_info = url.split(<span class="hljs-string">&#x27;train_date=&#x27;</span>)[<span class="hljs-number">1</span>].split(<span class="hljs-string">&quot;&amp;&quot;</span>)[<span class="hljs-number">0</span>]  <span class="hljs-comment"># å‡ºå‘æ—¶é—´</span><br>    <span class="hljs-keyword">global</span> send_info_type, send_numbers, send_email_all_type, send_all_numbers, email_alert_delay_type, email_alert_delay_time  <span class="hljs-comment"># å…³æ³¨çš„ç«è½¦å‘é€é‚®ä»¶çŠ¶æ€</span><br>    send_info_type = <span class="hljs-literal">False</span>  <span class="hljs-comment"># å…³æ³¨ç«è½¦åˆ—è¡¨å‘é€çŠ¶æ€</span><br>    send_email_all_type = <span class="hljs-literal">False</span>  <span class="hljs-comment"># æ‰€æœ‰ç«è½¦åˆ—è¡¨å‘é€çŠ¶æ€</span><br>    send_numbers = <span class="hljs-number">0</span><br>    send_all_numbers = <span class="hljs-number">0</span><br>    numbers = <span class="hljs-number">0</span><br>    email_alert = []<br>    email_alert_delay_time = delay_time(email_delay_time)<br><br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        <span class="hljs-comment"># è·å–å½“å‰æ—¶é—´</span><br>        now = datetime.now()<br>        <span class="hljs-comment"># æ˜¯å¦æœ‰ç¥¨çš„æ ‡å¿—</span><br>        has_ticket = <span class="hljs-literal">False</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å½“å‰æ­£åœ¨æŠ¢<span class="hljs-subst">&#123;address&#125;</span>çš„ç«è½¦ç¥¨&quot;</span>)<br>        payload = &#123;&#125;<br>        headers = &#123;<br>            <span class="hljs-string">&#x27;User-Agent&#x27;</span>: <span class="hljs-string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/129.0.0.0 Safari/537.36&#x27;</span>,<br>            <span class="hljs-string">&#x27;Cookie&#x27;</span>: <span class="hljs-string">&#x27;JSESSIONID=6571054C8C61F63A5F32C82A1A340BED; guidesStatus=off; _big_fontsize=0; highContrastMode=defaltMode; cursorStatus=off; BIGipServerpool_index=821035530.43286.0000; route=6f50b51faa11b987e576cdb301e545c4; BIGipServerotn=670040586.24610.0000&#x27;</span><br><br>        &#125;<br><br>        time.sleep(sleep_time)<br>        response = requests.request(<span class="hljs-string">&quot;GET&quot;</span>, url, headers=headers, data=payload)<br>        <span class="hljs-keyword">if</span> check_http_code(response.status_code):<br>            re_json = json.loads(response.text)<br>            len_nums = <span class="hljs-built_in">len</span>(re_json[<span class="hljs-string">&#x27;data&#x27;</span>][<span class="hljs-string">&#x27;result&#x27;</span>])<br>            <span class="hljs-comment"># print(re_json[&#x27;data&#x27;][&#x27;result&#x27;])</span><br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> (re_json[<span class="hljs-string">&#x27;data&#x27;</span>][<span class="hljs-string">&#x27;result&#x27;</span>]):<br>                numbers += <span class="hljs-number">1</span><br>                <span class="hljs-keyword">try</span>:<br>                    <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;|N|&quot;</span> <span class="hljs-keyword">in</span> i:<br>                        <span class="hljs-comment"># print(i.split(&quot;é¢„è®¢&quot;)[1][14:].split(&quot;|N|&quot;)[0])</span><br>                        train_info = i.split(<span class="hljs-string">&quot;é¢„è®¢&quot;</span>)[<span class="hljs-number">1</span>][<span class="hljs-number">14</span>:].split(<span class="hljs-string">&quot;|N|&quot;</span>)[<span class="hljs-number">0</span>]<br>                        <span class="hljs-built_in">print</span>(train_info)<br>                    <span class="hljs-keyword">else</span>:<br>                        <span class="hljs-comment"># print(i.split(&quot;é¢„è®¢&quot;)[1][14:].split(&quot;|Y|&quot;)[0])</span><br>                        train_info = i.split(<span class="hljs-string">&quot;é¢„è®¢&quot;</span>)[<span class="hljs-number">1</span>][<span class="hljs-number">14</span>:].split(<span class="hljs-string">&quot;|Y|&quot;</span>)[<span class="hljs-number">0</span>]<br>                        <span class="hljs-built_in">print</span>(train_info)<br>                    info = remove_after_wm(<span class="hljs-built_in">str</span>((i.split(<span class="hljs-string">&quot;é¢„è®¢&quot;</span>)[<span class="hljs-number">1</span>][<span class="hljs-number">14</span>:]).split(<span class="hljs-string">&quot;2024&quot;</span>)[<span class="hljs-number">1</span>]))<br>                    <span class="hljs-comment"># print(info)</span><br>                    <span class="hljs-comment"># print(info[20:][:17])</span><br>                    <span class="hljs-built_in">print</span>(numbers)<br>                    <span class="hljs-built_in">print</span>(len_nums)<br>                    <span class="hljs-keyword">if</span> contains_number_or_you(info[<span class="hljs-number">20</span>:][:<span class="hljs-number">17</span>]):<br>                        <span class="hljs-built_in">print</span>(info)<br>                        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æœ‰ç¥¨å•¦ï¼&quot;</span>)<br>                        email_info = train_info + <span class="hljs-string">&quot; &quot;</span> + info<br>                        <span class="hljs-keyword">if</span> email_info <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> email_alert:<br>                            email_alert.append(email_info)<br>                    <span class="hljs-keyword">if</span> numbers == len_nums:<br>                        <span class="hljs-comment"># æ›¿æ¢æˆè¡¨æ ¼</span><br>                        email_alert_update = list_to_html(email_alert)<br>                        <span class="hljs-comment"># print(email_alert_update)</span><br>                        <span class="hljs-comment"># print(type(email_alert_update))</span><br>                        <span class="hljs-keyword">if</span> user_focus_train:<br>                            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;===================&quot;</span>)<br>                            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ç”¨æˆ·å¼€å¯äº†ç­›é€‰ç«è½¦å‘é€é‚®ä»¶ï¼Œå½“å‰é€‰æ‹©çš„æ˜¯<span class="hljs-subst">&#123;user_focus_train&#125;</span>&quot;</span>)<br>                            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;===================&quot;</span>)<br>                            <span class="hljs-keyword">for</span> user_train <span class="hljs-keyword">in</span> user_focus_train:<br>                                <span class="hljs-keyword">for</span> train_single_info <span class="hljs-keyword">in</span> email_alert:<br>                                    <span class="hljs-keyword">if</span> user_train <span class="hljs-keyword">in</span> train_single_info:<br>                                        send_info_type = <span class="hljs-literal">True</span><br>                            <span class="hljs-keyword">if</span> send_info_type <span class="hljs-keyword">and</span> send_numbers == <span class="hljs-number">0</span>:<br>                                <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;===================&quot;</span>)<br>                                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ç°åœ¨æ­£åœ¨æŸ¥çœ‹<span class="hljs-subst">&#123;address&#125;</span>,ç°åœ¨æ—¶é—´<span class="hljs-subst">&#123;now&#125;</span>&quot;</span>)<br>                                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ç”¨æˆ·å¼€å¯äº†ç­›é€‰ç«è½¦å‘é€é‚®ä»¶ï¼Œå­˜åœ¨ç›¸åŒåˆ—è½¦ä¿¡æ¯ï¼Œå°†ä¼šå‘é€é‚®ä»¶ï¼&quot;</span>)<br>                                <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;===================&quot;</span>)<br>                                send_numbers = <span class="hljs-number">1</span><br>                                asyncio.run(send_mail(mail_body=<span class="hljs-string">f&quot;æŠ¢åˆ°äº†<span class="hljs-subst">&#123;time_info&#125;</span>,<span class="hljs-subst">&#123;address&#125;</span>çš„ç¥¨<span class="hljs-subst">&#123;email_alert_update&#125;</span>&quot;</span>,<br>                                                      receivers=receivers))<br>                                email_alert.clear()<br><br>                            <span class="hljs-keyword">elif</span> send_numbers != <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> send_info_type <span class="hljs-keyword">and</span> email_alert_delay_time:<br>                                <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;===================&quot;</span>)<br>                                <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å½“å‰è®¾ç½®äº†é‚®ä»¶å‘é€å»¶è¿Ÿ&quot;</span>)<br>                                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ç°åœ¨æ­£åœ¨æŸ¥çœ‹<span class="hljs-subst">&#123;address&#125;</span>,ç°åœ¨æ—¶é—´<span class="hljs-subst">&#123;now&#125;</span>,å®šæ—¶æ¸…ç©ºåˆ—è¡¨æ—¶é—´<span class="hljs-subst">&#123;email_alert_delay_time&#125;</span>&quot;</span>)<br>                                <span class="hljs-built_in">print</span>(<br>                                    <span class="hljs-string">f&quot;å½“å‰ç”¨æˆ·å¼€å¯äº†ç­›é€‰ç«è½¦å‘é€é‚®ä»¶ï¼Œå­˜åœ¨ç›¸åŒåˆ—è½¦ä¿¡æ¯, ä½†æ˜¯åœ¨å½“å‰è®¾ç½®çš„å»¶è¿Ÿå‘é€é‚®ä»¶ä¸­, ä¸‹æ¬¡å‘é€æ—¶é—´æ˜¯<span class="hljs-subst">&#123;email_alert_delay_time&#125;</span>ä¹‹å, æ‰€ä»¥æ­¤æ¬¡ä¸ä¼šå‘é€é‚®ä»¶ï¼&quot;</span>)<br>                                <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;===================&quot;</span>)<br>                                email_alert.clear()<br>                                <span class="hljs-keyword">if</span> compare_time(now, email_alert_delay_time):<br>                                    email_alert.clear()<br>                                    send_numbers = <span class="hljs-number">0</span>  <span class="hljs-comment"># ä¸“æ³¨ç«è½¦åˆ—è¡¨å‘é€æ¬¡æ•°å½’é›¶</span><br>                                    <span class="hljs-comment"># send_all_numbers = 0  # å·²ç»å‘é€æ‰€æœ‰ç«è½¦æœ‰ç¥¨çš„è®°å½•</span><br>                                    <span class="hljs-comment"># send_email_all_type = True</span><br>                                    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æ¸…ç©ºåˆ—è¡¨,é‡æ–°å¼€å§‹å‘é€é‚®ä»¶&quot;</span>)<br>                                    asyncio.run(send_mail(mail_body=<span class="hljs-string">f&quot;æŠ¢åˆ°äº†<span class="hljs-subst">&#123;time_info&#125;</span>,<span class="hljs-subst">&#123;address&#125;</span>çš„ç¥¨<span class="hljs-subst">&#123;email_alert_update&#125;</span>&quot;</span>,<br>                                                          receivers=receivers))<br>                                    email_alert_delay_time = delay_time(email_delay_time)<br>                                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ç°åœ¨æ­£åœ¨æŸ¥çœ‹<span class="hljs-subst">&#123;address&#125;</span>,ç°åœ¨æ—¶é—´<span class="hljs-subst">&#123;now&#125;</span>,å®šæ—¶æ¸…ç©ºåˆ—è¡¨æ—¶é—´<span class="hljs-subst">&#123;email_alert_delay_time&#125;</span>&quot;</span>)<br>                            <span class="hljs-keyword">else</span>:<br>                                <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;===================&quot;</span>)<br>                                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ç°åœ¨æ­£åœ¨æŸ¥çœ‹<span class="hljs-subst">&#123;address&#125;</span>,ç°åœ¨æ—¶é—´<span class="hljs-subst">&#123;now&#125;</span>&quot;</span>)<br>                                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ç”¨æˆ·å¼€å¯äº†ç­›é€‰ç«è½¦å‘é€é‚®ä»¶ï¼Œä¸å­˜åœ¨ç›¸åŒåˆ—è½¦ä¿¡æ¯ï¼Œä¸ä¼šå‘é€é‚®ä»¶ï¼&quot;</span>)<br>                                email_alert.clear()<br>                                <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;===================&quot;</span>)<br>                        <span class="hljs-keyword">elif</span> <span class="hljs-keyword">not</span> send_email_all_type <span class="hljs-keyword">and</span> send_all_numbers == <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> email_alert_delay_time:<br>                            <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">                            é¦–æ¬¡å‘é€å…¨éƒ¨æœ‰ç¥¨çš„ç«è½¦, ä¸”å½“å‰å­˜åœ¨é‚®ä»¶å»¶è¿Ÿå‘é€æ—¶é—´è®¾ç½®</span><br><span class="hljs-string">                            &quot;&quot;&quot;</span><br>                            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;===================&quot;</span>)<br>                            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;é¦–æ¬¡å‘é€å…¨éƒ¨æœ‰ç¥¨çš„ç«è½¦,å½“å‰è®¾ç½®äº†é‚®ä»¶å‘é€å»¶è¿Ÿ&quot;</span>)<br>                            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ç°åœ¨æ­£åœ¨æŸ¥çœ‹<span class="hljs-subst">&#123;address&#125;</span>,ç°åœ¨æ—¶é—´<span class="hljs-subst">&#123;now&#125;</span>,å®šæ—¶æ¸…ç©ºåˆ—è¡¨æ—¶é—´<span class="hljs-subst">&#123;email_alert_delay_time&#125;</span>&quot;</span>)<br>                            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;====================&quot;</span>)<br>                            send_all_numbers += <span class="hljs-number">1</span><br>                            send_email_all_type = <span class="hljs-literal">True</span><br>                            asyncio.run(send_mail(mail_body=<span class="hljs-string">f&quot;æŠ¢åˆ°äº†<span class="hljs-subst">&#123;time_info&#125;</span>,<span class="hljs-subst">&#123;address&#125;</span>çš„ç¥¨<span class="hljs-subst">&#123;email_alert_update&#125;</span>&quot;</span>,<br>                                                  receivers=receivers))<br>                            email_alert.clear()<br><br>                        <span class="hljs-keyword">elif</span> send_email_all_type <span class="hljs-keyword">and</span> send_all_numbers == <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> email_alert_delay_time:<br>                            <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">                             å½“å‰å­˜åœ¨é‚®ä»¶å»¶è¿Ÿå‘é€æ—¶é—´è®¾ç½®</span><br><span class="hljs-string">                            &quot;&quot;&quot;</span><br>                            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;===================&quot;</span>)<br>                            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å½“å‰è®¾ç½®äº†é‚®ä»¶å‘é€å»¶è¿Ÿ&quot;</span>)<br>                            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ç°åœ¨æ­£åœ¨æŸ¥çœ‹<span class="hljs-subst">&#123;address&#125;</span>,ç°åœ¨æ—¶é—´<span class="hljs-subst">&#123;now&#125;</span>,å®šæ—¶æ¸…ç©ºåˆ—è¡¨æ—¶é—´<span class="hljs-subst">&#123;email_alert_delay_time&#125;</span>&quot;</span>)<br>                            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;====================&quot;</span>)<br>                            email_alert.clear()<br>                            <span class="hljs-keyword">if</span> compare_time(now, email_alert_delay_time):<br>                                email_alert.clear()<br>                                <span class="hljs-comment"># # send_numbers = 0  # ä¸“æ³¨ç«è½¦åˆ—è¡¨å‘é€æ¬¡æ•°å½’é›¶</span><br>                                <span class="hljs-comment"># send_all_numbers = 1  # å·²ç»å‘é€æ‰€æœ‰ç«è½¦æœ‰ç¥¨çš„è®°å½•</span><br>                                <span class="hljs-comment"># send_email_all_type = T  # å›åˆ°é¦–æ¬¡å‘é€çš„çŠ¶æ€</span><br>                                <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æ¸…ç©ºåˆ—è¡¨,é‡æ–°å¼€å§‹å‘é€é‚®ä»¶&quot;</span>)<br>                                asyncio.run(send_mail(mail_body=<span class="hljs-string">f&quot;æŠ¢åˆ°äº†<span class="hljs-subst">&#123;time_info&#125;</span>,<span class="hljs-subst">&#123;address&#125;</span>çš„ç¥¨<span class="hljs-subst">&#123;email_alert_update&#125;</span>&quot;</span>,<br>                                                      receivers=receivers))<br>                                email_alert_delay_time = delay_time(email_delay_time)<br>                                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ç°åœ¨æ­£åœ¨æŸ¥çœ‹<span class="hljs-subst">&#123;address&#125;</span>,ç°åœ¨æ—¶é—´<span class="hljs-subst">&#123;now&#125;</span>,å®šæ—¶æ¸…ç©ºåˆ—è¡¨æ—¶é—´<span class="hljs-subst">&#123;email_alert_delay_time&#125;</span>&quot;</span>)<br><br>                        <span class="hljs-keyword">else</span>:<br>                            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;===================&quot;</span>)<br>                            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ç°åœ¨æ­£åœ¨æŸ¥çœ‹<span class="hljs-subst">&#123;address&#125;</span>,ç°åœ¨æ—¶é—´<span class="hljs-subst">&#123;now&#125;</span>&quot;</span>)<br>                            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å½“å‰æœªè®¾ç½®å»¶è¿Ÿå‘é€é‚®ä»¶,å°†å³å¯å‘é€é‚®ä»¶&quot;</span>)<br>                            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;===================&quot;</span>)<br>                            asyncio.run(send_mail(mail_body=<span class="hljs-string">f&quot;æŠ¢åˆ°äº†<span class="hljs-subst">&#123;time_info&#125;</span>,<span class="hljs-subst">&#123;address&#125;</span>çš„ç¥¨<span class="hljs-subst">&#123;email_alert_update&#125;</span>&quot;</span>,<br>                                                  receivers=receivers))<br>                            email_alert.clear()<br><br>                        numbers = <span class="hljs-number">0</span>  <span class="hljs-comment"># æ§åˆ¶æ•´ä½“çš„æ•°ç›®å½’é›¶</span><br>                <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>                    <span class="hljs-built_in">print</span>(e)<br>                    <span class="hljs-built_in">print</span>(remove_after_wm(<span class="hljs-built_in">str</span>((i.split(<span class="hljs-string">&quot;èµ·å”®&quot;</span>)[<span class="hljs-number">1</span>][<span class="hljs-number">14</span>:]).split(<span class="hljs-string">&quot;2024&quot;</span>)[<span class="hljs-number">1</span>])))<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&gt;&gt;&gt;&gt;&gt;&quot;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;12306æ¥å£è¯·æ±‚å¤±è´¥, çŠ¶æ€ç æ˜¯<span class="hljs-subst">&#123;response.status_code&#125;</span>&quot;</span><br></code></pre></td></tr></table></figure><h3 id="å¤šçº¿ç¨‹å’Œå¤šè¿›ç¨‹çš„é€‰æ‹©"><a href="#å¤šçº¿ç¨‹å’Œå¤šè¿›ç¨‹çš„é€‰æ‹©" class="headerlink" title="å¤šçº¿ç¨‹å’Œå¤šè¿›ç¨‹çš„é€‰æ‹©"></a>å¤šçº¿ç¨‹å’Œå¤šè¿›ç¨‹çš„é€‰æ‹©</h3><p>åˆšå¼€å§‹æˆ‘é€‰æ‹©çš„æ˜¯å¤šçº¿ç¨‹ï¼Œä½†æ˜¯åœ¨å®è·µä¸­å‘ç°åœ¨ä¼ é€’ä¿¡æ¯çš„æ—¶å€™ä¼šå‘ç”Ÿ  A çº¿è·¯çš„ä¿¡æ¯ æµè½¬åˆ°äº† B çº¿è·¯ä¸­ï¼Œåæ¥æŸ¥è¯¢èµ„æ–™å‘ç°ï¼Œå¤šçº¿ç¨‹çš„å†…å­˜ä¿¡æ¯å…±äº«çš„å¯èƒ½ä¼šå‘ç”Ÿæ•°æ®é”™ä¹±ï¼Œä½†æ˜¯å¤šè¿›ç¨‹æ˜¯å†…å­˜ç‹¬ç«‹çš„ä¸å…±äº«ï¼Œæ­¤æ—¶åœ¨å®ç°çš„æ—¶å€™é€‰æ‹©äº† è¿›ç¨‹æ± æ¥å®ç°ï¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    train_info å‡½æ•°ä¼ é€’é¡ºåº(url, address, receivers, sleep_time, user_focus_train, email_delay_time)</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    query_list = [<br>        (<br>            <span class="hljs-string">&quot;https://kyfw.12306.cn/otn/leftTicket/queryG?leftTicketDTO.train_date=2024-10-07&amp;leftTicketDTO.from_station=SJP&amp;leftTicketDTO.to_station=HDP&amp;purpose_codes=ADULT&quot;</span>,<br>            <span class="hljs-string">&quot;çŸ³å®¶åº„----&gt;é‚¯éƒ¸&quot;</span>, [<span class="hljs-string">&quot;154418645@qq.com&quot;</span>, <span class="hljs-string">&quot;385521294@qq.com&quot;</span>], <span class="hljs-number">10</span>, [<span class="hljs-string">&#x27;K7734&#x27;</span>,<span class="hljs-string">&#x27;G543&#x27;</span>], (<span class="hljs-number">2</span>, <span class="hljs-number">1</span>)),  <span class="hljs-comment"># åˆ°é‚¯éƒ¸</span><br>        (<br>            <span class="hljs-string">&quot;https://kyfw.12306.cn/otn/leftTicket/queryG?leftTicketDTO.train_date=2024-10-07&amp;leftTicketDTO.from_station=SJP&amp;leftTicketDTO.to_station=XTP&amp;purpose_codes=ADULT&quot;</span>,<br>            <span class="hljs-string">&quot;çŸ³å®¶åº„----&gt;é‚¢å°&quot;</span>, [<span class="hljs-string">&quot;152418645@qq.com&quot;</span>, <span class="hljs-string">&quot;385521294@qq.com&quot;</span>], <span class="hljs-number">20</span>, [], (<span class="hljs-number">2</span>, <span class="hljs-number">2</span>))  <span class="hljs-comment"># åˆ°é‚¢å°</span><br>    ]<br><br>    <span class="hljs-keyword">with</span> ProcessPoolExecutor(max_workers=<span class="hljs-number">2</span>) <span class="hljs-keyword">as</span> executor:<br>        <span class="hljs-comment"># æäº¤ä»»åŠ¡ï¼Œæ¯ä¸ªä»»åŠ¡éƒ½æ¥æ”¶ä¸€ä¸ªargså…ƒç»„ï¼Œè‡ªåŠ¨è§£åŒ…ä¸ºå¤šä¸ªå‚æ•°</span><br>        futures = [executor.submit(train_info, *args) <span class="hljs-keyword">for</span> args <span class="hljs-keyword">in</span> query_list]<br>        <span class="hljs-comment"># ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ</span><br>        <span class="hljs-keyword">try</span>:<br>            <span class="hljs-keyword">for</span> future <span class="hljs-keyword">in</span> as_completed(futures):<br>                <span class="hljs-comment"># å¤„ç†å¯èƒ½çš„å¼‚å¸¸</span><br>                result = future.result()<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Received result: <span class="hljs-subst">&#123;result&#125;</span>&quot;</span>)<br>        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;è¿›ç¨‹å‡ºé”™äº†<span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç é‡‡ç”¨äº†è¿›ç¨‹æ± çš„æ–¹å¼è¿›è¡Œè¯·æ±‚ï¼Œæœ€å¤§è®¾ç½®äº†2ä¸ªï¼Œå¯ä»¥è‡ªç”±è®¾ç½®ï¼Œé€šè¿‡submit å°†ä»»åŠ¡æäº¤è¿”å›ä¸€ä¸ªfutureså¯¹è±¡ï¼Œç„¶åæˆ‘ä»¬éœ€è¦çœ‹æ˜¯å¦æ¯ä¸ªéƒ½å®Œæˆäº†è°ƒç”¨as_completedè¿™ä¸ªæ–¹æ³•å³å¯ï¼</p><h2 id="æ•ˆæœæŸ¥çœ‹"><a href="#æ•ˆæœæŸ¥çœ‹" class="headerlink" title="æ•ˆæœæŸ¥çœ‹"></a>æ•ˆæœæŸ¥çœ‹</h2><p>è¿è¡Œåå¦‚ä¸‹ï¼š</p><img src="/2024/10/08/12306%E4%BD%99%E7%A5%A8%E6%9F%A5%E8%AF%A2/12306_3.png" class=""><img src="/2024/10/08/12306%E4%BD%99%E7%A5%A8%E6%9F%A5%E8%AF%A2/12306_4.png" class=""><p>å¯ä»¥å‘ç°æˆ‘ä»¬å®ç°äº†æˆ‘ä»¬ä¸Šè¿°çš„æ‰€æœ‰åŠŸèƒ½ï¼Œä¸‹é¢çœ‹é‚®ä»¶æ•ˆæœï¼š</p><img src="/2024/10/08/12306%E4%BD%99%E7%A5%A8%E6%9F%A5%E8%AF%A2/12306_5.png" class=""><p>å¯ä»¥çœ‹åˆ°é‚®ç®±æ”¶åˆ°äº†æˆ‘ä»¬çš„é‚®ä»¶ä»¥åŠç¥¨åŠ¡ä¿¡æ¯ï¼</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>é€šè¿‡ç¼–å†™è¿™ä¸ªè„šæœ¬æˆ‘ä¹Ÿå­¦åˆ°äº†å¾ˆå¤šçŸ¥è¯†ï¼Œæœ€å¤§å°±æ˜¯åˆ©ç”¨äº†è¿›ç¨‹æ± æ¥å®ç°ï¼Œä¹Ÿæ„Ÿå—åˆ°äº†å¤šè¿›ç¨‹å’Œå¤šçº¿ç¨‹åœ¨ä½¿ç”¨ä¸Šçš„å·®è·ï¼Œé‚£ä¹ˆæºç å·²ç»å…±äº«åˆ°github åœ°å€æ˜¯ï¼š<a href="https://github.com/dreamshao/12306">https://github.com/dreamshao/12306</a><br>åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæ— æ³•æŸ¥è¯¢å¯ä»¥å°†æ¥å£è¯·æ±‚çš„æœ€æ–°cookieæ›¿æ¢ä¸€ä¸‹æœ¬åœ°æ¥å£è¯·æ±‚çš„cookieï¼Œå¦‚æœæœ‰æ›´å¥½çš„å»ºè®®æˆ–è€…æœ‰ç–‘é—®å¯ä»¥è”ç³»æˆ‘å“¦ï¼</p>]]></content>
    
    
    <categories>
      
      <category>æµ‹è¯•å¼€å‘å·¥å…·/æ¡†æ¶</category>
      
      <category>æ•ˆèƒ½å·¥å…·</category>
      
      <category>12306 ç«è½¦ç¥¨ä½™ç¥¨æŸ¥è¯¢è„šæœ¬</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>12306 ç«è½¦ç¥¨ä½™ç¥¨æŸ¥è¯¢è„šæœ¬å¼€å‘</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python å¹¶å‘ç¼–ç¨‹ä¹‹å¤šçº¿ç¨‹ç”±æµ…å…¥æ·±</title>
    <link href="/2024/09/11/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E5%A4%9A%E7%BA%BF%E7%A8%8B/"/>
    <url>/2024/09/11/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E5%A4%9A%E7%BA%BF%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="Python-å¹¶å‘ç¼–ç¨‹ä¹‹å¤šçº¿ç¨‹ç”±æµ…å…¥æ·±"><a href="#Python-å¹¶å‘ç¼–ç¨‹ä¹‹å¤šçº¿ç¨‹ç”±æµ…å…¥æ·±" class="headerlink" title="Python å¹¶å‘ç¼–ç¨‹ä¹‹å¤šçº¿ç¨‹ç”±æµ…å…¥æ·±"></a>Python å¹¶å‘ç¼–ç¨‹ä¹‹å¤šçº¿ç¨‹ç”±æµ…å…¥æ·±</h1><p>åœ¨pythonä¸­æˆ‘ä»¬æƒ³è¦äº†è§£å¹¶å‘ç¼–ç¨‹ï¼Œå°±è¦çŸ¥é“åœ¨å¹¶å‘ç¼–ç¨‹è¿™é‡Œæˆ‘ä»¬åŒ…å«äº†ä¸¤éƒ¨åˆ†ä¸€éƒ¨åˆ†æ˜¯å¤šçº¿ç¨‹ï¼Œä¸€éƒ¨åˆ†æ˜¯å¤šè¿›ç¨‹ã€‚é‚£ä¹ˆä½ å…·ä½“èƒ½çŸ¥é“å®ƒä»¬çš„åŒºåˆ«å—ï¼Ÿä¸€èµ·æ¥çœ‹çœ‹ï¼</p><h2 id="çº¿ç¨‹ä¸è¿›ç¨‹çš„åŒºåˆ«"><a href="#çº¿ç¨‹ä¸è¿›ç¨‹çš„åŒºåˆ«" class="headerlink" title="çº¿ç¨‹ä¸è¿›ç¨‹çš„åŒºåˆ«"></a>çº¿ç¨‹ä¸è¿›ç¨‹çš„åŒºåˆ«</h2><p>ä¸€ä¸ªè¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿä¸­è¿è¡Œçš„ä¸€ä¸ªä»»åŠ¡<br>    å½“å‰çš„æ“ä½œç³»ç»ŸåŸºæœ¬éƒ½æ”¯æŒå¤šè¿›ç¨‹çš„å¹¶å‘æ“ä½œã€‚<br>    è¿›ç¨‹æ‹¥æœ‰ç‹¬ç«‹çš„CPUã€å†…å­˜ç­‰èµ„æºã€‚</p><p>ä¸€ä¸ªçº¿ç¨‹æ˜¯ä¸€ä¸ªè¿›ç¨‹ä¸­è¿è¡Œçš„ä¸€ä¸ªä»»åŠ¡<br>    ä¸€ä¸ªè¿›ç¨‹ä¸­åŒæ ·å¯ä»¥å¹¶å‘å¤šä¸ªä»»åŠ¡ã€‚<br>    çº¿ç¨‹ä¹‹é—´å…±äº«è¿›ç¨‹çš„CPUã€å†…å­˜ç­‰èµ„æºã€‚</p><p>çœ‹äº†ä¸Šè¿°æè¿°ï¼Œå¯èƒ½æ„Ÿè§‰è¿˜æ˜¯è’™è’™çš„ï¼Œæ€»ç»“æ¥è¯´ï¼š å¤šä¸ªè¿›ç¨‹ä¸­çš„å†…å­˜ cpuç­‰èµ„æºæ˜¯ç‹¬ç«‹çš„ä¸åˆ†äº«çš„ã€‚çº¿ç¨‹æ˜¯è¿›ç¨‹ä¸­çš„ä¸€ä¸ªä»»åŠ¡ï¼Œçº¿ç¨‹ä¹‹é—´çš„CPUã€å†…å­˜ç­‰èµ„æºéƒ½æ˜¯å…±äº«çš„ã€‚</p><h2 id="ä»£ç è§£é‡Šå¤šçº¿ç¨‹å…¥é—¨"><a href="#ä»£ç è§£é‡Šå¤šçº¿ç¨‹å…¥é—¨" class="headerlink" title="ä»£ç è§£é‡Šå¤šçº¿ç¨‹å…¥é—¨"></a>ä»£ç è§£é‡Šå¤šçº¿ç¨‹å…¥é—¨</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">task</span>():<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):<br>        <span class="hljs-built_in">print</span>(j)<br><br>task()<br>task()<br><br></code></pre></td></tr></table></figure><p>é‚£ä¹ˆæˆ‘ä»¬ä¸Šé¢çš„ä»£ç å¯ä»¥çœ‹å‡ºå¾ˆç®€å•ï¼Œåªæ˜¯ç®€å•çš„åˆ›å»ºäº†ä¸€ä¸ªå‡½æ•°éå†äº†10ï¼Œç„¶åè¢«è°ƒç”¨2æ¬¡ï¼Œ è¾“å‡ºç»“æœä¸ºä¸¤æ¬¡0-9ï¼Œå¯ä»¥çœ‹å‡ºé¡ºåºå’Œä½ è°ƒç”¨è¾“å‡ºæ˜¯ä¸€è‡´çš„ï¼Œé‚£ä¹ˆæˆ‘æƒ³ä½¿ç”¨å¤šçº¿ç¨‹æ”¹é€ è¿™ä¸ªå‡½æ•°æ€ä¹ˆæ¥å‘¢ï¼Ÿä¸‹é¢ç»§ç»­</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> threading <span class="hljs-keyword">import</span> Thread<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">task</span>(<span class="hljs-params">numbers</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(numbers):<br>        <span class="hljs-built_in">print</span>(j)<br><br>thread1 = Thread(target=task,args=(<span class="hljs-number">10</span>,))<br>thread2 = Thread(target=task,args=(<span class="hljs-number">10</span>,))<br><br>thread1.start()<br>thread2.start()<br><br>thread1.join()<br>thread2.join()<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ä¸»çº¿ç¨‹ç»“æŸäº†&quot;</span>)<br><br></code></pre></td></tr></table></figure><p>æ­¤æ—¶å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å¯¼å…¥äº†ä¸€ä¸ªåŒ…å°±æ˜¯ä»threadingé‡Œé¢å¯¼å…¥äº†Threadï¼Œè¿™ä¸ªå°±æ˜¯pythonå¤„ç†å¤šçº¿ç¨‹çš„å‡½æ•°ï¼Œå…¶ä¸­targetä¸ºç›®æ ‡å‡½æ•°æ­¤æ—¶ä¼ é€’æˆ‘ä»¬è¦æ‰§è¡Œçš„å‡½æ•°ï¼Œè®°ä½åƒä¸‡ä¸èƒ½åŠ ()ï¼Œjoinæ–¹æ³•å°±æ˜¯ç­‰å¾…æ”¹çº¿ç¨‹ç»“æŸï¼Œç„¶åä¸»çº¿ç¨‹æ‰å¯ä»¥å¾€ä¸‹ç»§ç»­æ‰§è¡Œã€‚argså°±æ˜¯æˆ‘ä»¬ä¼ å…¥çš„å‚æ•°çš„æ„æ€ï¼Œè¿™é‡Œè¦æ±‚çš„æ ¼å¼å¿…é¡»æ˜¯å…ƒç»„ã€‚è¦æ‰§è¡Œå¯¹åº”çš„å¤šçº¿ç¨‹ç›´æ¥è°ƒç”¨startå³å¯ã€‚</p><p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><img src="/2024/09/11/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E5%A4%9A%E7%BA%BF%E7%A8%8B/%E5%A4%9A%E7%BA%BF%E7%A8%8B1.png" class=""><p>å¯ä»¥çœ‹åˆ°ä¸€ä¸ªå¥‡æ€ªçš„ç°è±¡å°±æ˜¯è¿™ä¸ªè¾“å‡ºç»“æœæœ‰ç‚¹é¡ºåºä¸å¯¹äº†ï¼Œæœ‰çš„9å’Œå…¶ä»–çš„æ•°å­—æ··åœ¨åé¢äº†ï¼Œæ˜¯å› ä¸ºçº¿ç¨‹æ˜¯å¹¶è¡Œçš„æ‰€ä»¥æœ‰æ—¶å€™ä½ æ— æ³•æ§åˆ¶å“ªä¸€ä¸ªçº¿ç¨‹å…ˆä¼˜å…ˆè¾“å‡ºæ•°æ®ã€‚</p><h2 id="ä»£ç è§£é‡Šçº¿ç¨‹è¿›é˜¶"><a href="#ä»£ç è§£é‡Šçº¿ç¨‹è¿›é˜¶" class="headerlink" title="ä»£ç è§£é‡Šçº¿ç¨‹è¿›é˜¶"></a>ä»£ç è§£é‡Šçº¿ç¨‹è¿›é˜¶</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> threading <span class="hljs-keyword">import</span> Thread<br><span class="hljs-keyword">import</span> time<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadTask</span>(<span class="hljs-title class_ inherited__">Thread</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name, numbers</span>):<br>        <span class="hljs-built_in">super</span>().__init__()<br>        <br>        self.setName(name) <span class="hljs-comment"># super çˆ¶ç±»å®šä¹‰æ–¹æ³•</span><br>        self.numbers = numbers<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(self.numbers):<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;self.getName()&#125;</span> - <span class="hljs-subst">&#123;n&#125;</span>&quot;</span>)<br>            time.sleep(<span class="hljs-number">0.01</span>)<br><br><br>mythread1=ThreadTask(<span class="hljs-string">&quot;A&quot;</span>, <span class="hljs-number">10</span>)<br>mythread2=ThreadTask(<span class="hljs-string">&quot;B&quot;</span>, <span class="hljs-number">10</span>)<br><br>mythread1.start()<br>mythread2.start()<br><br></code></pre></td></tr></table></figure><p>ä»£ç è§£é‡Šï¼šä»ä¸Šè¿°ä»£ç æˆ‘ä»¬å°±å¯ä»¥çœ‹å‡ºæˆ‘ä»¬è¿™æ¬¡å†™çš„æ˜¯ç±»è€Œä¸æ˜¯å‡½æ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ˜¯ç»§æ‰¿äº†Threadï¼Œç„¶ååœ¨å®šä¹‰çš„<code>__init__</code>æ–¹æ³•ä¸­æˆ‘ä»¬åˆå§‹åŒ–äº†çˆ¶ç±»çš„æ–¹æ³•ï¼Œå…¶ä¸­setName() ç”¨æ¥å±•ç¤ºçº¿ç¨‹çš„åå­—ï¼Œè¿™ä¸ªæ˜¯çˆ¶ç±»ä¸­å·²ç»æœ‰çš„å‡½æ•°ã€‚é‚£ä¹ˆæˆ‘ä»¬ä¸‹é¢ä¾æ—§æ˜¯ä¸€ä¸ªéå†å’Œæˆ‘ä»¬æœ€åˆçš„æ˜¯ä¸€æ ·çš„ã€‚å¯ä»¥çœ‹åˆ°è¿è¡Œçš„ç»“æœå¦‚ä¸‹ï¼š</p><img src="/2024/09/11/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E5%A4%9A%E7%BA%BF%E7%A8%8B/%E5%A4%9A%E7%BA%BF%E7%A8%8B2.png" class=""><h2 id="å®ˆæŠ¤çº¿ç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#å®ˆæŠ¤çº¿ç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="å®ˆæŠ¤çº¿ç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ"></a>å®ˆæŠ¤çº¿ç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>ä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»ä¸€ä¸‹ä»€ä¹ˆæ˜¯å®ˆæŠ¤çº¿ç¨‹ï¼Œå®ˆæŠ¤çº¿ç¨‹å°±æ˜¯ä¸»çº¿ç¨‹ç»“æŸäº†å®ˆæŠ¤çº¿ç¨‹ä¹Ÿä¼šç»“æŸï¼Œéå®ˆæŠ¤çº¿ç¨‹å°±æ˜¯ä¸»çº¿ç¨‹å¿…é¡»ç­‰éå®ˆæŠ¤çº¿ç¨‹ç»“æŸä¸»çº¿ç¨‹æ‰ä¼šç»“æŸã€‚</p><h3 id="ä»£ç è§£é‡Šå®ˆæŠ¤çº¿ç¨‹"><a href="#ä»£ç è§£é‡Šå®ˆæŠ¤çº¿ç¨‹" class="headerlink" title="ä»£ç è§£é‡Šå®ˆæŠ¤çº¿ç¨‹"></a>ä»£ç è§£é‡Šå®ˆæŠ¤çº¿ç¨‹</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> threading <span class="hljs-keyword">import</span> Thread<br><span class="hljs-keyword">import</span> time<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadTask</span>(<span class="hljs-title class_ inherited__">Thread</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name, numbers</span>):<br>        <span class="hljs-built_in">super</span>().__init__()<br>        <br>        self.setName(name) <span class="hljs-comment"># super çˆ¶ç±»å®šä¹‰æ–¹æ³•</span><br>        self.setDaemon(<span class="hljs-literal">True</span>) <span class="hljs-comment"># å®ˆæŠ¤çº¿ç¨‹è®¾ç½®</span><br>        self.numbers = numbers<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(self.numbers):<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;self.getName()&#125;</span> - <span class="hljs-subst">&#123;n&#125;</span>&quot;</span>)<br>            time.sleep(<span class="hljs-number">0.01</span>)<br><br><br>mythread1=ThreadTask(<span class="hljs-string">&quot;A&quot;</span>, <span class="hljs-number">10</span>)<br>mythread2=ThreadTask(<span class="hljs-string">&quot;B&quot;</span>, <span class="hljs-number">10</span>)<br><br>mythread1.start()<br>mythread2.start()<br></code></pre></td></tr></table></figure><p>ä»£ç è§£é‡Šï¼šå¦‚æœä½ æ˜¯å‡½æ•°æ‰§è¡Œé‚£ä¹ˆä½ åœ¨thread(task&#x3D;mytask,daemon&#x3D;True)çš„æ—¶å€™ç›´æ¥ä¼ å…¥æ–°çš„å‚æ•°daemon&#x3D;Trueå³å¯ï¼Œå°±å¯ä»¥å®ç°å®ˆæŠ¤çº¿ç¨‹ï¼Œå¦‚æœæ˜¯é€šè¿‡ç»§æ‰¿Threadçš„æ–¹å¼ï¼Œé‚£ä¹ˆåœ¨åˆå§‹åŒ–çš„æ—¶å€™è°ƒç”¨çˆ¶ç±»æ–¹æ³•setDaemon(True)å³å¯å®ç°å®ˆæŠ¤çº¿ç¨‹ã€‚é‚£ä¹ˆè¿è¡Œç¨‹åºå¯ä»¥çœ‹åˆ°å¦‚ä¸‹ï¼š</p><img src="/2024/09/11/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E5%A4%9A%E7%BA%BF%E7%A8%8B/%E5%A4%9A%E7%BA%BF%E7%A8%8B3.png" class=""><p>å¯ä»¥çœ‹åˆ°æ­¤æ—¶åªæ˜¯å„è‡ªè¾“å‡ºäº†0å°±ç»“æŸäº†ï¼Œå› ä¸ºæ­¤æ—¶ä¸»çº¿ç¨‹å·²ç»æ‰§è¡Œå®Œæ¯•ï¼Œå®ˆæŠ¤çº¿ç¨‹ä¹Ÿä¼šæ‰§è¡Œç»“æŸã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬ä¹Ÿå¯ä»¥å¢åŠ joinç­‰å¾…å°±å¯ä»¥å®ç°ç­‰å¾…å®ˆæŠ¤çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ååœ¨ç»“æŸï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> threading <span class="hljs-keyword">import</span> Thread<br><span class="hljs-keyword">import</span> time<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadTask</span>(<span class="hljs-title class_ inherited__">Thread</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name, numbers</span>):<br>        <span class="hljs-built_in">super</span>().__init__()<br>        <br>        self.setName(name) <span class="hljs-comment"># super çˆ¶ç±»å®šä¹‰æ–¹æ³•</span><br>        self.setDaemon(<span class="hljs-literal">True</span>) <span class="hljs-comment"># å®ˆæŠ¤çº¿ç¨‹è®¾ç½®</span><br>        self.numbers = numbers<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(self.numbers):<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;self.getName()&#125;</span> - <span class="hljs-subst">&#123;n&#125;</span>&quot;</span>)<br>            time.sleep(<span class="hljs-number">0.01</span>)<br><br><br>mythread1=ThreadTask(<span class="hljs-string">&quot;A&quot;</span>, <span class="hljs-number">10</span>)<br>mythread2=ThreadTask(<span class="hljs-string">&quot;B&quot;</span>, <span class="hljs-number">10</span>)<br><br>mythread1.start()<br>mythread2.start()<br><br>mythread1.join()<br></code></pre></td></tr></table></figure><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><img src="/2024/09/11/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E5%A4%9A%E7%BA%BF%E7%A8%8B/%E5%A4%9A%E7%BA%BF%E7%A8%8B4.png" class=""><h3 id="å®ˆæŠ¤çº¿ç¨‹çš„åº”ç”¨åœºæ™¯"><a href="#å®ˆæŠ¤çº¿ç¨‹çš„åº”ç”¨åœºæ™¯" class="headerlink" title="å®ˆæŠ¤çº¿ç¨‹çš„åº”ç”¨åœºæ™¯"></a>å®ˆæŠ¤çº¿ç¨‹çš„åº”ç”¨åœºæ™¯</h3><p>å®ˆæŠ¤çº¿ç¨‹ä¸€èˆ¬ç”¨åœ¨éå…³é”®æ€§çš„çº¿ç¨‹ï¼Œå¦‚æ—¥å¿—ã€æ— å…³ç´§è¦çš„é€»è¾‘ç­‰éƒ½å¯ä»¥åœ¨ä¸»çº¿ç¨‹ç»“æŸåä¹Ÿç†è§£åœæ­¢è¿è¡Œã€‚</p><h2 id="çº¿ç¨‹å®‰å…¨é˜Ÿåˆ—"><a href="#çº¿ç¨‹å®‰å…¨é˜Ÿåˆ—" class="headerlink" title="çº¿ç¨‹å®‰å…¨é˜Ÿåˆ—"></a>çº¿ç¨‹å®‰å…¨é˜Ÿåˆ—</h2><p>ä»ç°åœ¨å¼€å§‹æˆ‘ä»¬æè¿°ä¸€ä¸ªæ–°çš„æ¦‚å¿µæ˜¯é˜Ÿåˆ—ï¼Œä¹‹æ‰€ä»¥åœ¨è¿™é‡Œè®²è¿™ä¸ªï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬çš„çº¿ç¨‹æ˜¯ä¸å®‰å…¨çš„ï¼å› ä¸ºæˆ‘ä»¬çš„çº¿ç¨‹æœ‰å¯èƒ½å‘ç”Ÿå¤šä¸ªçº¿ç¨‹çš„æ··ä¹±ã€‚é‚£ä¹ˆæˆ‘ä»¬æœŸæœ›æˆ‘ä»¬çš„æ˜¯ä¸€ä¸ªå®Œæ•´çš„æœ‰åºçš„ï¼Œå°±ç”¨åˆ°äº†æˆ‘ä»¬çš„çº¿ç¨‹å®‰å…¨é˜Ÿåˆ—ã€‚</p><p>å‡å¦‚ï¼šæˆ‘ä»¬æœ‰ä¸¤ä¸ªçº¿ç¨‹ä¸€ä¸ªç”¨æ¥æ”¾ï¼Œä¸€ä¸ªç”¨æ¥å–ï¼Œå¦‚æœæ­¤æ—¶çº¿ç¨‹å…ˆè¿è¡Œäº†å–åé¢æ‰è¿è¡Œäº†æ”¾ï¼Œé‚£ä¹ˆå°±ä¼šå‘ç”Ÿé—®é¢˜ï¼Œå› ä¸ºå–ä¸åˆ°ï¼Œå°±æ˜¯ä¸å®‰å…¨çš„ï¼</p><p>é‚£ä¹ˆåœ¨pythonä¸­çš„queueä¸­çš„æ¨¡å—Queueå°±æä¾›äº†çº¿ç¨‹å®‰å…¨é˜Ÿåˆ—çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€èµ·æ¥ä½¿ç”¨ï¼</p><h3 id="é˜Ÿåˆ—é‡Œé¢çš„ä¸€äº›æ–¹æ³•"><a href="#é˜Ÿåˆ—é‡Œé¢çš„ä¸€äº›æ–¹æ³•" class="headerlink" title="é˜Ÿåˆ—é‡Œé¢çš„ä¸€äº›æ–¹æ³•"></a>é˜Ÿåˆ—é‡Œé¢çš„ä¸€äº›æ–¹æ³•</h3><table><thead><tr><th>æ–¹æ³•</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>queue.put(item,block&#x3D;False)</td><td>é˜Ÿåˆ—æ”¾å…¥å…ƒç´ çš„æ—¶å€™å¦‚æœæ»¡äº†åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæ”¹ä¸ºTrueåˆ™ä¼šä¸€ç›´ç­‰å¾…ä¸‹å»</td></tr><tr><td>queue.put(item,timeout&#x3D;3)</td><td>é˜Ÿåˆ—æ”¾å…¥å…ƒç´ æ»¡äº†åˆ™ä¼šç­‰å¾…3ç§’ï¼Œè¶…è¿‡3ç§’æŠ›å‡ºå¼‚å¸¸</td></tr><tr><td>queue.get(block&#x3D;False)</td><td>é˜Ÿåˆ—è·å–å…ƒç´ çš„æ—¶å€™å¦‚æœä¸ºç©ºåˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæ”¹ä¸ºTreuåˆ™ä¼šä¸€ç›´ç­‰å¾…ä¸‹å»</td></tr><tr><td>queue.get(timeout&#x3D;3)</td><td>é˜Ÿåˆ—è·å–å…ƒç´ ç©ºäº†åˆ™ä¼šç­‰å¾…3ç§’ï¼Œè¶…è¿‡3ç§’æŠ›å‡ºå¼‚å¸¸</td></tr><tr><td>queue.qsize()</td><td>é˜Ÿåˆ—é•¿åº¦</td></tr><tr><td>queue.empty()</td><td>é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º</td></tr><tr><td>queue.full()</td><td>é˜Ÿåˆ—æ˜¯å¦å·²ç»æ”¾æ»¡äº†</td></tr></tbody></table><h3 id="é˜Ÿåˆ—ä»£ç ç”Ÿäº§è€…æ¶ˆè´¹è€…"><a href="#é˜Ÿåˆ—ä»£ç ç”Ÿäº§è€…æ¶ˆè´¹è€…" class="headerlink" title="é˜Ÿåˆ—ä»£ç ç”Ÿäº§è€…æ¶ˆè´¹è€…"></a>é˜Ÿåˆ—ä»£ç ç”Ÿäº§è€…æ¶ˆè´¹è€…</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> threading <span class="hljs-keyword">import</span> Thread<br><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">from</span> queue <span class="hljs-keyword">import</span> Queue<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MessageProducer</span>(<span class="hljs-title class_ inherited__">Thread</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name, numbers, queue</span>):<br>        <span class="hljs-built_in">super</span>().__init__()<br>        <br>        self.setName(name)<br>        self.numbers=numbers<br>        self.queue = queue<br>    <br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(self.numbers):<br>            message = <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;self.getName()&#125;</span> - <span class="hljs-subst">&#123;n&#125;</span>&quot;</span><br>            self.queue.put(message, block=<span class="hljs-literal">True</span>)<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MessageConsumer</span>(<span class="hljs-title class_ inherited__">Thread</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name,  queue</span>):<br>        <span class="hljs-built_in">super</span>().__init__()<br>        <br>        self.setName(name)<br>        self.setDaemon=<span class="hljs-literal">True</span><br>        self.queue = queue<br>    <br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>            message = self.queue.get(block=<span class="hljs-literal">True</span>)<br>            <span class="hljs-built_in">print</span>( <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;self.getName()&#125;</span> - <span class="hljs-subst">&#123;message&#125;</span>\n&quot;</span>, end=<span class="hljs-string">&#x27;&#x27;</span>)<br><br><br>queue = Queue(<span class="hljs-number">3</span>)<br>threads = <span class="hljs-built_in">list</span>()<br>threads.append(MessageProducer(<span class="hljs-string">&quot;PA&quot;</span>,<span class="hljs-number">10</span>,queue))<br>threads.append(MessageProducer(<span class="hljs-string">&quot;PB&quot;</span>,<span class="hljs-number">10</span>,queue))<br>threads.append(MessageProducer(<span class="hljs-string">&quot;PC&quot;</span>,<span class="hljs-number">10</span>,queue))<br><br>threads.append(MessageConsumer(<span class="hljs-string">&quot;CA&quot;</span>,queue))<br>threads.append(MessageConsumer(<span class="hljs-string">&quot;CB&quot;</span>,queue))<br><br><span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> threads:<br>    t.start()<br>            <br></code></pre></td></tr></table></figure><p>ä»£ç è§£é‡Šï¼šåœ¨ä¸Šè¿°ä»£ç ä¸­æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªç”Ÿæˆæ¶ˆæ¯çš„ç”Ÿäº§è€…ï¼Œåˆ›å»ºäº†ä¸€ä¸ªæ¶ˆè´¹æ¶ˆæ¯çš„æ¶ˆè´¹è€…ï¼Œå…¶ä¸­åœ¨ç”Ÿäº§è€…ä¸­ï¼Œæˆ‘ä»¬é™¤äº†ä¹‹å‰çš„ä»£ç æˆ‘ä»¬æ–°å¢äº†ä¸€ä¸ªqueueï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªé˜Ÿåˆ—ï¼Œæ­¤æ—¶æˆ‘ä»¬ä¹Ÿå¼•å…¥äº†Queue,é‚£ä¹ˆæˆ‘ä»¬åœ¨runæ–¹æ³•ä¸­å‘¢å¤šäº†ä¸€ä¸ªå°†æ¶ˆæ¯æ”¾å…¥åˆ°é˜Ÿåˆ—ä¸­ï¼Œå…¶ä¸­æˆ‘ä»¬ç”¨åˆ°äº†putæ–¹æ³•ï¼Œè¿™ä¸ªåœ¨ä¸Šé¢çš„æ–¹æ³•ä»‹ç»ä¸­ä¹Ÿå†™åˆ°äº†ã€‚</p><p>ç„¶åæˆ‘ä»¬åœ¨æ¶ˆè´¹è€…è¿™é‡Œä¹Ÿæ˜¯å£°æ˜äº†ä¸€ä¸ªqueueï¼Œç„¶åæˆ‘ä»¬å£°æ˜äº†æˆ‘ä»¬çš„çº¿ç¨‹æ˜¯å®ˆæŠ¤çº¿ç¨‹ï¼Œä¹‹æ‰€ä»¥å£°æ˜æ˜¯å®ˆæŠ¤çº¿ç¨‹å› ä¸ºæˆ‘ä»¬è¦ç”¨while trueçš„æ–¹å¼å»æ•°æ®ï¼Œä¸€æ—¦ä¸»çº¿ç¨‹ç»“æŸé‚£ä¹ˆæˆ‘ä»¬çš„çº¿ç¨‹ä¹Ÿéœ€è¦ç»“æŸå¦åˆ™ä¼šæ­»å¾ªç¯ã€‚è¿™é‡Œæˆ‘ä»¬ä¹Ÿä½¿ç”¨äº†getæ–¹æ³•ï¼Œåœ¨æˆ‘ä»¬çš„ä¸Šé¢ä¹ŸåŒæ ·ä»‹ç»äº†è¯¥æ–¹æ³•ï¼Œç„¶åæˆ‘ä»¬æ‰“å°äº†æ¶ˆè´¹è€…çš„çº¿ç¨‹åç§°ä»¥åŠç”Ÿäº§è€…çš„çº¿ç¨‹åç§°å’Œæ”¾å…¥çš„æ•°æ®ï¼</p><p>é‚£ä¹ˆæˆ‘ä»¬åé¢å£°æ˜äº†ä¸€ä¸ªé˜Ÿåˆ—ï¼Œé˜Ÿåˆ—çš„é•¿åº¦æ˜¯3ï¼Œæˆ‘ä»¬å†™äº†ä¸€ä¸ªåˆ—è¡¨å°†ç”Ÿäº§è€…å†™äº†3ä¸ªçº¿ç¨‹ï¼Œæ¶ˆè´¹è€…å†™äº†2ä¸ªè¿›ç¨‹ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªæ¶ˆè´¹è€…å’Œç”Ÿäº§è€…ä¹‹å‰çš„äº‰å¤ºå…³ç³»ï¼è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><img src="/2024/09/11/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E5%A4%9A%E7%BA%BF%E7%A8%8B/%E5%A4%9A%E7%BA%BF%E7%A8%8B5.png" class=""><h2 id="çº¿ç¨‹é”"><a href="#çº¿ç¨‹é”" class="headerlink" title="çº¿ç¨‹é”"></a>çº¿ç¨‹é”</h2><p>é¦–å…ˆæˆ‘ä»¬æ¥çœ‹ä»€ä¹ˆäº‹çº¿ç¨‹é”ä»¥åŠä¸ºä½•éœ€è¦çº¿ç¨‹é”ï¼Œå½“å¤šä¸ªçº¿ç¨‹åœ¨åŒä¸€æ—¶åˆ»è®¿é—®ç›¸åŒçš„æ•°æ®æ—¶å¯èƒ½ä¼šäº§ç”Ÿæ•°æ®ä¸¢å¤±ï¼Œè¦†ç›–ï¼Œä¸å®Œæ•´ç­‰é—®é¢˜ã€‚é‚£ä¹ˆçº¿ç¨‹é”å°±æ˜¯ç”¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜çš„é‡è¦æ‰‹æ®µï¼</p><h3 id="ä»£ç è§£é‡Šçº¿ç¨‹äº‰å¤º"><a href="#ä»£ç è§£é‡Šçº¿ç¨‹äº‰å¤º" class="headerlink" title="ä»£ç è§£é‡Šçº¿ç¨‹äº‰å¤º"></a>ä»£ç è§£é‡Šçº¿ç¨‹äº‰å¤º</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> threading <span class="hljs-keyword">import</span> Thread<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">task</span>(<span class="hljs-params">name</span>):<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;name&#125;</span> -round <span class="hljs-subst">&#123;i&#125;</span>- stpe 1&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;name&#125;</span> -round <span class="hljs-subst">&#123;i&#125;</span>- stpe 2&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;name&#125;</span> -round <span class="hljs-subst">&#123;i&#125;</span>- stpe 3&quot;</span>)<br><br>t1=Thread(target=task,args=(<span class="hljs-string">&quot;A&quot;</span>,))<br>t2=Thread(target=task,args=(<span class="hljs-string">&quot;B&quot;</span>,))<br>t3=Thread(target=task,args=(<span class="hljs-string">&quot;C&quot;</span>,))<br><br>t1.start()<br>t2.start()<br>t3.start()<br></code></pre></td></tr></table></figure><p>ä»£ç è§£é‡Šï¼šä¸Šè¿°ä»£ç ä¸­æˆ‘ä»¬å£°æ˜äº†ä¸€ä¸ªtaskå‡½æ•°å…¶ä¸­éå†3æ¬¡æ‰“å°ä¼ å…¥çš„åå­—ï¼Œè¿™é‡Œæˆ‘ä»¬å£°æ˜äº†3ä¸ªçº¿ç¨‹ç„¶åè°ƒç”¨startè¿è¡Œï¼Œç»“æœå¦‚ä¸‹ï¼š</p><img src="/2024/09/11/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E5%A4%9A%E7%BA%BF%E7%A8%8B/%E5%A4%9A%E7%BA%BF%E7%A8%8B6.png" class=""><p>å¯ä»¥çœ‹å‡ºæœ¬åº”è¯¥æ˜¯æŒ‰é¡ºåºæ‰“å°çš„ä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯å‘ç°äº†A B Cçš„é¡ºåºä¸ä¸€è‡´çš„æƒ…å†µï¼Œå‡å¦‚æ˜¯ä¸€ä¸ªéœ€è¦æŒ‰ç…§é¡ºåºçš„å†™æ“ä½œåˆ™ä¼šå¸¦æ¥è‡´å‘½çš„éº»çƒ¦ï¼</p><h3 id="ä»£ç è§£é‡ŠåŠ é”"><a href="#ä»£ç è§£é‡ŠåŠ é”" class="headerlink" title="ä»£ç è§£é‡ŠåŠ é”"></a>ä»£ç è§£é‡ŠåŠ é”</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> threading <span class="hljs-keyword">import</span> Thread, Lock<br><br><br>lock = Lock()<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">task</span>(<span class="hljs-params">name</span>):<br>    <span class="hljs-keyword">global</span> lock<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>):<br>        lock.acquire()<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;name&#125;</span> -round <span class="hljs-subst">&#123;i&#125;</span>- stpe 1&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;name&#125;</span> -round <span class="hljs-subst">&#123;i&#125;</span>- stpe 2&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;name&#125;</span> -round <span class="hljs-subst">&#123;i&#125;</span>- stpe 3&quot;</span>)<br>        lock.release()<br><br>t1=Thread(target=task,args=(<span class="hljs-string">&quot;A&quot;</span>,))<br>t2=Thread(target=task,args=(<span class="hljs-string">&quot;B&quot;</span>,))<br>t3=Thread(target=task,args=(<span class="hljs-string">&quot;C&quot;</span>,))<br><br>t1.start()<br>t2.start()<br>t3.start()<br></code></pre></td></tr></table></figure><p>ä»£ç è§£é‡Šï¼šè¿™é‡Œæˆ‘ä»¬é¦–å…ˆè§£é‡ŠLock(),ä¹Ÿæ˜¯åœ¨threadingä¸­ç»™æˆ‘ä»¬æä¾›çš„æ–¹æ³•ï¼Œç”¨æ¥å®ç°è·å–é”ï¼Œä½¿å¾—çº¿ç¨‹å¯ä»¥æŒ‰ç…§é¦–æ¬¡è¿è¡Œæ—¶å€™çš„é¡ºåºæ‰§è¡Œï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯æˆ‘ä»¬è¿™é‡Œå†™äº†ä¸€ä¸ªacuire() å°±æ˜¯ä¸Šé”ï¼Œrelease()å°±æ˜¯é‡Šæ”¾é”ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„ï¼šå½“é”é‡Šæ”¾åï¼Œä¸ä¼šæŒ‰ç…§æˆ‘ä»¬çš„é¡ºåºåˆ°ç¬¬äºŒä¸ªå»æ‹¿é”ï¼Œå› ä¸ºæ­¤æ—¶è°ä¼šæ‹¿åˆ°é”æ˜¯éšæœºçš„ï¼Œæ˜¯æ“ä½œç³»ç»Ÿè¿›è¡Œåˆ†é…çš„ï¼Œè¿™é‡Œä¾æ—§æ˜¯ä¸€ä¸ªéšæœºçš„é¡ºåºï¼æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p><img src="/2024/09/11/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E5%A4%9A%E7%BA%BF%E7%A8%8B/%E5%A4%9A%E7%BA%BF%E7%A8%8B7.png" class=""><h3 id="ä»£ç è§£é‡Šæ‰‹åŠ¨ç¼–å†™å®‰å…¨é˜Ÿåˆ—åˆ©ç”¨é”"><a href="#ä»£ç è§£é‡Šæ‰‹åŠ¨ç¼–å†™å®‰å…¨é˜Ÿåˆ—åˆ©ç”¨é”" class="headerlink" title="ä»£ç è§£é‡Šæ‰‹åŠ¨ç¼–å†™å®‰å…¨é˜Ÿåˆ—åˆ©ç”¨é”"></a>ä»£ç è§£é‡Šæ‰‹åŠ¨ç¼–å†™å®‰å…¨é˜Ÿåˆ—åˆ©ç”¨é”</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> threading <span class="hljs-keyword">import</span> Thread, Lock, Condition<br><span class="hljs-keyword">from</span> queue <span class="hljs-keyword">import</span> Queue<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">safeQueue</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, size</span>):<br>        self.__item_list = <span class="hljs-built_in">list</span>()<br>        self.size = size<br>        sefl.__item_lock = Condition()<br>        <br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">put</span>(<span class="hljs-params">self,item</span>):<br>        <span class="hljs-comment">#self.__item_lock.acquire()</span><br>        <span class="hljs-keyword">with</span> self._item_lockï¼š<br>            <span class="hljs-keyword">while</span> <span class="hljs-built_in">len</span>(self.__item_list) &gt;= self.size:<br>                self.__item_lock.wait() <span class="hljs-comment"># å¦‚æœå½“å‰æ»¡äº†ç­‰å¾…é˜Ÿåˆ—ç©ºå‡ºï¼Œå› ä¸ºæ˜¯éšæœºçš„å«é†’ï¼Œè¿˜éœ€è¦åˆ¤æ–­æ˜¯å¦æ»¡æŠ˜</span><br>            <br>            self.__item_list.insert(<span class="hljs-number">0</span>, item)<br>            self.__item_lock.notify_all() <span class="hljs-comment"># å½“å‰å–å‡ºä¸€ä¸ªåé€šçŸ¥æ‰€æœ‰æœ‰æ‰€çš„</span><br>            <span class="hljs-comment"># self.__item_lock.release()</span><br>            <br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">self, item</span>):<br>        <span class="hljs-comment"># self.__item_lock.acquire</span><br>        <span class="hljs-keyword">with</span> self._item_lockï¼š<br>            <span class="hljs-keyword">while</span> <span class="hljs-built_in">len</span>(self.__item_list) == <span class="hljs-number">0</span>:<br>                 self.__item_lock.wait() <span class="hljs-comment"># å½“å‰é˜Ÿåˆ—ä¸ºç©ºç­‰å¾…ï¼Œå› ä¸ºæ˜¯éšæœºçš„å«é†’ï¼Œè¿˜éœ€è¦åˆ¤æ–­æ˜¯å¦ä¸ºç©º</span><br>            <br>            result = self.__item_list.pop()<br>            self.__item_lock.notify_all() <span class="hljs-comment"># å½“å‰å–å‡ºä¸€ä¸ªåé€šçŸ¥æ‰€æœ‰æœ‰æ‰€çš„</span><br>            <span class="hljs-comment"># self.__item_lock.release()</span><br>        <br>        <span class="hljs-keyword">return</span> result<br>        <br></code></pre></td></tr></table></figure><p>ä»£ç è§£é‡Šï¼šè¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å£°æ˜äº†ä¸€ä¸ªç±»ï¼Œè¿™é‡Œåœ¨åˆå§‹åŒ–çš„æ—¶å€™å£°æ˜äº†ä¸€ä¸ªlistï¼Œä¸€ä¸ªsize,ä¸€æŠŠé”æ³¨æ„è¿™é‡Œçš„é”ç”¨çš„æ˜¯Condtitionï¼Œä¸æ˜¯ä¸Šé¢çš„Lockã€‚è¿™é‡Œçš„Condition()é‡Œé¢æœ‰è¿™ä¹ˆå‡ ä¸ªæ–¹æ³•ï¼šwait() å¦‚æœé”éœ€è¦ç­‰å¾…é€šçŸ¥åæ‰ä¼šè¿è¡Œï¼Œ notify_all() ç”¨äºé€šçŸ¥wait()è¿™é‡Œæ˜¯é€šçŸ¥æ‰€æœ‰çš„é”ï¼Œå› ä¸ºå¦‚æœæ˜¯notifyæ˜¯åªä¼šé€šçŸ¥ä¸€æŠŠé”ï¼Œä¹Ÿæ˜¯éšæœºçš„ï¼Œè¿™é‡Œé€šçŸ¥æ‰€æœ‰çš„é”æ˜¯ä¸ºäº†é¿å…é€šçŸ¥åˆ°ä¸æ˜¯éœ€è¦çš„é”ã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬è¿™é‡Œä¾æ—§æ˜¯å†™äº†ä¸€ä¸ªé˜Ÿåˆ—çš„æ”¾å…¥å’Œå–å‡ºçš„é€»è¾‘ï¼Œå…¶ä¸­åœ¨puté€»è¾‘ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆæ˜¯åŠ äº†ä¸€æŠŠé”ï¼Œå› ä¸ºæˆ‘ä»¬è¿›æ¥çš„æ—¶å€™éœ€è¦è®©å…¶ä»–çš„å…ˆç­‰å¾…ï¼Œç„¶åæˆ‘ä»¬åˆ¤æ–­å½“å‰çš„é˜Ÿåˆ—çš„é•¿åº¦æ˜¯å¦æ»¡äº†ï¼Œå¦‚æœæ»¡äº†å°±wait,æ­¤æ—¶åœ¨getä¸­æœ‰ä¸€ä¸ªnotify_allçš„æ“ä½œå°±æ˜¯æˆ‘ä»¬å–å‡ºäº†å°±ä¼šé€šçŸ¥æ‰€æœ‰é”å¯ä»¥é†’æ¥äº†ï¼Œä¹‹æ‰€ä»¥è¿™é‡Œä½¿ç”¨çš„æ˜¯while,æ˜¯å› ä¸ºæˆ‘ä»¬çš„é”å¯èƒ½é†’æ¥çš„ä¸æ˜¯å¯¹çš„ï¼Œæ‰€ä»¥è¦æ¯æ¬¡éƒ½æ ¡éªŒä¸€éï¼ç„¶åæ”¾å…¥listä¸­çš„ç¬¬ä¸€ä¸ªä½ç½®ã€‚</p><p>åœ¨geté€»è¾‘ä¸­æˆ‘ä»¬ä¹Ÿæ˜¯å…ˆåŠ äº†ä¸€æŠŠé”ï¼Œç„¶åæ ¡éªŒlistçš„é•¿åº¦æ˜¯å¦ä¸º0ï¼Œå¦‚æœä¸º0åˆ™ä¼šæ‰§è¡Œwaitç­‰å¾…ï¼Œç„¶åæˆ‘ä»¬åœ¨Putæ–¹æ³•ä¸­ä¾æ—§æœ‰ä¸€ä¸ªnotify_allçš„é€šçŸ¥ï¼Œå°±æ˜¯æˆ‘ä»¬æ”¾å…¥ä¸€ä¸ªå…ƒç´ å°±é€šçŸ¥ç»™getç„¶åä¹Ÿæ˜¯é€šçŸ¥æ‰€æœ‰çš„é”ï¼Œä¹Ÿæ˜¯è¿›è¡Œäº†whileçš„æ ¡éªŒï¼Œå’Œä¸Šé¢puté”çš„æœºåˆ¶æ˜¯ä¸€æ ·çš„ï¼</p><p>åœ¨é”è¿™é‡Œæ˜¯æ”¯æŒä¸Šä¸‹æ–‡æ“ä½œçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦æ‰§è¡Œ with self._item_lockï¼šåœ¨ç»“æŸçš„æ—¶å€™ä¼šè‡ªåŠ¨æ‰§è¡Œé‡Šæ”¾é”çš„æ“ä½œï¼</p><h2 id="çº¿ç¨‹æ± "><a href="#çº¿ç¨‹æ± " class="headerlink" title="çº¿ç¨‹æ± "></a>çº¿ç¨‹æ± </h2><p>åœ¨äº†è§£çº¿ç¨‹æ± ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥æ¥çœ‹ä¸€ä¸‹åœ¨åˆ›å»ºçº¿ç¨‹çš„æ—¶å€™æˆ‘ä»¬è¦ä»˜å‡ºçš„ä»£ä»·æœ‰å¤šå¤§ï¼</p><p>1.çº¿ç¨‹çš„åˆ›å»ºå’Œé”€æ¯ç›¸å¯¹æ¯”è¾ƒæ˜‚è´µ</p><p>2.é¢‘ç¹çš„åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹ä¸åˆ©äºé«˜æ€§èƒ½</p><p>çº¿ç¨‹æ± æ˜¯ä¸€ä¸ªå¯ä»¥ä¾¿äºç®¡ç†å’Œæé«˜æ€§èƒ½ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„ç®¡ç†çº¿ç¨‹çš„å·¥å…·ï¼</p><h3 id="ä»£ç è§£é‡Šåˆ›å»ºçº¿ç¨‹æ± "><a href="#ä»£ç è§£é‡Šåˆ›å»ºçº¿ç¨‹æ± " class="headerlink" title="ä»£ç è§£é‡Šåˆ›å»ºçº¿ç¨‹æ± "></a>ä»£ç è§£é‡Šåˆ›å»ºçº¿ç¨‹æ± </h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">from</span> concurrent.futures <span class="hljs-keyword">import</span> ThreadPoolExecutor<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">task</span>(<span class="hljs-params">name</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;name&#125;</span> -step 1&quot;</span>)<br>    time.sleep(<span class="hljs-number">1</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;name&#125;</span> -step 2&quot;</span>)<br>    <br>    <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;name&#125;</span> complete&quot;</span><br>    <br><br><span class="hljs-keyword">with</span> ThreadPoolExecutor() <span class="hljs-keyword">as</span> executor:<br>    re1 = executor.submit(task, <span class="hljs-string">&#x27;A&#x27;</span>)<br>    re2 = executor.submit(task, <span class="hljs-string">&#x27;B&#x27;</span>)<br>    <span class="hljs-built_in">print</span>(re1.result()) <span class="hljs-comment"># ç­‰å¾…æœ‰ç»“æœçš„æ—¶å€™è¿”å›</span><br>    <span class="hljs-built_in">print</span>(re2.result()) <span class="hljs-comment"># ç­‰å¾…æœ‰ç»“æœçš„æ—¶å€™è¿”å›</span><br>    <br></code></pre></td></tr></table></figure><p>ä»£ç è§£é‡Šï¼šé¦–å…ˆæˆ‘ä»¬å¼•å…¥äº†çº¿ç¨‹æ±  from concurrent.futures import ThreadPoolExecutorï¼Œç„¶åæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªtaskå‡½æ•°ï¼Œå¯ä»¥ä¼ é€’ä¸€ä¸ªnameä½œä¸ºæ‰“å°ä¿¡æ¯ï¼Œåé¢return å›å»è¿™ä¸ªname,å› ä¸ºçº¿ç¨‹æ± æ˜¯æ”¯æŒä¸Šä¸‹æ–‡ç®¡ç†å™¨çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å†™äº†ä¸€ä¸ªä¸Šä¸‹æ–‡ç®¡ç†å™¨æ¥åˆ›å»ºçº¿ç¨‹æ± ï¼Œsubmit()ç”¨æ¥æäº¤ä¸€ä¸ªçº¿ç¨‹ï¼Œresult() ç”¨æ¥è·å–è¿”å›å€¼ï¼Œreusltä¼šç­‰å¾…æœ‰ç»“æœçš„æ—¶å€™æ‰è¿”å›ï¼ç»“æœå¦‚ä¸‹</p><img src="/2024/09/11/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E5%A4%9A%E7%BA%BF%E7%A8%8B/%E5%A4%9A%E7%BA%BF%E7%A8%8B8.png" class=""><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">from</span> concurrent.futures <span class="hljs-keyword">import</span> ThreadPoolExecutor<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">task</span>(<span class="hljs-params">name</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;name&#125;</span> -step 1&quot;</span>)<br>    time.sleep(<span class="hljs-number">1</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;name&#125;</span> -step 2&quot;</span>)<br>    <br>    <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;name&#125;</span> complete&quot;</span><br>    <br><br><span class="hljs-keyword">with</span> ThreadPoolExecutor() <span class="hljs-keyword">as</span> executor:<br>    results = executor.<span class="hljs-built_in">map</span>(task, [<span class="hljs-string">&#x27;A&#x27;</span>,<span class="hljs-string">&#x27;B&#x27;</span>,<span class="hljs-string">&#x27;C&#x27;</span>])<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> results:<br>        <span class="hljs-built_in">print</span>(i)<br>    <br></code></pre></td></tr></table></figure><p>ä»£ç è§£é‡Šï¼šè¿™é‡Œæˆ‘ä»¬æ”¹é€ äº†ä½¿ç”¨map()æäº¤ï¼Œä¸»è¦ç”¨äºæˆ‘ä»¬åŒä¸€ä¸ªå‡½æ•°ï¼Œä¼ é€’ä¸åŒçš„å€¼è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¾ˆæ–¹ä¾¿ä¸éœ€è¦æ¯æ¬¡çš„submit,åªéœ€è¦è¿™æ ·å†™å°±å¯ä»¥è¾¾åˆ°åŒæ ·çš„æ•ˆæœã€‚è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><img src="/2024/09/11/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E5%A4%9A%E7%BA%BF%E7%A8%8B/%E5%A4%9A%E7%BA%BF%E7%A8%8B9.png" class=""><h3 id="ä»£ç è§£é‡Šä¸‹è½½å›¾ç‰‡åˆ©ç”¨çº¿ç¨‹æ± "><a href="#ä»£ç è§£é‡Šä¸‹è½½å›¾ç‰‡åˆ©ç”¨çº¿ç¨‹æ± " class="headerlink" title="ä»£ç è§£é‡Šä¸‹è½½å›¾ç‰‡åˆ©ç”¨çº¿ç¨‹æ± "></a>ä»£ç è§£é‡Šä¸‹è½½å›¾ç‰‡åˆ©ç”¨çº¿ç¨‹æ± </h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">from</span> concurrent.futures <span class="hljs-keyword">import</span> ThreadPoolExecutor<br><span class="hljs-keyword">from</span> urllib.request <span class="hljs-keyword">import</span> urlopen, Request<br><span class="hljs-keyword">import</span> os<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">download_img</span>(<span class="hljs-params">url</span>)<br>    headers = &#123;<br>        <span class="hljs-string">&quot;user-Agent&quot;</span>: <span class="hljs-string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.0.0 Safari/537.36&quot;</span><br>    &#125;<br>    <br>    site_url = Reuqest(url, headers=headers)<br>    <span class="hljs-keyword">with</span> urlopen(site_url) <span class="hljs-keyword">as</span> web_file:<br>        img_data = web_file.read()<br>    <br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> img_data:<br>        <span class="hljs-keyword">raise</span> Exception(<span class="hljs-string">f&quot;Error: download error from <span class="hljs-subst">&#123;url&#125;</span> &quot;</span>)<br>    <br>    file_name = os.path.basename(url)<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file_name, <span class="hljs-string">&quot;wb&quot;</span>) <span class="hljs-keyword">as</span> file:<br>        file.write(img_data)<br>    <br>    <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;Download image successfully, <span class="hljs-subst">&#123;url&#125;</span>&quot;</span><br>    <br><br><span class="hljs-keyword">with</span> ThreadPoolExecutor() <span class="hljs-keyword">as</span> executor:<br>    urls = &#123;<br>        <span class="hljs-string">&quot;demourl&quot;</span>,<br>        <span class="hljs-string">&quot;demourl&quot;</span>,<br>         <span class="hljs-string">&quot;demourl&quot;</span><br>    &#125;<br>    <br>    results = executor.<span class="hljs-built_in">map</span>(download_img, urls)<br>    <span class="hljs-keyword">for</span> res <span class="hljs-keyword">in</span> results:<br>        <span class="hljs-built_in">print</span>(res)<br></code></pre></td></tr></table></figure><p>ä»£ç è§£é‡Šï¼šè¿™é‡Œæˆ‘ä»¬æ˜¯å†™ä¸€ä¸ªä¸‹è½½å›¾ç‰‡çš„æ¡ˆä¾‹ï¼Œé¦–å…ˆæˆ‘ä»¬å¼•å…¥äº†urlopen, Requestè¿™é‡Œä¸å†è®²è¿°ç›¸å…³åº“çš„ä»‹ç»ï¼Œæ„Ÿå…´è¶£å¯ä»¥è‡ªè¡ŒæŸ¥è¯¢ï¼Œç„¶åæˆ‘ä»¬ä¹Ÿæ˜¯åšäº†å¯¹åº”çš„è¯·æ±‚ï¼Œç„¶åå­˜å‚¨åˆ°æœ¬åœ°ï¼Œè¿™é‡Œurls å¯ä»¥ä½¿ç”¨ä½ ä»¬æ‰¾åˆ°çš„å›¾ç‰‡ç½‘å€ï¼Œç„¶åæˆ‘ä»¬ä½¿ç”¨çº¿ç¨‹æ± æ¥å®ç°ä¸‹è½½å³å¯ï¼Œè¿™é‡Œå’Œä¸Šè¿°æ²¡å•¥åŒºåˆ«ï¼Œæ›´å¤šçš„æ˜¯æœ‰äº†å…·è±¡åŒ–çš„æ„Ÿè§‰ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æˆ‘ä»¬è¿™æ¬¡è™½ç„¶æ–‡å­—ä¼—å¤šï¼Œä½†æ˜¯æˆ‘ä»¬ä»çº¿ç¨‹å’Œè¿›ç¨‹çš„åŒºåˆ†åˆ°çº¿ç¨‹çš„æ¯ä¸€æ­¥è¿›é˜¶ï¼Œåˆ°é˜Ÿåˆ—ï¼Œé”ï¼Œçº¿ç¨‹æ± ç­‰å®Œå…¨è¦†ç›–æ‰€æœ‰çº¿ç¨‹ç›¸å…³çš„é‡è¦çŸ¥è¯†ç‚¹ï¼Œå¸Œæœ›å„ä½åŒå­¦éƒ½å¯ä»¥æŠŠæ¡è¿™äº›é‡è¦çš„çŸ¥è¯†ç‚¹ï¼Œå¯¹æˆ‘ä»¬çš„å·¥ä½œå°†ä¼šæœ‰å¾ˆå¤§çš„å¸®åŠ©!</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
      <category>Python å¸¸è§å‡½æ•°</category>
      
      <category>Python å¹¶å‘ç¼–ç¨‹å¤šçº¿ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Chromeè°ƒè¯•webview</title>
    <link href="/2024/09/10/chrome%E8%B0%83%E8%AF%95webview/"/>
    <url>/2024/09/10/chrome%E8%B0%83%E8%AF%95webview/</url>
    
    <content type="html"><![CDATA[<h1 id="å¦‚ä½•åœ¨Chromeä¸Šè°ƒè¯•WebView"><a href="#å¦‚ä½•åœ¨Chromeä¸Šè°ƒè¯•WebView" class="headerlink" title="å¦‚ä½•åœ¨Chromeä¸Šè°ƒè¯•WebView"></a>å¦‚ä½•åœ¨Chromeä¸Šè°ƒè¯•WebView</h1><p>æœ‰æ—¶å€™åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šé‡è§åœ¨appæˆ–è€…iosä¸Šé¢è·³è½¬wapé¡µé¢çš„éœ€æ±‚ï¼Œå¸¸è§åœ¨æ—¥å¸¸çš„æ´»åŠ¨é¡µé¢ç­‰ã€‚å¦‚æœè¦æ˜¯è¿™äº›é¡µé¢å‡ºäº†é—®é¢˜è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿä¾‹å¦‚æˆ‘ä»¬å¹³å¸¸çš„wapé¡µé¢å¯ä»¥é€šè¿‡è°ƒè¯•å·¥å…·æŸ¥çœ‹consoleæˆ–è€…debugç­‰æ¥æŸ¥çœ‹é—®é¢˜ï¼Œé‚£ä¹ˆè¿™æ ·çš„åœ¨æ‰‹æœºç«¯æ€ä¹ˆæ¥è°ƒè¯•å‘¢ï¼Ÿä¸‹é¢ä¸€èµ·å­¦ä¹ å§ï¼</p><h2 id="è¯¦ç»†è°ƒè¯•è¿‡ç¨‹"><a href="#è¯¦ç»†è°ƒè¯•è¿‡ç¨‹" class="headerlink" title="è¯¦ç»†è°ƒè¯•è¿‡ç¨‹"></a>è¯¦ç»†è°ƒè¯•è¿‡ç¨‹</h2><p>1.è¿™æ—¶å€™æˆ‘ä»¬åªéœ€è¦å°†æ‰‹æœºé€šè¿‡usbçº¿è¿æ¥åˆ°ç”µè„‘ä¸Šé¢ï¼Œç„¶åæ‰“å¼€chromeï¼Œè¾“å…¥ç½‘å€ï¼šchrome:&#x2F;&#x2F;inspect&#x2F;#devices  å°±å¯ä»¥çœ‹åˆ°ï¼š</p><img src="/2024/09/10/chrome%E8%B0%83%E8%AF%95webview/chrome%E8%B0%83%E8%AF%951.png" class=""><p>2.ç¨ç­‰ä¸€ä¸‹ï¼Œè¿™æ—¶å€™æ‰‹æœºä¼šæç¤ºæ˜¯å¦å…è®¸è°ƒè¯•ï¼Œé‚£ä¹ˆä½ ç‚¹å‡»å…è®¸è°ƒè¯•å³å¯ï¼ç„¶åå°±å¯ä»¥çœ‹åˆ°æ‰‹æœºçš„å‹å·æ­¤æ—¶è¿æ¥æˆåŠŸï¼</p><img src="/2024/09/10/chrome%E8%B0%83%E8%AF%95webview/chrome%E8%B0%83%E8%AF%952.png" class=""><p>3.æ‰“å¼€ä½ çš„appï¼Œæ‰“å¼€webviewæ­¤æ—¶å°±å¯ä»¥çœ‹åˆ°å¯¹åº”çš„ä¿¡æ¯ï¼</p><img src="/2024/09/10/chrome%E8%B0%83%E8%AF%95webview/chrome%E8%B0%83%E8%AF%953.png" class=""><p>4.æ­¤æ—¶ç‚¹å‡»inspect</p><img src="/2024/09/10/chrome%E8%B0%83%E8%AF%95webview/chrome%E8%B0%83%E8%AF%954.png" class=""><p>æ­¤æ—¶å°±çœ‹åˆ°äº†å’Œæˆ‘ä»¬å¹³å¸¸è°ƒè¯•ç½‘é¡µä¸€æ ·çš„ç•Œé¢ï¼Œé‚£ä¹ˆä½ å°±å¯ä»¥æŒ‰ç…§è°ƒè¯•ç½‘é¡µçš„æ–¹å¼æ¥è°ƒè¯•webviewäº†ï¼</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>é€šè¿‡è¿™ä¸ªè°ƒè¯•æ–¹å¼æˆ‘ä»¬å¯ä»¥è½»æ¾åº”å¯¹åœ¨æµ‹è¯•ä¸­é¢ä¸´çš„webviewçš„é—®é¢˜å®šä½ï¼Œæ–¹ä¾¿äº†æˆ‘ä»¬çš„å·¥ä½œï¼</p>]]></content>
    
    
    <categories>
      
      <category>æµ‹è¯•å¼€å‘å·¥å…·/æ¡†æ¶</category>
      
      <category>Chromeè°ƒè¯•</category>
      
      <category>Chromeè°ƒè¯•webview</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Chromeè°ƒè¯•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python reduceå‡½æ•°</title>
    <link href="/2024/09/04/pythonreduce%E5%87%BD%E6%95%B0/"/>
    <url>/2024/09/04/pythonreduce%E5%87%BD%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="Python-reduce-å‡½æ•°ä»‹ç»"><a href="#Python-reduce-å‡½æ•°ä»‹ç»" class="headerlink" title="Python reduce å‡½æ•°ä»‹ç»"></a>Python reduce å‡½æ•°ä»‹ç»</h1><p>reduce() å‡½æ•°æ˜¯ Python ä¸­çš„ä¸€ä¸ªå†…ç½®é«˜é˜¶å‡½æ•°ï¼Œäºå¯¹åºåˆ—ï¼ˆå¦‚åˆ—è¡¨ã€å…ƒç»„ç­‰ï¼‰ä¸­çš„å…ƒç´ è¿›è¡Œç´¯ç§¯æ“ä½œã€‚reduce() å‡½æ•°ä¼šå¯¹å‚æ•°åºåˆ—ä¸­å…ƒç´ è¿›è¡Œè¿­ä»£ï¼Œç”¨æŒ‡å®šçš„å‡½æ•°å¯¹ä¸¤ä¸ªå…ƒç´ ï¼ˆå·¦å‚æ•°å’Œå³å‚æ•°ï¼‰è¿›è¡ŒæŸç§æ“ä½œï¼Œç„¶åå°†ç»“æœå’Œåºåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªå…ƒç´ åšåŒæ ·çš„æ“ä½œï¼Œç›´åˆ°éå†å®Œåºåˆ—ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œæœ€ç»ˆè¿”å›ç´¯ç§¯çš„ç»“æœã€‚é‚£ä¹ˆä¸‹é¢å°±è¿›è¡Œä»£ç è§£é‡Š</p><h2 id="ä»£ç è§£é‡Š"><a href="#ä»£ç è§£é‡Š" class="headerlink" title="ä»£ç è§£é‡Š"></a>ä»£ç è§£é‡Š</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> reduce  <br>  <br><span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">x, y</span>):<br>    <span class="hljs-keyword">return</span> x + y<br><br>number_list = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>]<br>sum_info = reduce(add,number_list)<br><span class="hljs-built_in">print</span>(sum_info) <span class="hljs-comment"># 15</span><br></code></pre></td></tr></table></figure><p>ä»£ç è§£é‡Šï¼šæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°ï¼Œå®ç°äº†ä¸€ä¸ªç®€å•çš„åŠ æ³•è¿ç®—ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æƒ³ä¼ å…¥ä¸€ä¸ªæ•°å­—listæ±‚å’Œå‘¢ï¼Ÿå°±å¯ä»¥åƒä¸Šé¢æˆ‘ä»¬å†™çš„é€šè¿‡reduceå°†å‡½æ•°å’Œlistä¼ å…¥reduceå‡½æ•°ï¼Œé‚£ä¹ˆå°±å¯ä»¥å®ç°å°†å…¶listä¸­çš„æ•°å­—è¿›è¡Œæ±‚å’Œã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> reduce  <br>  <br><span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">x, y</span>):<br>    <span class="hljs-keyword">return</span> x + y<br><br>number_list = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>]<br>sum_info = reduce(add,number_list)<br><span class="hljs-built_in">print</span>(sum_info) <span class="hljs-comment"># 20</span><br></code></pre></td></tr></table></figure><p>ä»£ç è§£é‡Šï¼š è¿™ä¸ªå°±æ˜¯å°†åŠ æ³•æ”¹æˆäº†ä¹˜æ³•ä¾ç„¶é€‚ç”¨ï¼</p><h2 id="ä»£ç è§£é‡Š-lambdaå‡½æ•°"><a href="#ä»£ç è§£é‡Š-lambdaå‡½æ•°" class="headerlink" title="ä»£ç è§£é‡Š lambdaå‡½æ•°"></a>ä»£ç è§£é‡Š lambdaå‡½æ•°</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> reduce  <br><br>number_list = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]  <br>sum_info = reduce(<span class="hljs-keyword">lambda</span> x, y: x + y, number_list)  <br><span class="hljs-built_in">print</span>(sum_info)  <span class="hljs-comment"># è¾“å‡º: 15</span><br></code></pre></td></tr></table></figure><p>ä»£ç è§£é‡Šï¼š è™½ç„¶æˆ‘ä»¬ä¸Šé¢å®ç°äº†ä¸€ä¸ªåŠ æ³•ï¼Œä½†æ˜¯æ€»ä½“æ¯”è¾ƒè‡ƒè‚¿ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©lambdaå‡½æ•°å®ç°ä¸€è¡Œä»£ç æå®šï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°reduceä¾æ—§ä¼ å…¥äº†ä¸€ä¸ªå‡½æ•°å’Œä¸€ä¸ªlistã€‚lambda å‡½æ•° lambda x, y: x + y è¢«ç”¨ä½œ reduce() çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå®ƒæ¥å—ä¸¤ä¸ªå‚æ•°å¹¶è¿”å›å®ƒä»¬çš„å’Œï¼Œnumbers åˆ—è¡¨ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ç»™ reduce()ï¼Œreduce() å‡½æ•°ä¼šä¾æ¬¡å°†åˆ—è¡¨ä¸­çš„å…ƒç´ ç›¸åŠ ï¼Œæœ€ç»ˆè¿”å›æ€»å’Œã€‚ä¹˜æ³•æˆ–è€…å…¶ä»–éƒ½ä¸€æ ·åªéœ€æ”¹è¿ç®—ç¬¦å³å¯ï¼</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>1.reduce() å‡½æ•°åœ¨å¤„ç†å¤§å‹æ•°æ®é›†æ—¶å¯èƒ½ä¼šæ¯”è¾ƒæ…¢ï¼Œå› ä¸ºå®ƒéœ€è¦éå†æ•´ä¸ªåºåˆ—ã€‚</p><p>2.åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œä½¿ç”¨åˆ—è¡¨æ¨å¯¼å¼ã€å¾ªç¯æˆ–å…¶ä»–å†…ç½®å‡½æ•°ï¼ˆå¦‚ sum()ï¼‰å¯èƒ½æ›´åŠ ç›´è§‚å’Œé«˜æ•ˆã€‚</p><p>3.reduce() å‡½æ•°çš„ä¸»è¦ä¼˜åŠ¿åœ¨äºå…¶é€šç”¨æ€§å’Œçµæ´»æ€§ï¼Œå®ƒå…è®¸ä½ é€šè¿‡è‡ªå®šä¹‰å‡½æ•°æ¥æ‰§è¡Œå‡ ä¹ä»»ä½•ç±»å‹çš„ç´¯ç§¯æ“ä½œã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
      <category>Python å¸¸è§å‡½æ•°</category>
      
      <category>Python reduceå‡½æ•°</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pythonçš„propertyå±æ€§</title>
    <link href="/2024/09/02/python%E7%9A%84property%E5%B1%9E%E6%80%A7/"/>
    <url>/2024/09/02/python%E7%9A%84property%E5%B1%9E%E6%80%A7/</url>
    
    <content type="html"><![CDATA[<h1 id="Pythonçš„propertyå±æ€§è®²è§£"><a href="#Pythonçš„propertyå±æ€§è®²è§£" class="headerlink" title="Pythonçš„propertyå±æ€§è®²è§£"></a>Pythonçš„propertyå±æ€§è®²è§£</h1><p>å½“æˆ‘ä»¬åœ¨ç¼–ç¨‹ç±»çš„æ—¶å€™å‡å¦‚æˆ‘ä»¬æƒ³åšåˆ°ä¸€äº›é™åˆ¶ï¼Œä¾‹å¦‚è¿™ä¸ªç±»å‹çš„ä¸å…è®¸ä¿®æ”¹ï¼Œè™½ç„¶å¯ä»¥é€šè¿‡å‡½æ•°é€»è¾‘å¤„ç†è¿›è¡Œè¾¾åˆ°ç›®çš„ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡pythonè‡ªå¸¦çš„propertyå±æ€§åšåˆ°å“¦ï¼</p><h2 id="ä»£ç è§£é‡Š"><a href="#ä»£ç è§£é‡Š" class="headerlink" title="ä»£ç è§£é‡Š"></a>ä»£ç è§£é‡Š</h2><p>å‡å¦‚æˆ‘ä»¬è¦å†™ä¸€ä¸ªå…³äºé‡‘é¢çš„é™åˆ¶ï¼Œè¿™é‡Œé¦–å…ˆé™åˆ¶å…³äºå‡å¦‚æˆ‘ä»¬çš„å¯†ç è¿™é‡Œä¸å…è®¸æ›´æ”¹ï¼Œå½“ç„¶åªæ˜¯ä¸¾ä¾‹å­ï¼Œç°å®è‚¯å®šæ˜¯å¯ä»¥ä¿®æ”¹çš„ï¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">user_account</span>:<br><span class="hljs-meta">    @property</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">password</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;å¯†ç ï¼š123456&quot;</span><br><br>xiaoming = user_account()<br><span class="hljs-built_in">print</span>(xiaoming.password)<br></code></pre></td></tr></table></figure><p>ä»£ç è§£é‡Šï¼š è¿è¡Œä¸Šè¿°ä»£ç  æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªuser_accountç±»ï¼Œè¿™ä¸ªç±»é‡Œçš„ä¸€ä¸ªpasswordæ–¹æ³•é‡Œé¢retrun äº†ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå‡å¦‚æ­¤æ—¶è¿è¡Œç¨‹åºæˆ‘ä»¬ä¼šå‘ç°è¾“å‡ºäº†å¯†ç ï¼š123456ï¼Œä¸‹ä¸€æ­¥æˆ‘ä»¬è¿›è¡Œä¿®æ”¹æˆ‘ä»¬çš„passwordã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">user_account</span>:<br><span class="hljs-meta">    @property</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">password</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;å¯†ç ï¼š123456&quot;</span><br><br>xiaoming = user_account()<br><span class="hljs-built_in">print</span>(xiaoming.password)<br>xiaoming.password = <span class="hljs-string">&quot;å¯†ç ï¼š123456abcd&quot;</span><br><span class="hljs-built_in">print</span>(xiaoming.password)<br></code></pre></td></tr></table></figure><p>ä»£ç è§£é‡Šï¼šæ­¤æ—¶æˆ‘ä»¬æƒ³è¦å°† <code>å¯†ç ï¼š123456</code> æ”¹ä¸º <code>å¯†ç ï¼š123456abc</code>ã€‚ä½†æ˜¯è¿è¡Œç¨‹åºåæŠ¥é”™äº†ï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">ERROR!<br>å¯†ç ï¼š123456<br>Traceback (most recent call last):<br>  File &quot;&lt;main.py&gt;&quot;, line 8, in &lt;module&gt;<br>AttributeError: property &#x27;password&#x27; of &#x27;user_account&#x27; object has no setter<br></code></pre></td></tr></table></figure><p>æç¤ºæˆ‘ä»¬æ— æ³•ä¿®æ”¹è¿™ä¸ªå†…å­˜å˜é‡passwordï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆå‘¢ï¼Ÿæ˜¯å› ä¸ºæˆ‘ä»¬å¦‚æœä½¿ç”¨äº†@property å±æ€§æ­¤æ—¶è¿™ä¸ªå˜é‡å°±å˜æˆäº†åªè¯»çš„ï¼Œä¸å¯ä»¥è¢«ä¿®æ”¹ï¼Œè¿™æ ·æˆ‘ä»¬å°±åšåˆ°äº†æ— æ³•ä¿®æ”¹å¯†ç çš„è¦æ±‚ï¼Œä½†æ˜¯ç°å®æ˜¯éœ€è¦ä¿®æ”¹çš„ï¼Œæˆ‘ä»¬åˆä¸æƒ³éšæ„ä¿®æ”¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å¼•è¿›æ–°çš„æ¦‚å¿µï¼</p><h2 id="setterã€getter-å’Œ-deleter-æ–¹æ³•"><a href="#setterã€getter-å’Œ-deleter-æ–¹æ³•" class="headerlink" title="setterã€getter å’Œ deleter æ–¹æ³•"></a>setterã€getter å’Œ deleter æ–¹æ³•</h2><p>é‚£ä¹ˆåœ¨è¿™é‡Œæˆ‘ä»¬æœ‰setter, getter, deleteræ–¹æ³•ï¼Œå…¶ä¸­setter æ˜¯åœ¨@propertyå±æ€§é‡Œé¢å¯ä»¥è¿›è¡Œä¿®æ”¹ï¼Œ getteræ˜¯è·å–ï¼Œ deleteræ˜¯åˆ é™¤ï¼Œå¯èƒ½å„ä½åŒå­¦å¬èµ·æ¥è¿˜æ˜¯æ™•æ™•çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ç›´æ¥è¿›å…¥æ­£é¢˜ä»£ç è§£æƒ‘ï¼</p><h3 id="ä»£ç è§£é‡Š-getter"><a href="#ä»£ç è§£é‡Š-getter" class="headerlink" title="ä»£ç è§£é‡Š getter"></a>ä»£ç è§£é‡Š getter</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">user_account</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>            self._password = â€˜åˆå§‹å¯†ç  <span class="hljs-number">123456</span>â€™<br>     <br><span class="hljs-meta">    @property</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">password</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å¦‚æœæ‚¨æ˜¯é¦–æ¬¡è®¿é—®ç³»ç»Ÿï¼Œåˆå§‹å¯†ç æ˜¯123456ï¼Œè¯·æ‚¨åŠæ—¶ä¿®æ”¹æ‚¨çš„å¯†ç ï¼Œé¿å…è¢«ç›—ï¼&quot;</span>)<br>        <span class="hljs-keyword">return</span> self._password<br> <br><span class="hljs-meta">    @password.setter</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">password</span>(<span class="hljs-params">self, value</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å½“å‰æ‚¨æ­£åœ¨è¿›è¡Œä¿®æ”¹å¯†ç çš„æ“ä½œï¼Œè¯·æ³¨æ„å‘¨å›´å®‰å…¨ï¼&quot;</span>)<br>        self._password = value<br> <br><span class="hljs-meta">    @password.deleter</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">password</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å½“å‰æ‚¨æ­£åœ¨è¿›è¡Œåˆ é™¤å¯†ç çš„æ“ä½œï¼Œè¯·æ…é‡ï¼&quot;</span>)<br>        <span class="hljs-keyword">del</span> self._password<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;del complite&#x27;</span>)<br><br><br>xiaoming = user_account()<br>xiaoming.password  <span class="hljs-comment"># å¦‚æœæ‚¨æ˜¯é¦–æ¬¡è®¿é—®ç³»ç»Ÿï¼Œåˆå§‹å¯†ç æ˜¯123456ï¼Œè¯·æ‚¨åŠæ—¶ä¿®æ”¹æ‚¨çš„å¯†ç ï¼Œé¿å…è¢«ç›—ï¼</span><br><br></code></pre></td></tr></table></figure><p>ä»£ç è§£é‡Šï¼š æ­¤å¤„æˆ‘ä»¬å£°æ˜äº†ä¸€ä¸ªç±»ï¼Œæ­¤æ—¶å†™äº†å››ä¸ªæ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªæ˜¯åˆå§‹åŒ–äº†æˆ‘ä»¬çš„å¯†ç ï¼Œç¬¬è€Œä¸ªæ˜¯å’Œä¸Šé¢ä¸€æ ·çš„å£°æ˜äº†@propertyå±æ€§ï¼Œç¬¬äºŒä¸ªæ˜¯setterï¼Œ ç¬¬ä¸‰ä¸ªæ˜¯deleter æ–¹æ³•ã€‚</p><p>æ­¤å¤„æˆ‘ä»¬è¦è¯´çš„æ˜¯getteræ–¹æ³•ï¼Œæˆ‘ä»¬ä¸‹é¢å†™çš„</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">xiaoming = user_account()<br>xiaoming.password  <span class="hljs-comment"># getter æ–¹æ³•</span><br></code></pre></td></tr></table></figure><p>å°±æ˜¯ä¸€ä¸ªgetteræ–¹æ³•ç”¨æ¥è·å–æˆ‘ä»¬çš„å¯†ç ä¿¡æ¯ã€‚</p><h3 id="ä»£ç è§£é‡Š-setter"><a href="#ä»£ç è§£é‡Š-setter" class="headerlink" title="ä»£ç è§£é‡Š setter"></a>ä»£ç è§£é‡Š setter</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">user_account</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>            self._password = â€˜åˆå§‹å¯†ç  <span class="hljs-number">123456</span>â€™<br>     <br><span class="hljs-meta">    @property</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">password</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å¦‚æœæ‚¨æ˜¯é¦–æ¬¡è®¿é—®ç³»ç»Ÿï¼Œåˆå§‹å¯†ç æ˜¯123456ï¼Œè¯·æ‚¨åŠæ—¶ä¿®æ”¹æ‚¨çš„å¯†ç ï¼Œé¿å…è¢«ç›—ï¼&quot;</span>)<br>        <span class="hljs-keyword">return</span> self._password<br> <br><span class="hljs-meta">    @password.setter</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">password</span>(<span class="hljs-params">self, value</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å½“å‰æ‚¨æ­£åœ¨è¿›è¡Œä¿®æ”¹å¯†ç çš„æ“ä½œï¼Œè¯·æ³¨æ„å‘¨å›´å®‰å…¨ï¼&quot;</span>)<br>        self._password = value<br> <br><span class="hljs-meta">    @password.deleter</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">password</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å½“å‰æ‚¨æ­£åœ¨è¿›è¡Œåˆ é™¤å¯†ç çš„æ“ä½œï¼Œè¯·æ…é‡ï¼&quot;</span>)<br>        <span class="hljs-keyword">del</span> self._password<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;del complite&#x27;</span>)<br><br><br>xiaoming = user_account()<br>xiaoming.password  <br><br>xiaoming.password = <span class="hljs-string">&quot;123456abc&quot;</span> <span class="hljs-comment"># setter</span><br><span class="hljs-built_in">print</span>(xiaoming.password) <br><br><span class="hljs-comment"># è¾“å‡ºç»“æœ</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">å½“å‰æ‚¨æ­£åœ¨è¿›è¡Œä¿®æ”¹å¯†ç çš„æ“ä½œï¼Œè¯·æ³¨æ„å‘¨å›´å®‰å…¨ï¼</span><br><span class="hljs-string">å¦‚æœæ‚¨æ˜¯é¦–æ¬¡è®¿é—®ç³»ç»Ÿï¼Œåˆå§‹å¯†ç æ˜¯123456ï¼Œè¯·æ‚¨åŠæ—¶ä¿®æ”¹æ‚¨çš„å¯†ç ï¼Œé¿å…è¢«ç›—ï¼</span><br><span class="hljs-string">123456abc</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><br></code></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„å°±æ˜¯setteræ–¹æ³•ï¼Œå¯ä»¥å‘ç°æˆ‘ä»¬åœ¨æœ€å¼€å§‹çš„æ— æ³•ä¿®æ”¹å¯†ç ï¼Œåˆ°ç°åœ¨å¯ä»¥ä¿®æ”¹æˆåŠŸäº†å°±æ˜¯æˆ‘ä»¬çš„setteræ–¹æ³•å®ç°çš„ï¼</p><h3 id="ä»£ç è§£é‡Š-deleter"><a href="#ä»£ç è§£é‡Š-deleter" class="headerlink" title="ä»£ç è§£é‡Š deleter"></a>ä»£ç è§£é‡Š deleter</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">user_account</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>            self._password = â€˜åˆå§‹å¯†ç  <span class="hljs-number">123456</span>â€™<br>     <br><span class="hljs-meta">    @property</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">password</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å¦‚æœæ‚¨æ˜¯é¦–æ¬¡è®¿é—®ç³»ç»Ÿï¼Œåˆå§‹å¯†ç æ˜¯123456ï¼Œè¯·æ‚¨åŠæ—¶ä¿®æ”¹æ‚¨çš„å¯†ç ï¼Œé¿å…è¢«ç›—ï¼&quot;</span>)<br>        <span class="hljs-keyword">return</span> self._password<br> <br><span class="hljs-meta">    @password.setter</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">password</span>(<span class="hljs-params">self, value</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å½“å‰æ‚¨æ­£åœ¨è¿›è¡Œä¿®æ”¹å¯†ç çš„æ“ä½œï¼Œè¯·æ³¨æ„å‘¨å›´å®‰å…¨ï¼&quot;</span>)<br>        self._password = value<br> <br><span class="hljs-meta">    @password.deleter</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">password</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å½“å‰æ‚¨æ­£åœ¨è¿›è¡Œåˆ é™¤å¯†ç çš„æ“ä½œï¼Œè¯·æ…é‡ï¼&quot;</span>)<br>        <span class="hljs-keyword">del</span> self._password<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;åˆ é™¤å¯†ç æˆåŠŸï¼&#x27;</span>)<br><br><br>xiaoming = user_account()<br>xiaoming.password  <span class="hljs-comment"># getter æ–¹æ³•</span><br><br>xiaoming.password = <span class="hljs-string">&quot;123456abc&quot;</span><br><span class="hljs-built_in">print</span>(xiaoming.password) <span class="hljs-comment">#setter æ–¹æ³•</span><br><br><span class="hljs-keyword">del</span> xiaoming.password<br><span class="hljs-built_in">print</span>(xiaoming.password) <span class="hljs-comment"># deleteræ–¹æ³• å‡ºé”™ æç¤ºæ— å½“å‰å˜é‡ä¿¡æ¯å› ä¸ºå·²ç»åˆ é™¤</span><br><br><span class="hljs-comment"># è¾“å‡ºä¿¡æ¯</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">å¦‚æœæ‚¨æ˜¯é¦–æ¬¡è®¿é—®ç³»ç»Ÿï¼Œåˆå§‹å¯†ç æ˜¯123456ï¼Œè¯·æ‚¨åŠæ—¶ä¿®æ”¹æ‚¨çš„å¯†ç ï¼Œé¿å…è¢«ç›—ï¼</span><br><span class="hljs-string">å½“å‰æ‚¨æ­£åœ¨è¿›è¡Œä¿®æ”¹å¯†ç çš„æ“ä½œï¼Œè¯·æ³¨æ„å‘¨å›´å®‰å…¨ï¼</span><br><span class="hljs-string">å¦‚æœæ‚¨æ˜¯é¦–æ¬¡è®¿é—®ç³»ç»Ÿï¼Œåˆå§‹å¯†ç æ˜¯123456ï¼Œè¯·æ‚¨åŠæ—¶ä¿®æ”¹æ‚¨çš„å¯†ç ï¼Œé¿å…è¢«ç›—ï¼</span><br><span class="hljs-string">123456abc</span><br><span class="hljs-string">å½“å‰æ‚¨æ­£åœ¨è¿›è¡Œåˆ é™¤å¯†ç çš„æ“ä½œï¼Œè¯·æ…é‡ï¼</span><br><span class="hljs-string">åˆ é™¤å¯†ç æˆåŠŸï¼</span><br><span class="hljs-string">å¦‚æœæ‚¨æ˜¯é¦–æ¬¡è®¿é—®ç³»ç»Ÿï¼Œåˆå§‹å¯†ç æ˜¯123456ï¼Œè¯·æ‚¨åŠæ—¶ä¿®æ”¹æ‚¨çš„å¯†ç ï¼Œé¿å…è¢«ç›—ï¼</span><br><span class="hljs-string">ERROR!</span><br><span class="hljs-string">Traceback (most recent call last):</span><br><span class="hljs-string">  File &quot;&lt;main.py&gt;&quot;, line 29, in &lt;module&gt;</span><br><span class="hljs-string">  File &quot;&lt;main.py&gt;&quot;, line 8, in password</span><br><span class="hljs-string">AttributeError: &#x27;user_account&#x27; object has no attribute &#x27;_password&#x27;</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br></code></pre></td></tr></table></figure><p>é‚£ä¹ˆä¸Šé¢å°±æ˜¯deleter æ–¹æ³•ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆ‘ä»¬è¿›è¡Œäº†åˆ é™¤å¯†ç çš„æ“ä½œï¼Œè¿™æ ·çš„è¯æˆ‘ä»¬å°±å®Œæˆäº†æ‰€æœ‰çš„ä¿¡æ¯ã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>ç”±æ­¤å¯è§ä½¿ç”¨å±æ€§çš„ä¸€äº›å¥½å¤„ä¾‹å¦‚ï¼š</p><p>1.å°è£…ï¼šå±æ€§æä¾›äº†ä¸€ç§å°è£…æ•°æ®çš„æ–¹å¼ï¼Œéšè—äº†æ•°æ®å®ç°çš„ç»†èŠ‚ï¼Œåªæš´éœ²è®¿é—®å’Œä¿®æ”¹æ•°æ®çš„æ¥å£ã€‚</p><p>2.éªŒè¯ï¼šåœ¨è®¾ç½®å±æ€§å€¼æ—¶ï¼Œä½ å¯ä»¥æ‰§è¡ŒéªŒè¯é€»è¾‘ï¼Œç¡®ä¿æ•°æ®çš„æœ‰æ•ˆæ€§ã€‚</p><p>3.çµæ´»æ€§ï¼šå±æ€§çš„å®ç°å¯ä»¥æ›´æ”¹ï¼Œè€Œä¸éœ€è¦æ›´æ”¹ä½¿ç”¨è¿™äº›å±æ€§çš„ä»£ç ã€‚</p><p>4.æ¥å£ä¸€è‡´æ€§ï¼šé€šè¿‡ä½¿ç”¨å±æ€§ï¼Œä½ å¯ä»¥è®©ç±»çš„æ¥å£çœ‹èµ·æ¥æ›´åƒæ˜¯æ•°æ®è®¿é—®ï¼Œè€Œä¸æ˜¯æ–¹æ³•è°ƒç”¨ï¼Œè¿™å¯¹äºä¸ç†Ÿæ‚‰Pythonçš„å¼€å‘è€…æ¥è¯´å¯èƒ½æ›´ç›´è§‚ã€‚</p><p>ä½†æ˜¯ï¼Œä¹Ÿæ˜¯å­˜åœ¨ä¸€äº›å¼Šç«¯é—®é¢˜ä¾‹å¦‚ï¼š</p><p>1.è™½ç„¶å±æ€§æä¾›äº†ä¸€ç§å¼ºå¤§çš„æ–¹å¼æ¥æ§åˆ¶æ•°æ®çš„è®¿é—®ï¼Œä½†è¿‡åº¦ä½¿ç”¨å¯èƒ½ä¼šä½¿ä»£ç éš¾ä»¥ç†è§£å’Œç»´æŠ¤ã€‚</p><p>2.åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç›´æ¥ä½¿ç”¨å…¬æœ‰å˜é‡æˆ–ç§æœ‰å˜é‡åŠ æ–¹æ³•è®¿é—®å¯èƒ½æ›´ä¸ºç®€å•å’Œç›´è§‚ã€‚</p><p>3.åœ¨è®¾è®¡ç±»çš„æ¥å£æ—¶ï¼Œè¦ä»”ç»†è€ƒè™‘å“ªäº›æ•°æ®åº”è¯¥æš´éœ²ä¸ºå±æ€§ï¼Œå“ªäº›åº”è¯¥ä¿æŒç§æœ‰ã€‚</p><p>é‚£ä¹ˆï¼Œå„ä½åŒå­¦ä½ æŒæ¡äº†å—ï¼Ÿ</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
      <category>Python å¸¸è§å‡½æ•°</category>
      
      <category>Python çš„propertyå±æ€§</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pythonå‡½æ•°æŒ‡å®šå¿…é¡»å¸¦å½¢å‚ä¼ é€’</title>
    <link href="/2024/08/28/python%E6%8C%87%E5%AE%9A%E5%8F%82%E6%95%B0/"/>
    <url>/2024/08/28/python%E6%8C%87%E5%AE%9A%E5%8F%82%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="Python-å‡½æ•°æŒ‡å®šå‚æ•°å¿…é¡»å¸¦å½¢å‚ä¼ é€’"><a href="#Python-å‡½æ•°æŒ‡å®šå‚æ•°å¿…é¡»å¸¦å½¢å‚ä¼ é€’" class="headerlink" title="Python å‡½æ•°æŒ‡å®šå‚æ•°å¿…é¡»å¸¦å½¢å‚ä¼ é€’"></a>Python å‡½æ•°æŒ‡å®šå‚æ•°å¿…é¡»å¸¦å½¢å‚ä¼ é€’</h1><p>å¯èƒ½å¤§å®¶çœ‹åˆ°è¿™ä¸ªæ ‡é¢˜å¾ˆéš¾ç†è§£æ˜¯ä»€ä¹ˆæ„æ€ï¼Œè¿™é‡Œç»™å¤§å®¶è§£é‡Šä¸€ä¸‹ï¼Œå°±æ˜¯æˆ‘ä»¬å®šä¹‰å‡½æ•°çš„æ—¶å€™ï¼Œä¼šç”¨å½¢å‚çš„è®¾ç½®ï¼Œæœ‰æ—¶å€™å‘¢ï¼Œæˆ‘ä»¬åªéœ€è¦æŒ‰ç…§é¡ºåºä¼ é€’å€¼å°±è¡Œï¼Œä¸éœ€è¦åœ¨ä¼ é€’çš„æ—¶å€™æŒ‡å®šå½¢å‚çš„åå­—ï¼Œä½†æ˜¯æœ‰æ—¶å€™å…¬å¸è¦æ±‚å¿…é¡»å¸¦ï¼Œä½†æ˜¯æœ‰çš„äººå¿˜è®°äº†æ€ä¹ˆåŠï¼Ÿé‚£ä¹ˆpythonå…¶å®æ˜¯å¯ä»¥åšåˆ°ä¸ä¼ é€’å°±æŠ¥é”™çš„ï¼Œé‚£ä¹ˆä¸€èµ·æ¥çœ‹çœ‹æ€ä¹ˆå®ç°å§ï¼</p><h2 id="ä»£ç è§£é‡Š"><a href="#ä»£ç è§£é‡Š" class="headerlink" title="ä»£ç è§£é‡Š"></a>ä»£ç è§£é‡Š</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">test</span>(<span class="hljs-params">t,y</span>):<br>    <span class="hljs-keyword">return</span> t,y<br>    <br>result=test(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>)<br><span class="hljs-built_in">print</span>(result)  <span class="hljs-comment"># (1, 2)</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œå‘¢å°±æ˜¯è™½ç„¶æˆ‘ä»¬è®¾ç½®äº†å½¢å‚t, y ä½†æ˜¯ä½ ä¼ é€’çš„æ—¶å€™å¯ä»¥åªæ˜¯æŒ‰ç…§é¡ºåºå³å¯ï¼Œæ— éœ€ä½¿ç”¨test(t&#x3D;1,y&#x3D;2)çš„æ–¹å¼ï¼Œé‚£ä¹ˆpythonå¦‚ä½•å¼ºåˆ¶ä½¿ç”¨å‘¢ï¼Ÿ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">test</span>(<span class="hljs-params">*,t,y</span>):<br>    <span class="hljs-keyword">return</span> t,y<br>    <br>result=test(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>)<br><span class="hljs-built_in">print</span>(result)<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶ä½ å‘ç°ï¼Œæˆ‘åœ¨å‡½æ•°å®šä¹‰çš„æ—¶å€™åŠ äº†ä¸€ä¸ª*,é‚£ä¹ˆpython å°±ä¼šè¦å»ä½ å¿…é¡»åœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™å¸¦ä¸Šå½¢å‚è¦ä¸ç„¶å°±æŠ¥é”™ï¼Œè¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">ERROR!<br>Traceback (most recent call last):<br>  File &quot;&lt;main.py&gt;&quot;, line 4, in &lt;module&gt;<br>TypeError: test() takes 0 positional arguments but 2 were given<br><br></code></pre></td></tr></table></figure><p>é‚£ä¹ˆæˆ‘ä»¬æ¥ä¿®æ”¹è¿™ä¸ªï¼Œè®©å…¶æ­£ç¡®è¿è¡Œï¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">test</span>(<span class="hljs-params">*,t,y</span>):<br>    <span class="hljs-keyword">return</span> t,y<br>    <br>result=test(t=<span class="hljs-number">1</span>,y=<span class="hljs-number">2</span>)<br><span class="hljs-built_in">print</span>(result) <span class="hljs-comment"># (1, 2)</span><br></code></pre></td></tr></table></figure><p>é‚£ä¹ˆï¼Œè¿™æ ·å°±å¯ä»¥äº†ï¼pythonå®ç°èµ·æ¥å°±æ˜¯è¿™ä¹ˆçš„ç®€å•æ–¹ä¾¿ï¼</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>åœ¨æˆ‘ä»¬å¹³å¸¸è¦æ±‚ä¸­å¯èƒ½ä¼šæœ‰ç±»ä¼¼çš„ï¼Œå¦‚æœä½ çŸ¥é“äº†è¿™ä¸ªï¼Œå°±æ— éœ€åœ¨æ³¨é‡Šä¸­å¼ºè°ƒç¼–ç é£æ ¼ï¼Œè¿™æ ·å°±å¯ä»¥å¼ºåˆ¶å…¶ä»–åŒäº‹æŒ‰ç…§è¿™ä¸ªæ–¹å¼å®ç°ï¼</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
      <category>Python å¸¸è§å‡½æ•°</category>
      
      <category>Python å‡½æ•°æŒ‡å®šå¿…é¡»å¸¦å½¢å‚ä¼ é€’</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Jmeterä¹‹Jdbcè¯·æ±‚</title>
    <link href="/2024/08/20/jdbc%E8%AF%B7%E6%B1%82jmeter/"/>
    <url>/2024/08/20/jdbc%E8%AF%B7%E6%B1%82jmeter/</url>
    
    <content type="html"><![CDATA[<h1 id="Jmeterä¹‹Jdbcå¹¶å‘è¯·æ±‚"><a href="#Jmeterä¹‹Jdbcå¹¶å‘è¯·æ±‚" class="headerlink" title="Jmeterä¹‹Jdbcå¹¶å‘è¯·æ±‚"></a>Jmeterä¹‹Jdbcå¹¶å‘è¯·æ±‚</h1><p>åœ¨Jmeterä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¤šç§è¯·æ±‚åè®®ï¼Œå…¶ä¸­å°±åŒ…å«æˆ‘ä»¬çš„æ•°æ®åº“çš„å‹åŠ›æµ‹è¯•ï¼Œé‚£ä¹ˆä»Šå¤©å°±ä»‹ç»å¦‚ä½•é€šè¿‡Jmeterè¿æ¥mysqlè¿›è¡Œæµ‹è¯•ã€‚</p><h2 id="ä¸‹è½½jdbc-è¿æ¥driver"><a href="#ä¸‹è½½jdbc-è¿æ¥driver" class="headerlink" title="ä¸‹è½½jdbc è¿æ¥driver"></a>ä¸‹è½½jdbc è¿æ¥driver</h2><p>é¦–å…ˆæ˜¯æŸ¥çœ‹è‡ªå·±mysqlçš„ç‰ˆæœ¬ï¼Œæˆ‘çš„æ˜¯8.0.19ï¼Œæ‰§è¡Œå‘½ä»¤select version() å³å¯æŸ¥çœ‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä»ç½‘ä¸Šä¸‹è½½æˆ‘ä»¬çš„driverã€‚</p><p>ç„¶åå°†æˆ‘ä»¬ä¸‹è½½å¥½çš„driveræ”¾åˆ°jmeterçš„libä¸‹çš„extä¸­ã€‚</p><img src="/2024/08/20/jdbc%E8%AF%B7%E6%B1%82jmeter/jdbc.png" class=""><h2 id="æ·»åŠ jdbcé…ç½®åŸä»¶"><a href="#æ·»åŠ jdbcé…ç½®åŸä»¶" class="headerlink" title="æ·»åŠ jdbcé…ç½®åŸä»¶"></a>æ·»åŠ jdbcé…ç½®åŸä»¶</h2><img src="/2024/08/20/jdbc%E8%AF%B7%E6%B1%82jmeter/config.png" class=""><h2 id="æ·»åŠ jdbcè¯·æ±‚"><a href="#æ·»åŠ jdbcè¯·æ±‚" class="headerlink" title="æ·»åŠ jdbcè¯·æ±‚"></a>æ·»åŠ jdbcè¯·æ±‚</h2><img src="/2024/08/20/jdbc%E8%AF%B7%E6%B1%82jmeter/request.png" class=""><h2 id="æ·»åŠ ç»“æœæ ‘"><a href="#æ·»åŠ ç»“æœæ ‘" class="headerlink" title="æ·»åŠ ç»“æœæ ‘"></a>æ·»åŠ ç»“æœæ ‘</h2><img src="/2024/08/20/jdbc%E8%AF%B7%E6%B1%82jmeter/result.png" class=""><p>è¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆ‘ä»¬è¿™è¾¹è¯·æ±‚æˆåŠŸäº†ï¼</p><h2 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h2><p>ä¸€äº›æ³¨æ„çš„é…ç½®é¡¹æ”¾åœ¨è¿™é‡Œ</p><p>DatabaseUrl:jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;ui_auto?useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8&amp;serverTimezone&#x3D;UTC</p><p>Jdbc Driver class: com.mysql.jdbc.Driver</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>é€šè¿‡ä¸Šè¿°çš„è®²è§£æˆ‘ç›¸ä¿¡åŒå­¦å·²ç»ä¼šäº†è¿æ¥mysqlï¼Œé‚£ä¹ˆå…¶ä»–çš„æ•°æ®åº“ä¹Ÿæ˜¯ä¸€æ ·çš„é“ç†ï¼</p>]]></content>
    
    
    <categories>
      
      <category>æµ‹è¯•å¼€å‘å·¥å…·/æ¡†æ¶</category>
      
      <category>Jmeter</category>
      
      <category>Jmeterä¹‹Jdbcè¯·æ±‚</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Jmeter</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ‹›è˜</title>
    <link href="/2024/08/17/%E6%8B%9B%E8%81%98/"/>
    <url>/2024/08/17/%E6%8B%9B%E8%81%98/</url>
    
    <content type="html"><![CDATA[<h1 id="æœ¬å…¬å¸æ‹›è˜æµ‹è¯•èŒä½"><a href="#æœ¬å…¬å¸æ‹›è˜æµ‹è¯•èŒä½" class="headerlink" title="æœ¬å…¬å¸æ‹›è˜æµ‹è¯•èŒä½"></a>æœ¬å…¬å¸æ‹›è˜æµ‹è¯•èŒä½</h1><p>èŒä½æè¿°ï¼š<br>1ã€ç‹¬ç«‹å®Œæˆæ‰€è´Ÿè´£ä¸šåŠ¡çš„æµ‹è¯•ç”¨ä¾‹è®¾è®¡ã€æµ‹è¯•æ–¹æ¡ˆçš„è®¾è®¡å’ŒæŒ‡å®šã€‚<br>2ã€é’ˆå¯¹å¤æ‚æ¨¡å—ï¼Œæ·±å…¥äº†è§£ä»£ç é€»è¾‘ï¼Œç†Ÿç»ƒè¿ç”¨ç›¸å…³å·¥å…·å’Œæ–¹æ³•ï¼Œæ‰¿æ‹…å¹¶èƒ½ç‹¬ç«‹å®Œæˆäº§å“çš„åŠŸèƒ½ã€æ¥å£ã€æ€§èƒ½ä»¥åŠå…¶ä»–å„ç§æµ‹è¯•ã€‚<br>3ã€å‚ä¸å®Œæ•´çš„äº§å“è¿­ä»£æµç¨‹ï¼Œé™¤æ­£å¸¸çš„æµ‹è¯•å·¥ä½œå¤–ï¼Œåœ¨éœ€æ±‚&#x2F;äº¤äº’è¯„å®¡ä»¥åŠä¸Šçº¿æµç¨‹ä¸­èµ·åˆ°è´¨é‡ä¿éšœçš„ä½œç”¨ã€‚<br>4ã€æ ¹æ®äº§å“å’Œé¡¹ç›®ç‰¹ç‚¹ï¼Œæå‡ºã€è®¾è®¡å’Œå®æ–½åˆç†çš„è‡ªåŠ¨åŒ–è§£å†³æ–¹æ¡ˆï¼Œæé«˜æµ‹è¯•æ•ˆç‡ã€‚<br>5ã€ç‹¬ç«‹å®Œæˆæµ‹è¯•ä»»åŠ¡çš„è®¡åˆ’å®‰æ’ã€æ²Ÿé€šåè°ƒå’Œé¡¹ç›®è¿›åº¦æ±‡æŠ¥ã€‚<br>6ã€ç»å¸¸æ€§çš„å¯¹å·¥ä½œä¸­çš„é—®é¢˜ã€çŸ¥è¯†ç‚¹è¿›è¡Œæ€»ç»“ï¼ŒåŒæ—¶èƒ½å¤Ÿäº†è§£ä¸šç•Œå‰æ²¿çš„æµ‹è¯•æŠ€æœ¯ï¼Œå¹¶åœ¨å®é™…é¡¹ç›®ä¸­å®è·µå’Œæ¨å¹¿ã€‚<br>èŒä½è¦æ±‚ï¼š<br>1ã€2å¹´ä»¥ä¸Šä¿¡è´·æˆ–é‡‘èè¡Œä¸šAPPå’ŒH5æµ‹è¯•ç»éªŒã€‚<br>2ã€ç†Ÿæ‚‰Pythonè¯­è¨€ï¼Œå¯ä»¥ç†Ÿç»ƒç¼–å†™è‡ªåŠ¨åŒ–å’Œæ€§èƒ½æµ‹è¯•è„šæœ¬ã€‚<br>3ã€ç²¾é€šå¹¶ä¸”èƒ½ç‹¬ç«‹æ­å»ºå’Œä½¿ç”¨è‡³å°‘ä¸€ç§å¼€æºæµ‹è¯•å·¥å…·æˆ–æ¡†æ¶ï¼Œå¦‚UIAutomatorã€Appiumã€JMeterç­‰ã€‚<br>4ã€è‹±è¯­è¯»å†™èƒ½åŠ›å¼ºï¼Œåšè¿‡æµ·å¤–é¡¹ç›®ä¼˜å…ˆã€‚<br>5ã€æœ‰è´£ä»»å¿ƒï¼Œèƒ½æ‰¿æ‹…å‹åŠ›ï¼Œèƒ½å¤Ÿç‹¬ç«‹è§£å†³é—®é¢˜ï¼Œæœ‰åˆ›æ–°æƒ³æ³•ã€‚</p><p>boss æŠ•é€’åœ°å€ï¼š<a href="https://www.zhipin.com/job_detail/c3e5dd3ae9ce3c981HNy0t-9EVZY.html?ka=hot-job-2">https://www.zhipin.com/job_detail/c3e5dd3ae9ce3c981HNy0t-9EVZY.html?ka=hot-job-2</a></p>]]></content>
    
    
    <categories>
      
      <category>æ‹›è˜</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>æ‹›è˜</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pythonä¸Šä¸‹æ–‡ç®¡ç†å™¨</title>
    <link href="/2024/08/15/python%E4%B8%8A%E4%B8%8B%E6%96%87%E7%AE%A1%E7%90%86%E5%99%A8/"/>
    <url>/2024/08/15/python%E4%B8%8A%E4%B8%8B%E6%96%87%E7%AE%A1%E7%90%86%E5%99%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="Python-ä¸Šä¸‹æ–‡ç®¡ç†å™¨"><a href="#Python-ä¸Šä¸‹æ–‡ç®¡ç†å™¨" class="headerlink" title="Python ä¸Šä¸‹æ–‡ç®¡ç†å™¨"></a>Python ä¸Šä¸‹æ–‡ç®¡ç†å™¨</h1><p>å¤§å®¶éƒ½ç”¨è¿‡Pythonä¸­çš„withè¯­å¥ï¼Œä½¿ç”¨withè¯­å¥å…¶å®å°±æ˜¯ä¸€ä¸ªä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œé‚£ä¹ˆä»–ä¸»è¦åšäº†ä¸€ä¸ªåœ¨æ‰§è¡ŒæŸä¸ªåŠ¨ä½œå‰åšäº†ä¸€ä»¶äº‹æƒ…ï¼Œåšå®Œäº†è¿™ä¸ªäº‹æƒ…ä¹‹ååˆåšäº†å¦å¤–ä¸€ä»¶äº‹æƒ…ã€‚è™½ç„¶å¬èµ·æ¥æ¯”è¾ƒéš¾æ‡‚ï¼Œä½†æ˜¯å¤§ä½“æ„æ€æ˜¯è¿™æ ·çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä¸€èµ·ç”¨ä»£ç æ¥çœ‹çœ‹æ˜¯æ€ä¹ˆå›äº‹å§ï¼</p><h2 id="ä»£ç è§£é‡Š"><a href="#ä»£ç è§£é‡Š" class="headerlink" title="ä»£ç è§£é‡Š"></a>ä»£ç è§£é‡Š</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">info = <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;mydata.txt&quot;</span>, <span class="hljs-string">&quot;w&quot;</span>)<br>info.write(<span class="hljs-string">&quot;hello welcome to my blog&quot;</span>)<br>info.close()<br></code></pre></td></tr></table></figure><p>ä¸Šé¢å°±æ˜¯å®ç°äº†ä¸€ä¸ªç®€å•çš„æ‰“å¼€mydata.txtæ–‡ä»¶ï¼Œç„¶åå†™å…¥å­—ç¬¦ï¼Œç„¶åå…³é—­ã€‚è¿™æ ·çš„ä¸€ä¸ªæ“ä½œè¿‡ç¨‹ã€‚</p><p>é‚£ä¹ˆä½¿ç”¨with æ”¹é€ åå‘¢ï¼Ÿ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;mydata.txt&quot;</span>, <span class="hljs-string">&quot;w&quot;</span>) <span class="hljs-keyword">as</span> info:<br>    info.write(<span class="hljs-string">&quot;welocme to my blog&quot;</span>)<br></code></pre></td></tr></table></figure><p>é‚£ä¹ˆå½“æˆ‘ä»¬ä½¿ç”¨withä¸Šä¸‹æ–‡ç®¡ç†å™¨çš„æ—¶å€™ï¼Œå°±æ˜¯è¿™æ ·çš„äº†ï¼Œå¯èƒ½åŒå­¦ä¼šå‘ç°å’¦ï¼Œæ€ä¹ˆæ²¡æœ‰å…³é—­æ–‡ä»¶äº†ï¼Œè¿™ä¸ªå‘¢å°±æ˜¯ä¸Šä¸‹æ–‡ç®¡ç†å™¨çš„ç¥å¥‡ä¹‹å¤„ï¼Œä»–ä¼šåœ¨å†™å®Œæ•°æ®åè‡ªåŠ¨æ‰§è¡Œå…³é—­çš„æ“ä½œï¼Œæ˜¯ä¸æ˜¯æ¯”æˆ‘ä»¬è‡ªå·±å†™çš„è¦æ›´åŠ ç®€å•ä»¥åŠå®‰å…¨ï¼é‚£ä¹ˆæ‰§è¡Œå®Œæ¯•åå°±ä¼šç”Ÿæˆmydata.txtæ–‡ä»¶ã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬é‡æ–°æ¥çœ‹ä¸€ä¸ªç¨‹åºï¼</p><h2 id="ä¸Šä¸‹æ–‡ç®¡ç†å™¨å†…éƒ¨é€»è¾‘"><a href="#ä¸Šä¸‹æ–‡ç®¡ç†å™¨å†…éƒ¨é€»è¾‘" class="headerlink" title="ä¸Šä¸‹æ–‡ç®¡ç†å™¨å†…éƒ¨é€»è¾‘"></a>ä¸Šä¸‹æ–‡ç®¡ç†å™¨å†…éƒ¨é€»è¾‘</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> time<br><br>start=time.perf_counter()<br>nums = []<br><br><span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1000</span>):<br>    nums.append(n**<span class="hljs-number">5</span>)<br><br>stop= time.perf_counter()<br><br>cost = stop - start<br><br><span class="hljs-built_in">print</span>(cost)<br><br></code></pre></td></tr></table></figure><p>é‚£ä¹ˆä¸Šé¢çš„ä»£ç ä¸­ç®€å•çš„å®ç°äº†ä¸€ä¸ªè¿™æ ·çš„é€»è¾‘ï¼Œå°±æ˜¯å®ç°è®¡ç®—nçš„5æ¬¡æ–¹ï¼Œç„¶åè®¡ç®—ä»0åˆ°1000ï¼Œç„¶ååŠ å…¥åˆ—è¡¨ä¸­ï¼Œå¼€å§‹è®¡æ—¶æŸ¥çœ‹ä¸­é—´çš„æ—¶é—´å·®ã€‚è¿™æ—¶å€™ï¼Œæˆ‘ä»¬é€šè¿‡å†™å†…éƒ¨çœŸæ­£å®é™…æ“ä½œçš„é€»è¾‘ï¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> time<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Timer</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        self.cost = <span class="hljs-number">0</span><br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__enter__</span>(<span class="hljs-params">self</span>):<br>        self.start=time.perf_counter()<br>        <span class="hljs-keyword">return</span> self<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__exit__</span>(<span class="hljs-params">self, exc_type, exc_val, exc_tb</span>):<br>        self.stop = time.perf_counter()<br>        self.cost = self.stop - self.start<br>     <br>        <br><br><span class="hljs-keyword">with</span> Timer() <span class="hljs-keyword">as</span> timer:<br>    nums = []<br>    <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1000</span>):<br>        nums.append(n**<span class="hljs-number">5</span>)<br><span class="hljs-built_in">print</span>(timer.cost)<br></code></pre></td></tr></table></figure><p>é‚£ä¹ˆè¿™æ—¶å€™å¯ä»¥çœ‹å‡ºæ¥ï¼Œæˆ‘ä»¬å†™äº†ä¸€ä¸ªwithçš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œå½“æ‰§è¡Œçš„æ—¶å€™é¦–å…ˆè¿›å»Timerè¿™ä¸ªç±»é‡Œé¢ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™æ—¶å€™é¦–å…ˆæ‰§è¡Œçš„æ˜¯ <code>__enter__</code> è¿™ä¸ªæ–¹æ³•ï¼Œç„¶åå½“æˆ‘ä»¬æ•´ä¸ªwithç»“æŸçš„æ—¶å€™æ‰§è¡Œçš„æ˜¯ <code>__exit__</code> è¿™ä¸ªæ–¹æ³•ï¼Œæ­¤æ—¶åœ¨<code>__exit__</code>ä¸­æˆ‘ä»¬åšäº†è®°å½•ç»“æŸçš„æ—¶é—´å¹¶ä¸”åšäº†ä¸¤è€…ç›¸å‡çš„æ—¶é—´å·®çš„å€¼ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨æ‰“å°timer.costçš„æ—¶å€™è·å–æ—¶é—´å·®ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯åœ¨<code>__enter__</code> è¿™ä¸ªé‡Œé¢æœ‰ä¸€ä¸ªreturn selfã€‚æ˜¯å› ä¸ºæˆ‘ä»¬åœ¨æ‰§è¡Œwith Timer() as timerçš„æ—¶å€™ timer å¹¶ä¸æ˜¯çœŸæ­£çš„æ‹¿åˆ°Timer(), å…¶å®æ˜¯æ‹¿åˆ°çš„æ˜¯<code>__enter__</code>è¿™é‡Œçš„è¿”å›ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯self.start æ­¤æ—¶éœ€è¦ç”¨retrun å°†å…¶è¿”å›è®°å½•çš„ï¼</p><h2 id="ä»£ç å†…çš„æ€»ç»“"><a href="#ä»£ç å†…çš„æ€»ç»“" class="headerlink" title="ä»£ç å†…çš„æ€»ç»“"></a>ä»£ç å†…çš„æ€»ç»“</h2><p>ä¸€ä¸ªä¸Šä¸‹æ–‡ç®¡ç†å™¨éœ€è¦å®ç°å¦‚ä¸‹çš„æ–¹æ³•ï¼š</p><p><code>__enter__</code> å®‰è£…ä¸Šä¸‹æ–‡ï¼Œå¯ä»¥è¿”å›å¯¹è±¡</p><p><code>__exit__</code> æ¸…æ¥šé‡Šæ”¾å¯¹è±¡</p><h2 id="ä¸Šä¸‹æ–‡åº”ç”¨åœºæ™¯"><a href="#ä¸Šä¸‹æ–‡åº”ç”¨åœºæ™¯" class="headerlink" title="ä¸Šä¸‹æ–‡åº”ç”¨åœºæ™¯"></a>ä¸Šä¸‹æ–‡åº”ç”¨åœºæ™¯</h2><p>Python çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ç‰¹æ€§ï¼Œå®ƒå…è®¸ä½ ä»¥éå¸¸ä¼˜é›…å’Œç®€æ´çš„æ–¹å¼ç®¡ç†èµ„æºï¼Œæ¯”å¦‚æ–‡ä»¶æ“ä½œã€æ•°æ®åº“è¿æ¥ã€ç½‘ç»œå¥—æ¥å­—ç­‰ã€‚ä½¿ç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨å¯ä»¥ç¡®ä¿å³ä½¿åœ¨å‘ç”Ÿå¼‚å¸¸çš„æƒ…å†µä¸‹ï¼Œèµ„æºä¹Ÿèƒ½è¢«æ­£ç¡®åœ°æ¸…ç†å’Œé‡Šæ”¾ã€‚ä¸Šä¸‹æ–‡ç®¡ç†å™¨é€šå¸¸ä¸ <code>with</code> è¯­å¥ä¸€èµ·ä½¿ç”¨ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸Šä¸‹æ–‡ç®¡ç†å™¨çš„ä¸€äº›å…¸å‹åº”ç”¨åœºæ™¯ï¼š</p><h3 id="1-æ–‡ä»¶æ“ä½œ"><a href="#1-æ–‡ä»¶æ“ä½œ" class="headerlink" title="1. æ–‡ä»¶æ“ä½œ"></a>1. æ–‡ä»¶æ“ä½œ</h3><p>æ–‡ä»¶æ“ä½œæ˜¯ä¸Šä¸‹æ–‡ç®¡ç†å™¨æœ€å¸¸è§çš„åº”ç”¨åœºæ™¯ä¹‹ä¸€ã€‚ä½¿ç”¨ <code>with</code> è¯­å¥å¯ä»¥è‡ªåŠ¨ç®¡ç†æ–‡ä»¶çš„æ‰“å¼€å’Œå…³é—­ï¼Œå³ä½¿åœ¨è¯»å†™æ–‡ä»¶æ—¶å‘ç”Ÿå¼‚å¸¸ï¼Œæ–‡ä»¶ä¹Ÿä¼šè¢«æ­£ç¡®å…³é—­ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;example.txt&#x27;</span>, <span class="hljs-string">&#x27;r&#x27;</span>) <span class="hljs-keyword">as</span> file:<br>    content = file.read()<br><span class="hljs-comment"># æ–‡ä»¶åœ¨è¿™é‡Œå·²ç»è¢«è‡ªåŠ¨å…³é—­</span><br></code></pre></td></tr></table></figure><h3 id="2-çº¿ç¨‹é”ï¼ˆThreading-Locksï¼‰"><a href="#2-çº¿ç¨‹é”ï¼ˆThreading-Locksï¼‰" class="headerlink" title="2. çº¿ç¨‹é”ï¼ˆThreading Locksï¼‰"></a>2. çº¿ç¨‹é”ï¼ˆThreading Locksï¼‰</h3><p>åœ¨å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ï¼Œä¸ºäº†é˜²æ­¢æ•°æ®ç«äº‰ï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨é”æ¥åŒæ­¥å¯¹å…±äº«èµ„æºçš„è®¿é—®ã€‚Python çš„ <code>threading</code> æ¨¡å—æä¾›äº†é”ï¼ˆLock å’Œ RLockï¼‰ï¼Œè¿™äº›é”å¯ä»¥ä½œä¸ºä¸Šä¸‹æ–‡ç®¡ç†å™¨ä½¿ç”¨ï¼Œä»¥ç¡®ä¿é”åœ¨ä½¿ç”¨åèƒ½è¢«æ­£ç¡®é‡Šæ”¾ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> threading <span class="hljs-keyword">import</span> Lock<br><br>lock = Lock()<br><span class="hljs-keyword">with</span> lock:<br>    <span class="hljs-comment"># æ‰§è¡Œä¸´ç•ŒåŒºä»£ç </span><br>    <span class="hljs-keyword">pass</span><br><span class="hljs-comment"># é”åœ¨è¿™é‡Œè¢«è‡ªåŠ¨é‡Šæ”¾</span><br></code></pre></td></tr></table></figure><h3 id="3-æ•°æ®åº“è¿æ¥"><a href="#3-æ•°æ®åº“è¿æ¥" class="headerlink" title="3. æ•°æ®åº“è¿æ¥"></a>3. æ•°æ®åº“è¿æ¥</h3><p>åœ¨å¤„ç†æ•°æ®åº“æ—¶ï¼Œæ­£ç¡®ç®¡ç†æ•°æ®åº“è¿æ¥éå¸¸é‡è¦ã€‚è™½ç„¶æ ‡å‡†çš„æ•°æ®åº“è¿æ¥åº“ï¼ˆå¦‚ SQLite, PostgreSQL çš„ psycopg2 ç­‰ï¼‰ä¸ç›´æ¥æä¾›ä¸Šä¸‹æ–‡ç®¡ç†å™¨æ¥å£ï¼Œä½†ä½ å¯ä»¥é€šè¿‡å®šä¹‰è‡ªå·±çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨ç±»æˆ–ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚ SQLAlchemyï¼‰æ¥ç®¡ç†æ•°æ®åº“è¿æ¥ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># å‡è®¾ db_connect æ˜¯è·å–æ•°æ®åº“è¿æ¥çš„å‡½æ•°</span><br><span class="hljs-keyword">with</span> db_connect() <span class="hljs-keyword">as</span> conn:<br>    <span class="hljs-comment"># æ‰§è¡Œæ•°æ®åº“æ“ä½œ</span><br>    <span class="hljs-keyword">pass</span><br><span class="hljs-comment"># è¿æ¥åœ¨è¿™é‡Œè¢«è‡ªåŠ¨å…³é—­æˆ–å›æ»š</span><br></code></pre></td></tr></table></figure><h3 id="4-ç½‘ç»œå¥—æ¥å­—"><a href="#4-ç½‘ç»œå¥—æ¥å­—" class="headerlink" title="4. ç½‘ç»œå¥—æ¥å­—"></a>4. ç½‘ç»œå¥—æ¥å­—</h3><p>ç½‘ç»œç¼–ç¨‹ä¸­ï¼Œå¥—æ¥å­—ï¼ˆSocketsï¼‰çš„åˆ›å»ºã€ä½¿ç”¨å’Œå…³é—­ä¹Ÿå¯ä»¥åˆ©ç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨æ¥ç®¡ç†ï¼Œä»¥ç¡®ä¿å³ä½¿åœ¨å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œå¥—æ¥å­—ä¹Ÿèƒ½è¢«æ­£ç¡®å…³é—­ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> socket<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SocketContext</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, host, port</span>):<br>        self.sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)<br>        self.sock.connect((host, port))<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__enter__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> self.sock<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__exit__</span>(<span class="hljs-params">self, exc_type, exc_val, exc_tb</span>):<br>        self.sock.close()<br><br><span class="hljs-keyword">with</span> SocketContext(<span class="hljs-string">&#x27;localhost&#x27;</span>, <span class="hljs-number">12345</span>) <span class="hljs-keyword">as</span> sock:<br>    <span class="hljs-comment"># å‘é€å’Œæ¥æ”¶æ•°æ®</span><br>    <span class="hljs-keyword">pass</span><br><span class="hljs-comment"># å¥—æ¥å­—åœ¨è¿™é‡Œè¢«è‡ªåŠ¨å…³é—­</span><br></code></pre></td></tr></table></figure><h3 id="5-ä¸´æ—¶ç›®å½•å’Œæ–‡ä»¶"><a href="#5-ä¸´æ—¶ç›®å½•å’Œæ–‡ä»¶" class="headerlink" title="5. ä¸´æ—¶ç›®å½•å’Œæ–‡ä»¶"></a>5. ä¸´æ—¶ç›®å½•å’Œæ–‡ä»¶</h3><p>åœ¨å¤„ç†éœ€è¦ä¸´æ—¶æ–‡ä»¶æˆ–ç›®å½•çš„åœºæ™¯æ—¶ï¼Œå¯ä»¥ä½¿ç”¨åƒ <code>tempfile</code> è¿™æ ·çš„åº“æ¥åˆ›å»ºå®ƒä»¬ï¼Œå¹¶é€šè¿‡è‡ªå®šä¹‰ä¸Šä¸‹æ–‡ç®¡ç†å™¨æ¥ç¡®ä¿åœ¨ä¸å†éœ€è¦æ—¶å®ƒä»¬è¢«æ­£ç¡®åˆ é™¤ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> tempfile<br><span class="hljs-keyword">import</span> shutil<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TempDir</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        self.temp_dir = tempfile.mkdtemp()<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__enter__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> self.temp_dir<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__exit__</span>(<span class="hljs-params">self, exc_type, exc_val, exc_tb</span>):<br>        shutil.rmtree(self.temp_dir)<br><br><span class="hljs-keyword">with</span> TempDir() <span class="hljs-keyword">as</span> tempdir:<br>    <span class="hljs-comment"># ä½¿ç”¨ä¸´æ—¶ç›®å½•</span><br>    <span class="hljs-keyword">pass</span><br><span class="hljs-comment"># ä¸´æ—¶ç›®å½•åœ¨è¿™é‡Œè¢«è‡ªåŠ¨åˆ é™¤</span><br></code></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ä¸Šä¸‹æ–‡ç®¡ç†å™¨åº”ç”¨å¹¿æ³›æ¶‰åŠåˆ°å‰åçŠ¶æ€æ”¹å˜çš„éƒ½å¯ä»¥ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯ï¼Œä»»ä½•éœ€è¦ç¡®ä¿èµ„æºåœ¨ä½¿ç”¨åè¢«æ­£ç¡®é‡Šæ”¾æˆ–æ¸…ç†çš„åœºæ™¯ï¼Œéƒ½å¯ä»¥åˆ©ç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨æ¥å®ç°ã€‚æ‰€ä»¥ä½ æŒæ¡äº†å…¶ä¸­çš„åŸç†äº†å—ï¼Ÿ</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
      <category>Python å¸¸è§å‡½æ•°</category>
      
      <category>Python ä¸Šä¸‹æ–‡ç®¡ç†å™¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Jmeter é€»è¾‘æ§åˆ¶å™¨ä¹‹äº¤æ›¿æ§åˆ¶å™¨</title>
    <link href="/2024/08/12/jmeter%E4%BA%A4%E6%9B%BF%E6%8E%A7%E5%88%B6%E5%99%A8/"/>
    <url>/2024/08/12/jmeter%E4%BA%A4%E6%9B%BF%E6%8E%A7%E5%88%B6%E5%99%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="Jmeter-é€»è¾‘æ§åˆ¶å™¨ä¹‹äº¤æ›¿æ§åˆ¶å™¨"><a href="#Jmeter-é€»è¾‘æ§åˆ¶å™¨ä¹‹äº¤æ›¿æ§åˆ¶å™¨" class="headerlink" title="Jmeter é€»è¾‘æ§åˆ¶å™¨ä¹‹äº¤æ›¿æ§åˆ¶å™¨"></a>Jmeter é€»è¾‘æ§åˆ¶å™¨ä¹‹äº¤æ›¿æ§åˆ¶å™¨</h1><p>å¤§å®¶çŸ¥é“åœ¨Jmeterä¸­æˆ‘ä»¬åœ¨æ·»åŠ äº†HTTPè¯·æ±‚åï¼Œæˆ‘ä»¬æœ‰æ—¶å€™éƒ½è¦æ·»åŠ é€»è¾‘æ§åˆ¶å™¨ï¼Œä¹Ÿå°±æ˜¯éœ€è¦æ·»åŠ ä¸€äº›å¯¹äºè¯·æ±‚çš„é€»è¾‘æ§åˆ¶ï¼Œé‚£ä¹ˆä»Šå¤©æˆ‘ä»¬ä»‹ç»çš„æ˜¯äº¤æ›¿æ§åˆ¶å™¨</p><h2 id="ä»€ä¹ˆæ˜¯äº¤æ›¿æ§åˆ¶å™¨"><a href="#ä»€ä¹ˆæ˜¯äº¤æ›¿æ§åˆ¶å™¨" class="headerlink" title="ä»€ä¹ˆæ˜¯äº¤æ›¿æ§åˆ¶å™¨"></a>ä»€ä¹ˆæ˜¯äº¤æ›¿æ§åˆ¶å™¨</h2><p>äº¤æ›¿æ§åˆ¶å™¨é¡¾åæ€ä¹‰å°±æ˜¯åœ¨è¯·æ±‚çš„æ—¶å€™å¯ä»¥è¿›è¡Œäº¤æ›¿çš„è¯·æ±‚ï¼Œé‚£ä¹ˆä»æ–‡å­—ä¸Šé¢å¾ˆéš¾å®ç°ç†è§£ï¼Œç›´æ¥æ¥å®é™…æ“ä½œå±•ç¤ºï¼</p><h2 id="å®é™…æ“ä½œ"><a href="#å®é™…æ“ä½œ" class="headerlink" title="å®é™…æ“ä½œ"></a>å®é™…æ“ä½œ</h2><h3 id="é¦–å…ˆæˆ‘ä»¬è¦æ·»åŠ ä¸€ä¸ªçº¿ç¨‹ç»„"><a href="#é¦–å…ˆæˆ‘ä»¬è¦æ·»åŠ ä¸€ä¸ªçº¿ç¨‹ç»„" class="headerlink" title="é¦–å…ˆæˆ‘ä»¬è¦æ·»åŠ ä¸€ä¸ªçº¿ç¨‹ç»„"></a>é¦–å…ˆæˆ‘ä»¬è¦æ·»åŠ ä¸€ä¸ªçº¿ç¨‹ç»„</h3><img src="/2024/08/12/jmeter%E4%BA%A4%E6%9B%BF%E6%8E%A7%E5%88%B6%E5%99%A8/jmeter1.png" class=""><p>è¿™é‡Œè®¾ç½®çš„çº¿ç¨‹ç»„ä¸­çš„çº¿ç¨‹æ•°ï¼š1ï¼ŒRamp-up ç§’ï¼š0ï¼Œ å¾ªç¯æ¬¡æ•°ï¼š3ï¼Œ ä¹Ÿå°±æ˜¯å¯åŠ¨ä¸‰ä¸ªçº¿ç¨‹ã€‚</p><h3 id="æ·»åŠ HTTPè¯·æ±‚"><a href="#æ·»åŠ HTTPè¯·æ±‚" class="headerlink" title="æ·»åŠ HTTPè¯·æ±‚"></a>æ·»åŠ HTTPè¯·æ±‚</h3><img src="/2024/08/12/jmeter%E4%BA%A4%E6%9B%BF%E6%8E%A7%E5%88%B6%E5%99%A8/jmeter2.png" class=""><h3 id="æ·»åŠ äº¤æ›¿æ§åˆ¶å™¨"><a href="#æ·»åŠ äº¤æ›¿æ§åˆ¶å™¨" class="headerlink" title="æ·»åŠ äº¤æ›¿æ§åˆ¶å™¨"></a>æ·»åŠ äº¤æ›¿æ§åˆ¶å™¨</h3><img src="/2024/08/12/jmeter%E4%BA%A4%E6%9B%BF%E6%8E%A7%E5%88%B6%E5%99%A8/jmeter3.png" class=""><img src="/2024/08/12/jmeter%E4%BA%A4%E6%9B%BF%E6%8E%A7%E5%88%B6%E5%99%A8/jmeter4.png" class=""><p>æ­¤æ—¶æ·»åŠ äº†äº¤æ›¿æ§åˆ¶å™¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†éœ€è¦äº¤æ›¿è¯·æ±‚çš„è¯·æ±‚æ·»åŠ åˆ°äº¤æ›¿æ§åˆ¶å™¨ä¸­ã€‚</p><h3 id="æ·»åŠ äº¤æ›¿è¯·æ±‚"><a href="#æ·»åŠ äº¤æ›¿è¯·æ±‚" class="headerlink" title="æ·»åŠ äº¤æ›¿è¯·æ±‚"></a>æ·»åŠ äº¤æ›¿è¯·æ±‚</h3><img src="/2024/08/12/jmeter%E4%BA%A4%E6%9B%BF%E6%8E%A7%E5%88%B6%E5%99%A8/jmeter6.png" class=""><img src="/2024/08/12/jmeter%E4%BA%A4%E6%9B%BF%E6%8E%A7%E5%88%B6%E5%99%A8/jmeter7.png" class=""><p>è¿™é‡Œæ·»åŠ äº†3ä¸ªè¯·æ±‚ï¼Œç™¾åº¦åœ°å›¾ï¼Œ ç™¾åº¦è´´å§ï¼Œ ç™¾åº¦å›¾ç‰‡ã€‚</p><h3 id="æ·»åŠ é¢å¤–è¯·æ±‚"><a href="#æ·»åŠ é¢å¤–è¯·æ±‚" class="headerlink" title="æ·»åŠ é¢å¤–è¯·æ±‚"></a>æ·»åŠ é¢å¤–è¯·æ±‚</h3><img src="/2024/08/12/jmeter%E4%BA%A4%E6%9B%BF%E6%8E%A7%E5%88%B6%E5%99%A8/jmeter8.png" class=""><p>è¿™é‡Œæ·»åŠ äº†ç™¾åº¦è§†é¢‘çš„è¯·æ±‚</p><p>6.æ·»åŠ æŸ¥çœ‹ç»“æœæ ‘</p><img src="/2024/08/12/jmeter%E4%BA%A4%E6%9B%BF%E6%8E%A7%E5%88%B6%E5%99%A8/jmeter9.png" class=""><h3 id="æ­¤æ—¶è¿è¡ŒæŸ¥çœ‹ç»“æœ"><a href="#æ­¤æ—¶è¿è¡ŒæŸ¥çœ‹ç»“æœ" class="headerlink" title="æ­¤æ—¶è¿è¡ŒæŸ¥çœ‹ç»“æœ"></a>æ­¤æ—¶è¿è¡ŒæŸ¥çœ‹ç»“æœ</h3><img src="/2024/08/12/jmeter%E4%BA%A4%E6%9B%BF%E6%8E%A7%E5%88%B6%E5%99%A8/jemter5.png" class=""><p>å¯ä»¥çœ‹åˆ°è¿™é‡Œçš„äº¤æ›¿æ§åˆ¶å™¨å‘ç”Ÿäº†æ•ˆæœï¼Œå½¢æˆäº†ï¼š</p><p>ç™¾åº¦-&gt;ç™¾åº¦å›¾ç‰‡-&gt;ç™¾åº¦è§†é¢‘</p><p>ç™¾åº¦-&gt;ç™¾åº¦åœ°å›¾-&gt;ç™¾åº¦è§†é¢‘</p><p>ç™¾åº¦-&gt;ç™¾åº¦è´´å§-&gt;ç™¾åº¦è§†é¢‘</p><p>æ¯æ¬¡çš„è¯·æ±‚éƒ½æŒ‰ç…§ä¸Šè¿°çš„è¯·æ±‚é¡ºåºè¿›è¡Œäº¤æ›¿çš„è¯·æ±‚ï¼Œè¿™ä¸‹æˆ‘æƒ³å°±åº”è¯¥æ˜ç™½äº†äº¤æ›¿æ§åˆ¶å™¨çš„å…·ä½“é€»è¾‘äº†ã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>æˆ‘ä»¬è¦å–„äºä½¿ç”¨Jmeteré€»è¾‘è¯·æ±‚ä¸­çš„å„ä¸ªæ§åˆ¶å™¨ï¼Œå…¶ä¸­è¿™ä¸ªäº¤æ›¿æ§åˆ¶å™¨å°±æ˜¯å®ç°äº†äº¤æ›¿è¯·æ±‚çš„æ•ˆæœï¼</p>]]></content>
    
    
    <categories>
      
      <category>æµ‹è¯•å¼€å‘å·¥å…·/æ¡†æ¶</category>
      
      <category>Jmeter</category>
      
      <category>Jmeter äº¤æ›¿æ§åˆ¶å™¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Jmeter</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python è£…é¥°å™¨</title>
    <link href="/2024/08/07/python%E8%A3%85%E9%A5%B0%E5%99%A8/"/>
    <url>/2024/08/07/python%E8%A3%85%E9%A5%B0%E5%99%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="Python-è£…é¥°å™¨"><a href="#Python-è£…é¥°å™¨" class="headerlink" title="Python è£…é¥°å™¨"></a>Python è£…é¥°å™¨</h1><p>è£…é¥°å™¨æ˜¯ä»€ä¹ˆä¸œè¥¿å‘¢ï¼Ÿæƒ³å¿…å¤§å®¶ä¹Ÿå¤šå°‘äº†è§£è¿‡äº†ä¸€ç‚¹ï¼Œå®ƒå°±æ˜¯å®ç°äº†æˆ‘ä»¬åœ¨ä¸ä¿®æ”¹åŸæœ‰å‡½æ•°çš„åŸºç¡€ä¸Šï¼Œç»™å‡½æ•°æˆ–æ–¹æ³•å¢åŠ æ–°çš„åŠŸèƒ½ï¼Œå…¶å®è£…é¥°å™¨æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¥¹æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°å¹¶è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œè¿™ä¸ªæ–°çš„å‡½æ•°é€šå¸¸åŒ…å«åŸå‡½æ•°çš„è°ƒç”¨ï¼Œå¹¶åŒ…å«ä¸€é¢å¤–æ–°å¢çš„åŠŸèƒ½ã€‚</p><p>é‚£ä¹ˆåœ¨äº†è§£è£…é¥°å™¨ä¹‹å‰å‘¢ï¼Œä½ éœ€è¦äº†è§£ä¸€ä¸ªä¸œè¥¿å«åšé—­åŒ…ï¼Œåªæœ‰äº†è§£äº†å®ƒä½ æ‰èƒ½æ›´åŠ äº†è§£è£…é¥°å™¨ã€‚é‚£ä¹ˆå¯ä»¥çœ‹æˆ‘ä¹‹å‰å†™çš„å…³äºé—­åŒ…çš„æ–‡ç« ã€‚</p><p>é“¾æ¥ï¼š<a href="https://8888666.top/2024/08/05/python%E9%97%AD%E5%8C%85/">https://8888666.top/2024/08/05/python%E9%97%AD%E5%8C%85/</a></p><h2 id="ä»£ç è§£é‡Š"><a href="#ä»£ç è§£é‡Š" class="headerlink" title="ä»£ç è§£é‡Š"></a>ä»£ç è§£é‡Š</h2><h3 id="ä½¿ç”¨ç±»å®šä¹‰å‡½æ•°è£…é¥°å™¨æœªå¸¦å‚æ•°"><a href="#ä½¿ç”¨ç±»å®šä¹‰å‡½æ•°è£…é¥°å™¨æœªå¸¦å‚æ•°" class="headerlink" title="ä½¿ç”¨ç±»å®šä¹‰å‡½æ•°è£…é¥°å™¨æœªå¸¦å‚æ•°"></a>ä½¿ç”¨ç±»å®šä¹‰å‡½æ•°è£…é¥°å™¨æœªå¸¦å‚æ•°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyBlogDecorator</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, function</span>):<br>        self.function = function<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__call__</span>(<span class="hljs-params">self, *args, **kwargs</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;The blog name is yunshao&quot;</span>)<br>        result_info = self.function(*args, **kwargs)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;The blog is download, now you can see!&quot;</span>)<br>        <span class="hljs-keyword">return</span> result_info<br>        <br><br><span class="hljs-meta">@MyBlogDecorator</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">open_blog</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;welcome to my blog&quot;</span>)<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;oh,is very nice blog&quot;</span><br><br><span class="hljs-built_in">print</span>(open_blog())<br></code></pre></td></tr></table></figure><p>ä»£ç è§£é‡Šï¼š ä¸Šè¿°ä»£ç å°±æ˜¯ç®€å•å®ç°äº†ä¸€ä¸ªè£…é¥°å™¨ã€‚</p><p>1.é¦–å…ˆæˆ‘å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ç”¨æ¥æ¨¡æ‹Ÿæˆ‘ä»¬æ‰“å¼€æˆ‘çš„ç½‘ç«™çš„ä¸€ä¸ªå¯¹è¯ï¼Œæ•´ä¸ªå‡½æ•°å°±æ˜¯æ‰“å°äº†ä¸€ä¸²æ–‡å­—ï¼Œretrun äº†ä¸€ä¸²æ–‡å­—ã€‚</p><p>2.ç„¶åæˆ‘å®šä¹‰äº†ä¸€ä¸ªè£…é¥°å™¨MyBlogDecoratorï¼Œåœ¨è£…é¥°å™¨ä¸­é¦–å…ˆåœ¨<code>__init__</code>æ–¹æ³•ä¸­æˆ‘ä»¬å®šä¹‰çš„function æ­¤æ—¶ä¼ å…¥çš„å¹¶ä¸æ˜¯ä¸€ä¸ªå˜é‡ï¼Œè€Œæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿™å°±æ˜¯è£…é¥°å™¨çš„çµé­‚æ‰€åœ¨ã€‚</p><p>3.é‚£ä¹ˆæˆ‘ä»¬è¿˜å®šä¹‰äº†é­”æ³•å‡½æ•°<code>__call__</code> åœ¨è¿è¡Œç±»MyBlogDecoratorï¼Œä¼šè‡ªåŠ¨è°ƒç”¨æˆ‘ä»¬çš„ <code>__call__</code> æ–¹æ³•ï¼Œé‚£ä¹ˆåœ¨<code>__call__</code> æ–¹æ³•ä¸­æˆ‘ä»¬è®¾ç½®äº†å¯ä»¥ä¼ å…¥å‚æ•°è®¾ç½®ï¼Œä¹Ÿå°±æ˜¯å‡è®¾ä½ çš„open_blog å‡½æ•°éœ€è¦ä¼ å˜é‡ï¼Œé‚£ä¹ˆè¿™é‡Œä¹Ÿæ˜¯å¯ä»¥å®Œç¾æ”¯æŒï¼Œåªä¸è¿‡æˆ‘ä»¬çš„æ¡ˆä¾‹ä¸­æ²¡å†™è€Œå·²ã€‚</p><p>4.åœ¨é‡Œé¢æˆ‘ä»¬ä¹Ÿæ˜¯é¦–å…ˆæ‰“å°äº†ä¸€ä¸²æ–‡å­—ï¼Œç„¶åæ­¤æ—¶è°ƒç”¨äº†æˆ‘ä»¬çš„self.function(*args, **kwargs)è¿™é‡Œå…¶å®å°±æ˜¯å°†open_blog() å‡½æ•°è¿›è¡Œäº†è°ƒç”¨ï¼Œç„¶åç¨‹åºä¼šæ‰§è¡Œopen_blogï¼Œç„¶åè¾“å‡ºâ€welcome to my blogâ€, æ­¤æ—¶result_info è¿›è¡Œæ¥æ”¶return è¿”å›çš„å€¼ï¼Œç„¶åæ‰“å°â€œThe blog is download, now you can see!â€ï¼Œæœ€åç¨‹åºè¾“å‡ºreturnçš„å€¼oh,is very nice blogã€‚</p><p>å®Œæ•´çš„è¾“å‡ºä¿¡æ¯:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs text">The blog name is yunshao<br>welcome to my blog<br>The blog is download, now you can see!<br>oh,is very nice blog<br></code></pre></td></tr></table></figure><p>ç›¸ä¿¡å¤§å®¶åœ¨æ­¤åˆ»ä¹Ÿå°±å¯¹è£…é¥°å™¨äº†è§£æ›´åŠ å½»åº•äº†ï¼</p><h3 id="ä½¿ç”¨ç±»å®šä¹‰å‡½æ•°è£…é¥°å™¨å¸¦å‚æ•°"><a href="#ä½¿ç”¨ç±»å®šä¹‰å‡½æ•°è£…é¥°å™¨å¸¦å‚æ•°" class="headerlink" title="ä½¿ç”¨ç±»å®šä¹‰å‡½æ•°è£…é¥°å™¨å¸¦å‚æ•°"></a>ä½¿ç”¨ç±»å®šä¹‰å‡½æ•°è£…é¥°å™¨å¸¦å‚æ•°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyBlogDecorator</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name</span>):<br>        self.name = name<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__call__</span>(<span class="hljs-params">self, function</span>):<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">warp</span>(<span class="hljs-params">*args, **kwargs</span>):<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;hello <span class="hljs-subst">&#123;self.name&#125;</span>&quot;</span>)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;The blog name is yunshao&quot;</span>)<br>            result_info = function(*args, **kwargs)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;The blog is download, now you can see!&quot;</span>)<br>            <span class="hljs-keyword">return</span> result_info<br>        <span class="hljs-keyword">return</span> warp<br>        <br><br><span class="hljs-meta">@MyBlogDecorator(<span class="hljs-params"><span class="hljs-string">&quot;xiaoming&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">example_test</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;welcome to my blog&quot;</span>)<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;oh,is very nice blog&quot;</span><br><br><span class="hljs-built_in">print</span>(example_test())<br></code></pre></td></tr></table></figure><p>ä»£ç è§£é‡Šï¼š é‚£ä¹ˆå¦‚æœä½ çœ‹äº†ä¸Šè¿°çš„ä»£ç è§£é‡Šï¼Œæˆ‘è¿™é‡Œå°±ä¸ä¼šåœ¨è¯¦ç»†çš„è®²è§£æ¯ä¸€æ­¥äº†ï¼Œè¿™é‡Œæˆ‘ä¸»è¦æ¥è®²ä¸ä¸€æ ·çš„åœ°æ–¹ã€‚</p><p>1.é¦–å…ˆæˆ‘ä»¬è¿™é‡Œå‘ç”Ÿå˜åŒ–çš„åœ°æ–¹æ˜¯æˆ‘ä»¬çš„è£…é¥°å™¨å¢åŠ äº†å‚æ•°ï¼Œä¹Ÿå°±æ˜¯nameï¼Œæˆ‘ä»¬é€šè¿‡MyBlogDecoratorè¿›è¡Œäº†ä¼ é€’nameæ˜¯ xiaoming çš„å‚æ•°ï¼Œä½†æ˜¯è¦æ³¨æ„çš„æ˜¯æ­¤æ—¶æˆ‘ä»¬æ¥æ”¶çš„nameå°±æ˜¯åœ¨<code>__init__</code> æ–¹æ³•é‡Œï¼Œå’Œä¸Šè¿°ä¸ä¸€æ ·çš„æ˜¯æˆ‘ä»¬è¿™é‡Œä¸èƒ½æ¥æ”¶å‡½æ•°äº†ã€‚</p><p>2.æˆ‘ä»¬éœ€è¦å†™ä¸€ä¸ªå‡½æ•°çš„è£…é¥°å™¨è¿›è¡Œæ¥æ”¶ï¼Œä¹Ÿå°±æ˜¯åœ¨<code>__call__</code> é‡Œé¢è¿›è¡Œæ¥æ”¶fucntion ,ç„¶åé€šè¿‡å†…éƒ¨çš„å‡½æ•° wrap è¿›è¡Œè°ƒç”¨ï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦æ³¨æ„åœ¨è¿›å…¥<code>__call__</code>ä¸­æˆ‘ä»¬é¦–å…ˆæ‰§è¡Œçš„æ˜¯return warp è®©warpå‡½æ•°æ‰§è¡Œï¼Œç„¶åæˆ‘ä»¬é‡Œé¢çš„å’Œæˆ‘ä»¬ä¸Šè¿°è®²çš„ç¨‹åºæ‰§è¡Œå°±æ˜¯ä¸€æ ·çš„äº†ã€‚</p><p>ä»£ç è¾“å‡ºç»“æœï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs text">hello xiaoming<br>The blog name is yunshao<br>welcome to my blog<br>The blog is download, now you can see!<br>oh,is very nice blog<br></code></pre></td></tr></table></figure><h3 id="ç»™ç±»æ·»åŠ è£…é¥°å™¨"><a href="#ç»™ç±»æ·»åŠ è£…é¥°å™¨" class="headerlink" title="ç»™ç±»æ·»åŠ è£…é¥°å™¨"></a>ç»™ç±»æ·»åŠ è£…é¥°å™¨</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">cls_MyBlogDecorator</span>(<span class="hljs-params">cls</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;The blog name is yunshao&quot;</span>)<br>    <span class="hljs-keyword">return</span> cls<br>    <br><br><span class="hljs-meta">@cls_MyBlogDecorator</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Open_blog</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;welcome to my blog&quot;</span>)<br><br>Open_blog()<br></code></pre></td></tr></table></figure><p>ä»£ç è§£é‡Šï¼šä¸Šè¿°ä»£ç å®šä¹‰äº†ä¸€ä¸ªç±»Open_blog, ç„¶åç±»é‡Œé¢æ‰“å°äº†ä¸€ä¸²æ–‡å­—ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªè£…é¥°å™¨cls_MyBlogDecoratorï¼Œæ­¤æ—¶è£…é¥°å™¨å®ç°äº†å°†Open_blogä¼ å…¥åˆ°äº†cls_MyBlogDecoratorä¸­, ä¹Ÿå°±æ˜¯clsï¼Œç„¶åæ‰“å°äº†ä¸€ä¸²æ–‡å­—ï¼Œreturnäº† cls ä¹Ÿå°±è°ƒç”¨äº†Open_blog è¿™ä¸ªç±» è¾“å‡ºäº† welcome to my blog</p><p>ç¨‹åºè¾“å‡ºç»“æœï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs text">welcome to my blog<br>The blog name is yunshao<br></code></pre></td></tr></table></figure><p>é‚£ä¹ˆï¼Œå¦‚æœæˆ‘é‡å¤è°ƒç”¨Open_blog() è¿™ä¸ªç±»ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿå¤§éƒ¨åˆ†åŒå­¦åº”è¯¥ä¼šè¯´ï¼Œé‚£è‚¯å®šè¾“å‡ºä¸Šé¢çš„ä¸¤ä¸²æ–‡å­— ä¸¤æ¬¡ï¼Œé‚£ä¹ˆç°å®çœŸçš„æ˜¯å—ï¼Ÿ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">cls_MyBlogDecorator</span>(<span class="hljs-params">cls</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;The blog name is yunshao&quot;</span>)<br>    <span class="hljs-keyword">return</span> cls<br>    <br><br><span class="hljs-meta">@cls_MyBlogDecorator</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Open_blog</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;welcome to my blog&quot;</span>)<br><br>Open_blog()<br>Open_blog()<br></code></pre></td></tr></table></figure><p>ç¨‹åºè¾“å‡ºï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs text">welcome to my blog<br>The blog name is yunshao<br></code></pre></td></tr></table></figure><p>å“ˆå“ˆï¼Œå¤§å®¶å‘ç°äº†æ²¡æœ‰ï¼Œæ­¤æ—¶æˆ‘ä»¬è°ƒç”¨ä¸¤æ¬¡ä¹Ÿæ²¡æœ‰æ‰§è¡Œè¾“å‡ºä¸¤æ¬¡ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬çš„è£…é¥°å™¨å·²ç»è£…é¥°å®Œåˆ°å†…å­˜äº†ï¼Œä½ è™½ç„¶è°ƒç”¨äº†ä¸¤æ¬¡ï¼Œä½†æ˜¯æ¯æ¬¡è°ƒç”¨çš„è¿˜æ˜¯é‚£ä¸ªè£…é¥°å™¨è£…é¥°åˆ°å†…å­˜çš„é‚£ä¸ªï¼Œæ‰€ä»¥ä¼šåªæ˜¯è¾“å‡ºä¸€æ¬¡ï¼Œé‚£ä¹ˆæ€ä¹ˆè®©ä»–è¾“å‡ºä¸¤æ¬¡å‘¢ï¼Ÿ å¯ä»¥è¿™æ ·æ¥</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">cls_MyBlogDecorator</span>(<span class="hljs-params">cls</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;The blog name is yunshao&quot;</span>)<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">inner</span>():<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;the blog is download&quot;</span>)<br>        result_object = cls()<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;wow the blog is very nice!&quot;</span>)<br>        <span class="hljs-keyword">return</span> result_object<br>    <span class="hljs-keyword">return</span> inner<br>    <br><br><span class="hljs-meta">@cls_MyBlogDecorator</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Open_blog</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;welcome to my blog&quot;</span>)<br><br>open1 = Open_blog()<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;===================&quot;</span>)<br>open2 = Open_blog()<br></code></pre></td></tr></table></figure><p>ä»£ç è§£é‡Šï¼š æ­¤æ—¶æˆ‘ä»¬è¿›è¡Œäº†æ”¹è¿›åœ¨ä¹‹å‰çš„å‡½æ•°ä¸­æ–°å¢äº†innerå‡½æ•°ï¼Œæ­¤æ—¶é€»è¾‘å˜ä¸ºå½“æˆ‘ä»¬æ¯æ¬¡è°ƒç”¨çš„Open_blog è¿™ä¸ªç±»çš„æ—¶å€™å®é™…æˆ‘ä»¬åœ¨è°ƒç”¨innerè¿™ä¸ªå‡½æ•°ï¼Œå‡½æ•°é‡Œé¢å‘¢å°†ç±»è¿›è¡Œäº†å®ä¾‹åŒ–ï¼Œæ­¤æ—¶æˆ‘ä»¬return åº•éƒ¨çš„ä¹Ÿå˜ä¸ºäº†innerï¼Œä¹Ÿå°±æ˜¯æ¯æ¬¡è°ƒç”¨éƒ½ä¼šæ‰§è¡Œinner()è¿™ä¸ªå‡½æ•°ã€‚</p><p>ç¨‹åºè¾“å‡ºï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs text">welcome to my blog<br>The blog name is yunshao<br>the blog is download<br>wow the blog is very nice!<br>===================<br>the blog is download<br>wow the blog is very nice!<br></code></pre></td></tr></table></figure><p>è¿™æ ·ä½ å°±ä¼šå‘ç°æˆ‘ä»¬æ¯è°ƒç”¨ä¸€æ¬¡éƒ½ä¼šè°ƒç”¨ä¸€æ¬¡inneré‡Œé¢çš„ï¼</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>python ä¸­çš„è£…é¥°å™¨æ˜¯ä¸€ç§äº†éå¸¸çµæ´»çš„æ–¹å¼æ¥å¢å¼ºå‡½æ•°çš„åŠŸèƒ½ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹å‡½æ•°æœ¬èº«çš„ä»£ç ã€‚å®ƒä»¬æ˜¯å‡½æ•°å¼ç¼–ç¨‹åœ¨ Python ä¸­çš„ä¸€ç§ä¼˜é›…ä½“ç°ï¼Œèƒ½å¤Ÿæå¤§åœ°æé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚åœ¨ä¼—å¤šçš„è®¾è®¡æ¨¡å¼ä¸­ä¹Ÿç”¨çš„éå¸¸å¤šï¼Œä¾‹å¦‚æˆ‘ä»¬çš„æ—¥å¿—è®°å½•ã€æ€§èƒ½æµ‹è¯•ã€äº‹åŠ¡å¤„ç†ã€æƒé™æ ¡éªŒç­‰ï¼Œä»¥åŠæˆ‘ä»¬åœ¨ä½¿ç”¨Pytest æ¡†æ¶çš„æ—¶å€™æˆ‘ä»¬ä¼šç”¨åˆ°å¾ˆå¤šæ¡†æ¶æä¾›ç»™æˆ‘ä»¬çš„è£…é¥°å™¨ï¼Œéå¸¸å¼ºå¤§ä¸”ä½¿ç”¨æ–¹ä¾¿ï¼</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
      <category>Python å¸¸è§å‡½æ•°</category>
      
      <category>Python è£…é¥°å™¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>python</tag>
      
      <tag>è£…é¥°å™¨</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python é—­åŒ…</title>
    <link href="/2024/08/05/python%E9%97%AD%E5%8C%85/"/>
    <url>/2024/08/05/python%E9%97%AD%E5%8C%85/</url>
    
    <content type="html"><![CDATA[<h1 id="Python-é—­åŒ…"><a href="#Python-é—­åŒ…" class="headerlink" title="Python é—­åŒ…"></a>Python é—­åŒ…</h1><p>å¤§å®¶æ¥è§¦è¿‡pythonè‚¯å®šéƒ½çŸ¥é“é—­åŒ…è¿™ä¸ªä¸œè¥¿ï¼Œä½†æ˜¯æœ‰äº›äººçœ‹è¿‡ä¹Ÿå°±å¿˜è®°äº†ï¼Œæ„Ÿè§‰å¯¹ä»–çš„ç”¨å¤„ä¹Ÿä¸æ˜¯å¾ˆæ˜æœ—ï¼Œåªæ˜¯çŸ¥é“æœ‰è¿™ä¸ªä¸œè¥¿ï¼Œé‚£ä¹ˆä»Šå¤©å°±éšç€æˆ‘ä¸€èµ·å­¦ä¹ è¿™ä¸ªé—­åŒ…å§ï¼</p><h2 id="é—­åŒ…ä»‹ç»"><a href="#é—­åŒ…ä»‹ç»" class="headerlink" title="é—­åŒ…ä»‹ç»"></a>é—­åŒ…ä»‹ç»</h2><p>ç®€å•æ¥è¯´ï¼š å†…éƒ¨å‡½æ•°å¯¹å¤–éƒ¨å‡½æ•°ä½œç”¨åŸŸå†…å˜é‡çš„å¼•ç”¨ï¼ˆéå…¨å±€å˜é‡ï¼‰ï¼Œåˆ™ç§°å†…éƒ¨å‡½æ•°ä¸ºé—­åŒ…ã€‚ä¹ä¸€å¬å¥½åƒä¹Ÿæ˜¯ä¸ˆäºŒå’Œå°šæ‘¸ä¸ç€å¤´è„‘ï¼Œé‚£ä¹ˆå°±è®©æˆ‘ä»¬çœ‹ä»£ç æ¥è¿›ä¸€æ­¥äº†è§£å§ï¼</p><h2 id="ä»£ç ä»‹ç»"><a href="#ä»£ç ä»‹ç»" class="headerlink" title="ä»£ç ä»‹ç»"></a>ä»£ç ä»‹ç»</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">outer</span>():<br>    message = <span class="hljs-string">&quot;welcome to python&quot;</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">inner</span>():<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;message&#125;</span>&quot;</span>)<br>    inner()<br><br>outer()<br><br></code></pre></td></tr></table></figure><p>é‚£ä¹ˆå„ä½åŒå­¦å¯ä»¥çŒœæƒ³ä¸€ä¸‹,è¿è¡Œç»“æŸåï¼Œè¾“å‡ºä»€ä¹ˆå‘¢ï¼Ÿ æˆ‘æƒ³å„ä½éƒ½çŒœå¯¹äº†ï¼Œé‚£å°±æ˜¯ welcome to python, å…¶å®è¿™ä¸ªå°±æ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œ æˆ‘ä»¬çš„inneræ˜¯å†…éƒ¨ç¨‹åºï¼Œè¿™æ—¶å€™æˆ‘ä»¬ç”¨åˆ°äº†å¤–éƒ¨çš„outerçš„å˜é‡ä¹Ÿå°±æ˜¯messageï¼Œè¿™æ ·æˆ‘ä»¬å°±æˆä¸ºä¸€ä¸ªé—­åŒ…ã€‚åº”è¯¥æ¯”è¾ƒå®¹æ˜“ç†è§£å§ï¼é‚£ä¹ˆä¸‹ä¸€æ­¥æˆ‘ä¼šè¿›è¡Œä¸€ä¸ªç¨‹åºå˜å½¢ï¼Œé‚£ä¹ˆä½ èƒ½çœ‹å‡ºä¸‹ä¸€æ­¥è¾“å‡ºä»€ä¹ˆå—ï¼Ÿ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">outer</span>():<br>    message = <span class="hljs-string">&quot;welcome to python&quot;</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">inner</span>():<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;message&#125;</span>&quot;</span>)<br>    message = <span class="hljs-string">&quot;wow python is amazing!&quot;</span><br>    <span class="hljs-keyword">return</span> inner<br><br>f = outer()<br>f()<br></code></pre></td></tr></table></figure><p>é‚£ä¹ˆæˆ‘ä»¬ç°åœ¨æ”¹å®Œåï¼Œå„ä½åŒå­¦è¿˜èƒ½çŒœå‡ºè¾“å‡ºä»€ä¹ˆå—ï¼Ÿå“ˆå“ˆï¼Œå¯èƒ½éƒ¨åˆ†åŒå­¦è®¤ä¸ºè¾“å‡ºçš„ä¾æ—§æ˜¯â€œwelcome to pythonâ€,ç†ç”±å¯èƒ½å¦‚ä¸‹ï¼š</p><p>æˆ‘ä»¬è¿è¡Œouterçš„æ—¶å€™å®é™…ä¸Šè¿”å›äº†innerå‡½æ•°ï¼Œæ­¤æ—¶inneræ‰§è¡Œçš„æ—¶å€™ç›´æ¥å°±ä¼šè¾“å‡º outeré‡Œé¢çš„messageï¼Œæ‰€ä»¥è¾“å‡ºçš„æ˜¯ welcome to pythonã€‚ é‚£ä¹ˆäº‹å®çœŸçš„å¦‚æ­¤å—ï¼Ÿæˆ‘ä»¬æ¥è¿è¡Œçœ‹çœ‹ï¼</p><img src="/2024/08/05/python%E9%97%AD%E5%8C%85/%E9%97%AD%E5%8C%851.png" class=""><p>å¯æƒœï¼Œå¯èƒ½å’Œéƒ¨åˆ†åŒå­¦æƒ³çš„ä¸ä¸€æ ·äº†ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆä¼šè¾“å‡ºwow python is amazing å‘¢ï¼Ÿä¸‹é¢æˆ‘æ¥è®²è§£ä¸€ä¸‹ï¼š</p><h2 id="é—­åŒ…çš„åŸç†"><a href="#é—­åŒ…çš„åŸç†" class="headerlink" title="é—­åŒ…çš„åŸç†"></a>é—­åŒ…çš„åŸç†</h2><p>å…¶å®ï¼Œæˆ‘ä»¬åœ¨æ‰§è¡Œä¸Šè¿°ç¨‹åºçš„æ—¶å€™ï¼Œå…ˆè¿è¡Œçš„outerï¼Œæ­¤æ—¶å®é™…ä¸Špythonæ‚„é»˜é»˜çš„çš„åšäº†ä¸€ä»¶äº‹æƒ…ï¼Œé‚£å°±æ˜¯å°†Messageå­˜äº†èµ·æ¥ï¼Œç­‰åˆ°innerè¿è¡Œçš„æ—¶å€™ä»é‡Œé¢æ‹¿å‡ºæ¥ï¼Œé‚£ä¹ˆåŒå­¦è¯´æˆ‘æ€ä¹ˆçœ‹ä¸åˆ°å‘¢ï¼Ÿä¸‹é¢ä½¿ç”¨debugæ¨¡å¼æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ï¼</p><img src="/2024/08/05/python%E9%97%AD%E5%8C%85/%E9%97%AD%E5%8C%852.png" class=""><p>å¤§å®¶å¯ä»¥çœ‹åˆ°æˆ‘debugçš„æ—¶å€™æŸ¥çœ‹ä¸€ä¸ªå†…éƒ¨å‡½æ•°ï¼Œf.<code>__closure__</code> è¿™ä¸ªæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ å…¶å®è¿™ä¸ªå°±æ˜¯é—­åŒ…å‡½æ•°ï¼Œclosure ç¿»è¯‘æˆé—­åŒ…å°±æ˜¯ä¸­æ–‡çš„æ„æ€ï¼Œé‚£ä¹ˆæ­¤æ—¶åšäº†ä»€ä¹ˆäº‹æƒ…å‘¢ï¼Ÿ å®é™…ä¸Š <code>__closure__ </code>æ˜¯ä¸€ä¸ªå…ƒç»„ç±»å‹çš„ï¼Œå®é™…ä¸Šæ˜¯è¿›è¡Œäº†ä¸€ä¸ªå¤åˆ¶æ“ä½œå°†wow python is amazing å¤åˆ¶äº†ä¸€ä»½æ”¾åœ¨äº†å…ƒç¥–ä¸­ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨çš„æ—¶å€™å®é™…ä¸Šæ˜¯ä»è¿™ä¸ªåœ°æ–¹å»å‡ºæ¥çš„æ•°æ®ï¼Œä¸ºäº†è¯å®æˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥æ¥çœ‹ï¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">outer</span>():<br>    message = <span class="hljs-string">&quot;welcome to python&quot;</span><br>    name = <span class="hljs-string">&quot;xiao ming &quot;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">inner</span>():<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;name&#125;</span>+<span class="hljs-subst">&#123;message&#125;</span>&quot;</span>)<br><br>    <span class="hljs-comment"># message = &quot;wow python is amazing!&quot;</span><br>    <span class="hljs-keyword">return</span> inner<br><br><br>f = outer()<br>f()<br><br></code></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><img src="/2024/08/05/python%E9%97%AD%E5%8C%85/%E9%97%AD%E5%8C%853.png" class=""><p>æˆ‘ä»¬å¯ä»¥çœ‹å‡ºç¡®å®å°†ä¿¡æ¯å­˜å‚¨åœ¨äº†<code>__closure__</code> ä¸­ï¼Œå¦‚æœä½ ç†è§£äº†ä¸Šè¿°çš„ï¼Œä½ ä¹Ÿå°±æ˜ç™½äº†é—­åŒ…ä¸ºä»€ä¹ˆæ˜¯å†…éƒ¨å‡½æ•°ä½¿ç”¨å¤–éƒ¨å‡½æ•°çš„å˜é‡ä¿¡æ¯ã€‚</p><h2 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h2><p>è¯´äº†è¿™ä¹ˆå¤šï¼Œé‚£ä¹ˆé—­åŒ…çš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›å‘¢ï¼Ÿ é‚£å°±ä¸€èµ·æ¥çœ‹å§ï¼</p><h3 id="1-æ•°æ®å°è£…å’Œéšç§ä¿æŠ¤"><a href="#1-æ•°æ®å°è£…å’Œéšç§ä¿æŠ¤" class="headerlink" title="1. æ•°æ®å°è£…å’Œéšç§ä¿æŠ¤"></a>1. æ•°æ®å°è£…å’Œéšç§ä¿æŠ¤</h3><p>é—­åŒ…å¯ä»¥ç”¨æ¥å°è£…æ•°æ®ï¼Œä½¿å¾—æ•°æ®åªé€šè¿‡ç‰¹å®šçš„å‡½æ•°æ¥å£è¿›è¡Œè®¿é—®å’Œä¿®æ”¹ï¼Œä»è€Œä¿æŠ¤æ•°æ®çš„éšç§æ€§ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">outer</span>(<span class="hljs-params">text</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">inner</span>():<br>        <span class="hljs-built_in">print</span>(text)<br>    <span class="hljs-keyword">return</span> inner<br><br><span class="hljs-comment"># ä½¿ç”¨é—­åŒ…</span><br>my_printer = outer(<span class="hljs-string">&quot;Hello, World!&quot;</span>)<br>my_printer()  <span class="hljs-comment"># è¾“å‡º: Hello, World!</span><br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>text</code> å˜é‡è¢«å°è£…åœ¨ <code>outer</code> å‡½æ•°çš„ä½œç”¨åŸŸä¸­ï¼Œåªæœ‰é€šè¿‡ <code>inner</code> å‡½æ•°æ‰èƒ½è®¿é—®ã€‚</p><h3 id="2-è£…é¥°å™¨"><a href="#2-è£…é¥°å™¨" class="headerlink" title="2. è£…é¥°å™¨"></a>2. è£…é¥°å™¨</h3><p>Python ä¸­çš„è£…é¥°å™¨æ˜¯ä¸€ç§å¸¸ç”¨çš„é—­åŒ…åº”ç”¨åœºæ™¯ã€‚è£…é¥°å™¨å…è®¸ä½ åœ¨ä¸ä¿®æ”¹åŸæœ‰å‡½æ•°ä»£ç çš„æƒ…å†µä¸‹ï¼Œç»™å‡½æ•°å¢åŠ æ–°çš„åŠŸèƒ½ã€‚</p><p>å…³äºè£…é¥°å™¨å¯ä»¥çœ‹è¿™æˆ‘è¿™ç¯‡æ›´åŠ è¯¦ç»†çš„ä»‹ç»ï¼š<a href="https://8888666.top/2024/08/07/python%E8%A3%85%E9%A5%B0%E5%99%A8/">https://8888666.top/2024/08/07/python%E8%A3%85%E9%A5%B0%E5%99%A8/</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">my_decorator</span>(<span class="hljs-params">func</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>():<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Something is happening before the function is called.&quot;</span>)<br>        func()<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Something is happening after the function is called.&quot;</span>)<br>    <span class="hljs-keyword">return</span> wrapper<br><br><span class="hljs-meta">@my_decorator</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">say_hello</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Hello!&quot;</span>)<br><br>say_hello()<br><span class="hljs-comment"># è¾“å‡º:</span><br><span class="hljs-comment"># Something is happening before the function is called.</span><br><span class="hljs-comment"># Hello!</span><br><span class="hljs-comment"># Something is happening after the function is called.</span><br></code></pre></td></tr></table></figure><h3 id="3-å·¥å‚å‡½æ•°"><a href="#3-å·¥å‚å‡½æ•°" class="headerlink" title="3. å·¥å‚å‡½æ•°"></a>3. å·¥å‚å‡½æ•°</h3><p>å·¥å‚å‡½æ•°æ˜¯è¿”å›å‡½æ•°çš„å‡½æ•°ï¼Œè¿™äº›è¿”å›çš„å‡½æ•°å¯ä»¥æ•è·å¹¶æ“ä½œåˆ›å»ºå®ƒä»¬æ—¶çš„ç¯å¢ƒã€‚è¿™å¸¸ç”¨äºç”Ÿæˆå…·æœ‰ç‰¹å®šè¡Œä¸ºæˆ–çŠ¶æ€çš„å‡½æ•°å®ä¾‹ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">make_multiplier_of</span>(<span class="hljs-params">n</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">multiplier</span>(<span class="hljs-params">x</span>):<br>        <span class="hljs-keyword">return</span> x * n<br>    <span class="hljs-keyword">return</span> multiplier<br><br>times_two = make_multiplier_of(<span class="hljs-number">2</span>)<br>times_three = make_multiplier_of(<span class="hljs-number">3</span>)<br><br><span class="hljs-built_in">print</span>(times_two(<span class="hljs-number">10</span>))  <span class="hljs-comment"># è¾“å‡º: 20</span><br><span class="hljs-built_in">print</span>(times_three(<span class="hljs-number">10</span>))  <span class="hljs-comment"># è¾“å‡º: 30</span><br></code></pre></td></tr></table></figure><h3 id="4-å›è°ƒå‡½æ•°"><a href="#4-å›è°ƒå‡½æ•°" class="headerlink" title="4. å›è°ƒå‡½æ•°"></a>4. å›è°ƒå‡½æ•°</h3><p>åœ¨æŸäº›å¼‚æ­¥ç¼–ç¨‹æˆ–äº‹ä»¶é©±åŠ¨ç¼–ç¨‹åœºæ™¯ä¸­ï¼Œå›è°ƒå‡½æ•°ç»å¸¸è¢«ç”¨ä½œé—­åŒ…ã€‚å®ƒä»¬å…è®¸åœ¨å°†æ¥æŸä¸ªæ—¶é—´ç‚¹è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼ŒåŒæ—¶ä¿æŒå¯¹å½“å‰ç¯å¢ƒæˆ–æ•°æ®çš„å¼•ç”¨ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">perform_action</span>(<span class="hljs-params">action, value</span>):<br>    result = action(value)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;The result is <span class="hljs-subst">&#123;result&#125;</span>&quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">add_ten</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">return</span> x + <span class="hljs-number">10</span><br><br>perform_action(add_ten, <span class="hljs-number">5</span>)  <span class="hljs-comment"># é—­åŒ…çš„æ¦‚å¿µåœ¨è¿™é‡Œä¸æ˜¯ç›´æ¥ä½“ç°ï¼Œä½†å›è°ƒå‡½æ•°å¸¸ä¸é—­åŒ…ç»“åˆä½¿ç”¨</span><br><br><span class="hljs-comment"># å‡è®¾åœ¨å¼‚æ­¥æˆ–äº‹ä»¶é©±åŠ¨ç¯å¢ƒä¸­ï¼Œå›è°ƒå‡½æ•°ä½œä¸ºé—­åŒ…ä¼ é€’ï¼Œä»¥ä¿æŒå¯¹å¤–éƒ¨ç¯å¢ƒçš„å¼•ç”¨</span><br></code></pre></td></tr></table></figure><h3 id="5-ç¼“å­˜æœºåˆ¶"><a href="#5-ç¼“å­˜æœºåˆ¶" class="headerlink" title="5. ç¼“å­˜æœºåˆ¶"></a>5. ç¼“å­˜æœºåˆ¶</h3><p>é—­åŒ…å¯ä»¥ç”¨æ¥å®ç°ç¼“å­˜æœºåˆ¶ï¼Œå°¤å…¶æ˜¯å½“å‡½æ•°è®¡ç®—ä»£ä»·è¾ƒé«˜ä¸”å…¶ç»“æœå¯ä»¥é‡ç”¨æ—¶ã€‚é€šè¿‡ç¼“å­˜å‡½æ•°çš„è¿”å›å€¼ï¼Œå¯ä»¥æ˜¾è‘—æé«˜ç¨‹åºçš„æ€§èƒ½ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">memoize</span>(<span class="hljs-params">func</span>):<br>    cache = &#123;&#125;<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">inner</span>(<span class="hljs-params">*args</span>):<br>        <span class="hljs-keyword">if</span> args <span class="hljs-keyword">in</span> cache:<br>            <span class="hljs-keyword">return</span> cache[args]<br>        result = func(*args)<br>        cache[args] = result<br>        <span class="hljs-keyword">return</span> result<br>    <span class="hljs-keyword">return</span> inner<br><br><span class="hljs-meta">@memoize</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">fibonacci</span>(<span class="hljs-params">n</span>):<br>    <span class="hljs-keyword">if</span> n &lt;= <span class="hljs-number">1</span>:<br>        <span class="hljs-keyword">return</span> n<br>    <span class="hljs-keyword">return</span> fibonacci(n-<span class="hljs-number">1</span>) + fibonacci(n-<span class="hljs-number">2</span>)<br><br><span class="hljs-comment"># è°ƒç”¨ fibonacci å¤šæ¬¡ï¼Œå¯ä»¥çœ‹åˆ°ç¼“å­˜çš„æ•ˆæœ</span><br></code></pre></td></tr></table></figure><p>è¿™äº›åªæ˜¯é—­åŒ…åœ¨ Python ä¸­åº”ç”¨çš„å‡ ä¸ªä¾‹å­ï¼Œå®é™…ä¸Šé—­åŒ…çš„åº”ç”¨åœºæ™¯éå¸¸å¹¿æ³›ï¼Œå‡ ä¹å¯ä»¥åœ¨ä»»ä½•éœ€è¦å°è£…æ•°æ®æˆ–å‡½æ•°é€»è¾‘çš„åœºæ™¯ä¸­ä½¿ç”¨ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
      <category>Python å¸¸è§å‡½æ•°</category>
      
      <category>Python é—­åŒ…</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>python</tag>
      
      <tag>é—­åŒ…</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python å•ä¾‹æ¨¡å¼</title>
    <link href="/2024/08/02/python%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/"/>
    <url>/2024/08/02/python%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<h1 id="Python-å•ä¾‹æ¨¡å¼"><a href="#Python-å•ä¾‹æ¨¡å¼" class="headerlink" title="Python å•ä¾‹æ¨¡å¼"></a>Python å•ä¾‹æ¨¡å¼</h1><p>åœ¨ä¼—å¤šè®¾è®¡æ¨¡å¼ä¸­ï¼Œå•ä¾‹æ¨¡å¼å¯¹äºåœ¨æµ‹è¯•å¼€å‘è¿‡ç¨‹ä¸­åº”ç”¨çš„è¿˜æ˜¯æ¯”è¾ƒå¹¿æ³›çš„ï¼Œä¾‹å¦‚log, driverå®ä¾‹ç­‰ã€‚éƒ½éœ€è¦ä½¿ç”¨åˆ°æˆ‘ä»¬çš„å•ä¾‹æ¨¡å¼</p><h2 id="ä»€ä¹ˆæ˜¯å•ä¾‹æ¨¡å¼ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å•ä¾‹æ¨¡å¼ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å•ä¾‹æ¨¡å¼ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å•ä¾‹æ¨¡å¼ï¼Ÿ</h2><p>ç”¨æˆ‘è‡ªå·±çš„ç†è§£çš„è¯è¯­æ¥è¯´ï¼šâ€œå•ä¾‹æ¨¡å¼å°±æ˜¯å¦‚æœä¸€ä¸ªåœ°æ–¹éƒ½éœ€è¦ç”¨åˆ°è¿™ä¸ªä¸œè¥¿ï¼ˆå¯¹è±¡ï¼‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦åˆ›å»ºä¸€æ¬¡å°±å¯ä»¥å®ç°ç»´æŠ¤å…¨å±€çŠ¶æ€çš„ä½¿ç”¨â€ã€‚å°±æ˜¯æˆ‘å£°æ˜äº†åœ¨ç”¨çš„æ—¶å€™åªéœ€è¿˜æ˜¯æœ€åˆçš„é‚£ä¸ªå³å¯ï¼Œæ— éœ€å†æ¬¡åˆ›å»ºï¼</p><h2 id="åº”ç”¨å¸¸è§åœºæ™¯"><a href="#åº”ç”¨å¸¸è§åœºæ™¯" class="headerlink" title="åº”ç”¨å¸¸è§åœºæ™¯"></a>åº”ç”¨å¸¸è§åœºæ™¯</h2><p>å•ä¾‹æ¨¡å¼ä¸€èˆ¬ç”¨äºå¯¹äºå…±äº«èµ„æºçš„å¹¶å‘è®¿é—®ï¼Œ ä¾‹å¦‚ï¼šæ•°æ®åº“çš„è¿æ¥ï¼Œ æ—¥å¿—çš„ç”Ÿæˆï¼Œ å…¨å±€çš„å·¥å…·å¯¹äºæµ‹è¯•è€Œè¨€å°±æ˜¯æˆ‘ä»¬çš„driverå®ä¾‹åŒ–ã€‚</p><h2 id="ä»£ç è§£é‡Š"><a href="#ä»£ç è§£é‡Š" class="headerlink" title="ä»£ç è§£é‡Š"></a>ä»£ç è§£é‡Š</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">  å› ä¸ºå•ä¾‹æ¨¡å¼åœ¨å…¨å±€å†…åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå› æ­¤å¯ä»¥èŠ‚çœæ¯”è¾ƒå¤šçš„å†…å­˜ç©ºé—´ã€‚</span><br><span class="hljs-string">å…¨å±€åªæœ‰ä¸€ä¸ªæ¥å…¥ç‚¹ï¼Œå¯ä»¥æ›´å¥½åœ°è¿›è¡Œæ•°æ®åŒæ­¥æ§åˆ¶ï¼Œé¿å…å¤šé‡å ç”¨ã€‚</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">  å‡½æ•°è£…é¥°å™¨å®ç°</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">sinleton</span>(<span class="hljs-params">cls</span>):<br>    <span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªå­—å…¸ç”¨æ¥ä¿å­˜è¢«è£…é¥°ç±»çš„å®ä¾‹å¯¹è±¡</span><br>    _instance = &#123;&#125;<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_singleton</span>(<span class="hljs-params">*args, **kwargs</span>):<br>        <span class="hljs-comment"># åˆ¤æ–­è¿™ä¸ªç±»æœ‰æ²¡æœ‰åˆ›å»ºè¿‡å¯¹è±¡ï¼Œ æ²¡æœ‰å°±æ–°åˆ›å»ºä¸€ä¸ªï¼Œ æœ‰çš„è¯åˆ™è¿”å›ä¹‹å‰åˆ›å»ºçš„</span><br>        <span class="hljs-keyword">if</span> cls <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> _instance:<br>            _instance[cls] = cls(*args, **kwargs)<br>        <span class="hljs-keyword">return</span> _instance[cls]<br><br>    <span class="hljs-keyword">return</span> _singleton<br><br><br><span class="hljs-meta">@sinleton</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span>(<span class="hljs-title class_ inherited__">object</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, a=<span class="hljs-number">0</span></span>):<br>        self.a = a<br><br><br>a1 = A(<span class="hljs-number">1</span>)<br>a2 = A(<span class="hljs-number">2</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">id</span>(a1), <span class="hljs-built_in">id</span>(a2)) <span class="hljs-comment"># 135962997305040 135962997305040</span><br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºä¸Šè¿°çš„id æ˜¯ä¸€è‡´çš„ä¹Ÿå°±æ˜¯æˆ‘ä»¬å®ç°äº†å•ä¾‹æ¨¡å¼ã€‚</p><p>ä¸‹é¢ä»¥åˆå§‹åŒ–driverä¸ºä¾‹æ¥å±•ç¤ºå®é™…åº”ç”¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> selenium <span class="hljs-keyword">import</span> webdriver<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SeleniumSingleton</span>:<br>    _instance = <span class="hljs-literal">None</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__new__</span>(<span class="hljs-params">cls, *args, **kwargs</span>):<br>        <span class="hljs-keyword">if</span> cls._instance <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>            cls._instance = <span class="hljs-built_in">super</span>().__new__(cls)<br>            options = webdriver.ChromeOptions()<br>            options.add_argument(<span class="hljs-string">&#x27;--disable-blink-features=AutomationControlled&#x27;</span>)<br>            cls._instance._driver = webdriver.Chrome(options=options)<br>        <span class="hljs-keyword">return</span> cls._instance<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__getattr__</span>(<span class="hljs-params">self, name</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">getattr</span>(self._driver, name)<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç è§£é‡Šï¼š</p><p>_instance &#x3D; Noneï¼šè¿™æ˜¯ä¸€ä¸ªç±»å±æ€§ï¼Œç”¨äºå­˜å‚¨å”¯ä¸€çš„å®ä¾‹ã€‚å®ƒåˆå§‹å€¼ä¸º Noneï¼Œè¡¨ç¤ºè¿˜æ²¡æœ‰åˆ›å»ºå®ä¾‹ã€‚</p><p><strong>new</strong>(cls, *args, **kwargs)ï¼šè¿™æ˜¯ Python ç±»ä¸­çš„ä¸€ä¸ªç‰¹æ®Šæ–¹æ³•ï¼Œç”¨äºåˆ›å»ºç±»çš„å®ä¾‹ã€‚è¿™ä¸ªæ–¹æ³•è¢«é‡å†™ï¼Œç¡®ä¿åªåˆ›å»ºä¸€æ¬¡å®ä¾‹ã€‚</p><p>å¦‚æœ _instance ä¸º Noneï¼Œè¯´æ˜è¿˜æ²¡æœ‰åˆ›å»ºå®ä¾‹ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„ SeleniumSingleton å®ä¾‹å¹¶èµ‹ç»™ _instanceã€‚<br>ç„¶åï¼Œåˆ›å»º webdriver.Chrome å®ä¾‹ï¼Œå¹¶å°†å…¶ä¿å­˜åˆ° _instance._driver å±æ€§ä¸­ã€‚<br>æœ€åï¼Œè¿”å› _instanceã€‚<br><strong>getattr</strong>(self, name)ï¼šè¿™ä¸ªæ–¹æ³•ç”¨äºå¤„ç†å±æ€§è®¿é—®ã€‚å½“ä½¿ç”¨ SeleniumSingleton å®ä¾‹è®¿é—®å±æ€§æ—¶ï¼Œå®ƒä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚</p><p>å®ƒä» self._driver å±æ€§ä¸­è·å–å¯¹åº”å±æ€§ï¼Œå¹¶è¿”å›ç»™è°ƒç”¨è€…ã€‚</p><p>ä»£ç çš„ç”¨é€”:</p><p>è¿™æ®µä»£ç é€šè¿‡å•ä¾‹æ¨¡å¼ï¼Œç¡®ä¿åªåˆ›å»ºä¸€æ¬¡ Selenium WebDriver å®ä¾‹ã€‚è¿™æ ·ï¼Œåœ¨ä¸åŒçš„åœ°æ–¹ä½¿ç”¨ Selenium WebDriver æ—¶ï¼Œéƒ½å¯ä»¥è®¿é—®åŒä¸€ä¸ªå®ä¾‹ï¼Œé¿å…é‡å¤åˆ›å»ºï¼Œæé«˜ä»£ç æ•ˆç‡ã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>å•ä¾‹æ¨¡å¼åœ¨ç¨‹åºç¼–å†™ä¸­æœ‰å¹¿æ³›çš„åº”ç”¨ï¼Œå¤§å®¶å¯ä»¥æŠŠæˆ‘è¿™ä¸ªè®¾è®¡æ¨¡å¼ï¼Œåšåˆ°æ›´åŠ é«˜æ•ˆçš„å¼€å‘ï¼</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
      <category>Python è®¾è®¡æ¨¡å¼</category>
      
      <category>Python å•ä¾‹æ¨¡å¼</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>çœŸçš„æ˜¯äººå–„è¢«äººæ¬ºå—ï¼Ÿ</title>
    <link href="/2024/07/29/%E8%84%BE%E6%B0%94/"/>
    <url>/2024/07/29/%E8%84%BE%E6%B0%94/</url>
    
    <content type="html"><![CDATA[<h1 id="äººå–„çœŸçš„è¢«äººæ¬ºï¼Ÿ"><a href="#äººå–„çœŸçš„è¢«äººæ¬ºï¼Ÿ" class="headerlink" title="äººå–„çœŸçš„è¢«äººæ¬ºï¼Ÿ"></a>äººå–„çœŸçš„è¢«äººæ¬ºï¼Ÿ</h1><p>å…¶å®æˆ‘ä»¬å¤§å®¶æ—©å°±å¬è¯´è¿‡äººå–„è¢«äººæ¬ºï¼Œå¯èƒ½å¤§å®¶ä¹Ÿç»å†è¿‡ï¼Œæœ€è¿‘æˆ‘ä¹Ÿç»å†äº†ä¸€æ¬¡ï¼Œé‚£ä¹ˆå°±å¬æˆ‘ç»†ç»†åˆ°æ¥å§ï¼</p><p>äº‹æƒ…èµ·å› æ˜¯è¿™æ ·çš„ï¼Œç”±äºç§Ÿçš„æˆ¿å­æ¼æ°´äº†ï¼Œç„¶åè”ç³»äº†æˆ¿å±‹ä¸­ä»‹ï¼Œä¸­ä»‹å°±è”ç³»äº†ç‰©ä¸šï¼Œä¸­ä»‹è¯´ï¼šâ€œç‰©ä¸šåœ¨åƒé¥­ï¼Œä¸€ä¼šæ¥â€ã€‚æˆ‘å°±å¼€å§‹ç­‰å¾…ï¼Œç­‰äº†40åˆ†é’Ÿè¿˜æ˜¯æ²¡æœ‰äººæ¥ï¼Œè¿™æ—¶å€™æˆ‘åˆæ‰“è¿‡å»ï¼Œä¸­ä»‹è¯´ï¼šâ€œç‰©ä¸šä¸æ¥äº†â€ï¼Œç„¶åæˆ‘å°±è¯´æ€ä¹ˆä¼šè¿™æ ·ï¼Œåˆšåˆšè¿˜è¯´æ¥çš„ï¼Œç„¶åæ­¤æ—¶åª³å¦‡ï¼Œå¼€å§‹æŠ¢è¿‡æ‰‹æœºè¯´ï¼š</p><p>â€œæˆ‘åœ¨ä½ è¿™ç§Ÿçš„æˆ¿å­ä½ ä¸ºä»€ä¹ˆä¸ç®¡ï¼Ÿâ€ã€‚</p><p>ç‰©ä¸šè¯´ï¼šâ€œæˆ‘ä¸€ç›´åœ¨æ‰“ç”µè¯ï¼Œæ‰“äº†1ä¸ªå°æ—¶äº†â€ã€‚</p><p>åª³å¦‡è¯´ï¼šâ€œæˆ‘ç®¡ä½ æ‰“å‡ ä¸ªå°æ—¶ï¼Œäººæ¥äº†å—ï¼Ÿä½ è§£å†³é—®é¢˜äº†å—ï¼Ÿâ€ã€‚</p><p>ç‰©ä¸šè¯´ï¼šâ€œä½ ä»€ä¹ˆæ„æ€ï¼Ÿæˆ‘ä¸€ç›´åœ¨æ‰“å‘€ï¼â€ã€‚</p><p>åª³å¦‡è¯´ï¼šâ€œæˆ‘åœ¨ä½ è¿™ç§Ÿçš„æˆ¿å­ï¼Œä½ å°±å¾—è§£å†³é—®é¢˜ï¼ŒåŠå¤©äº†ä¹Ÿå«ä¸æ¥ç‰©ä¸šâ€ã€‚</p><p>ç‰©ä¸šè¯´ï¼šâ€œæˆ‘ç»™ä½ æ‰‹æœºå·ä½ è‡ªå·±å«è¡Œä¸â€</p><p>åª³å¦‡è¯´ï¼šâ€œé‚£æˆ‘ç§Ÿä½ çš„æˆ¿å­äº¤çš„é’±æ˜¯å¹²å˜›çš„ï¼Ÿâ€</p><p>ç„¶ååª³å¦‡å°±æŒ‚äº†ã€‚</p><p>ä¹Ÿæ˜¯ä¸€ä¼šç‰©ä¸šå°±å‘æ¶ˆæ¯è¯´ï¼šâ€œç‰©ä¸šä¸€ä¼šå°±åˆ°äº†ï¼â€</p><p>ä¹Ÿæ˜¯ç­‰äº†å¤§æ¦‚10åˆ†é’Ÿï¼Œç‰©ä¸šæ¥äº†ï¼</p><p>æ•´ä¸ªäº‹æƒ…èƒŒåï¼Œåª³å¦‡è¯´ï¼šâ€œä½ è¿˜æ˜¯å¿ƒå¤ªè½¯ï¼Œä½ æ€ä¹ˆå°±ä¸å‰å®³ç‚¹ï¼ï¼Œä»–å°±æ˜¯æ²¡åšå¥½ï¼Œä½ åº”è¯¥ç†ç›´æ°”å£®çš„è´¨é—®ä»–ï¼â€ã€‚</p><p>å…¶å®æˆ‘ä¹Ÿæƒ³é‚£æ—¶å€™æˆ‘è§‰å¾—å¤§å®¶éƒ½ä¸å®¹æ˜“å°±æ¯”è¾ƒå¿ƒå¹³æ°”å’Œè¯´äº†ï¼Œåæ¥æƒ³æƒ³ä¹Ÿç¡®å®ï¼Œä½ ä¸ç‹ ç‚¹è¿™ä¸–ç•Œä¹Ÿæ²¡äººä¼šå¯ä¼¶ä½ ï¼Œæ‰€ä»¥å°±è¯´ï¼šâ€œå¦‚æœï¼Œä½ å ç†ï¼è¿˜æ˜¯è¦è¯­æ°”ä¸Šå ä¸Šé£ï¼â€ã€‚</p><p>æ‰€ä»¥äººå–„è¢«äººæ¬ºï¼Œæˆ–è®¸æ˜¯çœŸçš„ï¼Œä½†æ˜¯ä¹Ÿæ˜¯å»ºç«‹åœ¨æˆ‘ä»¬æœ‰ç†çš„æ—¶å€™ï¼Œè¿˜æ˜¯ä¹Ÿä¸èƒ½å¤ªå¯æ€œåˆ«äººï¼Œå› ä¸ºä»–ä¸ä¸€å®šå¯æ€œä½ ï¼</p><img src="/2024/07/29/%E8%84%BE%E6%B0%94/11.jpg" class="">]]></content>
    
    
    <categories>
      
      <category>éšç¬”</category>
      
      <category>2024å¹´éšç¬”</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>éšç¬”</tag>
      
      <tag>ç”Ÿæ´»</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python JsonPathä»‹ç»</title>
    <link href="/2024/07/24/jsonpath/"/>
    <url>/2024/07/24/jsonpath/</url>
    
    <content type="html"><![CDATA[<h1 id="Python-JsonPathä»‹ç»"><a href="#Python-JsonPathä»‹ç»" class="headerlink" title="Python JsonPathä»‹ç»"></a>Python JsonPathä»‹ç»</h1><p>JsonPath æ˜¯ä¸€ç§ç”¨äºJSONæ•°æ®çš„æŸ¥è¯¢è¯­è¨€ï¼Œç±»ä¼¼äºæˆ‘ä»¬ä½¿ç”¨Xpathåœ¨xmlä¸€æ ·ï¼Œéƒ½æ˜¯æä¾›äº†ä¸€ç§ç®€æ´å¼ºå¤§çš„è¯­æ³•æ¥æµè§ˆå’Œä»å¤æ‚çš„JSONæ•°æ®ç»“æ„ä¸­æå–æ•°æ®ï¼Œæ€»ä¹‹ï¼Œæœ‰äº†å®ƒæˆ‘ä»¬å¯ä»¥æ›´åŠ æ–¹ä¾¿å¿«æ·ã€é«˜æ•ˆçš„æå–JSONæ•°æ®ã€‚</p><h2 id="JsonPath-è¯­æ³•"><a href="#JsonPath-è¯­æ³•" class="headerlink" title="JsonPath è¯­æ³•"></a>JsonPath è¯­æ³•</h2><p>é¦–å…ˆå¯ä»¥æ¥çœ‹ä¸€ä¸ªè¡¨æ ¼ï¼Œä¹Ÿæ˜¯ä»äº’è”ç½‘ä¸Šæ”¶é›†è¿‡æ¥çš„ï¼Œå¯¹äºä¸¤è€…æœ‰å¾ˆå¥½çš„å¯¹æ¯”æè¿°</p><table><thead><tr><th>XPath</th><th>JsonPath</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>&#x2F;</td><td>$</td><td>æ–‡æ¡£æ ¹å…ƒç´ </td></tr><tr><td>.</td><td>@</td><td>å½“å‰å…ƒç´ </td></tr><tr><td>&#x2F;</td><td>.æˆ–[]</td><td>åŒ¹é…ä¸‹çº§å…ƒç´ </td></tr><tr><td>..</td><td>N&#x2F;A</td><td>åŒ¹é…ä¸Šçº§å…ƒç´ ï¼ŒJsonPathä¸æ”¯æŒæ­¤æ“ä½œç¬¦</td></tr><tr><td>&#x2F;&#x2F;</td><td>..</td><td>é€’å½’åŒ¹é…æ‰€æœ‰å­å…ƒç´ </td></tr><tr><td>*</td><td>*</td><td>é€šé…ç¬¦ï¼ŒåŒ¹é…ä¸‹çº§å…ƒç´ </td></tr><tr><td>@</td><td>N&#x2F;A</td><td>åŒ¹é…å±æ€§ï¼ŒJsonPathä¸æ”¯æŒæ­¤æ“ä½œç¬¦</td></tr><tr><td>[]</td><td>[]</td><td>ä¸‹æ ‡è¿ç®—ç¬¦ï¼Œæ ¹æ®ç´¢å¼•è·å–å…ƒç´ ï¼ŒXPathç´¢å¼•ä»1å¼€å§‹ï¼ŒJsonPathç´¢å¼•ä»0å¼€å§‹</td></tr><tr><td></td><td></td><td>[,]</td></tr><tr><td>N&#x2F;A</td><td>[start:end:step]</td><td>æ•°æ®åˆ‡ç‰‡æ“ä½œï¼ŒXPathä¸æ”¯æŒ</td></tr><tr><td>[]</td><td>?()</td><td>è¿‡æ»¤è¡¨è¾¾å¼</td></tr><tr><td>N&#x2F;A</td><td>()</td><td>è„šæœ¬è¡¨è¾¾å¼ï¼Œä½¿ç”¨åº•å±‚è„šæœ¬å¼•æ“ï¼ŒXPathä¸æ”¯æŒ</td></tr><tr><td>()</td><td>N&#x2F;A</td><td>åˆ†ç»„ï¼ŒJsonPathä¸æ”¯æŒ</td></tr></tbody></table><p>é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥çœ‹åˆ°xpath æ‹¥æœ‰çš„åŠŸèƒ½ JsonPath åŸºæœ¬éƒ½å¯ä»¥å®ç°ï¼Œ åªä¸è¿‡ä»–ä»¬çš„å…·ä½“è¯­æ³•ä¸ä¸€æ ·ï¼Œé‚£ä¹ˆä¸‹é¢æˆ‘ä»¬æ¥å…·ä½“æè¿°ä¸€ä¸‹ï¼</p><h2 id="JsonPath-å®ä¾‹"><a href="#JsonPath-å®ä¾‹" class="headerlink" title="JsonPath å®ä¾‹"></a>JsonPath å®ä¾‹</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;bizCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">10000</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;innerMsg&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;success&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;success&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;eventsByTournament&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;topLeagues&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>                <span class="hljs-punctuation">&#123;</span><br>                    <span class="hljs-attr">&quot;liveCount&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;totalCount&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">9</span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;userFavorite&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;events&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>                        <span class="hljs-punctuation">&#123;</span><br>                            <span class="hljs-attr">&quot;hasTips&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;hasVideo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;eventId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;sr:match:51595857&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">4</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;markets&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;awayCompetitorLogo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://www.matchplay.com/static/competitor/5962.png&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;homeCompetitorLogo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://www.matchplay.com/static/competitor/126304.png&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;homeCompetitor&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Lincoln Red Imps&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;awayCompetitor&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Qarabag FK&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;homeCompetitorId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;sr:competitor:126304&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;awayCompetitorId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;sr:competitor:5962&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;startTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1721750400000</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;ap&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;aet&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;homeResult&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;awayResult&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;halfScore&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0:1&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;homeScoreWholeMatch&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;awayScoreWholeMatch&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;homeCurrentPeriodScore&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;awayCurrentPeriodScore&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;homeScoreInCurrentSection&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;awayScoreInCurrentSection&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;currentServer&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;matchStatus&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;FT&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;remainTimeOfCurrentPeriod&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;eventTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;remainTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;userSubscribed&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><br>                        <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-punctuation">&#123;</span><br>                            <span class="hljs-attr">&quot;hasTips&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;hasVideo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;eventId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;sr:match:51595849&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">4</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;markets&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;awayCompetitorLogo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://www.matchplay.com/static/competitor/2218.png&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;homeCompetitorLogo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://www.matchplay.com/static/competitor/3177.png&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;homeCompetitor&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Shamrock Rovers&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;awayCompetitor&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Sparta Prague&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;homeCompetitorId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;sr:competitor:3177&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;awayCompetitorId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;sr:competitor:2218&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;startTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1721761200000</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;ap&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;aet&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;homeResult&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;awayResult&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;halfScore&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0:1&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;homeScoreWholeMatch&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;awayScoreWholeMatch&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;homeCurrentPeriodScore&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;awayCurrentPeriodScore&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;homeScoreInCurrentSection&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;awayScoreInCurrentSection&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;currentServer&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;matchStatus&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;FT&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;remainTimeOfCurrentPeriod&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;eventTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;remainTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;userSubscribed&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><br>                        <span class="hljs-punctuation">&#125;</span><br>                    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;hasVideo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;categoryLogo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://www.matchplay.com/static/manage-sport/ac294391-25db-4ca7-a516-4d5c1da9f696.png&quot;</span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;category&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;International Clubs&quot;</span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;categoryId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;sr:category:393&quot;</span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;sportId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;sr:sport:1&quot;</span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;tournamentId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;sr:tournament:7&quot;</span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;tournament&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;UEFA Champions League&quot;</span><br>                <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-punctuation">&#123;</span><br>                    <span class="hljs-attr">&quot;liveCount&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;totalCount&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">4</span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;userFavorite&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;events&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>                        <span class="hljs-punctuation">&#123;</span><br>                            <span class="hljs-attr">&quot;hasTips&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;hasVideo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;eventId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;sr:match:46655705&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">4</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;markets&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;awayCompetitorLogo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://www.matchplay.com/static/competitor/3216.png&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;homeCompetitorLogo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://www.matchplay.com/static/competitor/191648.png&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;homeCompetitor&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Deportivo Riestra&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;awayCompetitor&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Argentinos Juniors&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;homeCompetitorId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;sr:competitor:191648&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;awayCompetitorId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;sr:competitor:3216&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;startTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1721757600000</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;ap&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;aet&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;homeResult&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;awayResult&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;halfScore&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0:0&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;homeScoreWholeMatch&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;awayScoreWholeMatch&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;homeCurrentPeriodScore&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;awayCurrentPeriodScore&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;homeScoreInCurrentSection&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;awayScoreInCurrentSection&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;currentServer&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;matchStatus&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;FT&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;remainTimeOfCurrentPeriod&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;eventTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;remainTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;userSubscribed&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><br>                        <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>                        <span class="hljs-punctuation">&#123;</span><br>                            <span class="hljs-attr">&quot;hasTips&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;hasVideo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;eventId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;sr:match:46655717&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">4</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;markets&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;awayCompetitorLogo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://www.matchplay.com/static/competitor/3201.png&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;homeCompetitorLogo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://www.matchplay.com/static/competitor/3205.png&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;homeCompetitor&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Gimnasia Y Esgrima La Plata&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;awayCompetitor&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;CA San Lorenzo de Almagro&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;homeCompetitorId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;sr:competitor:3205&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;awayCompetitorId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;sr:competitor:3201&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;startTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1721771100000</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;ap&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;aet&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;homeResult&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;awayResult&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;halfScore&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0:1&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;homeScoreWholeMatch&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;awayScoreWholeMatch&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;homeCurrentPeriodScore&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;awayCurrentPeriodScore&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;homeScoreInCurrentSection&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;awayScoreInCurrentSection&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;currentServer&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;matchStatus&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;FT&quot;</span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;remainTimeOfCurrentPeriod&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;eventTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;remainTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                            <span class="hljs-attr">&quot;userSubscribed&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><br>                        <span class="hljs-punctuation">&#125;</span><br>                    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;hasVideo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;categoryLogo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://www.matchplay.com/static/manage-sport/ecf033b1-8831-4961-aea1-832b8095f78e.png&quot;</span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;category&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Argentina&quot;</span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;categoryId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;sr:category:48&quot;</span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;sportId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;sr:sport:1&quot;</span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;tournamentId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;sr:tournament:155&quot;</span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;tournament&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Liga Profesional&quot;</span><br>                <span class="hljs-punctuation">&#125;</span><br>            <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;allLeagues&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>                <span class="hljs-punctuation">&#123;</span><br>                    <span class="hljs-attr">&quot;liveCount&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;totalCount&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">4</span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;userFavorite&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;eventsByGroup&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;hasVideo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;categoryLogo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://www.matchplay.com/static/manage-sport/ecf033b1-8831-4961-aea1-832b8095f78e.png&quot;</span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;category&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Argentina&quot;</span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;categoryId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;sr:category:48&quot;</span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;sportId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;sr:sport:1&quot;</span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;tournamentId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;sr:tournament:155&quot;</span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;tournament&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Liga Profesional&quot;</span><br>                <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-punctuation">&#123;</span><br>                    <span class="hljs-attr">&quot;liveCount&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;totalCount&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;userFavorite&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;eventsByGroup&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;hasVideo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;categoryLogo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://www.matchplay.com/static/manage-sport/3c89bcbc-c186-4b9c-ab56-0cca81dc7cf2.png&quot;</span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;category&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Australia&quot;</span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;categoryId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;sr:category:34&quot;</span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;sportId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;sr:sport:1&quot;</span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;tournamentId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;sr:tournament:1268&quot;</span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;tournament&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Queensland NPL&quot;</span><br>                <span class="hljs-punctuation">&#125;</span><br>            <span class="hljs-punctuation">]</span><br>        <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;eventsByTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><br>    <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>æŸ¥æ‰¾å‡ºå½“å‰bizCodeçš„å€¼ï¼š</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ï¼š $.bizCode æ¥å»å–åˆ°ï¼Œ$ è¡¨ç¤ºæ ¹ç›®å½• . ä¸‹ä¸€çº§ bizCode å¯¹åº”çš„key</p><img src="/2024/07/24/jsonpath/jsonpath3.png" class=""><p>æŸ¥æ‰¾å‡ºå½“å‰topLeaguesä¸‹çš„æ‰€æœ‰æ•°æ®ï¼š</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ï¼š $..topLeagues æ¥å»å–åˆ°ï¼Œ$ è¡¨ç¤ºæ ¹ç›®å½•ï¼Œ.. è¡¨ç¤ºé€’å½’åŒ¹é…æ‰€æœ‰å­å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯å–åˆ°æ‰€æœ‰çš„topLeaguesçš„ä¿¡æ¯</p><img src="/2024/07/24/jsonpath/jsonpath1.png" class=""><p>æŸ¥æ‰¾å‡ºallLeaguesé‡Œé¢ç¬¬ä¸€ä¸ªæ•°æ®æ®µçš„sportId</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ï¼š $..allLeagues[0][â€˜sportIdâ€™] $ è¡¨ç¤ºæ ¹ç›®å½•ï¼Œ.. è¡¨ç¤ºé€’å½’åŒ¹é…æ‰€æœ‰å­å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯å–åˆ°æ‰€æœ‰çš„topLeaguesçš„ä¿¡æ¯ å…¶ä¸­[0] è¡¨ç¤ºæå–åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªï¼Œ[â€˜sportIdâ€™]è¡¨ç¤ºå¯¹åº”çš„å­—æ®µä¿¡æ¯</p><img src="/2024/07/24/jsonpath/jsonpath2.png" class=""><p>å¤§å®¶å¯ä»¥åœ¨è¿™ä¸ªç½‘ç«™ä¸Šä½“éªŒåœ¨çº¿æå–ä¿¡æ¯ï¼š<a href="https://jsonpath.com/">https://jsonpath.com/</a></p><p>æˆ‘æƒ³ç»è¿‡ä¸Šé¢çš„æ¡ˆä¾‹ä½ å·²ç»æŒæ¡äº†å…·ä½“å–å‡ºå€¼çš„è¯­æ³•ï¼Œé‚£ä¹ˆåœ¨pythonä¸­æ€ä¹ˆåº”ç”¨å‘¢ï¼Ÿå‡å¦‚æˆ‘ä»¬å†™ä¸€ä¸ªæ¥å£æµ‹è¯•ï¼Œæˆ‘ä»¬è¿˜ç”¨ä¸Šé¢çš„ä¸¾ä¾‹ï¼Œæ¯”å¦‚æ­¤æ—¶æˆ‘è¦æ–­è¨€å½“å‰è¿”å›çš„bizCodeæ˜¯å¦æ˜¯10000ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥è‡ªå·±å®šä¹‰ä¸šåŠ¡codeï¼Œå‡è®¾10000 æ˜¯æ­£å¸¸çš„ä¸šåŠ¡ç ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆåº”ç”¨å‘¢ï¼Ÿ</p><h2 id="Pythonä¸­åº”ç”¨-JsonPath"><a href="#Pythonä¸­åº”ç”¨-JsonPath" class="headerlink" title="Pythonä¸­åº”ç”¨ JsonPath"></a>Pythonä¸­åº”ç”¨ JsonPath</h2><p>é‚£ä¹ˆæˆ‘ä»¬æƒ³è¦æå–bizCodeçš„è¯å¯ä»¥è¿™ä¹ˆåšï¼Œ é¦–å…ˆæ‰§è¡Œå®‰è£…ç¬¬ä¸‰æ–¹çš„åŒ…</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">pip install jsonpath<br></code></pre></td></tr></table></figure><p>python ä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> jsonpath<br><span class="hljs-keyword">import</span> json<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">assert_json</span>(<span class="hljs-params">data,key</span>):<br>    data = json.loads(data)<br>    assert_value = jsonpath.jsonpath(data, key)<br>    <span class="hljs-keyword">if</span> assert_value == <span class="hljs-number">10000</span>:<br>        <span class="hljs-keyword">return</span> assert_value<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br>assert_json(data=biz_json, key=<span class="hljs-string">&#x27;$.bizCode&#x27;</span>)<br><br></code></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç å†™äº†ä¸€ä¸ªæ–¹æ³•ï¼Œéœ€è¦ä¼ å…¥ä¸€ä¸ªjsonå’Œä¸€ä¸ªjsonpathè¯­æ³•ã€‚jsonpath.jsonpath(data,key) å¦‚æœå‡½æ•°æœªæ‰¾åˆ°è¿”å›False, æ‰¾åˆ°åˆ™è¿”å›å¯¹åº”çš„å€¼ã€‚é‚£ä¹ˆæˆ‘ä»¬åœ¨åšæ¥å£æ–­è¨€çš„æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥è½»æ¾çš„å®ç°å¯¹åº”å…·ä½“çš„ä¿¡æ¯è¿›è¡Œæµ‹è¯•ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å¤§å®¶å¯ä»¥çœ‹å‡ºå…¶å®è¿™ä¸ªè¿˜æ˜¯å¾ˆç®€å•çš„ï¼Œåªè¦æˆ‘ä»¬æŒæ¡äº†è¿™äº›çŸ¥è¯†ï¼Œå°±å¯ä»¥ä½¿å¾—æˆ‘ä»¬åœ¨å·¥ä½œä¸­çš„æ•ˆç‡å¤§å¤§æå‡ï¼</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
      <category>Python å¸¸è§å‡½æ•°</category>
      
      <category>Python JsonPathä»‹ç»</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python æ·±æ‹·è´æµ…æ‹·è´</title>
    <link href="/2024/07/22/%E6%B7%B1%E6%8B%B7%E8%B4%9D%E6%B5%85%E6%8B%B7%E8%B4%9D/"/>
    <url>/2024/07/22/%E6%B7%B1%E6%8B%B7%E8%B4%9D%E6%B5%85%E6%8B%B7%E8%B4%9D/</url>
    
    <content type="html"><![CDATA[<h1 id="Python-æ·±æ‹·è´æµ…æ‹·è´"><a href="#Python-æ·±æ‹·è´æµ…æ‹·è´" class="headerlink" title="Python æ·±æ‹·è´æµ…æ‹·è´"></a>Python æ·±æ‹·è´æµ…æ‹·è´</h1><p>å¤§å®¶è‚¯å®šåœ¨å­¦ä¹ PythonåŸºç¡€çŸ¥è¯†çš„æ—¶å€™ï¼Œå·²ç»å­¦è¿‡è¿™ä¸ªäº†ã€‚ä½†æ˜¯æˆ‘ä¸ºä»€ä¹ˆå†™åœ¨è¿™é‡Œå‘¢ï¼Ÿå› ä¸ºè¿™é‡Œæ¶‰åŠåˆ°çš„çŸ¥è¯†ä¸ä»…æ˜¯æ·±æ‹·è´å’Œæµ…æ‹·è´è¿˜æœ‰æˆ‘ä»¬çš„å¯å˜æ•°æ®ç»“æ„ä»¥åŠä¸å¯å˜æ•°æ®ç»“æ„ï¼Œè¯´åˆ°è¿™ä¸ªå¯èƒ½å¤§å®¶å°±ä¼šæœ‰ç‚¹é™Œç”Ÿäº†ï¼Œè¿™åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæœ‰ä»€ä¹ˆè”ç³»å‘¢ï¼Ÿé‚£ä¹ˆä¸€èµ·æ¥å­¦ä¹ å§ï¼</p><h2 id="æ·±æ‹·è´æµ…æ‹·è´"><a href="#æ·±æ‹·è´æµ…æ‹·è´" class="headerlink" title="æ·±æ‹·è´æµ…æ‹·è´"></a>æ·±æ‹·è´æµ…æ‹·è´</h2><h3 id="æµ…æ‹·è´"><a href="#æµ…æ‹·è´" class="headerlink" title="æµ…æ‹·è´"></a>æµ…æ‹·è´</h3><p>åœ¨Python ä¸­æˆ‘ä»¬ç»å¸¸ä¼šå¬è§æ·±æ‹·è´å’Œæµ…æ‹·è´çš„æ¦‚å¿µï¼Œé‚£ä¹ˆä»€ä¹ˆæ˜¯æµ…æ‹·è´å‘¢ï¼Ÿ ä¸‹é¢ä»£ç æ¥æ¼”ç¤ºï¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">a = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]<br>b = a<br><span class="hljs-built_in">print</span>(a==b) <span class="hljs-comment"># True</span><br><span class="hljs-built_in">print</span>(a <span class="hljs-keyword">is</span> b) <span class="hljs-comment"># True</span><br></code></pre></td></tr></table></figure><p>å¤§å®¶å¯ä»¥ä»ä¸Šé¢çš„ä»£ç ä¸­çœ‹åˆ°ï¼Œå£°æ˜äº†ä¸€ä¸ªåˆ—è¡¨å˜é‡åå­—ä¸ºa, ç„¶åå°† a èµ‹å€¼ç»™äº† bï¼Œ è¿™æ—¶å€™æˆ‘ä»¬æŸ¥çœ‹ a&#x3D;&#x3D;b  a is b å¯ä»¥çœ‹å‡ºæ‰“å°å‡ºæ¥çš„éƒ½æ˜¯true, é‚£ä¹ˆä¸‹é¢æˆ‘ä¼šè¿›è¡Œå…¶ä»–çš„æ“ä½œï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">a = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]<br>b = a<br><span class="hljs-built_in">print</span>(a==b)<br><span class="hljs-built_in">print</span>(a <span class="hljs-keyword">is</span> b)<br><br>a.append(<span class="hljs-number">4</span>)<br><span class="hljs-built_in">print</span>(a==b) <span class="hljs-comment"># True</span><br><span class="hljs-built_in">print</span>(a <span class="hljs-keyword">is</span> b) <span class="hljs-comment"># True</span><br></code></pre></td></tr></table></figure><p>æˆ‘åœ¨ä¸Šé¢çš„æ“ä½œä¸­æ˜¯åœ¨açš„åˆ—è¡¨ä¸­æ·»åŠ äº†ä¸€ä¸ª4ï¼Œä½†æ˜¯æ­¤æ—¶æˆ‘åœ¨æ‰§è¡Œ a&#x3D;&#x3D;bï¼Œ a is b ç»“æœä»æ—§æ˜¯True,é‚£ä¹ˆå¤§å®¶æ€è€ƒä¸ºä»€ä¹ˆå‘¢ï¼Ÿæ˜æ˜æˆ‘å°†[1,2,3]ä¹Ÿå°±æ˜¯åˆå§‹çš„a èµ‹å€¼ç»™äº† bï¼Œ ä½†æ˜¯æ­¤æ—¶æˆ‘å¹¶å†æ¬¡èµ‹å€¼ç»™b,ä¸ºä½•ä¼šè¿˜æ˜¯ä¸€æ ·çš„å‘¢ï¼Ÿé‚£ä¹ˆå°±æ˜¯æˆ‘ä»¬è¦è¯´çš„æµ…æ‹·è´äº†ã€‚</p><p>æµ…æ‹·è´ï¼šä¹Ÿå°±æ˜¯åœ¨å†…å­˜ä¸­é‡æ–°ç”³è¯·ä¸€å—ï¼Œç„¶åå­˜å‚¨ä½ æµ…æ‹·è´çš„é‚£ä¸ªå¯¹è±¡çš„åœ°å€å¼•ç”¨ã€‚</p><p>ä¹Ÿå°±æ˜¯æœŸåˆåœ¨ä½ èµ‹å€¼çš„æ—¶å€™ï¼Œbé‡Œé¢å­˜æ”¾çš„æ˜¯açš„å†…å­˜åœ°å€çš„å¼•ç”¨ï¼Œè®¿é—®bçš„æ—¶å€™å®é™…è®¿é—®çš„è¿˜æ˜¯açš„å†…å­˜åœ°å€ï¼Œa å’Œ b éƒ½æŒ‡å‘åŒä¸€ä¸ªå†…å­˜å¯¹è±¡ï¼Œå½“æˆ‘ä»¬ä¿®æ”¹äº†açš„åˆ—è¡¨å†…å®¹çš„æ—¶å€™ï¼Œè®¿é—®bçš„æ—¶å€™ä¹Ÿå°±ä¼šè®¿é—®åˆ°æˆ‘ä»¬æœ€æ–°ä¿®æ”¹çš„aã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python">a = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]<br>b = a<br><span class="hljs-built_in">print</span>(a==b)<br><span class="hljs-built_in">print</span>(a <span class="hljs-keyword">is</span> b) <br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">id</span>(a)) <span class="hljs-comment"># 138984912667136</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">id</span>(b)) <span class="hljs-comment"># 138984912667136</span><br><br>a.append(<span class="hljs-number">4</span>)<br><span class="hljs-built_in">print</span>(a==b)<br><span class="hljs-built_in">print</span>(a <span class="hljs-keyword">is</span> b)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">id</span>(a)) <span class="hljs-comment"># 138984912667136</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">id</span>(b)) <span class="hljs-comment"># 138984912667136</span><br></code></pre></td></tr></table></figure><p>é‚£ä¹ˆç»è¿‡ä¸Šè¿°çš„æŸ¥çœ‹a,bçš„å†…å­˜åœ°å€å°±å¯ä»¥æ›´åŠ äº†è§£äº†ï¼Œé‚£ä¹ˆä¸‹é¢æ€»ç»“ä¸€ä¸‹ï¼š</p><img src="/2024/07/22/%E6%B7%B1%E6%8B%B7%E8%B4%9D%E6%B5%85%E6%8B%B7%E8%B4%9D/%E6%B5%85%E6%8B%B7%E8%B4%9D.png" class=""><h3 id="æ·±æ‹·è´"><a href="#æ·±æ‹·è´" class="headerlink" title="æ·±æ‹·è´"></a>æ·±æ‹·è´</h3><p>ä»£ç æ¼”ç¤ºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> copy<br><br>a = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]<br>b = copy.deepcopy(a)<br><span class="hljs-built_in">print</span>(a==b) <span class="hljs-comment"># True</span><br><span class="hljs-built_in">print</span>(a <span class="hljs-keyword">is</span> b) <span class="hljs-comment"># False</span><br></code></pre></td></tr></table></figure><p>æ­¤æ—¶æˆ‘ä»¬å¼•å…¥äº†pythonè‡ªå¸¦çš„copyå‡½æ•°ï¼Œä½¿ç”¨äº†å…¶ä¸­çš„deepcopyæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å°±æ˜¯æ·±æ‹·è´ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œå°±å’Œä¸Šé¢çš„æµ…æ‹·è´ä¸ä¸€æ ·äº†ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°aå’Œb çš„å€¼ä¾æ—§æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯a is b æ˜¯False, è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ ä¸‹é¢æˆ‘ä»¬åŠ ä¸¤è¡Œä»£ç å°±çŸ¥é“äº†ï¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> copy<br><br>a = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]<br>b = copy.deepcopy(a)<br><span class="hljs-built_in">print</span>(a==b)<br><span class="hljs-built_in">print</span>(a <span class="hljs-keyword">is</span> b)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">id</span>(a)) <span class="hljs-comment"># 134937665356864</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">id</span>(b)) <span class="hljs-comment"># 134937667268096</span><br></code></pre></td></tr></table></figure><p>é‚£ä¹ˆåˆ°è¿™é‡Œæˆ‘ç›¸ä¿¡å¾ˆå¤šåŒå­¦å·²ç»æ˜ç™½äº†æ·±æ‹·è´ä¸æµ…æ‹·è´çš„ä¸åŒä¹‹å¤„äº†ï¼</p><p>æ·±æ‹·è´ï¼šå£°æ˜çš„å†…å­˜ä¸­çœŸæ­£çš„å­˜å‚¨è¢«æ‹·è´çš„å€¼ï¼Œä¸åœ¨å¼•ç”¨æºæ•°æ®çš„å†…å­˜åœ°å€ã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬åœ¨ä½¿ç”¨æ·±æ‹·è´çš„æ—¶å€™å°±æ˜¯çœŸæ­£çš„å¤åˆ¶äº†å€¼åˆ°äº†bä¸­ï¼Œaå’Œb ä¹Ÿå°±å®Œå…¨ç‹¬ç«‹äº†äº’ä¸å½±å“ï¼å¯ä»¥é€šè¿‡ä¸‹é¢çš„ä»£ç æ¥çœ‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> copy<br><br>a = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]<br>b = copy.deepcopy(a)<br><span class="hljs-built_in">print</span>(a==b)<br><span class="hljs-built_in">print</span>(a <span class="hljs-keyword">is</span> b)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">id</span>(a)) <span class="hljs-comment"># 134937665356864</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">id</span>(b)) <span class="hljs-comment"># 134937667268096</span><br><br>a.append(<span class="hljs-number">4</span>)<br><span class="hljs-built_in">print</span>(a==b) <span class="hljs-comment"># False</span><br><span class="hljs-built_in">print</span>(a <span class="hljs-keyword">is</span> b) <span class="hljs-comment"># False</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">id</span>(a)) <span class="hljs-comment"># 134937665356864</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">id</span>(b)) <span class="hljs-comment"># 134937667268096</span><br></code></pre></td></tr></table></figure><p>é‚£ä¹ˆåˆ°æ­¤æˆ‘æƒ³ä½ å·²ç»æ˜ç™½äº†æ·±æ‹·è´çš„å«ä¹‰äº†ï¼é‚£ä¹ˆåˆšåˆšæˆ‘æåˆ°çš„ å¯å˜æ•°æ®ç»“æ„ å’Œ ä¸å¯å˜æ•°æ®ç»“æ„ å’Œè¿™ä¸ªæ·±æ‹·è´å’Œæµ…æ‹·è´æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿé‚£å°±è®©æˆ‘ä»¬ä¸€èµ·ç»§ç»­å­¦ä¹ å§ï¼</p><h2 id="å¯å˜æ•°æ®ç»“æ„å’Œä¸å¯å˜æ•°æ®ç»“æ„"><a href="#å¯å˜æ•°æ®ç»“æ„å’Œä¸å¯å˜æ•°æ®ç»“æ„" class="headerlink" title="å¯å˜æ•°æ®ç»“æ„å’Œä¸å¯å˜æ•°æ®ç»“æ„"></a>å¯å˜æ•°æ®ç»“æ„å’Œä¸å¯å˜æ•°æ®ç»“æ„</h2><h3 id="å¯å˜æ•°æ®ç»“æ„"><a href="#å¯å˜æ•°æ®ç»“æ„" class="headerlink" title="å¯å˜æ•°æ®ç»“æ„"></a>å¯å˜æ•°æ®ç»“æ„</h3><p>å¯å˜æ•°æ®ç»“æ„é¡¾åæ€ä¹‰å°±æ˜¯è¿™ä¸ªæ•°æ®ç»“æ„å¯ä»¥è¢«æ”¹å˜ï¼Œæ¯”å¦‚ä½ å¯ä»¥å¢åŠ ï¼Œä¿®æ”¹ï¼Œåˆ é™¤å…ƒç´ ã€‚</p><p>é‚£ä¹ˆåœ¨python ä¸­å¯å˜æ•°æ®ç»“æ„æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><ul><li><p><strong>åˆ—è¡¨ï¼ˆlistï¼‰</strong>ï¼šåˆ—è¡¨æ˜¯æœ€å¸¸ç”¨çš„å¯å˜æ•°æ®ç»“æ„ä¹‹ä¸€ã€‚ä½ å¯ä»¥å‘åˆ—è¡¨ä¸­æ·»åŠ ã€åˆ é™¤æˆ–æ›´æ”¹å…ƒç´ ã€‚</p></li><li><p><strong>å­—å…¸ï¼ˆdictï¼‰</strong>ï¼šå­—å…¸å­˜å‚¨é”®å€¼å¯¹ï¼Œå…¶ä¸­é”®å¿…é¡»æ˜¯å”¯ä¸€çš„ä¸”ä¸å¯å˜ï¼ˆé€šå¸¸æ˜¯å­—ç¬¦ä¸²æˆ–æ•°å­—ï¼‰ï¼Œä½†å€¼å¯ä»¥æ˜¯ä»»ä½•æ•°æ®ç±»å‹ï¼ŒåŒ…æ‹¬å¯å˜ç±»å‹ã€‚ä½ å¯ä»¥æ·»åŠ ã€åˆ é™¤æˆ–æ›´æ”¹å­—å…¸ä¸­çš„é”®å€¼å¯¹ã€‚</p></li><li><p><strong>é›†åˆï¼ˆsetï¼‰</strong> å’Œ <strong>å¯å˜é›†åˆï¼ˆmutable setï¼‰</strong>ï¼šé›†åˆæ˜¯ä¸€ä¸ªæ— åºçš„ä¸é‡å¤å…ƒç´ é›†ã€‚Pythonä¸­çš„é›†åˆé»˜è®¤å°±æ˜¯å¯å˜çš„ï¼Œä½ å¯ä»¥å‘é›†åˆä¸­æ·»åŠ æˆ–åˆ é™¤å…ƒç´ ï¼Œä½†ä¸èƒ½ç›´æ¥ä¿®æ”¹å…ƒç´ ï¼ˆå› ä¸ºé›†åˆçš„å…ƒç´ å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œå¹¶ä¸”é€šå¸¸æ˜¯ä¸å¯å˜çš„ï¼‰ã€‚</p></li><li><p><strong>åˆ—è¡¨æ¨å¯¼å¼ã€å­—å…¸æ¨å¯¼å¼ç­‰</strong> ç”Ÿæˆçš„æ•°æ®ç»“æ„ç±»å‹ï¼ˆæ ¹æ®æ¨å¯¼å¼çš„å†…å®¹ï¼Œå¯ä»¥æ˜¯åˆ—è¡¨ã€å­—å…¸ç­‰ï¼‰ï¼Œå…¶å¯å˜æ€§å–å†³äºæ¨å¯¼å‡ºçš„æ•°æ®ç»“æ„ç±»å‹ã€‚</p></li></ul><p>åœ¨åˆšåˆšçš„æµ…æ‹·è´ä¾‹å­ä¸­å°±å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬ä¿®æ”¹äº†åˆ—è¡¨ä¸­çš„å…ƒç´ æ–°å¢äº†ä¸€ä¸ªï¼Œä½ ä¹Ÿå¯ä»¥æ‰§è¡Œåˆ é™¤ï¼Œä¿®æ”¹ç­‰æ“ä½œã€‚å¯¹äºå­—å…¸ï¼Œé›†åˆï¼Œ æ¨å¯¼å¼ç­‰éƒ½å¯ä»¥åšåˆ°å¢åˆ æ›´æ–°æ“ä½œï¼Œè¿™é‡Œä¸åœ¨ä»‹ç»åŸºæœ¬çš„pythonè¯­æ³•ï¼Œä¸å¤ªäº†è§£çš„å¯ä»¥è‡ªå·±æœç´¢ä¸€ä¸‹ï¼</p><h3 id="ä¸å¯å˜çš„æ•°æ®ç»“æ„"><a href="#ä¸å¯å˜çš„æ•°æ®ç»“æ„" class="headerlink" title="ä¸å¯å˜çš„æ•°æ®ç»“æ„"></a>ä¸å¯å˜çš„æ•°æ®ç»“æ„</h3><p>é‚£ä¹ˆä¸å¯å˜çš„æ•°æ®ç»“æ„å°±æ˜¯ä¸å…è®¸è¢«æ›´æ”¹ï¼Œæ¯”å¦‚ä¿®æ”¹ï¼Œå¢åŠ ï¼Œåˆ é™¤ç­‰æ“ä½œã€‚</p><p>é‚£ä¹ˆpythonä¸­æœ‰ä»¥ä¸‹ä¸å¯å˜çš„æ•°æ®ç»“æ„ï¼š</p><ul><li><p><strong>æ•´æ•°ï¼ˆintï¼‰</strong> å’Œ <strong>æµ®ç‚¹æ•°ï¼ˆfloatï¼‰</strong>ï¼šè¿™äº›åŸºæœ¬æ•°æ®ç±»å‹æ˜¯ä¸å¯å˜çš„ï¼Œä½ ä¸èƒ½æ”¹å˜ä¸€ä¸ªæ•´æ•°æˆ–æµ®ç‚¹æ•°çš„å€¼ã€‚</p></li><li><p><strong>å­—ç¬¦ä¸²ï¼ˆstrï¼‰</strong>ï¼šå­—ç¬¦ä¸²åœ¨Pythonä¸­æ˜¯ä¸å¯å˜çš„ã€‚å¦‚æœä½ å°è¯•ä¿®æ”¹å­—ç¬¦ä¸²ä¸­çš„æŸä¸ªå­—ç¬¦ï¼Œæ¯”å¦‚é€šè¿‡ç´¢å¼•èµ‹å€¼ï¼ŒPythonä¼šæŠ›å‡ºä¸€ä¸ªTypeErrorã€‚ç›¸åï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ã€‚</p></li><li><p><strong>å…ƒç»„ï¼ˆtupleï¼‰</strong>ï¼šå…ƒç»„ä¹Ÿæ˜¯ä¸å¯å˜çš„ã€‚ä¸€æ—¦ä½ åˆ›å»ºäº†ä¸€ä¸ªå…ƒç»„ï¼Œä½ å°±ä¸èƒ½æ›´æ”¹å®ƒçš„å…ƒç´ ï¼ˆå°½ç®¡å¦‚æœå…ƒç»„ä¸­çš„å…ƒç´ æ˜¯å¯å˜çš„ï¼Œæ¯”å¦‚åˆ—è¡¨ï¼Œä½ å¯ä»¥ä¿®æ”¹åˆ—è¡¨çš„å…ƒç´ ï¼Œä½†å…ƒç»„çš„ç»“æ„æœ¬èº«â€”â€”å³å…ƒç´ çš„é¡ºåºå’Œæ•°é‡â€”â€”æ˜¯ä¸å¯å˜çš„ï¼‰ã€‚</p></li></ul><p>ä»¥ä¸Šçš„æ•°æ®ç»“æ„æ˜¯æ— æ³•æ›´æ”¹å†…å®¹çš„ï¼Œä¹Ÿå°±æ˜¯ä¸å¯å˜çš„æ•°æ®ç»“æ„ï¼Œä¸‹é¢ä»£ç è§£é‡Šï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">a = <span class="hljs-string">&#x27;1&#x27;</span><br>b = a<br><span class="hljs-built_in">print</span>(a==b) <span class="hljs-comment"># True</span><br><span class="hljs-built_in">print</span>(a <span class="hljs-keyword">is</span> b) <span class="hljs-comment"># True</span><br></code></pre></td></tr></table></figure><p>é‚£ä¹ˆï¼Œæˆ‘ä»¬ä»¥å­—ç¬¦ç±»å‹ä¸¾ä¾‹ï¼Œå¯è§æˆ‘è¿˜æ˜¯æˆ‘ä»¬èµ‹å€¼ç»™äº†bï¼Œä¸¤è€…ä¹Ÿæ˜¯ç›¸åŒçš„å€¼ï¼Œç›¸åŒçš„å†…å­˜åœ°å€ï¼Œé‚£ä¹ˆå¦‚æœæˆ‘æ­¤æ—¶ä¿®æ”¹açš„å†…å®¹ä¼šå¼•å‘ä»€ä¹ˆå‘¢ï¼Ÿ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">a = <span class="hljs-string">&#x27;1&#x27;</span><br>b = a<br><span class="hljs-built_in">print</span>(a==b)<br><span class="hljs-built_in">print</span>(a <span class="hljs-keyword">is</span> b)<br><br>a = <span class="hljs-string">&#x27;2&#x27;</span><br><span class="hljs-built_in">print</span>(a==b) <span class="hljs-comment"># False</span><br><span class="hljs-built_in">print</span>(a <span class="hljs-keyword">is</span> b) <span class="hljs-comment"># False</span><br></code></pre></td></tr></table></figure><p>è¿™æ—¶å¯èƒ½æœ‰åŒå­¦å°±ä¼šæœ‰ç–‘é—®äº†ï¼Œå“ï¼Œæ€ä¹ˆä¸Šé¢åˆšåˆšè¯´å®Œæµ…æ‹·è´å¦‚æœæ”¹äº†ä¼šéƒ½å‘ç”Ÿå˜åŒ–å‘€ï¼Œå“ˆå“ˆï¼Œè¿™é‡Œå…¶å®æµ…æ‹·è´å¯¹åº”å¦‚æœæ˜¯å¯å˜çš„æ•°æ®ç»“æ„æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯å¦‚æœå¯¹åº”åˆ°ä¸å¯å˜æ•°æ®ç»“æ„å°±ä¸è¡Œäº†ï¼Œå› ä¸ºæˆ‘ä»¬çš„æ•°æ®ç»“æ„å·²ç»å®šä¹‰äº†ä¸èƒ½è¢«æ”¹å˜ï¼Œæ‰€ä»¥è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¦å°†æ·±æ‹·è´æµ…æ‹·è´å’Œå¯å˜æ•°æ®ç»“æ„ä»¥åŠä¸å¯å˜ç»“æ„æ”¾åœ¨ä¸€èµ·ä»‹ç»çš„åŸå› ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python">a = <span class="hljs-string">&#x27;1&#x27;</span><br>b = a<br><span class="hljs-built_in">print</span>(a==b)<br><span class="hljs-built_in">print</span>(a <span class="hljs-keyword">is</span> b)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">id</span>(a)) <span class="hljs-comment"># 135575780975872</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">id</span>(b)) <span class="hljs-comment"># 135575780975872</span><br><br>a = <span class="hljs-string">&#x27;2&#x27;</span><br><span class="hljs-built_in">print</span>(a==b)<br><span class="hljs-built_in">print</span>(a <span class="hljs-keyword">is</span> b)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">id</span>(a)) <span class="hljs-comment"># 135575780975928</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">id</span>(b)) <span class="hljs-comment"># 135575780975872</span><br></code></pre></td></tr></table></figure><p>æ ¹æ®ä¸Šé¢çš„ä¾‹å­ä½ ä¼šå‘ç°ï¼Œæµ…æ‹·è´çš„æ„ä¹‰ä¾ç„¶æ˜¯å­˜åœ¨çš„ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°bçš„å†…å­˜ä¸èµ·åˆaçš„æ˜¯ä¸€æ ·çš„</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> copy<br>a = <span class="hljs-string">&#x27;1&#x27;</span><br>b = copy.deepcopy(a)<br><span class="hljs-built_in">print</span>(a==b)<br><span class="hljs-built_in">print</span>(a <span class="hljs-keyword">is</span> b)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">id</span>(a)) <span class="hljs-comment"># 133333075571968</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">id</span>(b)) <span class="hljs-comment"># 133333075571968</span><br><br>a = <span class="hljs-string">&#x27;2&#x27;</span><br><span class="hljs-built_in">print</span>(a==b)<br><span class="hljs-built_in">print</span>(a <span class="hljs-keyword">is</span> b)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">id</span>(a)) <span class="hljs-comment"># 133333075572024</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">id</span>(b)) <span class="hljs-comment"># 133333075571968</span><br></code></pre></td></tr></table></figure><p>ä»ä¸Šé¢çš„ä¾‹å­ä¹Ÿå¯ä»¥å‘ç°ï¼Œå³ä½¿æˆ‘ä»¬ä½¿ç”¨äº†æ·±æ‹·è´ï¼Œb ä¹Ÿä¾æ—§ä¿å­˜çš„æ˜¯ a çš„å†…å­˜åœ°å€ï¼Œå½“a å‘ç”Ÿäº†å˜åŒ–b ä¹Ÿä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚</p><p>é‚£ä¹ˆ æˆ‘å†å°†ä¸Šé¢çš„å¯å˜æ•°æ®ç»“æ„çš„ä¾‹å­æ”¾åœ¨ä¸€èµ·å¯¹æ¯”ä¸€ä¸‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> copy<br>a = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]<br>b = copy.deepcopy(a)<br><span class="hljs-built_in">print</span>(a==b)<br><span class="hljs-built_in">print</span>(a <span class="hljs-keyword">is</span> b)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">id</span>(a)) <span class="hljs-comment"># 134937665356864</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">id</span>(b)) <span class="hljs-comment"># 134937667268096</span><br><br>a.append(<span class="hljs-number">4</span>)<br><span class="hljs-built_in">print</span>(a==b) <span class="hljs-comment"># False</span><br><span class="hljs-built_in">print</span>(a <span class="hljs-keyword">is</span> b) <span class="hljs-comment"># False</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">id</span>(a)) <span class="hljs-comment"># 134937665356864</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">id</span>(b)) <span class="hljs-comment"># 134937667268096</span><br></code></pre></td></tr></table></figure><p>é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œåœ¨å¯å˜æ•°æ®ç»“æ„ä¸­å½“æˆ‘ä»¬æ·±æ‹·è´açš„æ—¶å€™ æ­¤æ—¶ a,bçš„å†…å­˜åœ°å€æ˜¯ä¸ä¸€æ ·çš„ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æ·±æ‹·è´ å’Œ æµ…æ‹·è´ åœ¨é¢å¯¹å¯å˜å’Œä¸å¯å˜çš„æ•°æ®ç»“æ„çš„æ—¶å€™ï¼Œå¯¹åº”çš„è¡¨ç°æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æŒæ¡å¯å˜æ•°æ®ç»“æ„å’Œä¸å¯å˜æ•°æ®ç»“æ„ï¼Œåœ¨ç¼–å†™ç¨‹åºçš„æ—¶å€™é€‰æ‹©å¯¹åº”çš„æ•°æ®ç»“æ„æ‰èƒ½ä½¿å¾—æˆ‘ä»¬çš„ç¨‹åºæ›´åŠ å¥å£®ï¼</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
      <category>Python å¸¸è§å‡½æ•°</category>
      
      <category>Python æ·±æ‹·è´æµ…æ‹·è´</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä½ è®¤ä¸ºçš„</title>
    <link href="/2024/07/15/%E4%BD%A0%E8%AE%A4%E4%B8%BA%E7%9A%84/"/>
    <url>/2024/07/15/%E4%BD%A0%E8%AE%A4%E4%B8%BA%E7%9A%84/</url>
    
    <content type="html"><![CDATA[<h1 id="ä½ è®¤ä¸ºçš„"><a href="#ä½ è®¤ä¸ºçš„" class="headerlink" title="ä½ è®¤ä¸ºçš„"></a>ä½ è®¤ä¸ºçš„</h1><p>æœ€è¿‘ï¼Œçªç„¶å‘ç°ä¸€ç§ä¸ä¸€æ ·çš„æ„Ÿè§‰ï¼Œå…¶å®è¿™ä¹Ÿä¸èƒ½è¯´æœ€è¿‘ï¼Œåº”è¯¥æ˜¯ä¸€ç›´éƒ½æœ‰ï¼Œåªæ˜¯æœ€è¿‘çš„æ„Ÿè§‰è¶Šæ¥è¶Šæµ“çƒˆï¼Œä¹Ÿä¸çŸ¥é“æ˜¯å·¥ä½œåŸå› è¿˜æ˜¯ç”Ÿæ´»ä¸Šçš„åŸå› ï¼Œå°±æ˜¯ä½ è®¤ä¸ºçš„ä¸ä¸€å®šæ˜¯å¯¹çš„ï¼Œå¬åˆ°çš„çœ‹åˆ°çš„ä¹Ÿä¸ä¸€å®šæ˜¯çœŸçš„ï¼</p><p>å¯èƒ½å¾ˆå¤šæœ‹å‹ä¼šè§‰å¾—è¿™å•¥æ„æ€ï¼Œå°±æ‹¿ä¾‹å­æ¥ä¸¾è¯ï¼Œæœ€è¿‘çš„ç²®æ²¹é‡Œé¢æ·»åŠ äº†çŸ¿æ²¹ï¼Œç¬¬ä¸€å¼€å§‹æˆ‘å¬åˆ°è¿™ä¸ªäº‹ä»¶çš„æ—¶å€™ï¼Œæˆ‘ä¼šè§‰å¾—æ€ä¹ˆå¯ä»¥è¿™æ ·ï¼Œæ²¡æœ‰ä¸€ä¸çš„å¯¹é£Ÿå“å®‰å…¨çš„æ•¬ç•ä¹‹å¿ƒï¼Œå¯¹å›½å®¶éƒ¨é—¨çš„å¤±æœ›ï¼Œä¹Ÿä¼šåŠ å…¥å£°è®¨çš„é˜Ÿä¼ä¸­ï¼Œä½†æ˜¯åæ¥æˆ‘åˆå‘ç°äº†æœ‰äººä»ä¸ä¸€æ ·çš„è§’åº¦è§£æäº†è¿™ä»¶äº‹æƒ…ï¼Œè¯´è¿™ä¸ªæ²¹ä¸ºä»€ä¹ˆæ²¡è¯´æœ€ç»ˆè¿å¾€äº†å“ªé‡Œå‘¢ï¼Ÿåœ¨åŒ–å·¥é¢†åŸŸä¹Ÿä¼šå­˜åœ¨å¤§è±†æ²¹çš„ä½¿ç”¨ï¼Œä¼šä¸ä¼šæ˜¯å»äº†åŒ–å·¥ç±»çš„å…¬å¸å‘¢ï¼Ÿè®°è€…æ˜¯å¦åœ¨åˆ¶é€ èˆ†è®ºå‘¢ï¼Ÿ</p><p>ç§ç§åˆ†æè®©æˆ‘å¼€å§‹åˆç«™åœ¨äº†è¿™ä¸€é¢ï¼Œè¿™æ—¶å€™å…¶å®æˆ‘ä¹ŸçŸ›ç›¾äº†ï¼Œå¼€å§‹ä»”ç»†çš„æƒ³è¿™ä»¶äº‹æƒ…ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨æ²¡çœ‹åˆ°æ˜¯äº‹å®çš„æ—¶å€™æ€»ä¼šå¬ä¿¡ä¸€ä»¶äº‹ï¼Œç„¶åå‘è¡¨è‡ªå·±çš„è¨€è®ºï¼Œå½“å¦ä¸€ç§è§‚ç‚¹å‡ºç°çš„æ—¶å€™åˆè¢«æŠ˜æœï¼Œæ¢åˆ°å·¥ä½œä¸­ï¼Œç”Ÿæ´»ä¸­ä¹Ÿæ˜¯ä¸€æ ·ï¼Œè€äººå¯¹ä½ è¯´åçš„ä¸œè¥¿å¯ä»¥åƒç‚¹å¥½çš„é‚£éƒ¨åˆ†ï¼Œç„¶åæ‰”æ‰ï¼åŒ»ç”Ÿå‘Šè¯‰ä½ ä¸èƒ½åƒï¼Œæˆ‘ä»¬ä¸å¥½å¥½å­¦ä¹ ï¼Œé•¿å¤§å°±ä¼šæ²¡å‡ºæ¯ï¼Œä¹Ÿæœ‰äººè¯´ä½ çœ‹è°è°å®¶å­©å­éƒ½æ²¡ä¸Šå­¦ç°åœ¨éƒ½æ˜¯è€æ¿äº†ï¼</p><p>è¿™æ ·çš„å£°éŸ³éšç€æˆ‘é•¿å¤§ä¼šå¬çš„è¶Šæ¥è¶Šå¤šï¼Œæ‰€ä»¥æˆ‘æ€»ç»“ä¸ç®¡åœ¨ç”Ÿæ´»ä¸­è¿˜æ˜¯å·¥ä½œä¸­ï¼Œå½“å¬åˆ°æŸä¸€ä»¶äº‹æƒ…çš„æ—¶å€™å¦‚æœæ¶‰åŠåˆ°äº†ä¸€äº›è´Ÿé¢è¯„è®ºæˆ–åˆ©ç›Šå…³ç³»ï¼Œé¦–å…ˆä¸è¦ç€æ€¥çš„å¬å–ä¸€æ–¹çš„è¯ï¼Œç„¶åä¸‹å†³å®šï¼Œè¦å¤šçœ‹å¤šè§‚å¯Ÿå¤šæ€è€ƒï¼Œå¬å¬ä¸ä¸€æ ·çš„å£°éŸ³ï¼Œæ€»ä¼šè®©ä½ å¯¹äº‹æƒ…äº†è§£çš„æ›´å½»åº•ï¼Œè¿™æ ·å†å»é‡‡å–å¯¹åº”çš„æªæ–½å»è§£å†³ï¼Œä¼šæ¯”ä½ ç¬¬ä¸€å¼€å§‹å°±æ‰è¿›å»æ¥çš„å¥½çš„å¤šï¼</p><p>éšç€å¹´é¾„çš„å¢é•¿ï¼Œæˆ‘ä»¬çš„è§è¯†ï¼Œæ€æƒ³ï¼Œå¤„ç†æ–¹å¼éƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œåœ¨é¢å¯¹ä¸ä¸€æ ·çš„äº‹æƒ…çš„æ—¶å€™å¤šå¤šå¬å¬ä¸åŒè§’åº¦çš„å£°éŸ³ï¼Œæˆ‘æƒ³è¿™æ€»æ˜¯å¥½çš„ï¼Œä½ è®¤ä¸ºå‘¢ï¼Ÿ</p><img src="/2024/07/15/%E4%BD%A0%E8%AE%A4%E4%B8%BA%E7%9A%84/you.jpeg" class="">]]></content>
    
    
    <categories>
      
      <category>éšç¬”</category>
      
      <category>2024å¹´éšç¬”</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>éšç¬”</tag>
      
      <tag>ç”Ÿæ´»</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python __init__.py çš„ä»‹ç»</title>
    <link href="/2024/07/15/init%E6%96%B9%E6%B3%95/"/>
    <url>/2024/07/15/init%E6%96%B9%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h1 id="Python-init-py-çš„ä»‹ç»"><a href="#Python-init-py-çš„ä»‹ç»" class="headerlink" title="Python__init__.py çš„ä»‹ç»"></a>Python__init__.py çš„ä»‹ç»</h1><p>å¤§å®¶åœ¨å¹³å¸¸çš„æ—¶å€™éƒ½ä¼šçœ‹åˆ°__init__.pyè¿™ä¸ªæ–‡ä»¶ï¼Œä½†æ˜¯å¤§å®¶çŸ¥é“è¿™ä¸ª__init__.pyå®é™…ä¸Šæ‹¥æœ‰å¾ˆå¤šåŠŸèƒ½ï¼Œé‚£ä¹ˆä½ çŸ¥é“é‚£äº›å‘¢ï¼Ÿä¸€èµ·æ¥çœ‹çœ‹å§ï¼</p><h2 id="ä»€ä¹ˆæ˜¯-init-py"><a href="#ä»€ä¹ˆæ˜¯-init-py" class="headerlink" title="ä»€ä¹ˆæ˜¯__init__.py?"></a>ä»€ä¹ˆæ˜¯__init__.py?</h2><p>åœ¨Pythonä¸­ï¼Œ<strong>init</strong>.py é€šå¸¸ç”¨æ¥å£°æ˜è¿™æ˜¯ä¸€ä¸ªpaython package, ä½†æ˜¯ä¸æ˜¯ä¸€ä¸ªæ™®é€šçš„æ–‡ä»¶ï¼Œæœ‰äº†å®ƒPythonå°±å¯ä»¥æ­£ç¡®å¯¼å…¥å’Œä½¿ç”¨è¯¥ç›®å½•ä¸‹çš„æ¨¡å—å’Œå­æ–‡ä»¶ã€‚</p><h2 id="æ ‡è¯†æ–‡ä»¶å¤¹æ˜¯Python-Package"><a href="#æ ‡è¯†æ–‡ä»¶å¤¹æ˜¯Python-Package" class="headerlink" title="æ ‡è¯†æ–‡ä»¶å¤¹æ˜¯Python Package"></a>æ ‡è¯†æ–‡ä»¶å¤¹æ˜¯Python Package</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs text">demo/<br>    --__init__.py<br>    --demo.py<br></code></pre></td></tr></table></figure><h2 id="å¯ä»¥èµ‹äºˆä¸€äº›åˆå§‹åŒ–æƒ³è¦åšçš„åŠŸèƒ½"><a href="#å¯ä»¥èµ‹äºˆä¸€äº›åˆå§‹åŒ–æƒ³è¦åšçš„åŠŸèƒ½" class="headerlink" title="å¯ä»¥èµ‹äºˆä¸€äº›åˆå§‹åŒ–æƒ³è¦åšçš„åŠŸèƒ½"></a>å¯ä»¥èµ‹äºˆä¸€äº›åˆå§‹åŒ–æƒ³è¦åšçš„åŠŸèƒ½</h2><p>å½“æˆ‘ä»¬åœ¨å†™é¡¹ç›®çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™éœ€è¦logè®°å½•ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€åœ¨ __init__çš„æ–‡ä»¶ä¸­å£°æ˜å³å¯åœ¨ç¨‹åºå¯åŠ¨çš„æ—¶å€™è¿›è¡Œåˆå§‹åŒ–ï¼Œæ— éœ€åœ¨æŸä¸ªæ–‡ä»¶ä¸­å†æ¬¡å¯¼å…¥åˆå§‹åŒ–</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># demo/__init__.py</span><br><br><span class="hljs-keyword">from</span> demo.logs <span class="hljs-keyword">import</span> logger<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">init_logs</span>():<br>    logger().get_loger()<br></code></pre></td></tr></table></figure><p>é‚£ä¹ˆåœ¨æœ¬ç›®å½•ä¸‹æˆ‘ä»¬åªéœ€è¦</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> . <span class="hljs-keyword">import</span> get_logger()<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">run_case</span>():<br>    logger().info(<span class="hljs-string">&quot;è¿™æ˜¯ä¸€ä¸ªlog&quot;</span>)<br>    <span class="hljs-keyword">pass</span><br>    <br></code></pre></td></tr></table></figure><h2 id="æ§åˆ¶import-ä¸‹å¯¼å…¥çš„æ¨¡å—"><a href="#æ§åˆ¶import-ä¸‹å¯¼å…¥çš„æ¨¡å—" class="headerlink" title="æ§åˆ¶import * ä¸‹å¯¼å…¥çš„æ¨¡å—"></a>æ§åˆ¶import * ä¸‹å¯¼å…¥çš„æ¨¡å—</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs text">demo/<br>    --__init__.py<br>    --demo1.py<br>    --demo2.py<br>    --demo3.py<br></code></pre></td></tr></table></figure><p>å‡å¦‚æˆ‘ä»¬åœ¨ç›®å½•ä¸‹æœ‰ä¸ªdemo4.py æƒ³è¦ä½¿ç”¨import *(åŸåˆ™ä¸Šä¸æ¨èè¿™ä¹ˆå¯¼å…¥åŒ…ï¼Œæœ€å¥½æŒ‡å®šåŒ…å)ï¼Œä½†æ˜¯ä¸æƒ³å¯¼å…¥demo3é‡Œé¢çš„å†…å®¹ï¼Œé‚£ä¹ˆæˆ‘å°±å¯ä»¥åœ¨__init__.pyæ–‡ä»¶å†…å®šä¹‰</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">demo/__init__.py<br>    __all__ = [<span class="hljs-string">&#x27;demo1&#x27;</span>, <span class="hljs-string">&#x27;demo2&#x27;</span>]<br></code></pre></td></tr></table></figure><p>å½“ä½ æ‰§è¡Œ import * çš„æ—¶å€™åªä¼šå¯¼å…¥ demo1, demo2 çš„å†…å®¹ã€‚æˆ–è€…åœ¨__init__ æ–‡ä»¶ä¸‹å®šä¹‰éœ€è¦å¯¼å…¥çš„å‡½æ•°åç§°ï¼ŒåŒ…å«å­å‡½æ•°çš„é€’å½’ç­‰ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>åœ¨Pythonä¸­ï¼Œ<strong>init</strong>.py æ–‡ä»¶æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ï¼Œå®ƒå­˜åœ¨äºPythonåŒ…çš„ç›®å½•ä¸­ã€‚Pythoné€šè¿‡__init__.pyæ–‡ä»¶æ¥è¯†åˆ«ç›®å½•æ˜¯å¦åº”è¯¥è¢«è§†ä¸ºä¸€ä¸ªPythonåŒ…ï¼ˆpackageï¼‰ã€‚å½“ä¸€ä¸ªç›®å½•åŒ…å«__init__.pyæ–‡ä»¶æ—¶ï¼ŒPythonè§£é‡Šå™¨å°±ä¼šå°†è¯¥ç›®å½•è§†ä¸ºä¸€ä¸ªPythonåŒ…ï¼Œå…è®¸ä½ é€šè¿‡importè¯­å¥æ¥å¯¼å…¥è¯¥ç›®å½•ä¸‹çš„æ¨¡å—æˆ–å­åŒ…ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
      <category>Python å¸¸è§å‡½æ•°</category>
      
      <category>Python __init__.py çš„ä»‹ç»</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŸºäºPytestçš„æ¥å£æµ‹è¯•æ¡†æ¶</title>
    <link href="/2024/07/12/pytest%E6%8E%A5%E5%8F%A3%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6/"/>
    <url>/2024/07/12/pytest%E6%8E%A5%E5%8F%A3%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6/</url>
    
    <content type="html"><![CDATA[<h1 id="åŸºäºPytestçš„æ¥å£æµ‹è¯•æ¡†æ¶"><a href="#åŸºäºPytestçš„æ¥å£æµ‹è¯•æ¡†æ¶" class="headerlink" title="åŸºäºPytestçš„æ¥å£æµ‹è¯•æ¡†æ¶"></a>åŸºäºPytestçš„æ¥å£æµ‹è¯•æ¡†æ¶</h1><p>è¿™æ˜¯ä¸€æ¬¾åŸºäºpytestæ¡†æ¶çš„å¼€æºæµ‹è¯•æ¡†æ¶,åŠŸèƒ½æ¶µç›–è¯·æ±‚ä½“ä¿å­˜, allureç”Ÿæˆ, logç”Ÿæˆ, å…¨å±€å˜é‡å­˜å‚¨, å…¨å±€å˜é‡ä½¿ç”¨, æ–­è¨€è¿”å›ä½“ ç­‰å¤šç§åŠŸèƒ½ç»„åˆ</p><p>githubåœ°å€æ˜¯ï¼š<a href="https://github.com/dreamshao/pytest-autotest-interface">https://github.com/dreamshao/pytest-autotest-interface</a></p><h2 id="è¯¦ç»†ä»‹ç»"><a href="#è¯¦ç»†ä»‹ç»" class="headerlink" title="è¯¦ç»†ä»‹ç»"></a>è¯¦ç»†ä»‹ç»</h2><pre><code class="hljs">æ¡†æ¶å›¾ï¼š  â€”æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•     --allure_report     --allure-results     --BaseRequests       ---__init__.py       ---BaseRequests.py     --Data       ---data.db       ---data.xlsx       ---sqlite å¯è§†åŒ–å®‰è£…åŒ…       ---read_data.py     --logs     --RequestObject       ---request_runner.py     --TestCases       -- æµ‹è¯•ç”¨ä¾‹     --Utils       --json_assert.py       --logger.py       --replace_requests.py       --variable_handler.py      --man.py      --requirements.txt</code></pre><h2 id="å¼€å§‹å‰å¿…é¡»äº†è§£çš„ä¸œè¥¿"><a href="#å¼€å§‹å‰å¿…é¡»äº†è§£çš„ä¸œè¥¿" class="headerlink" title="å¼€å§‹å‰å¿…é¡»äº†è§£çš„ä¸œè¥¿"></a>å¼€å§‹å‰å¿…é¡»äº†è§£çš„ä¸œè¥¿</h2><h3 id="æ•°æ®å­˜å‚¨"><a href="#æ•°æ®å­˜å‚¨" class="headerlink" title="æ•°æ®å­˜å‚¨"></a>æ•°æ®å­˜å‚¨</h3><p>æ•°æ®å­˜å‚¨ç”¨åˆ°äº†sqliteï¼Œè¿™ä¸ªè½»é‡çº§çš„æ•°æ®åº“ï¼Œæ— éœ€é¢å¤–å®‰è£…ç¬¬ä¸‰æ–¹çš„åŒ…ï¼Œä¹Ÿæ²¡æœ‰mysqlé‚£ä¹ˆå¤§å¯¹èµ„æºè¦æ±‚ä½ï¼Œå½“ç„¶ä¹Ÿæ”¯æŒexcelï¼Œé‡Œé¢ä¹Ÿå°è£…å¥½äº†æ•°æ®ã€‚</p><p>æ”¯æŒè¿è¡Œç”Ÿæˆsql çš„æ–¹æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_data_from_sqlite</span>(<span class="hljs-params">self, sql_command, name, sql_db_path=<span class="hljs-literal">None</span>, query_sql_type=<span class="hljs-literal">False</span></span>):<br>    <span class="hljs-keyword">try</span>:<br>        cur = self.connect_sqlite(name)<br>        <span class="hljs-keyword">if</span> query_sql_type:<br>            <span class="hljs-keyword">if</span> cur:<br>                logger.info(<span class="hljs-string">f&quot;æ‰§è¡ŒæŸ¥è¯¢æ“ä½œ æ‰§è¡Œè¯­å¥æ˜¯ <span class="hljs-subst">&#123;sql_command&#125;</span>&quot;</span>)<br>                cur[<span class="hljs-number">0</span>].execute(sql_command)<br>                re = cur[<span class="hljs-number">0</span>].fetchall()<br>                <span class="hljs-built_in">print</span>(re)<br>                <span class="hljs-comment"># å…³é—­Cursor</span><br>                cur[<span class="hljs-number">0</span>].close()<br>                <span class="hljs-comment"># å…³é—­conn</span><br>                cur[<span class="hljs-number">1</span>].close()<br>                list_of_re = [[item <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> tup] <span class="hljs-keyword">for</span> tup <span class="hljs-keyword">in</span> re]<br>                logger.info(<span class="hljs-string">f&quot;æ‰§è¡ŒæŸ¥è¯¢æ“ä½œ æˆåŠŸè¿”å›çš„æ•°æ®æ˜¯ <span class="hljs-subst">&#123;list_of_re&#125;</span>&quot;</span>)<br>                <span class="hljs-keyword">return</span> list_of_re<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">if</span> cur:<br>                logger.info(<span class="hljs-string">f&quot;æ‰§è¡ŒéæŸ¥è¯¢æ“ä½œ æ‰§è¡Œè¯­å¥æ˜¯ <span class="hljs-subst">&#123;sql_command&#125;</span>&quot;</span>)<br>                cur[<span class="hljs-number">0</span>].execute(sql_command)<br>                cur[<span class="hljs-number">1</span>].commit()<br>                <span class="hljs-comment"># å…³é—­Cursor</span><br>                cur[<span class="hljs-number">0</span>].close()<br>                <span class="hljs-comment"># å…³é—­conn</span><br>                cur[<span class="hljs-number">1</span>].close()<br>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>        logger.info(<span class="hljs-string">f&quot;åˆ›å»ºæ•°æ®åº“å¤±è´¥,å…·ä½“åŸå› æ˜¯ <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br></code></pre></td></tr></table></figure><p>å…¶ä¸­è¦ä¼ å…¥sql_command æ˜¯sqlè¯­å¥ï¼Œname æ˜¯ æ•°æ®åº“åå­—ï¼Œquery_sql_type æ˜¯è¦ç¡®å®šæ˜¯ä½ è¦æŸ¥è¯¢è¿˜æ˜¯ å¢åˆ æ”¹ æ•°æ® æŸ¥è¯¢ä¼ é€’Trueï¼Œå…¶ä½™å°±æ˜¯False</p><p>è¿™é‡Œä¹Ÿå‡†å¤‡äº†sqliteçš„å¯æ˜¯åŒ–å®‰è£…åŒ…ï¼Œä¸è¿‡æ˜¯windowsï¼Œè¿™ä¸ªç½‘ç»œå¾ˆå¤šä¹Ÿå¯ä»¥è‡ªå·±ä¸‹è½½</p><img src="/2024/07/12/pytest%E6%8E%A5%E5%8F%A3%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6/sqlite%E5%8F%AF%E8%A7%86%E5%8C%96.png" class=""><p>æ•°æ®åº“çš„è¡¨ç›®å‰æœ‰ä¸¤ä¸ªï¼Œåˆ†åˆ«æ˜¯ï¼š requests, variable</p><p>requests: å­˜å‚¨è¯·æ±‚ä¿¡æ¯æ–­è¨€ä¿¡æ¯ç­‰ã€‚</p><img src="/2024/07/12/pytest%E6%8E%A5%E5%8F%A3%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6/requests%E8%A1%A8.png" class=""><p>variable å­˜å‚¨å˜é‡ä¿¡æ¯ã€‚</p><img src="/2024/07/12/pytest%E6%8E%A5%E5%8F%A3%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6/variable%E8%A1%A8.png" class=""><h3 id="æ•°æ®æ–­è¨€åŠå˜é‡è·å–"><a href="#æ•°æ®æ–­è¨€åŠå˜é‡è·å–" class="headerlink" title="æ•°æ®æ–­è¨€åŠå˜é‡è·å–"></a>æ•°æ®æ–­è¨€åŠå˜é‡è·å–</h3><p>è¿™é‡Œéƒ½ç”¨åˆ°äº†ä¸€ä¸ªä¸œè¥¿å«jsonpathï¼Œè¿™é‡Œä¸çŸ¥é“çš„å¯ä»¥è‡ªå·±æŸ¥è¯¢ä¸€ä¸‹ï¼Œç¨åæˆ‘ä¹Ÿä¼šæ›´æ–°å…³äºjsonpathçš„æ–‡ç« ï¼Œå°†è¿æ¥å¡«å†™åˆ°è¿™é‡Œæ–¹ä¾¿æŸ¥çœ‹</p><p>æ–‡ç« å·²ç»æ›´æ–°ï¼š å…³äºjsonpathçš„æ–‡ç« åœ°å€ï¼š<a href="https://8888666.top/2024/07/24/jsonpath/">https://8888666.top/2024/07/24/jsonpath/</a> </p><p>å¯ä»¥çœ‹ä¸€ä¸‹å·²ç»å­˜å‚¨çš„jsonpathï¼š</p><img src="/2024/07/12/pytest%E6%8E%A5%E5%8F%A3%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6/jsonpath.png" class=""><h3 id="æŠ¥å‘ŠåŠlog"><a href="#æŠ¥å‘ŠåŠlog" class="headerlink" title="æŠ¥å‘ŠåŠlog"></a>æŠ¥å‘ŠåŠlog</h3><p>æŠ¥å‘Šç”Ÿæˆé‡‡ç”¨çš„allureï¼Œallure report ç›®å‰æ²¡æœ‰ä¿å­˜æ—§çš„æŠ¥å‘Šï¼Œå¯ä»¥å»æ‰ç›¸å…³ä»£ç ï¼Œå®ç°æ—§çš„æŠ¥å‘Šå­˜å‚¨ï¼Œlogæ—¥å¿—ç”Ÿæˆè§„åˆ™æŒ‰å¤©ç”Ÿæˆæ–‡ä»¶å¤¹ï¼ŒæŒ‰å¯åŠ¨æ—¶é—´ç”Ÿæˆæ—¥å¿—</p><p>allure æŠ¥å‘Šï¼š</p><img src="/2024/07/12/pytest%E6%8E%A5%E5%8F%A3%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6/allure%E6%8A%A5%E5%91%8A.png" class=""><img src="/2024/07/12/pytest%E6%8E%A5%E5%8F%A3%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6/allure%E6%8A%A5%E5%91%8A2.png" class=""><p>log æ—¥å¿—ï¼š</p><img src="/2024/07/12/pytest%E6%8E%A5%E5%8F%A3%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6/log.png" class=""><h2 id="å…·ä½“å°è£…é€»è¾‘åŠæ“ä½œè¯¦è§£"><a href="#å…·ä½“å°è£…é€»è¾‘åŠæ“ä½œè¯¦è§£" class="headerlink" title="å…·ä½“å°è£…é€»è¾‘åŠæ“ä½œè¯¦è§£"></a>å…·ä½“å°è£…é€»è¾‘åŠæ“ä½œè¯¦è§£</h2><h3 id="åŸºæœ¬è¯·æ±‚å°è£…"><a href="#åŸºæœ¬è¯·æ±‚å°è£…" class="headerlink" title="åŸºæœ¬è¯·æ±‚å°è£…"></a>åŸºæœ¬è¯·æ±‚å°è£…</h3><p>æˆ‘ä»¬çš„æ¥å£è¯·æ±‚ä¸€èˆ¬éƒ½æ˜¯GET, POST, PUT, DELETEè¿™å››ç§è¾ƒä¸ºå¸¸è§, ç›®å‰å°±æ˜¯å°è£…äº†è¿™å››ç§ å…·ä½“çš„æ–‡ä»¶æ˜¯ BaseRequests ä¸‹çš„ BaseRequests.pyæ–‡ä»¶</p><p>ä¸¾ä¾‹ æŒ‰ç…§ GET è¯·æ±‚è®²è§£</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_request</span>(<span class="hljs-params">self, url, params=<span class="hljs-literal">None</span>, headers=<span class="hljs-literal">None</span></span>):<br>       <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">       get è¯·æ±‚</span><br><span class="hljs-string">       :param url: è¯·æ±‚url</span><br><span class="hljs-string">       :param params: è¯·æ±‚å…¥å‚</span><br><span class="hljs-string">       :param headers: è¯·æ±‚å¤´</span><br><span class="hljs-string">       :return: Boolean</span><br><span class="hljs-string">       &quot;&quot;&quot;</span><br>       <span class="hljs-keyword">try</span>:<br>           logger.info(<span class="hljs-string">f&quot;å¼€å§‹è¿›å…¥getè¯·æ±‚, å½“å‰è¯·æ±‚urlæ˜¯<span class="hljs-subst">&#123;url&#125;</span>, paramsæ˜¯<span class="hljs-subst">&#123;params&#125;</span>, headersæ˜¯<span class="hljs-subst">&#123;headers&#125;</span>&quot;</span>)<br>           result = requests.get(url=url, params=params, headers=headers)<br>           <span class="hljs-keyword">if</span> result.status_code == <span class="hljs-number">200</span>:<br>               logger.info(<span class="hljs-string">f&#x27;å½“å‰è¯·æ±‚æˆåŠŸï¼Œè¿”å›çš„http_codeæ˜¯ 200, è¿”å›ç»“æœæ˜¯ <span class="hljs-subst">&#123;result.text&#125;</span>&#x27;</span>)<br>               <span class="hljs-keyword">return</span> result.text<br>           <span class="hljs-keyword">else</span>:<br>               logger.info(<span class="hljs-string">f&#x27;å½“å‰è¿”å›å‡ºç°äº†é—®é¢˜ï¼Œè¿”å›çš„http_codeæ˜¯<span class="hljs-subst">&#123;result.status_code&#125;</span>,è¿”å›çš„ä¿¡æ¯æ˜¯<span class="hljs-subst">&#123;result.text&#125;</span>&#x27;</span>)<br>               <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>       <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>           logger.info(<span class="hljs-string">f&quot;å½“å‰è¯·æ±‚å‡ºç°äº†é—®é¢˜ï¼Œè¯·æ±‚æ–¹å¼æ˜¯ GET, åœ°å€æ˜¯ <span class="hljs-subst">&#123;url&#125;</span>, paramsæ˜¯<span class="hljs-subst">&#123;params&#125;</span>, headersæ˜¯<span class="hljs-subst">&#123;headers&#125;</span>, å‡ºç°çš„é—®é¢˜æ˜¯ <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<br>           <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œé¦–å…ˆå°è£…äº†ä¸€ä¸ªåŸºç¡€è¯·æ±‚ä¹Ÿå°±æ˜¯æŠŠæˆ‘ä»¬çš„requestsä¸‹çš„getè¯·æ±‚è¿›è¡Œäº†ç®€å•å°è£…ï¼Œåˆ¤æ–­äº†è¿”å›çš„httpcodeæ˜¯å¦æ˜¯200ï¼Œè¿”å›å¸ƒå°”å€¼ã€‚</p><h3 id="æ›´è¿›ä¸€æ­¥çš„å°è£…ä¸€ä¸ªgetè¯·æ±‚"><a href="#æ›´è¿›ä¸€æ­¥çš„å°è£…ä¸€ä¸ªgetè¯·æ±‚" class="headerlink" title="æ›´è¿›ä¸€æ­¥çš„å°è£…ä¸€ä¸ªgetè¯·æ±‚"></a>æ›´è¿›ä¸€æ­¥çš„å°è£…ä¸€ä¸ªgetè¯·æ±‚</h3><p>æˆ‘çš„æ€è·¯æ˜¯åœ¨å°è£…çš„æ—¶å€™æœ€åº•å±‚çš„æœ€å°‘æ¥è§¦ä¸šåŠ¡å±‚ä»£ç ï¼Œæ‰€ä»¥åœ¨ RequestObject ä¸‹é‡æ–°äºŒæ¬¡å°è£…ä¸šåŠ¡ä¿¡æ¯çš„ request_runner.py</p><p>ä¸¾ä¾‹ æŒ‰ç…§ POST è¯·æ±‚è®²è§£</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">post_request_runner</span>(<span class="hljs-params">self, <span class="hljs-built_in">id</span>, replace_type=<span class="hljs-literal">None</span></span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">     postè¯·æ±‚</span><br><span class="hljs-string">    :param id: id: æ•°æ®åº“ç”¨ä¾‹Id</span><br><span class="hljs-string">    :param replace_type: replace_type: æ›¿æ¢ç±»å‹ 1ï¼šurl æ›¿æ¢ 2ï¼šdata æ›¿æ¢ é»˜è®¤None ä¸æ›¿æ¢</span><br><span class="hljs-string">    :return: å¤±è´¥ False æˆåŠŸ dict</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    logger.info(<span class="hljs-string">&quot;å½“å‰è¿›å…¥postæµ‹è¯•ç”¨ä¾‹ä¸­&quot;</span>)<br>    <span class="hljs-keyword">if</span> replace_type == <span class="hljs-number">1</span>:<br>        self.url = Replace_Request(url=self.url).repalce_request_url()<br>    <span class="hljs-keyword">else</span>:<br>        self.data = Replace_Request(data=self.data).replace_request_data()<br>    result = BaseRequests().post_request(url=self.url, headers=json.loads(self.headers), data=self.data)<br>    <span class="hljs-keyword">if</span> result:<br>        result_json = json.loads(result)<br>        DataManger().get_data_from_sqlite(name=<span class="hljs-string">&quot;data&quot;</span>,<br>                                          sql_command=<span class="hljs-string">&quot;UPDATE requests SET response_body = &#x27;&#123;response_body&#125;&#x27; where id = &#123;id&#125;&quot;</span>.<span class="hljs-built_in">format</span>(<br>                                              response_body=json.dumps(result), <span class="hljs-built_in">id</span>=<span class="hljs-built_in">id</span>),<br>                                          query_sql_type=<span class="hljs-literal">False</span>)<br>        <span class="hljs-keyword">if</span> self.assert_info <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:<br>            result = Assert_Json().assert_info(result_json, self.assert_info)<br>            <span class="hljs-keyword">if</span> result:<br>                logger.info(<span class="hljs-string">&quot;æµ‹è¯•å…¨éƒ¨é€šè¿‡&quot;</span>)<br>                <span class="hljs-keyword">return</span> result_json<br>            <span class="hljs-keyword">else</span>:<br>                logger.info(<span class="hljs-string">&quot;æµ‹è¯•å­˜åœ¨å¤±è´¥&quot;</span>)<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>        <span class="hljs-keyword">else</span>:<br>            logger.info(<span class="hljs-string">&quot;æµ‹è¯•å…¨éƒ¨é€šè¿‡&quot;</span>)<br>            <span class="hljs-keyword">return</span> result_json<br><br>    <span class="hljs-keyword">else</span>:<br>        logger.info(<span class="hljs-string">&quot;å½“å‰è¯·æ±‚å¤±è´¥&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å¤±è´¥äº†ï¼&quot;</span>)<br></code></pre></td></tr></table></figure><p>å…¶ä¸­éœ€è¦ä¼ é€’å½“å‰æ•°æ®åº“å­˜å‚¨çš„ç”¨ä¾‹id, ä»¥åŠæ˜¯å¦è¦è¿›è¡Œæ›¿æ¢ï¼Œè¿™é‡Œè¯´æ˜ä¸€ä¸‹ä¸¤ä¸ªå‚æ•°çš„ä½œç”¨ã€‚</p><p>ç¬¬ä¸€ï¼š id æ˜¯ä¸ºäº†å­˜å‚¨å½“å‰ç”¨ä¾‹è¯·æ±‚è¿”å›åå­˜å‚¨çš„å€¼</p><p>ç¬¬äºŒï¼š replace_type æ˜¯ä¸ºäº†æ˜¯å¦è¿›è¡Œæ›¿æ¢ï¼Œåœ¨æˆ‘ä»¬æµç¨‹æ€§è¯·æ±‚ä¸­æˆ‘ä»¬ä¸€èˆ¬éƒ½éœ€è¦è¿›è¡Œæ•´ä½“æ€§çš„æµ‹è¯•ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦åšåˆ°å¯ä»¥æ‹¿åˆ°ä¸Šä¸ªçš„æŸä¸ªè¿”å›å€¼ä½œä¸ºä¸‹ä¸€ä¸ªæ¥å£çš„è¾“å…¥å€¼ï¼Œè¿™<br>      ä¸ªä½œç”¨å°±æ˜¯è¿™ä¸ª, 1 æ˜¯url è¿›è¡Œæ›¿æ¢ 2 æ˜¯ dataè¿›è¡Œæ›¿æ¢</p><p>å¦‚æœéœ€è¦æ–­è¨€ åˆ™æ˜¯ Assert_Json è¿™ä¸ªç±» éœ€è¦ä¼ å…¥ä¸€ä¸ªæ¥å£è¿”å›å€¼ï¼Œ ä»¥åŠæ–­è¨€çš„jsponpath</p><p>è¿”å›ï¼š æˆåŠŸåˆ™æ˜¯è¿”å›æ¥å£çš„è¿”å›ä½“ï¼Œä¸æˆåŠŸåˆ™è¿”å›False</p><h3 id="æµ‹è¯•ç”¨ä¾‹"><a href="#æµ‹è¯•ç”¨ä¾‹" class="headerlink" title="æµ‹è¯•ç”¨ä¾‹"></a>æµ‹è¯•ç”¨ä¾‹</h3><p>æˆ‘ä»¬çš„æµ‹è¯•ç”¨ä¾‹ä¹Ÿæ˜¯åªéœ€å†™éƒ¨åˆ†ä»£ç å³å¯å®Œæˆæ–­è¨€ï¼Œå˜é‡çš„å­˜å‚¨ï¼Œå˜é‡çš„æ›¿æ¢ã€‚</p><p>ä¸¾ä¾‹ï¼šToday æ¯”èµ›åˆ—è¡¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">@allure.step(<span class="hljs-params"><span class="hljs-string">&quot;Todayæ¯”èµ›åˆ—è¡¨&quot;</span></span>)</span><br><span class="hljs-meta">  @pytest.mark.parametrize(<span class="hljs-params"><span class="hljs-string">&#x27;id, url, method, headers, request_data, params, json, assert_jsonpath, response_body, remarks&#x27;</span>,</span></span><br><span class="hljs-params"><span class="hljs-meta">                           DataManger(<span class="hljs-params"></span>).get_data_from_sqlite(<span class="hljs-params">name=<span class="hljs-string">&quot;data&quot;</span>,sql_command=<span class="hljs-string">&#x27;&#x27;&#x27;select * from requests where id= 2&#x27;&#x27;&#x27;</span>,</span></span></span><br><span class="hljs-params"><span class="hljs-params"><span class="hljs-meta">                                                             query_sql_type=<span class="hljs-literal">True</span></span>)</span>)</span><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_match_list</span>(<span class="hljs-params">self, <span class="hljs-built_in">id</span>, url, method, headers, request_data, params, json, assert_jsonpath, response_body, remarks</span>):<br>      logger.info(<span class="hljs-string">f&quot;å¼€å§‹æµ‹è¯•æ¯”èµ›åˆ—è¡¨&quot;</span>)<br>      result = Request_Runner(url=url, headers=headers, assert_info=assert_jsonpath).get_request_runner(<span class="hljs-built_in">id</span>=<span class="hljs-built_in">id</span>)<br>      logger.info(<span class="hljs-string">f&quot;æµ‹è¯•ç»“æœæ˜¯ <span class="hljs-subst">&#123;result&#125;</span>&quot;</span>)<br>      <span class="hljs-keyword">if</span> result:<br>          Variable_Handler(variable_name=[<span class="hljs-string">&quot;eventid&quot;</span>,<span class="hljs-string">&quot;competitorid&quot;</span>], response_body=result).variable_handler()<br>      <span class="hljs-keyword">assert</span> result <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">False</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œç”¨äº†allureæŠ¥å‘Šçš„setpæ–¹æ³•è¿›è¡Œæ ‡è¯†ç”¨ä¾‹ä¿¡æ¯ï¼Œé‡‡ç”¨äº†pytest.mark.parametrizeçš„å‚æ•°åŒ–æ–¹æ³•ï¼Œè¿™é‡Œæ˜¯ä»æ•°æ®åº“é‡Œé¢æå–æ•°æ®ï¼Œå½“å‰ä¹Ÿæ”¯æŒä»excelä¸­æå–æ•°æ®ï¼Œé‡Œé¢è°ƒç”¨äº†å°è£…çš„è¯·æ±‚æ–¹æ³•ä¼ é€’äº†id,è¿™é‡Œè¿˜è°ƒç”¨äº†Variable_Handler è¿™ä¸ªç±»ï¼Œ è¿™é‡Œç±»å°±æ˜¯å®ç°å­˜å‚¨å˜é‡çš„æ–¹æ³•ï¼Œvariable_name éœ€è¦ä¼ é€’ä¸€ä¸ªåˆ—è¡¨ï¼Œé‡Œé¢æ˜¯ä½ çš„å˜é‡åç§°ï¼Œresponse_body æ˜¯æ¥å£è¿”å›çš„å€¼ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å°†æˆ‘ä»¬éœ€è¦çš„å˜é‡å­˜å‚¨ä¸‹æ¥ã€‚</p><h3 id="å·¥å…·"><a href="#å·¥å…·" class="headerlink" title="å·¥å…·"></a>å·¥å…·</h3><p>json_assert.py æ˜¯å®ç° æ–­è¨€çš„ é‡‡ç”¨çš„æ˜¯ jsonpath çš„æ–¹æ³•è·å–å¯¹åº”ä¿¡æ¯è¿›è¡Œå¯¹æ¯”</p><p>logger.py æ˜¯æ—¥å¿—çš„ç”Ÿæˆ</p><p>replace_request.py æ˜¯å˜é‡çš„æ›¿æ¢ï¼Œæ”¯æŒurl æ›¿æ¢ï¼Œ data æ›¿æ¢</p><p>variable_handler.py æ˜¯å˜é‡çš„å­˜å‚¨åŠŸèƒ½</p><h3 id="main-æ–‡ä»¶"><a href="#main-æ–‡ä»¶" class="headerlink" title="main æ–‡ä»¶"></a>main æ–‡ä»¶</h3><p>ä¹Ÿå°±æ˜¯ä¸»æ–‡ä»¶ï¼Œç”¨æ¥å®ç°è°ƒç”¨pytestä»¥åŠç”ŸæˆallureæŠ¥å‘Š </p><p>ä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    pytest.main([<span class="hljs-string">&#x27;-v&#x27;</span>, <span class="hljs-string">&#x27;-s&#x27;</span>, <span class="hljs-string">&#x27;--alluredir=allure-results&#x27;</span>, <span class="hljs-string">&#x27;--clean-alluredir&#x27;</span>])<br>    cmd = <span class="hljs-string">&quot;allure generate ./allure-results report --clean&quot;</span><br>    subprocess.run(cmd, shell=<span class="hljs-literal">True</span>)<br>    cmd = <span class="hljs-string">&quot;allure open -h 127.0.0.1 -p 8883 allure-report&quot;</span><br>    subprocess.run(cmd, shell=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure><h2 id="demo-è§£æ"><a href="#demo-è§£æ" class="headerlink" title="demo è§£æ"></a>demo è§£æ</h2><p>å½“æ¡ˆä¾‹ä¸­æœ‰å››ä¸ªurl</p><p>å…¶ä¸­åŒ…å«å˜é‡å­˜å‚¨ ä»¥åŠ æ›¿æ¢çš„æ˜¯ï¼šremarks é‡Œé¢çš„ æ¯”èµ›åˆ—è¡¨é¡µï¼Œ è¿™é‡Œå­˜å‚¨äº†ä¸¤ä¸ªå˜é‡åˆ†åˆ«æ˜¯eventid, competitoridã€‚å°†å¯¹åº”çš„å€¼ä¿å­˜åˆ°variableè¡¨ä¸­ã€‚</p><p>ä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">@allure.step(<span class="hljs-params"><span class="hljs-string">&quot;Todayæ¯”èµ›åˆ—è¡¨&quot;</span></span>)</span><br><span class="hljs-meta">  @pytest.mark.parametrize(<span class="hljs-params"><span class="hljs-string">&#x27;id, url, method, headers, request_data, params, json, assert_jsonpath, response_body, remarks&#x27;</span>,</span></span><br><span class="hljs-params"><span class="hljs-meta">                           DataManger(<span class="hljs-params"></span>).get_data_from_sqlite(<span class="hljs-params">name=<span class="hljs-string">&quot;data&quot;</span>,sql_command=<span class="hljs-string">&#x27;&#x27;&#x27;select * from requests where id= 2&#x27;&#x27;&#x27;</span>,</span></span></span><br><span class="hljs-params"><span class="hljs-params"><span class="hljs-meta">                                                             query_sql_type=<span class="hljs-literal">True</span></span>)</span>)</span><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_match_list</span>(<span class="hljs-params">self, <span class="hljs-built_in">id</span>, url, method, headers, request_data, params, json, assert_jsonpath, response_body, remarks</span>):<br>      logger.info(<span class="hljs-string">f&quot;å¼€å§‹æµ‹è¯•æ¯”èµ›åˆ—è¡¨&quot;</span>)<br>      result = Request_Runner(url=url, headers=headers, assert_info=assert_jsonpath).get_request_runner(<span class="hljs-built_in">id</span>=<span class="hljs-built_in">id</span>)<br>      logger.info(<span class="hljs-string">f&quot;æµ‹è¯•ç»“æœæ˜¯ <span class="hljs-subst">&#123;result&#125;</span>&quot;</span>)<br>      <span class="hljs-keyword">if</span> result:<br>          Variable_Handler(variable_name=[<span class="hljs-string">&quot;eventid&quot;</span>,<span class="hljs-string">&quot;competitorid&quot;</span>], response_body=result).variable_handler()<br>      <span class="hljs-keyword">assert</span> result <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">False</span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨å˜é‡çš„æ˜¯ remarks æ˜¯è®¢é˜…æ¯”èµ›ï¼Œæ·±åº¦æ•°æ® è¿™é‡Œåˆ†åˆ«ç”¨åˆ°äº† url æ›¿æ¢ ä»¥åŠ data æ›¿æ¢ã€‚</p><p>ä»£ç ï¼š</p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta"> @allure.step(<span class="hljs-params"><span class="hljs-string">&quot;è®¢é˜…æ¯”èµ›ï¼Œé‡‡ç”¨å…¨å±€å˜é‡&quot;</span></span>)</span><br><span class="hljs-meta">@pytest.mark.parametrize(<span class="hljs-params"></span></span><br><span class="hljs-params"><span class="hljs-meta">    <span class="hljs-string">&#x27;id, url, method, headers, request_data, params, json, assert_jsonpath, response_body, remarks&#x27;</span>,</span></span><br><span class="hljs-params"><span class="hljs-meta">    DataManger(<span class="hljs-params"></span>).get_data_from_sqlite(<span class="hljs-params">name=<span class="hljs-string">&quot;data&quot;</span>, sql_command=<span class="hljs-string">&#x27;&#x27;&#x27;select * from requests where id= 4&#x27;&#x27;&#x27;</span>,</span></span></span><br><span class="hljs-params"><span class="hljs-params"><span class="hljs-meta">                                      query_sql_type=<span class="hljs-literal">True</span></span>)</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_match_subscribe_list</span>(<span class="hljs-params">self, <span class="hljs-built_in">id</span>, url, method, headers, request_data, params, json, assert_jsonpath,</span><br><span class="hljs-params">                           response_body,</span><br><span class="hljs-params">                           remarks</span>):<br>    logger.info(<span class="hljs-string">f&quot;è®¢é˜…æ¯”èµ›ä¿¡æ¯&quot;</span>)<br>    result = Request_Runner(url=url, headers=headers, data=request_data, assert_info=assert_jsonpath).post_request_runner(<span class="hljs-built_in">id</span>=<span class="hljs-built_in">id</span>, replace_type=<span class="hljs-number">1</span>)<br>    logger.info(<span class="hljs-string">f&quot;æµ‹è¯•ç»“æœæ˜¯ <span class="hljs-subst">&#123;result&#125;</span>&quot;</span>)<br>    <span class="hljs-comment"># if result[0] is True:</span><br>    <span class="hljs-comment">#     Variable_Handler(id=2, variable_name=&quot;eventid&quot;).variable_handler()</span><br>    <span class="hljs-keyword">assert</span> result <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">False</span><br><br><span class="hljs-meta">@allure.step(<span class="hljs-params"><span class="hljs-string">&quot;æ·±åº¦æ•°æ®ï¼Œé‡‡ç”¨å…¨å±€å˜é‡&quot;</span></span>)</span><br><span class="hljs-meta">@pytest.mark.parametrize(<span class="hljs-params"></span></span><br><span class="hljs-params"><span class="hljs-meta">    <span class="hljs-string">&#x27;id, url, method, headers, request_data, params, json, assert_jsonpath, response_body, remarks&#x27;</span>,</span></span><br><span class="hljs-params"><span class="hljs-meta">    DataManger(<span class="hljs-params"></span>).get_data_from_sqlite(<span class="hljs-params">name=<span class="hljs-string">&quot;data&quot;</span>, sql_command=<span class="hljs-string">&#x27;&#x27;&#x27;select * from requests where id= 5&#x27;&#x27;&#x27;</span>,</span></span></span><br><span class="hljs-params"><span class="hljs-params"><span class="hljs-meta">                                      query_sql_type=<span class="hljs-literal">True</span></span>)</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_match_subscribe_list</span>(<span class="hljs-params">self, <span class="hljs-built_in">id</span>, url, method, headers, request_data, params, json, assert_jsonpath,</span><br><span class="hljs-params">                              response_body,</span><br><span class="hljs-params">                              remarks</span>):<br>    logger.info(<span class="hljs-string">f&quot;è®¢é˜…æ¯”èµ›ä¿¡æ¯&quot;</span>)<br>    result = Request_Runner(url=url, headers=headers, data=request_data,<br>                            assert_info=assert_jsonpath).post_request_runner(<span class="hljs-built_in">id</span>=<span class="hljs-built_in">id</span>, replace_type=<span class="hljs-number">2</span>)<br>    logger.info(<span class="hljs-string">f&quot;æµ‹è¯•ç»“æœæ˜¯ <span class="hljs-subst">&#123;result&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">assert</span> result <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">False</span><br></code></pre></td></tr></table></figure><h2 id="ç»“æŸè¯­"><a href="#ç»“æŸè¯­" class="headerlink" title="ç»“æŸè¯­"></a>ç»“æŸè¯­</h2><p>ä¹‹å‰æˆ‘åšçš„æ˜¯åŸºäºDjango+vue çš„æµ‹è¯•å¼€å‘å¹³å°ï¼Œå·²ç»ç¨³å®šè¿è¡Œäº†3å¹´+, æœ€è¿‘æƒ³è¦æŠŠéƒ¨åˆ†åŠŸèƒ½ç”¨Pytestå®ç°ï¼Œä¹Ÿå°±åšå‡ºäº†ä¸€ç‰ˆï¼Œè¿™ç‰ˆè‚¯å®šæœ‰å¾ˆå¤šä¸è¶³ï¼Œæ¬¢è¿å„ä½å¤§ç¥æ‰¹è¯„å’Œå»ºè®®ï¼è®©æˆ‘ä»¬ä¸€èµ·è¿›æ­¥åŠªåŠ›ï¼</p>]]></content>
    
    
    <categories>
      
      <category>æµ‹è¯•å¼€å‘å·¥å…·/æ¡†æ¶</category>
      
      <category>æ¥å£æµ‹è¯•æ¡†æ¶</category>
      
      <category>åŸºäºPytestçš„æ¥å£æµ‹è¯•æ¡†æ¶</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>pytest</tag>
      
      <tag>æ¥å£æµ‹è¯•æ¡†æ¶</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä¸€ä¸ªç½‘é¡µé›†åˆæ‰€æœ‰AIè®¿é—®ï¼</title>
    <link href="/2024/07/04/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%BD%91%E7%AB%99/"/>
    <url>/2024/07/04/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%BD%91%E7%AB%99/</url>
    
    <content type="html"><![CDATA[<h1 id="AI-ç”Ÿäº§åŠ›å·¥å…·é›†åˆ"><a href="#AI-ç”Ÿäº§åŠ›å·¥å…·é›†åˆ" class="headerlink" title="AI ç”Ÿäº§åŠ›å·¥å…·é›†åˆ"></a>AI ç”Ÿäº§åŠ›å·¥å…·é›†åˆ</h1><p>åœ¨å½“å‰AIæµªæ½®ä¸‹å¦‚æœä½ è¿˜æ²¡ä½¿ç”¨è¿‡AIé‚£ä½ è‚¯å®šæ˜¯è½ä¼äº†ï¼Œä½ è¿˜åœ¨è‹¦äºå¯»æ‰¾AIç½‘ç«™å—ï¼Ÿæ¥è¿™é‡Œå…¨éƒ¨ç»™ä½ åšå¥½äº†ï¼</p><h2 id="ChatGpt-çƒ­é—¨"><a href="#ChatGpt-çƒ­é—¨" class="headerlink" title="ChatGpt çƒ­é—¨"></a>ChatGpt çƒ­é—¨</h2><p>æ”¯æŒ4.0æ¨¡å‹å’ŒMJç»˜ç”»</p><p>è¶…çº§æ™ºèƒ½åŠ©ç† - <a href="https://chaoji.aizhuli.cc/" target="_blank">è¶…çº§æ™ºèƒ½åŠ©ç†</a></p><hr><p>å›½å†…TOPçº§AIå¤§æ¨¡å‹</p><p>KimiChat - <a href="https://kimi.moonshot.cn/" target="_blank">KimiChat</a></p><hr><p>ä½“éªŒå£ç¢‘è¿˜ä¸é”™</p><p>è®¯é£æ˜Ÿç« - <a href="https://xinghuo.xfyun.cn/" target="_blank">è®¯é£æ˜Ÿç«</a></p><hr><p>æ¸…åå¼€æºçƒ­é—¨å¤§æ¨¡å‹</p><p>æ™ºè°±æ¸…è¨€ - <a href="https://chatglm.cn/" target="_blank">æ™ºè°±æ¸…è¨€</a></p><hr><p>é˜¿é‡Œå‡ºå“ï¼Œå›½å†…é¡¶çº§å¤§æ¨¡å‹</p><p>é˜¿é‡Œé€šä¹‰åƒé—® - <a href="https://tongyi.aliyun.com/" target="_blank">é˜¿é‡Œé€šä¹‰åƒé—®</a></p><hr><p>ç™¾åº¦å‡ºå“, æˆ‘ç»å¸¸ä½¿ç”¨</p><p>æ–‡å¿ƒä¸€è¨€ - <a href="https://yiyan.baidu.com/" target="_blank">æ–‡å¿ƒä¸€è¨€</a>></p><hr><p>å­—èŠ‚æ——ä¸‹AIå¤§æ¨¡å‹</p><p>è±†åŒ… - <a href="https://doubao.com" target="_blank">è±†åŒ…</a></p><h2 id="å¤šç§è§’è‰²AIç”Ÿäº§åŠ›å·¥å…·"><a href="#å¤šç§è§’è‰²AIç”Ÿäº§åŠ›å·¥å…·" class="headerlink" title="å¤šç§è§’è‰²AIç”Ÿäº§åŠ›å·¥å…·"></a>å¤šç§è§’è‰²AIç”Ÿäº§åŠ›å·¥å…·</h2><p>å®˜æ–¹è®¾è®¡æ ·å¼ï¼Œç®€æ´å¥½ç”¨</p><p>AIé—®ç­”å¤åˆ»ç‰ˆ - <a href="https://m.openaichat.cc/web/" target="_blank">AIé—®ç­”å¤åˆ»ç‰ˆ</a></p><hr><p>ä¸€é”®ç”Ÿæˆè§’è‰²æ‰®æ¼”æŒ‡ä»¤</p><p>ChatGPTè§’è‰²ç”Ÿæˆå™¨ - <a href="https://role.aicoser.com.cn/zh" target="_blank">ChatGPTè§’è‰²ç”Ÿæˆå™¨</a></p><hr><p>ä¸€é”®ç”ŸæˆBRTRä»»åŠ¡æŒ‡ä»¤æ¨¡æ¿</p><p>ChatGPTæŒ‡ä»¤ç”Ÿæˆå™¨ - <a href="https://prompt.aicoser.com.cn/" target="_blank">ChatGPTæŒ‡ä»¤ç”Ÿæˆå™¨</a></p><hr><p>çº¯æ­£å°çº¢ä¹¦é£ï¼Œä¸€é”®è½»æ¾åˆ›ä½œ</p><p>å°çº¢ä¹¦ç”Ÿæˆå™¨ - <a href="https://ai.xiaohongshu.live/zh" target="_blank">å°çº¢ä¹¦ç”Ÿæˆå™¨</a></p><hr><p>AIä½›ç¥–ï¼Œåœ¨çº¿ä¸ºä½ è§£å¿§</p><p>AIä½›ç¥– - <a href="https://ask.aifozu.cn/zh" target="_blank">AIä½›ç¥–</a></p><hr><p>AIå¾‹å¸ˆï¼Œåœ¨çº¿å’¨è¯¢æ³•å¾‹é—®é¢˜</p><p>AIå¾‹æ‰€ - <a href="https://ask.ailvsuo.com.cn/zh" target="_blank">AIå¾‹æ‰€</a></p><hr><p>æ— è„‘å¤¸ï¼Œä¸€å®šè®©ä½ å¼€å¿ƒè‡ªä¿¡èµ·æ¥ï¼</p><p>AIå¤¸å¤¸ - <a href="https://me.aikuakua.cn/zh" target="_blank">AIå¤¸å¤¸</a></p><hr><p>æ”¯æŒä¸Šç™¾ç§æ–‡æ¡£æŠ¥å‘Šå’Œæµç¨‹å›¾</p><p>å¤šå¢¨æ™ºèƒ½ - <a href="https://duomosmart.com/" target="_blank">å¤šå¢¨æ™ºèƒ½</a></p><hr><p>é€šè¿‡é—®ç­”å¿«é€Ÿåˆ¶ä½œExcel</p><p>ChatExcel - <a href="https://chatexcel.com/" target="_blank">ChatExcel</a></p><hr><p>é€šè¿‡é—®ç­”å¿«é€Ÿåˆ¶ä½œPPT</p><p>ChatPPT - <a href="https://chatppt.yoo-ai.com/" target="_blank">ChatPPT</a></p><hr><p>ä¸€é”®æ€»ç»“Bç«™è§†é¢‘å†…å®¹</p><p>BiliGPT - <a href="https://b.jimmylv.cn/" target="_blank">BiliGPT</a></p><h2 id="å›½å†…æ–°ç”ŸåŠ¿åŠ›AI"><a href="#å›½å†…æ–°ç”ŸåŠ¿åŠ›AI" class="headerlink" title="å›½å†…æ–°ç”ŸåŠ¿åŠ›AI"></a>å›½å†…æ–°ç”ŸåŠ¿åŠ›AI</h2><p>éå¸¸å¥½ç”¨çš„AIæœç´¢å·¥å…·</p><p>ç§˜å¡”AIæœç´¢ - <a href="https://metaso.cn/" target="_blank">ç§˜å¡”AIæœç´¢</a></p><hr><p>è…¾è®¯æ——ä¸‹AIå¤§æ¨¡å‹</p><p>è…¾è®¯å…ƒå® - <a href="https://yuanbao.tencent.com" target="_blank">è…¾è®¯å…ƒå®</a></p><hr><p>ç™¾å·æ™ºèƒ½æ——ä¸‹AIå¤§æ¨¡å‹</p><p>ç™¾å°åº”AI - <a href="https://ying.baichuan-ai.com/" target="_blank">ç™¾å°åº”AI</a></p><hr><p>é›¶ä»£ç ç”ŸæˆAIåº”ç”¨ï¼Œæ”¯æŒæ¨¡å‹è®­ç»ƒ</p><p>Zelinai - <a href="https://www.zelinai.com/" target="_blank">Zelinai</a></p><hr><p>[å†…æµ‹]å®šåˆ¶è¯­æ–™è®­ç»ƒçš„æœºå™¨äººï¼Œç™¾å§“AIå‡ºå“</p><p>Chato - <a href="https://chato.cn/" target="_blank">Chato</a></p><hr><p>å•†æ±¤è€ç‰ŒAI</p><p>å•†æ±¤æ—¥æ—¥æ–° - <a href="https://techday.sensetime.com/" target="_blank">å•†æ±¤æ—¥æ—¥æ–°</a></p><hr><p>æ˜†ä»‘</p><p>æ˜†ä»‘å¤©å·¥å¤§æ¨¡å‹ - <a href="https://tiangong.kunlun.com/" target="_blank">æ˜†ä»‘å¤©å·¥å¤§æ¨¡å‹</a></p><hr><p>å¤æ—¦å›¢é˜Ÿå‡ºå“</p><p>Mosså¤§æ¨¡å‹ - <a href="https://moss.fastnlp.top/" target="_blank">Mosså¤§æ¨¡å‹</a></p><hr><p>MiniMax</p><p>MiniMaxå¤§æ¨¡å‹ - <a href="https://api.minimax.chat/" target="_blank">MiniMaxå¤§æ¨¡å‹</a></p><hr><p>æä¾›GPTä¹¦æœ¬ç¿»è¯‘æœåŠ¡ï¼Œä»˜è´¹</p><p>é£å£°é›¨å£° - <a href="https://fsys.app/" target="_blank">é£å£°é›¨å£°</a></p><hr><p>å¯ä½¿ç”¨AzureGPTæœåŠ¡</p><p>Mbmzone - <a href="https://openai.mbmzone.com/" target="_blank">Mbmzone</a></p><h2 id="æµ·å¤–ChatGpt"><a href="#æµ·å¤–ChatGpt" class="headerlink" title="æµ·å¤–ChatGpt"></a>æµ·å¤–ChatGpt</h2><p>[æµ·å¤–]chatgptèŠå¤©å®˜ç½‘</p><p>ChatGPTå®˜ç½‘ - <a href="https://chatgpt.com" target="_blank">ChatGPTå®˜ç½‘</a></p><hr><p>AIå†™ä½œåŠ©æ‰‹ï¼Œchatgptçš„å¼ºåŠ›ç«äº‰è€…</p><p>Notion AI - <a href="https://www.notion.so/product/ai" target="_blank">Notion AI</a></p><hr><p>[æµ·å¤–]å’ŒChatGPTåŒæ ·å¼ºå¤§çš„AIå¤§æ¨¡å‹</p><p>Claude - <a href="https://www.claude.ai" target="_blank">Claude</a></p><hr><p>[æµ·å¤–]å¹³æ›¿ï¼Œé›†æˆgptã€claudeç­‰åæ¬¾æœºå™¨äºº</p><p>Poe - <a href="https://poe.com/" target="_blank">Poe</a></p><hr><p>[æµ·å¤–]å¿…åº”æœç´¢ç”¨GPT</p><p>Bing Chat - <a href="https://www.bing.com/" target="_blank">Bing Chat</a></p><hr><p>[æµ·å¤–]ç”¨æˆ·åˆ›å»ºAIè§’è‰²</p><p>Character AI - <a href="https://beta.character.ai/" target="_blank">Character AI</a></p><hr><p>å†å²äººç‰©Aiå¯¹è¯</p><p>Hellohistory - <a href="https://www.hellohistory.ai/" target="_blank">Hellohistory</a></p><hr><p>è™šæ‹Ÿäººè§†é¢‘å£è¯­ç»ƒä¹ </p><p>CallAnnie - <a href="https://callannie.ai/" target="_blank">CallAnnie</a></p><hr><p>AIäººç‰©è¯­éŸ³å£è¯­ç»ƒä¹ </p><p>TalkMe - <a href="https://www.talkme.ai/" target="_blank">TalkMe</a></p><hr><p>GitHubçš„ç¼–ç¨‹AIç¥å™¨</p><p>GitHub Copilot - <a href="https://github.com/features/preview/copilot-x" target="_blank">GitHub Copilot</a></p><hr><p>æ”¯æŒä¸Šä¼ æ–‡ä»¶åˆ›å»ºåŠ©æ‰‹</p><p>Chatbase - <a href="https://www.chatbase.co/" target="_blank">Chatbase</a></p><hr><p>å¯åˆ›å»ºè‡ªå·±çš„æœºå™¨äººåº”ç”¨</p><p>Dify - <a href="https://dify.ai/" target="_blank">Dify</a></p><hr><p>å¾®è½¯åŠå…¬è½¯ä»¶æ¥å…¥ChatGPT</p><p>å¾®è½¯Copilot - <a href="https://news.microsoft.com/reinventing-productivity/" target="_blank">å¾®è½¯Copilot</a></p><h2 id="ChatGptå­¦ä¹ "><a href="#ChatGptå­¦ä¹ " class="headerlink" title="ChatGptå­¦ä¹ "></a>ChatGptå­¦ä¹ </h2><p>chatgptæŒ‡ä»¤ï¼Œä¸­è‹±åŒè¯­ç‰ˆæœ¬</p><p>Shortcut - <a href="https://www.aishort.top/" target="_blank">Shortcut</a></p><hr><p>ChatGPTä¸­æ–‡ç‰ˆè§’è‰²è°ƒæ•™æŒ‡ä»¤å¤§å…¨</p><p>ChatGPTè°ƒæ•™æŒ‡ä»¤ - <a href="https://ai.weurl.com.cn/chatgpt-role-prompts/" target="_blank">ChatGPTè°ƒæ•™æŒ‡ä»¤</a></p><hr><p>ç§‘å¤§è®¯é£å®˜æ–¹å‡ºå“</p><p>è®¯é£æ˜Ÿç«æŒ‡ä»¤å¤§å…¨ - <a href="https://xinghuo.xfyun.cn/instruction" target="_blank">è®¯é£æ˜Ÿç«æŒ‡ä»¤å¤§å…¨</a></p><hr><p>å°é£ç¼–å†™çš„è§’è‰²æŒ‡ä»¤ä¸‰æ¿æ–§</p><p>ChatGPTè§’è‰²æŒ‡ä»¤è°ƒæ•™æŒ‡å— - <a href="https://mp.weixin.qq.com/s/ItTOCAYCXWzVo1Tp_AGrqw" target="_blank">ChatGPTè§’è‰²æŒ‡ä»¤è°ƒæ•™æŒ‡å—</a></p><hr><p>æä¾›ChatGPTå’ŒMJæ•™ç¨‹</p><p>Learningprompt wiki - <a href="https://learningprompt.wiki/" target="_blank">Learningprompt wiki</a></p><hr><p>æä¾›ChatGPT/MJå’ŒSDæ•™ç¨‹</p><p>Learningprompt pro - <a href="https://www.learnprompt.pro/" target="_blank">Learningprompt pro</a></p><h2 id="ChatGptæ’ä»¶"><a href="#ChatGptæ’ä»¶" class="headerlink" title="ChatGptæ’ä»¶"></a>ChatGptæ’ä»¶</h2><p>ChatGPTè§’è‰²æŒ‡ä»¤è¯­æ³•æ¨¡æ¿</p><p>LangGPT - <a href="https://github.com/yzfly/LangGPT/blob/main/README_zh.md" target="_blank">LangGPT</a></p><hr><p>æ”¯æŒMacå’ŒWinï¼Œæ›´ç¨³å®šæ–¹ä¾¿</p><p>ChatGPTå®¢æˆ·ç«¯ - <a href="https://github.com/lencx/ChatGPT/releases" target="_blank">ChatGPTå®¢æˆ·ç«¯</a></p><hr><p>å¯ä½¿ç”¨APIçš„ChatGPTå®¢æˆ·ç«¯</p><p>ChatBox - <a href="https://chatboxapp.xyz/" target="_blank">ChatBox</a></p><hr><p>IOSGPTåº”ç”¨æ”¯æŒè¾“å…¥æ³•</p><p>OpenCat - <a href="https://apps.apple.com/cn/app/opencat/id6445999201" target="_blank">OpenCat</a></p><hr><p>ChatGPTåˆ†äº«ä¼šè¯æ’ä»¶</p><p>ShareGPTæ’ä»¶ - <a href="https://sharegpt.com/" target="_blank">ShareGPTæ’ä»¶</a></p><hr><p>å®˜ç½‘æœåŠ¡è¿è¡ŒçŠ¶æ€æŸ¥è¯¢</p><p>ChatGPT Status - <a href="https://status.openai.com/" target="_blank">ChatGPT Status</a></p><h2 id="AIç»˜ç”»å›½å†…"><a href="#AIç»˜ç”»å›½å†…" class="headerlink" title="AIç»˜ç”»å›½å†…"></a>AIç»˜ç”»å›½å†…</h2><p>æ‹¥æœ‰æ•°åƒä¸‡ç”¨æˆ·çš„AIç»˜ç”»å¹³å°</p><p>æ„é—´AIç»˜ç”» - <a href="http://portal.yjai.art/" target="_blank">æ„é—´AIç»˜ç”»</a></p><hr><p>å¯é€‰å¤šä¸ªç»˜ç”»æ¨¡å‹</p><p>6Pen - <a href="https://6pen.art/" target="_blank">6Pen</a></p><hr><p>ç™¾åº¦å‡ºå“çš„AIç»˜ç”»å¹³å°</p><p>æ–‡å¿ƒä¸€æ ¼ - <a href="https://yige.baidu.com/" target="_blank">æ–‡å¿ƒä¸€æ ¼</a></p><hr><p>è¥¿æ¹–å¿ƒè¾°å…¬å¸å‡ºå“</p><p>é€ æ¢¦æ—¥è®° - <a href="https://zmrj.art/" target="_blank">é€ æ¢¦æ—¥è®°</a></p><hr><p>ç¨¿å®šè®¾è®¡å‡ºå“</p><p>ç¨¿å®šAIç»˜ç”» - <a href="https://www.gaoding.com/ai" target="_blank">ç¨¿å®šAIç»˜ç”»</a></p><hr><p>ä¸‡å…´å‡ºå“</p><p>ä¸‡å…´çˆ±ç”» - <a href="https://aigc.wondershare.cn/" target="_blank">ä¸‡å…´çˆ±ç”»</a></p><hr><p>ç«™é…·å‡ºå“</p><p>ç«™é…·æ¢¦ç¬” - <a href="https://www.zcool.com.cn/ailab" target="_blank">ç«™é…·æ¢¦ç¬”</a></p><h2 id="æµ·å¤–ç»˜ç”»"><a href="#æµ·å¤–ç»˜ç”»" class="headerlink" title="æµ·å¤–ç»˜ç”»"></a>æµ·å¤–ç»˜ç”»</h2><p>Discodæ——ä¸‹AIç»˜ç”»å·¥å…·</p><p>Midjourney - <a href="https://www.midjourney.com/" target="_blank">Midjourney</a></p><hr><p>å…è´¹å¼€æºçš„AIç»˜ç”»æ¨¡å‹</p><p>Stable Diffusion - <a href="https://stability.ai/" target="_blank">Stable Diffusion</a></p><hr><p>å®šåˆ¶è§’è‰²å‰§æƒ…AIç»˜ç”»</p><p>Novel AI - <a href="https://novelai.net/" target="_blank">Novel AI</a></p><hr><p>ChatGPTæ¯å…¬å¸å‡ºå“çš„AIç»˜ç”»æ¨¡å‹</p><p>OpenAI DALL-E - <a href="https://openai.com/product/dall-e-2" target="_blank">OpenAI DALL-E</a></p><hr><p>Adobeå‡ºå“ï¼Œå¼€æ”¾ä¸ªäººç”³è¯·</p><p>Adobe Firefly - <a href="https://www.adobe.com/sensei/generative-ai/firefly.html" target="_blank">Adobe Firefly</a></p><hr><p>[æµ·å¤–]å¾®è½¯å‡ºå“ï¼Œé™åœ°åŒº</p><p>Bing AIå›¾åƒ - <a href="https://bing.com/create" target="_blank">Bing AIå›¾åƒ</a></p><h2 id="AIç»˜ç”»èµ„æº"><a href="#AIç»˜ç”»èµ„æº" class="headerlink" title="AIç»˜ç”»èµ„æº"></a>AIç»˜ç”»èµ„æº</h2><p>å¤šä¸ªæ¨¡å‹çš„æç¤ºè¯å»ºè®®ï¼Œå®å›¾å‚è€ƒ</p><p>Aigallery - <a href="https://www.aigallery.top/" target="_blank">Aigallery</a></p><hr><p>å¯è·å–æµ·é‡å›¾åº“çš„æç¤ºè¯</p><p>PromptBase - <a href="https://promptbase.com/" target="_blank">PromptBase</a></p><hr><p>æ ¹æ®æ–‡ç¨¿è‡ªåŠ¨åŒ¹é…ç´ æï¼Œç”Ÿæˆå­—å¹•å’Œé…éŸ³</p><p>ä¸€å¸§ç§’åˆ› - <a href="https://aigc.yizhentv.com/" target="_blank">ä¸€å¸§ç§’åˆ›</a></p><h2 id="AI-è§†é¢‘åˆ›é€ "><a href="#AI-è§†é¢‘åˆ›é€ " class="headerlink" title="AI è§†é¢‘åˆ›é€ "></a>AI è§†é¢‘åˆ›é€ </h2><p>è…¾è®¯å‡ºå“çš„è§†é¢‘å‰ªè¾‘è¾…åŠ©å¹³å°</p><p>è…¾è®¯æ™ºå½± - <a href="https://zenvideo.qq.com/" target="_blank">è…¾è®¯æ™ºå½±</a></p><hr><p>é˜¿é‡Œè¾¾æ‘©é™¢å‡ºå“ï¼Œè‹±æ–‡ç”Ÿæˆè§†é¢‘æ›´å¼º</p><p>ModelScope - <a href="https://modelscope.cn/studios/damo/text-to-video-synthesis/summary" target="_blank">ModelScope</a></p>]]></content>
    
    
    <categories>
      
      <category>æœ‰è¶£çš„ç½‘ç«™</category>
      
      <category>AI ç½‘ç«™é›†åˆ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>æœ‰è¶£çš„ç½‘ç«™</tag>
      
      <tag>AI ç½‘ç«™é›†åˆ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Android æµ‹è¯•ç‚¹æ€»ç»“ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</title>
    <link href="/2024/07/04/android%E6%B5%8B%E8%AF%95%E7%82%B9%E6%80%BB%E7%BB%93/"/>
    <url>/2024/07/04/android%E6%B5%8B%E8%AF%95%E7%82%B9%E6%80%BB%E7%BB%93/</url>
    
    <content type="html"><![CDATA[<h1 id="Android-æµ‹è¯•ç‚¹æ€»ç»“"><a href="#Android-æµ‹è¯•ç‚¹æ€»ç»“" class="headerlink" title="Android æµ‹è¯•ç‚¹æ€»ç»“"></a>Android æµ‹è¯•ç‚¹æ€»ç»“</h1><p>æˆ‘ä»¬åœ¨æ—¥å¸¸æµ‹è¯•Androidçš„æ—¶å€™éœ€è¦æˆ‘ä»¬æ³¨æ„å¾ˆå¤šæµ‹è¯•ç‚¹ï¼Œé‚£ä¹ˆè¿™äº›ä¹Ÿæ˜¯æˆ‘æ…¢æ…¢æ€»ç»“çš„ï¼Œå½“ç„¶è‚¯å®šä¼šæœ‰è½ä¸‹çš„ï¼Œä¹Ÿå¸Œæœ›å¤§å®¶å¯ä»¥è¡¥å……è¯´æ˜ï¼Œè¿™ä¸ªå¸–å­æ˜¯é•¿æœŸæ›´æ–°çš„å¸–å­ä¸ä¼šåœ¨æ–°å¼€å¸–å­ä»‹ç»ï¼Œæ¬¢è¿ç»å¸¸æ¥çœ‹ï¼</p><h2 id="WebView-çš„æµ‹è¯•"><a href="#WebView-çš„æµ‹è¯•" class="headerlink" title="WebView çš„æµ‹è¯•"></a>WebView çš„æµ‹è¯•</h2><p>ä¸ºä»€ä¹ˆé¦–å…ˆè¯´è¿™ä¸ªå‘¢ï¼Ÿæ˜¯å› ä¸ºæˆ‘ä»¬ç°åœ¨å¾ˆå¤šçš„APPéƒ½ä¼šæœ‰æ´»åŠ¨çš„å±•ç¤ºï¼Œå½“ç„¶WebViewä¸ä»…ä»…æ˜¯æ´»åŠ¨å“ˆï¼Œåƒä¸€äº›ä¸´æ—¶é¡µï¼Œæ”¹åŠ¨å¾ˆé¢‘ç¹çš„é¡µé¢ç­‰ã€‚åœ¨æµ‹è¯•WebView æˆ‘ä»¬é¦–å…ˆè¦å…³æ³¨é‚£äº›ç‚¹å‘¢ï¼Ÿ</p><p>1.WebView åœ¨ä¸åŒæœºå‹ä¸Šçš„é€‚é…æƒ…å†µ</p><p>   WebView åœ¨ä¸åŒçš„æœºå‹ä¸Šé€‚é…æƒ…å†µæ˜¯æˆ‘ä»¬è¦å…³æ³¨çš„ï¼Œå°¤å…¶æ˜¯æ”¯æŒåˆ°äº†å°å±æ‰‹æœºæˆ–è€…å¤§å±æ‰“å¼€çš„æ—¶å€™ï¼Œè¦å…³æ³¨æˆ‘ä»¬ä¸»æµçš„è¦é€‚é…çš„æœºå‹ï¼Œè§‚å¯Ÿé¡µé¢å¸ƒå±€</p><p>   æ˜¯å¦æ­£å¸¸å±•ç¤ºï¼Œä¿¡æ¯æ˜¯å¦é—æ¼ï¼Œ æŒ‰é’®æ˜¯å¦å¯ä»¥æ­£å¸¸ç‚¹å‡»ç­‰ï¼</p><p>2.WebView å‘¼èµ·Android å†…éƒ¨é¡µé¢</p><p>  WebView ä¼šå«æœ‰è·³è½¬ç­‰ï¼Œæˆ‘ä»¬è¦æ³¨æ„è‹¥æ˜¯è·³è½¬åˆ°APPå†…éƒ¨çš„çŸ­é“¾ä¸­ï¼Œéœ€è¦ç€é‡æµ‹è¯•ä¸€ä¸‹ã€‚</p><p>3.WebView æ¸²æŸ“é€Ÿåº¦åŠå ç”¨å†…å­˜</p><p>  WebView ä¸åº”è¯¥è¿‡äºå¤æ‚ï¼Œæ¸²æŸ“é€Ÿåº¦åº”è¯¥è¾ƒå¿«ä¸”å ç”¨å†…å­˜å°ï¼</p><h2 id="ANR-æµ‹è¯•"><a href="#ANR-æµ‹è¯•" class="headerlink" title="ANR æµ‹è¯•"></a>ANR æµ‹è¯•</h2><p>  è¿™é‡Œå¯ä»¥çœ‹æˆ‘å†™çš„ANR æ–‡ç« é‡Œé¢æœ‰å¾ˆè¯¦ç»†çš„ä»‹ç»</p><p>  <a href="http://8888666.top/2024/07/03/adroid%E6%B5%8B%E8%AF%95/">http://8888666.top/2024/07/03/adroid%E6%B5%8B%E8%AF%95/</a></p><h2 id="æ–°è€ç‰ˆæœ¬çš„æµ‹è¯•"><a href="#æ–°è€ç‰ˆæœ¬çš„æµ‹è¯•" class="headerlink" title="æ–°è€ç‰ˆæœ¬çš„æµ‹è¯•"></a>æ–°è€ç‰ˆæœ¬çš„æµ‹è¯•</h2><p>  åœ¨æµ‹è¯•Andoidçš„æ—¶å€™å°¤å…¶è¦æ³¨æ„æ–°è€ç‰ˆæœ¬çš„æµ‹è¯•ï¼Œå¦‚æœåå°å‘å¸ƒäº†æ–°çš„åŠŸèƒ½ä½†æ˜¯åªæ”¯æŒæ–°ç‰ˆæœ¬ï¼Œé‚£ä¹ˆå°±è¦åšç‰ˆæœ¬æ§åˆ¶ï¼Œæˆ–è€…æ–°ç‰ˆæœ¬æ”¯æŒè€ç‰ˆä½¿ç”¨å°±è¦çœ‹çœ‹æ˜¯å¦è€ç‰ˆèƒ½æ­£å¸¸ä½¿ç”¨ï¼</p><h2 id="å…¼å®¹æ€§æµ‹è¯•"><a href="#å…¼å®¹æ€§æµ‹è¯•" class="headerlink" title="å…¼å®¹æ€§æµ‹è¯•"></a>å…¼å®¹æ€§æµ‹è¯•</h2><p>  è¿™ä¸ªè€ç”Ÿå¸¸è°ˆçš„è¯é¢˜ï¼Œè¦†ç›–ä½ ä¸»æµæœºå‹æµ‹è¯•</p><h2 id="ä¸“é¡¹æµ‹è¯•"><a href="#ä¸“é¡¹æµ‹è¯•" class="headerlink" title="ä¸“é¡¹æµ‹è¯•"></a>ä¸“é¡¹æµ‹è¯•</h2><p>  è€—ç”µï¼Œè€—æµï¼Œ æ€§èƒ½ï¼Œ æ‰“å¼€é€Ÿåº¦ï¼Œ å‘çƒ§ ç­‰ç­‰æ ‡å‡†ä¸”è¿™ä¸ªå’Œå…¬å¸æœ‰å…³ç³»ï¼Œä¸æ˜¯å¼ºåˆ¶ï¼</p><h2 id="SDKæµ‹è¯•"><a href="#SDKæµ‹è¯•" class="headerlink" title="SDKæµ‹è¯•"></a>SDKæµ‹è¯•</h2><p>  å¦‚æœappä½¿ç”¨äº†ä¸‰æ–¹çš„sdk é‚£ä¹ˆæˆ‘ä»¬ä¹Ÿæ˜¯è¦å…³æ³¨çš„ï¼Œä¸èƒ½å› ä¸ºä¸‰æ–¹çš„é—®é¢˜å¯¼è‡´æˆ‘ä»¬å‡ºç°äº†é—®é¢˜</p><h2 id="å¼±ç½‘æµ‹è¯•"><a href="#å¼±ç½‘æµ‹è¯•" class="headerlink" title="å¼±ç½‘æµ‹è¯•"></a>å¼±ç½‘æµ‹è¯•</h2><p>  æµ‹è¯•APPåœ¨å¼±ç½‘æƒ…å†µä¸‹çš„è¡¨ç°ï¼Œå„ä¸ªå…¬å¸æœ‰ä¸åŒçš„æ ‡å‡†ï¼</p>]]></content>
    
    
    <categories>
      
      <category>æµ‹è¯•å¸¸è§é—®é¢˜</category>
      
      <category>Android</category>
      
      <category>Android æµ‹è¯•ç‚¹æ€»ç»“</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>æµ‹è¯•çŸ¥è¯†</tag>
      
      <tag>Android æµ‹è¯•çŸ¥è¯†</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Android ANRæ˜¯ä»€ä¹ˆï¼Ÿ</title>
    <link href="/2024/07/03/adroid%E6%B5%8B%E8%AF%95/"/>
    <url>/2024/07/03/adroid%E6%B5%8B%E8%AF%95/</url>
    
    <content type="html"><![CDATA[<h1 id="Android-ANR-æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ"><a href="#Android-ANR-æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ" class="headerlink" title="Android ANR æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ"></a>Android ANR æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</h1><p>åœ¨æ—¥å¸¸æµ‹è¯•Androidæˆ‘ä»¬ä¼šç»å¸¸å¬åˆ°å¼€å‘è®²è¿°ä¸€ä¸ªä¸“ä¸šæœ¯è¯­ANRï¼Œé‚£ä¹ˆANRæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿåˆæ˜¯ä»€ä¹ˆå¯¼è‡´çš„å‘¢ï¼Ÿä¸€èµ·æ¥çœ‹çœ‹å§ï¼</p><h2 id="ä»€ä¹ˆæ˜¯ANRï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯ANRï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ANRï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ANRï¼Ÿ</h2><p>ANR,(Application Not Responding) å³åº”ç”¨ç¨‹åºæ— å“åº”ï¼Œåœ¨androidåº”ç”¨ä¸­ï¼Œå½“æˆ‘ä»¬çš„UIçº¿ç¨‹è¢«é˜»å¡ï¼Œå°±ä¼šå¼¹å‡ºå¦‚ä¸‹å¯¹è¯æ¡†ï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹©ç»§ç»­ç­‰å¾…æˆ–è€…å…³é—­è¿™ä¸ªåº”ç”¨ç¨‹åº,è¿™ç§ç°è±¡æˆ‘ä»¬ç§°ä¹‹ä¸ºANR.</p><h2 id="ANRçš„ç±»å‹"><a href="#ANRçš„ç±»å‹" class="headerlink" title="ANRçš„ç±»å‹"></a>ANRçš„ç±»å‹</h2><p>ä¸€å…±å¯ä»¥åˆ†ä¸ºä¸‰ç§ç±»å‹ï¼š</p><p>1.ä¸»çº¿ç¨‹å¯¹è¾“å…¥äº‹ä»¶åœ¨5ç§’å†…æ²¡æœ‰å¤„ç†å®Œæ¯•</p><p>   äº§ç”Ÿè¿™ç§ANRçš„å‰ææ˜¯è¦æœ‰è¾“å…¥äº‹ä»¶ï¼Œå¦‚æœç”¨æˆ·æ²¡æœ‰è§¦å‘ä»»ä½•è¾“å…¥äº‹ä»¶ï¼Œå³ä¾¿æ˜¯ä¸»çº¿ç¨‹é˜»å¡äº†ï¼Œä¹Ÿä¸ä¼šäº§ç”ŸANRï¼Œå› ä¸ºInputDispatcheræ²¡æœ‰åˆ†å‘äº‹ä»¶ç»™åº”ç”¨ç¨‹åºï¼Œå½“ç„¶ä¹Ÿä¸ä¼šæ£€æµ‹å¤„ç†è¶…æ—¶å’ŒæŠ¥å‘ŠANRäº†ã€‚</p><p>2.ä¸»çº¿ç¨‹åœ¨æ‰§è¡ŒBroadcastReceiverçš„onReceiveå‡½æ•°æ—¶10ç§’å†…æ²¡æœ‰æ‰§è¡Œå®Œæ¯•ï¼Œåå°è¿›ç¨‹æ˜¯60ç§’</p><p>   è¿™ç§æƒ…å†µçš„ANRç³»ç»Ÿä¸ä¼šæ˜¾ç¤ºå¯¹è¯æ¡†æç¤ºï¼Œä»…æ˜¯è¾“å‡ºlogè€Œå·²ã€‚</p><p>3.ä¸»çº¿ç¨‹åœ¨æ‰§è¡ŒServiceçš„å„ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°æ—¶20ç§’å†…æ²¡æœ‰æ‰§è¡Œå®Œæ¯•,åå°è¿›ç¨‹ä¸º200ç§’</p><p>   åŒæ ·å¯¹è¿™ç§æƒ…å†µçš„ANRç³»ç»Ÿä¹Ÿä¸ä¼šæ˜¾ç¤ºå¯¹è¯æ¡†æç¤ºï¼Œä»…æ˜¯è¾“å‡ºlogã€‚</p><p>æ€»ä½“æ¥è¯´ï¼š</p><table><thead><tr><th>Type</th><th>Method call</th><th>Logsample</th><th>time out</th></tr></thead><tbody><tr><td>Input dispatch</td><td>onClick(),onTouch(),onKeydown(),onKeyup()</td><td>Input dispatching timed out</td><td>5</td></tr><tr><td>Broadcast</td><td>onReceive()</td><td>Timeout of broadcast</td><td>FG: 10, BG 60</td></tr><tr><td>Service</td><td>onBind(),onCreate(),onStartCommand(),onUnbind(),onDestroy()</td><td>Timeout executing service</td><td>FG: 20, BG 200</td></tr></tbody></table><h2 id="ANRäº§ç”Ÿçš„åŸå› "><a href="#ANRäº§ç”Ÿçš„åŸå› " class="headerlink" title="ANRäº§ç”Ÿçš„åŸå› "></a>ANRäº§ç”Ÿçš„åŸå› </h2><p>1.åº”ç”¨è‡ªèº«è¿›ç¨‹å¼•èµ·çš„é—®é¢˜ï¼Œæ¯”å¦‚, åœ¨oncreate ï¼Œonstartç­‰ç”Ÿå‘½å‘¨æœŸä¸­æ‰§è¡Œè€—æ—¶æ“ä½œï¼Œuiçº¿ç¨‹é˜»å¡ï¼ŒæŒ‚èµ·ï¼Œæ­»å¾ªç¯ç­‰</p><p>2.å…¶ä»–è¿›ç¨‹å¼•èµ·çš„ï¼Œæ¯”å¦‚ï¼šioæ“ä½œå¯¼è‡´cpuä½¿ç”¨è¿‡é«˜ï¼Œå¯¼è‡´å½“å‰åº”ç”¨è¿›ç¨‹æ— æ³•æŠ¢å åˆ°cpuæ—¶é—´ç‰‡</p><h3 id="ç»†åˆ†çš„è¯å¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸€äº›æƒ…å†µï¼š"><a href="#ç»†åˆ†çš„è¯å¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸€äº›æƒ…å†µï¼š" class="headerlink" title="ç»†åˆ†çš„è¯å¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸€äº›æƒ…å†µï¼š"></a>ç»†åˆ†çš„è¯å¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸€äº›æƒ…å†µï¼š</h3><p>è€—æ—¶çš„ç½‘ç»œè®¿é—®</p><p>å¤§é‡çš„æ•°æ®è¯»å†™</p><p>æ•°æ®åº“æ“ä½œ</p><p>ç¡¬ä»¶æ“ä½œï¼ˆæ¯”å¦‚cameraï¼‰</p><p>è°ƒç”¨threadçš„join()æ–¹æ³•ã€sleep()æ–¹æ³•ã€wait()æ–¹æ³•æˆ–è€…ç­‰å¾…çº¿ç¨‹é”çš„æ—¶å€™</p><p>service binderçš„æ•°é‡è¾¾åˆ°ä¸Šé™</p><p>system serverä¸­å‘ç”ŸWatchDog ANR</p><p>serviceå¿™å¯¼è‡´è¶…æ—¶æ— å“åº”</p><p>å…¶ä»–çº¿ç¨‹æŒæœ‰é”ï¼Œå¯¼è‡´ä¸»çº¿ç¨‹ç­‰å¾…è¶…æ—¶</p><p>å…¶å®ƒçº¿ç¨‹ç»ˆæ­¢æˆ–å´©æºƒå¯¼è‡´ä¸»çº¿ç¨‹ä¸€ç›´ç­‰å¾…â€¦</p><h2 id="å¦‚ä½•é¿å…ANR"><a href="#å¦‚ä½•é¿å…ANR" class="headerlink" title="å¦‚ä½•é¿å…ANR"></a>å¦‚ä½•é¿å…ANR</h2><p>è€—æ—¶çš„å·¥ä½œ()æ¯”å¦‚æ•°æ®åº“æ“ä½œï¼ŒI&#x2F;Oï¼Œç½‘ç»œæ“ä½œï¼Œé‡‡ç”¨å•ç‹¬çš„å·¥ä½œçº¿ç¨‹å¤„ç†</p><p>ç”¨Handleræ¥å¤„ç†UIthreadå’Œå·¥ä½œthreadçš„äº¤äº’</p><p>åˆç†ä½¿ç”¨ Handler æ¥å¤„ç†å…¶ä»–çº¿ç¨‹è¯·æ±‚</p><p>åˆç†ä½¿ç”¨å¹¶éµå¾ª Android ç”Ÿå‘½å‘¨æœŸ, é¿å…åœ¨ onCreate() and onResume() åšè¿‡å¤šçš„äº‹æƒ…</p><p>ä½¿ç”¨ä¸€äº›æ¶æ„å½¢æˆè§„èŒƒæ¥é¿å…å†…å­˜ç­‰é—®é¢˜,ä¾‹å¦‚ï¼šMVPã€RxJava</p><p>ç»å¸¸ä½¿ç”¨å·¥å…·æ¥æ£€æŸ¥å†…å­˜é—®é¢˜,ä¾‹å¦‚:MATã€TraceViewã€AS è‡ªå¸¦ç­‰å·¥å…·</p><p>é¿å…åŠ è½½å¤§å›¾ç‰‡å¼•èµ·å†…å­˜ä¸è¶³å¯¼è‡´ ANR</p><p>é¿å…å†…å­˜æ³„éœ²å¼•èµ·çš„ ANR</p>]]></content>
    
    
    <categories>
      
      <category>æµ‹è¯•å¸¸è§é—®é¢˜</category>
      
      <category>Android</category>
      
      <category>Android ANRæ˜¯ä»€ä¹ˆï¼Ÿ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›ã€è½¬è½½</tag>
      
      <tag>æµ‹è¯•çŸ¥è¯†</tag>
      
      <tag>Android æµ‹è¯•çŸ¥è¯†</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python urlç¼–ç </title>
    <link href="/2024/07/03/url%E5%8A%A0%E5%AF%86/"/>
    <url>/2024/07/03/url%E5%8A%A0%E5%AF%86/</url>
    
    <content type="html"><![CDATA[<h1 id="Python-å®ç°url-ç¼–ç "><a href="#Python-å®ç°url-ç¼–ç " class="headerlink" title="Python å®ç°url ç¼–ç "></a>Python å®ç°url ç¼–ç </h1><p>åœ¨å¹³å¸¸çš„æµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬ä¼šé‡è§åœ¨æµ‹è¯•æŸäº›url è¦æ±‚ä¼ é€’çš„æ˜¯urlç¼–ç åçš„ä¿¡æ¯ï¼Œé‚£ä¹ˆä½ å¯ä»¥ä»æœ¬æ–‡ä¸­å­¦ä¼šå¦‚ä½•ä½¿ç”¨urlç¼–ç ã€‚</p><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> urllib.parse<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">UrlEncode_infor</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">urlencode_infor</span>(<span class="hljs-params">self,data</span>):<br>        s=data<br>        s_re= urllib.parse.quote(s)<br>        <span class="hljs-keyword">return</span> s_re<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    url_encode=UrlEncode_infor()<br>    s=<span class="hljs-string">&#x27;patron:id:generaltoken:1b9554037ee04463beaeabd81573785e&#x27;</span><br>    url_encode.urlencode_infor(s)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
      <category>Python å¸¸è§å‡½æ•°</category>
      
      <category>Python urlç¼–ç </category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>python</tag>
      
      <tag>yield</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python md5åŠ å¯†</title>
    <link href="/2024/07/03/md5%E5%8A%A0%E5%AF%86/"/>
    <url>/2024/07/03/md5%E5%8A%A0%E5%AF%86/</url>
    
    <content type="html"><![CDATA[<h1 id="Python-å®ç°md5åŠ å¯†"><a href="#Python-å®ç°md5åŠ å¯†" class="headerlink" title="Python å®ç°md5åŠ å¯†"></a>Python å®ç°md5åŠ å¯†</h1><p>å¹³å¸¸æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šé‡åˆ°åœ¨æµ‹è¯•apiçš„æ—¶å€™éœ€è¦ä½¿ç”¨md5åŠ å¯†ï¼Œåœ¨ç¼–å†™æµ‹è¯•è„šæœ¬çš„æ—¶å€™åˆ™éœ€è¦å®ç°å…¶è¿‡ç¨‹ï¼Œé‚£ä¹ˆåœ¨æœ¬æ–‡ä¸­ä½ å¯ä»¥å­¦ä¼šå¦‚ä½•ä½¿ç”¨md5åŠ å¯†ã€‚</p><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> hashlib <span class="hljs-keyword">import</span> md5<br><span class="hljs-keyword">import</span> os,sys<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Md5_Password</span>():<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">do_md5</span>(<span class="hljs-params">self,need_encode</span>):<br>        <span class="hljs-string">&#x27;&#x27;&#x27;md5åŠ å¯†&#x27;&#x27;&#x27;</span><br>        password_md5 = md5()<br>        password_md5.update(need_encode.encode())<br>        pwd_secret = password_md5.hexdigest()<br>        <span class="hljs-keyword">return</span> pwd_secret<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    md5_infor=Md5_Password()<br>    password=<span class="hljs-string">&#x27;123qwe&#x27;</span><br>    md5_infor.do_md5(password)<br></code></pre></td></tr></table></figure><p>å½“ç„¶ ä½ å¯ä»¥å®ç°ç›çš„åŠ å¯† é‚£å°±æ˜¯åœ¨åŠ å¯†çš„æ—¶å€™åŠ å…¥æŒ‡å®šçš„ä¿¡æ¯å³å¯ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
      <category>Python å¸¸è§å‡½æ•°</category>
      
      <category>Python md5åŠ å¯†</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>python</tag>
      
      <tag>yield</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python å¸¸è§æ’åºç®—æ³•</title>
    <link href="/2024/07/03/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/"/>
    <url>/2024/07/03/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h1 id="Python-å¸¸è§æ’åºç®—æ³•"><a href="#Python-å¸¸è§æ’åºç®—æ³•" class="headerlink" title="Python å¸¸è§æ’åºç®—æ³•"></a>Python å¸¸è§æ’åºç®—æ³•</h1><p>åœ¨å¹³å¸¸é¢è¯•ä¸­ï¼Œä¸€èˆ¬éƒ½ä¼šé‡è§è®©å†™æ’åºç®—æ³•çš„è¦æ±‚ï¼Œé‚£ä¹ˆåŸºæœ¬ä¹Ÿå°±è¿™ä¸‰ç§æ’åºç®—æ³•ï¼Œå¤§å®¶å¯ä»¥æŒæ¡å­¦ä¼šï¼</p><h2 id="å†’æ³¡æ’åº"><a href="#å†’æ³¡æ’åº" class="headerlink" title="å†’æ³¡æ’åº"></a>å†’æ³¡æ’åº</h2><p>åŸç†ï¼š ç›¸é‚»è¿ä¸ªæ•°è¿›è¡Œæ¯”è¾ƒï¼Œå¤§çš„ä¸‹æ²‰ï¼Œæœ€åä¸€ä¸ªå…ƒç´ æœ€å¤§</p><p>å¤æ‚åº¦ï¼š æ—¶é—´å¤æ‚åº¦O(n^2)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">dlist_sort</span>(<span class="hljs-params">dlist</span>):<br>    <span class="hljs-keyword">if</span> dlist == []:<br>        <span class="hljs-keyword">return</span> []<br>    <span class="hljs-keyword">else</span>:<br>        dlist_lenght = <span class="hljs-built_in">len</span>(dlist)<br>        <span class="hljs-keyword">for</span> i  <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span> (<span class="hljs-number">0</span>, dlist_lenght):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span> (i+<span class="hljs-number">1</span>, dlist_lenght):<br>                <span class="hljs-keyword">if</span> dlist[i] &gt; dlist[j]:<br>                    dlist[i],dlist[j] = dlist[j],dlist[i]<br>        <span class="hljs-keyword">return</span> dlist<br><br><br><span class="hljs-built_in">print</span>(dlist_sort([<span class="hljs-number">1</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">3</span>,<span class="hljs-number">2</span>,<span class="hljs-number">4</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">53</span>]))<br></code></pre></td></tr></table></figure><h2 id="å¿«é€Ÿæ’åº"><a href="#å¿«é€Ÿæ’åº" class="headerlink" title="å¿«é€Ÿæ’åº"></a>å¿«é€Ÿæ’åº</h2><p>åŸç†ï¼š é€’å½’æ€æƒ³ï¼Œ åˆ—è¡¨ä¸­å–å‡ºç¬¬ä¸€ä¸ªå…ƒç´ ä½œä¸ºæ ‡å‡†ï¼Œæ¯”ç¬¬ä¸€ä¸ªå°çš„æ”¾å·¦ä¾§ï¼Œæ¯”ç¬¬ä¸€ä¸ªå¤§çš„æ”¾å³ä¾§</p><p>å¤æ‚åº¦ï¼š æ—¶é—´å¤æ‚åº¦O(nlog2n)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">quick_sort</span>(<span class="hljs-params">quick_list</span>):<br>    <span class="hljs-keyword">if</span> quick_list == []:<br>        <span class="hljs-keyword">return</span> []<br>    <span class="hljs-keyword">else</span>:<br>        first = quick_list[<span class="hljs-number">0</span>]<br>        less = quick_sort([l <span class="hljs-keyword">for</span> l <span class="hljs-keyword">in</span> quick_list[<span class="hljs-number">1</span>:] <span class="hljs-keyword">if</span> l &lt; first])<br>        more = quick_sort([i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> quick_list[<span class="hljs-number">1</span>:] <span class="hljs-keyword">if</span> i &gt;= first])<br>    <span class="hljs-keyword">return</span> less + [first] + more<br><br><br><span class="hljs-built_in">print</span>(quick_sort([<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">2</span>,<span class="hljs-number">5</span>,<span class="hljs-number">7</span>,<span class="hljs-number">9</span>,<span class="hljs-number">6</span>,<span class="hljs-number">1</span>]))<br></code></pre></td></tr></table></figure><h2 id="æ’å…¥æ’åº"><a href="#æ’å…¥æ’åº" class="headerlink" title="æ’å…¥æ’åº"></a>æ’å…¥æ’åº</h2><p>åŸç†ï¼šé€šè¿‡æ„å»ºæœ‰åºåºåˆ—ï¼Œå¯¹äºæœªæ’åºæ•°æ®ï¼Œåœ¨å·²æ’åºåºåˆ—ä¸­ä»åå‘å‰æ‰«æï¼Œæ‰¾åˆ°ç›¸åº”ä½ç½®å¹¶æ’å…¥ã€‚æ’å…¥æ’åºåœ¨å®ç°ä¸Šï¼Œé€šå¸¸é‡‡ç”¨in-placeæ’åºï¼Œå³åªéœ€ç”¨åˆ°O(1)çš„é¢å¤–ç©ºé—´çš„æ’åºï¼Œå› è€Œåœ¨ä»åå‘å‰æ‰«æè¿‡ç¨‹ä¸­ï¼Œæ‰¾åˆ°æ’åºä½ç½®åï¼Œéœ€è¦å°†å·²æ’åºå…ƒç´ é€æ­¥å‘åæŒªä½ï¼Œä¸ºæœ€æ–°å…ƒç´ æä¾›æ’å…¥ç©ºé—´ã€‚</p><p>å¤æ‚åº¦ï¼šO(n)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">insertionSort</span>(<span class="hljs-params">arr</span>): <br>  <br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(arr)): <br>  <br>        key = arr[i] <br>  <br>        j = i-<span class="hljs-number">1</span><br>        <span class="hljs-keyword">while</span> j &gt;=<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> key &lt; arr[j] : <br>                arr[j+<span class="hljs-number">1</span>] = arr[j] <br>                j -= <span class="hljs-number">1</span><br>        arr[j+<span class="hljs-number">1</span>] = key <br>  <br>  <br>arr = [<span class="hljs-number">12</span>, <span class="hljs-number">11</span>, <span class="hljs-number">13</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>] <br>insertionSort(arr) <br><span class="hljs-built_in">print</span> (<span class="hljs-string">&quot;æ’åºåçš„æ•°ç»„:&quot;</span>) <br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(arr)): <br>    <span class="hljs-built_in">print</span> (<span class="hljs-string">&quot;%d&quot;</span> %arr[i])<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>é¢è¯•é¢˜ç›®æœé›†</category>
      
      <category>Python ç®—æ³•é¢˜ç›®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ— èŠ</title>
    <link href="/2024/07/03/%E6%97%A0%E8%81%8A/"/>
    <url>/2024/07/03/%E6%97%A0%E8%81%8A/</url>
    
    <content type="html"><![CDATA[<h1 id="æ— èŠ"><a href="#æ— èŠ" class="headerlink" title="æ— èŠ"></a>æ— èŠ</h1><p>æœ‰æ—¶å€™ä¼šçªç„¶è§‰å¾—æ— èŠ</p><p>å°±æ˜¯é‚£ç§æ„Ÿè§‰ä»€ä¹ˆéƒ½æ²¡æ„æ€</p><p>çœ‹çœ‹çª—å¤–çš„äº‘ï¼Œäºº</p><p>ä¹Ÿä¼šæ€è€ƒäººçš„æ„ä¹‰</p><p>ä¹…è€Œä¹…ä¹‹</p><p>å°±å½¢æˆäº†è§„å¾‹</p><p>ç„¶è€Œ</p><p>æ— èŠäº†è¿™ä¹ˆä¹…</p><p>ä¹Ÿæœªæƒ³å‡ºæŠ›å¼ƒä¼—äººéƒ½æœ‰çš„ä¹‹å¤–çš„æ„ä¹‰</p><p>ç”Ÿæ´»ä¾æ—§å¦‚å¯‚é™çš„å¦‚æ­»çš„æ°´é¢</p><p>å¶å°”çš„æ¶Ÿæ¼ª</p><p>ä¹Ÿæœªèƒ½æ•£å‡ºç»ç¾çš„è½®å»“</p><img src="/2024/07/03/%E6%97%A0%E8%81%8A/%E6%B6%9F%E6%BC%AA.jpg" class="">]]></content>
    
    
    <categories>
      
      <category>éšç¬”</category>
      
      <category>2024å¹´éšç¬”</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>éšç¬”</tag>
      
      <tag>ç”Ÿæ´»</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Jmetreræ·»åŠ éªŒè¯ç‚¹</title>
    <link href="/2024/07/03/jmerer%E6%B7%BB%E5%8A%A0%E9%AA%8C%E8%AF%81%E7%82%B9/"/>
    <url>/2024/07/03/jmerer%E6%B7%BB%E5%8A%A0%E9%AA%8C%E8%AF%81%E7%82%B9/</url>
    
    <content type="html"><![CDATA[<h1 id="Jmetreræ·»åŠ éªŒè¯ç‚¹"><a href="#Jmetreræ·»åŠ éªŒè¯ç‚¹" class="headerlink" title="Jmetreræ·»åŠ éªŒè¯ç‚¹"></a>Jmetreræ·»åŠ éªŒè¯ç‚¹</h1><p>åœ¨æµ‹è¯•ä¸­æˆ‘ä»¬é€šå¸¸éƒ½éœ€è¦æœ‰ä¸ªæ ¡éªŒçš„åœ°æ–¹ï¼Œé‚£ä¹ˆåœ¨jmeterä¸­æˆ‘ä»¬å¯ä»¥è¿™æ ·æ·»åŠ éªŒè¯ç‚¹</p><h2 id="æ·»åŠ éªŒè¯ç‚¹"><a href="#æ·»åŠ éªŒè¯ç‚¹" class="headerlink" title="æ·»åŠ éªŒè¯ç‚¹"></a>æ·»åŠ éªŒè¯ç‚¹</h2><p>é€‰æ‹©HTTPè¯·æ±‚ç„¶åå³é”®é€‰æ‹©æ·»åŠ -&gt;æ–­è¨€-&gt;å“åº”æ–­è¨€</p><img src="/2024/07/03/jmerer%E6%B7%BB%E5%8A%A0%E9%AA%8C%E8%AF%81%E7%82%B9/%E9%AA%8C%E8%AF%81%E7%82%B9.png" class=""><p>ç„¶åæ·»åŠ æ–­è¨€ç»“æœï¼Œé€‰æ‹©çº¿ç¨‹ç»„å³é”®-&gt;ç›‘å¬å™¨-&gt;æ–­è¨€ç»“æœ</p><p>è¿è¡Œåï¼Œå¦‚æœHTTPå“åº”æ²¡æœ‰åŒ…å«æœŸå¾…çš„å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆæ–­è¨€å°±ä¼šå¤±è´¥</p><img src="/2024/07/03/jmerer%E6%B7%BB%E5%8A%A0%E9%AA%8C%E8%AF%81%E7%82%B9/%E9%AA%8C%E8%AF%81%E7%82%B91.png" class="">]]></content>
    
    
    <categories>
      
      <category>æµ‹è¯•å¼€å‘å·¥å…·/æ¡†æ¶</category>
      
      <category>Jmeter</category>
      
      <category>Jmeter æ·»åŠ éªŒè¯ç‚¹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Jmeter</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Jmeterå“åº”ç¼–ç å¼‚å¸¸</title>
    <link href="/2024/07/03/jmerer%E5%93%8D%E5%BA%94%E7%BC%96%E7%A0%81%E5%BC%82%E5%B8%B8/"/>
    <url>/2024/07/03/jmerer%E5%93%8D%E5%BA%94%E7%BC%96%E7%A0%81%E5%BC%82%E5%B8%B8/</url>
    
    <content type="html"><![CDATA[<h1 id="Jmeterå“åº”ç¼–ç å¼‚å¸¸"><a href="#Jmeterå“åº”ç¼–ç å¼‚å¸¸" class="headerlink" title="Jmeterå“åº”ç¼–ç å¼‚å¸¸"></a>Jmeterå“åº”ç¼–ç å¼‚å¸¸</h1><p>å½“å“åº”æ•°æ®æˆ–å“åº”é¡µé¢æ²¡æœ‰è®¾ç½®ç¼–ç æ—¶å€™ï¼ŒJMeterä¼šæŒ‰ç…§jmeter.propertiesæ–‡ä»¶ä¸­çš„sampleresult.default.encodingè®¾ç½®çš„æ ¼å¼è§£æã€‚</p><p>é»˜è®¤ä¸ºISO-8859-1,æ‰€ä»¥è§£æä¸­æ–‡æ—¶å€™è‚¯å®šä¼šå‡ºé”™ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦ä½ æŠŠç¼–ç æ”¹ä¸ºUTF-8.</p><img src="/2024/07/03/jmerer%E5%93%8D%E5%BA%94%E7%BC%96%E7%A0%81%E5%BC%82%E5%B8%B8/%E7%BC%96%E7%A0%81.png" class=""><p>ä¿®æ”¹å®Œæ¯•åæˆ‘ä»¬éœ€è¦å°†â€#â€å»æ‰ï¼Œç„¶åé‡å¯JMeter</p>]]></content>
    
    
    <categories>
      
      <category>æµ‹è¯•å¼€å‘å·¥å…·/æ¡†æ¶</category>
      
      <category>Jmeter</category>
      
      <category>Jmeter å“åº”ç¼–ç å¼‚å¸¸</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Jmeter</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Jmeterçº¿ç¨‹ç»„</title>
    <link href="/2024/07/03/jmerer%E7%BA%BF%E7%A8%8B%E7%BB%84/"/>
    <url>/2024/07/03/jmerer%E7%BA%BF%E7%A8%8B%E7%BB%84/</url>
    
    <content type="html"><![CDATA[<h1 id="Jmeterçº¿ç¨‹ç»„"><a href="#Jmeterçº¿ç¨‹ç»„" class="headerlink" title="Jmeterçº¿ç¨‹ç»„"></a>Jmeterçº¿ç¨‹ç»„</h1><p>åœ¨JMeterä¸­ï¼Œä»»ä½•ç±»å‹çš„æµ‹è¯•éƒ½éœ€è¦å…ˆåˆ›å»ºçº¿ç¨‹ç»„ï¼Œä¸€ä¸ªçº¿ç¨‹ç»„å¯ä»¥çœ‹åšä¸€ä¸ªæµ‹è¯•ä»»åŠ¡</p><h2 id="æ·»åŠ çº¿ç¨‹ç»„"><a href="#æ·»åŠ çº¿ç¨‹ç»„" class="headerlink" title="æ·»åŠ çº¿ç¨‹ç»„"></a>æ·»åŠ çº¿ç¨‹ç»„</h2><p>é¼ æ ‡å³é”®å•å‡»â€œæµ‹è¯•è®¡åˆ’â€åœ¨å¿«æ·é”®èœå•ä¸­å•å‡»æ·»åŠ -&gt;Threads(Users)-&gt;çº¿ç¨‹ç»„</p><p>æ³¨æ„ï¼šåœ¨JMeterä¸­ï¼Œä»»ä½•å†…å®¹éƒ½åº”è¯¥æ”¾åœ¨çº¿ç¨‹ä¸­ï¼</p><img src="/2024/07/03/jmerer%E7%BA%BF%E7%A8%8B%E7%BB%84/jmeter%E7%BA%BF%E7%A8%8B%E7%BB%84.png" class=""><h2 id="åè¯è§£é‡Š"><a href="#åè¯è§£é‡Š" class="headerlink" title="åè¯è§£é‡Š"></a>åè¯è§£é‡Š</h2><p>1.çº¿ç¨‹æ•°ï¼šä¸€ä¸ªçº¿ç¨‹ä»£è¡¨ä¸€ä¸ªè™šæ‹Ÿç”¨æˆ·</p><p>2.Ramp-Up Period(in seconds)ï¼šè®¾ç½®çº¿ç¨‹çš„å¯åŠ¨æ—¶é•¿ï¼Œå•ä½ä¸ºSï¼Œå¦‚æœçº¿ç¨‹æ•°æ˜¯100ï¼Œå¯åŠ¨æ—¶é•¿ä¸º5sï¼Œé‚£ä¹ˆéœ€è¦5så¯åŠ¨100ä¸ªçº¿ç¨‹ï¼Œå¹³å‡æ¯ç§’å¯åŠ¨20ä¸ªçº¿ç¨‹</p><p>3.å¾ªç¯æ¬¡æ•°ï¼šæ¯ä¸ªçº¿ç¨‹å‘é€çš„è¯·æ±‚æ¬¡æ•°ã€‚å¦‚æœè¿™ä¸ªçº¿ç¨‹ä¸­æœ‰5ä¸ªHTTPè¯·æ±‚ï¼Œå¾ªç¯æ¬¡æ•°ä¸º3çš„è¯ï¼Œé‚£ä¹ˆä¸€ä¸ªçº¿ç¨‹ä¼šå‘é€5*3&#x3D;15ä¸ªHTTPè¯·æ±‚ã€‚</p><p>4.å¦‚æœé€‰æ‹©äº†â€œæ°¸è¿œâ€å¤é€‰æ¡†ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„çº¿ç¨‹ä¼šæ— é™å‘é€è¯·æ±‚ï¼Œç›´åˆ°æ‰‹åŠ¨å•å‡»å·¥å…·æ ä¸Šçš„åœæ­¢æŒ‰é’®ã€‚</p><p>å¦‚æœç”¨æ¥åšåŠŸèƒ½æµ‹è¯•&#x2F;æ¥å£æµ‹è¯•ï¼Œé‚£ä¹ˆåº”ä¿æŒé»˜è®¤è®¾ç½®ï¼Œçº¿ç¨‹æ•°è®¾ç½®ä¸º1ï¼ŒRamp-up Period(in seconds)è®¾ç½®ä¸º1ï¼Œå¾ªç¯æ¬¡æ•°ä¹Ÿè®¾ç½®ä¸º1</p><h2 id="çº¿ç¨‹ç»„æ·»åŠ HTTPè¯·æ±‚"><a href="#çº¿ç¨‹ç»„æ·»åŠ HTTPè¯·æ±‚" class="headerlink" title="çº¿ç¨‹ç»„æ·»åŠ HTTPè¯·æ±‚"></a>çº¿ç¨‹ç»„æ·»åŠ HTTPè¯·æ±‚</h2><img src="/2024/07/03/jmerer%E7%BA%BF%E7%A8%8B%E7%BB%84/http%E8%AF%B7%E6%B1%82.png" class=""><img src="/2024/07/03/jmerer%E7%BA%BF%E7%A8%8B%E7%BB%84/http%E8%AF%B7%E6%B1%821.png" class="">]]></content>
    
    
    <categories>
      
      <category>æµ‹è¯•å¼€å‘å·¥å…·/æ¡†æ¶</category>
      
      <category>Jmeter</category>
      
      <category>Jmeter çº¿ç¨‹ç»„</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Jmeter</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Fiddlerå¼±ç½‘æµ‹è¯•</title>
    <link href="/2024/07/03/fiddler%E5%BC%B1%E7%BD%91%E6%B5%8B%E8%AF%95/"/>
    <url>/2024/07/03/fiddler%E5%BC%B1%E7%BD%91%E6%B5%8B%E8%AF%95/</url>
    
    <content type="html"><![CDATA[<h1 id="Fiddlerå¼±ç½‘æµ‹è¯•"><a href="#Fiddlerå¼±ç½‘æµ‹è¯•" class="headerlink" title="Fiddlerå¼±ç½‘æµ‹è¯•"></a>Fiddlerå¼±ç½‘æµ‹è¯•</h1><p>åœ¨æˆ‘ä»¬å¹³å¸¸æµ‹è¯•ä¸­æœ‰ä¸€ç§æµ‹è¯•å«åšå¼±ç½‘æµ‹è¯•ï¼Œä¹Ÿå°±æ˜¯è¦æ¨¡æ‹Ÿä¿¡å·è¾ƒå·®æƒ…å†µä¸‹æˆ‘ä»¬ç½‘ç«™çš„åŠ è½½æƒ…å†µï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åˆ©ç”¨fillderæ¥è½»æ¾å®ç°è¿™ä¸ªæ¨¡æ‹Ÿï¼</p><h2 id="å¼±ç½‘åœºæ™¯"><a href="#å¼±ç½‘åœºæ™¯" class="headerlink" title="å¼±ç½‘åœºæ™¯"></a>å¼±ç½‘åœºæ™¯</h2><p>1.ç½‘ç»œæ…¢æˆ–å»¶è¿Ÿï¼Œå¯¼è‡´åŠ è½½æ—¶é—´é•¿</p><p>2.ç½‘ç»œä¸­æ–­ï¼ŒwebæœåŠ¡å™¨è¿”å›500ç­‰çŠ¶æ€ç </p><p>3.ç½‘ç»œå»¶è¿Ÿï¼ŒHTTPè¯·æ±‚å‘å‡ºåï¼Œå¾ˆä¹…æ²¡æœ‰å“åº”</p><h2 id="Fillder-å®ç°å¼±ç½‘"><a href="#Fillder-å®ç°å¼±ç½‘" class="headerlink" title="Fillder å®ç°å¼±ç½‘"></a>Fillder å®ç°å¼±ç½‘</h2><p>1.å¯åŠ¨Fiddler,é€‰æ‹©Rules-&gt;Performances-&gt;Simulate Modem Speeds</p><p>2.æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®ç½‘ç«™ï¼Œä½ ä¼šå‘ç°æ‰“å¼€ç½‘é¡µçš„é€Ÿåº¦å¾ˆæ…¢</p><img src="/2024/07/03/fiddler%E5%BC%B1%E7%BD%91%E6%B5%8B%E8%AF%95/%E5%BC%B1%E7%BD%911.png" class=""><h2 id="Fillder-ç²¾ç¡®æ§åˆ¶ç½‘é€Ÿ"><a href="#Fillder-ç²¾ç¡®æ§åˆ¶ç½‘é€Ÿ" class="headerlink" title="Fillder ç²¾ç¡®æ§åˆ¶ç½‘é€Ÿ"></a>Fillder ç²¾ç¡®æ§åˆ¶ç½‘é€Ÿ</h2><p>æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦ç²¾ç¡®æ§åˆ¶æˆ‘ä»¬çš„ç½‘é€Ÿå…·ä½“çš„é€Ÿç‡å°±å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼ï¼š</p><p>1.å¯åŠ¨Fiddler,é€‰æ‹©Rules-&gt;Performances-&gt;Simulate Modem Speeds</p><p>2.åœ¨FiddlerScriptä¸­æ‰¾åˆ°å¦‚ä¸‹ä¸€æ®µä»£ç </p><img src="/2024/07/03/fiddler%E5%BC%B1%E7%BD%91%E6%B5%8B%E8%AF%95/%E8%84%9A%E6%9C%AC.png" class=""><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹å¯¹åº”çš„æ•°å€¼æ¥æ§åˆ¶ç½‘é€Ÿ</p><p>3.ä¿®æ”¹å®Œæ¯•åï¼ŒåŸæœ¬å·²ç»å‹¾é€‰çš„Simulate Modem Speedsä¼šè¢«å–æ¶ˆå‹¾é€‰ï¼Œå†æ¬¡é€‰ä¸­Rules-&gt;Performances-&gt;Simulate Modem Speeds</p><p>4.è®¿é—®æµè§ˆå™¨ä¼šæ›´åŠ æ…¢<br>Â <br>ç½‘ç»œå–å€¼ç®—æ³•å°±æ˜¯ 1000&#x2F;ä¸‹è½½é€Ÿé€Ÿ&#x3D;éœ€è¦å»¶è¿Ÿçš„æ—¶é—´(ms)ï¼Œæ¯”å¦‚50kbit&#x2F;séœ€è¦å»¶è¿Ÿ200msæ¥æ¥æ”¶æ•°æ®</p>]]></content>
    
    
    <categories>
      
      <category>æµ‹è¯•å¼€å‘å·¥å…·/æ¡†æ¶</category>
      
      <category>Fillder</category>
      
      <category>Fillder å¼±ç½‘æµ‹è¯•</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Fillder</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Fiddlerå‰ç«¯è°ƒè¯•</title>
    <link href="/2024/07/03/fiddler%E5%89%8D%E7%AB%AF%E8%B0%83%E8%AF%95/"/>
    <url>/2024/07/03/fiddler%E5%89%8D%E7%AB%AF%E8%B0%83%E8%AF%95/</url>
    
    <content type="html"><![CDATA[<h1 id="Fiddlerå‰ç«¯è°ƒè¯•"><a href="#Fiddlerå‰ç«¯è°ƒè¯•" class="headerlink" title="Fiddlerå‰ç«¯è°ƒè¯•"></a>Fiddlerå‰ç«¯è°ƒè¯•</h1><p>æœ‰æ—¶å€™æˆ‘ä»¬å¯èƒ½éœ€è¦åœ¨æœåŠ¡å™¨ä¸Šé¢è°ƒè¯•javaScriptæ–‡ä»¶ï¼Œä½†æ˜¯åˆæ¯”è¾ƒéº»çƒ¦ï¼Œæ­¤æ—¶ä¸ºäº†æ–¹ä¾¿å¯ä»¥ä½¿ç”¨fillderæ¥å®ç°ï¼</p><h2 id="Fiddler-AutoResponderçš„å·¥ä½œåŸç†"><a href="#Fiddler-AutoResponderçš„å·¥ä½œåŸç†" class="headerlink" title="Fiddler AutoResponderçš„å·¥ä½œåŸç†"></a>Fiddler AutoResponderçš„å·¥ä½œåŸç†</h2><p>ä½¿ç”¨Fiddlerå¯ä»¥æ›¿æ¢è‡ªåŠ¨è¿”å›çš„ä¸€ä¸ªä¼ªé€ çš„HTTPå“åº”ï¼Œè€…è·Ÿä¹‹å‰ä»‹ç»çš„ä¸‹æ–­ç‚¹ä¿®æ”¹HTTPå“åº”å·®ä¸å¤šï¼Œåªä¸è¿‡AutoResponderæ˜¯è‡ªåŠ¨çš„ï¼Œæ“ä½œæ›´åŠ æ–¹ä¾¿ï¼</p><h3 id="Fiddleråœ¨çº¿è°ƒè¯•JavaScriptæ–‡ä»¶"><a href="#Fiddleråœ¨çº¿è°ƒè¯•JavaScriptæ–‡ä»¶" class="headerlink" title="Fiddleråœ¨çº¿è°ƒè¯•JavaScriptæ–‡ä»¶"></a>Fiddleråœ¨çº¿è°ƒè¯•JavaScriptæ–‡ä»¶</h3><p>1.é¦–å…ˆæˆ‘ä»¬å°†JSæ–‡ä»¶ä¿å­˜åˆ°æœ¬åœ°</p><p>2.ç„¶åç¼–è¾‘æœ¬åœ°çš„JavaScriptæ–‡ä»¶ï¼Œæ›´æ”¹éœ€è¦ç¼–è¾‘çš„ä»£ç </p><p>3.å¯åŠ¨Fiddlerï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ç½‘å€ï¼Œç„¶åä½¿ç”¨FiddleræŠ“ä½è¿™ä¸ªJavaScriptçš„HTTPè¯·æ±‚</p><p>4.ç„¶åå°†Fiddlerä¸­ï¼Œçš„è¿™ä¸ªJSæ‹–æ‹½åˆ°AutoResponserä¸­</p><p>5.åœ¨RuleEditorä¸­å•å‡»â€œFind a fileâ€¦â€ï¼Œé€‰æ‹©æœ¬åœ°JavaScriptæ–‡ä»¶çš„è·¯å¾„ã€‚</p><p>6.é€‰ä¸­â€Enable rulesâ€ï¼Œæ¿€æ´»è§„åˆ™ï¼Œé€‰ä¸­â€Unmatched requests passthroughâ€æ”¾è¡Œä¸åŒ¹é…çš„HTTPè¯·æ±‚ã€‚</p><p>7.å•å‡»â€œSaveâ€æŒ‰é’®</p><p>8.ä½ åªéœ€è¦ä¿®æ”¹æœ¬åœ°æœºå™¨ä¸Šçš„æ–‡ä»¶ï¼Œç„¶ååˆ·æ–°æµè§ˆå™¨ï¼Œå°±å¯ä»¥çœ‹åˆ°æ•ˆæœäº†ï¼</p><p>è‹¥æ˜¯ä¸æ˜¾ç¤ºCSS&#x2F;JSç­‰æ–‡ä»¶ä¿¡æ¯ï¼Œå¯ä»¥åœ¨Filtersâ€”Request Headerså‹¾é€‰Show only if URL containsé€‰é¡¹</p><p>å¡«å†™æ–‡ä»¶ç±»å‹ï¼š</p><p>REGX:(?insx)&#x2F;[^?&#x2F;]<em>.(css|js|json|ico|jpg|png|gif|bmp|wav)(?.</em>)?$</p><p>ç„¶åé€‰æ‹©Actions-&gt;Run Filterset Now</p><img src="/2024/07/03/fiddler%E5%89%8D%E7%AB%AF%E8%B0%83%E8%AF%95/fillder%E8%B0%83%E8%AF%95.png" class=""><p>æ›¿æ¢ç…§ç‰‡</p><img src="/2024/07/03/fiddler%E5%89%8D%E7%AB%AF%E8%B0%83%E8%AF%95/%E6%9B%BF%E6%8D%A2%E7%85%A7%E7%89%87.png" class=""><p>æ•ˆæœ</p><img src="/2024/07/03/fiddler%E5%89%8D%E7%AB%AF%E8%B0%83%E8%AF%95/%E6%95%88%E6%9E%9C.png" class="">]]></content>
    
    
    <categories>
      
      <category>æµ‹è¯•å¼€å‘å·¥å…·/æ¡†æ¶</category>
      
      <category>Fillder</category>
      
      <category>Fillder å‰ç«¯è°ƒè¯•</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Fillder</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å®Œç¾è§£å†³è‡ªå®šä¹‰åŸŸåè®¿é—®gitpageså‡ºç°äº†éƒ¨åˆ†è¯·æ±‚404çš„é—®é¢˜ï¼</title>
    <link href="/2024/07/02/%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9F%9F%E5%90%8D/"/>
    <url>/2024/07/02/%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9F%9F%E5%90%8D/</url>
    
    <content type="html"><![CDATA[<h1 id="gitpageså‡ºç°äº†éƒ¨åˆ†è¯·æ±‚404çš„é—®é¢˜"><a href="#gitpageså‡ºç°äº†éƒ¨åˆ†è¯·æ±‚404çš„é—®é¢˜" class="headerlink" title="gitpageså‡ºç°äº†éƒ¨åˆ†è¯·æ±‚404çš„é—®é¢˜"></a>gitpageså‡ºç°äº†éƒ¨åˆ†è¯·æ±‚404çš„é—®é¢˜</h1><p>æœ€è¿‘æŠŠæˆ‘çš„åšå®¢é€šè¿‡è‡ªå®šä¹‰åŸŸåä»£ç†äº†gitpagesï¼Œ ç†ç”±å¦‚ä¸‹ï¼š</p><pre><code class="hljs">ä¸€æ–¹é¢æ˜¯å› ä¸º github ç¡®å®åœ¨å›½å†…çš„è®¿é—®é€Ÿåº¦å¤ªæ„Ÿäººäº†ğŸ˜‚ğŸ˜‚ğŸ˜‚! å¦ä¸€æ–¹é¢ä¹Ÿæ˜¯æ‰‹é‡Œæœ‰é—²ç½®çš„åŸŸåã€‚</code></pre><p>æ‰€ä»¥å°±å‡†å¤‡æä¸€ä¸‹ï¼Œé‡‡ç”¨çš„æ¨¡å¼å°±æ˜¯ åŸŸå + cloudfare çš„æ¨¡å¼è¿›è¡Œè§£æï¼Œä½†æ˜¯åœ¨æˆåŠŸåå‘ç°éƒ¨åˆ†è¯·æ±‚å‡ºç°äº†404çš„æƒ…å†µï¼Œå¦‚ä¸‹å›¾ï¼š</p><img src="/2024/07/02/%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9F%9F%E5%90%8D/404%E6%83%85%E5%86%B5.png" class=""><h2 id="ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜èŠ±è´¹äº†å¤ªå¤šæ—¶é—´"><a href="#ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜èŠ±è´¹äº†å¤ªå¤šæ—¶é—´" class="headerlink" title="ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜èŠ±è´¹äº†å¤ªå¤šæ—¶é—´"></a>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜èŠ±è´¹äº†å¤ªå¤šæ—¶é—´</h2><p>ä¹‹å‰æˆ‘è®¿é—®æˆ‘çš„gitpages åŸŸåï¼š<a href="https://dreamshao.github.io/xingblog.github.io/">https://dreamshao.github.io/xingblog.github.io/</a>  ä¸€ç›´æ˜¯å¯ä»¥çš„æ‰€æœ‰çš„è¯·æ±‚éƒ½æ˜¯æ­£å¸¸çš„ï¼Œ</p><p>å¯æ˜¯è¿™æ¬¡æˆ‘éƒ¨ç½²åˆ°ä¸ªäººåŸŸååæˆ‘å°±å‘ç°è¿™æ€ä¹ˆéƒ¨åˆ†è¯·æ±‚å¯ä»¥æ‹¿åˆ°ï¼Œéƒ¨åˆ†è¯·æ±‚å°±æ˜¯404å‘¢ï¼Ÿ</p><p>ç„¶åï¼Œæˆ‘å°±å¼€å§‹çº ç»“æ˜¯ä¸æ˜¯æˆ‘åœ¨è®¾ç½®è‡ªå®šä¹‰åŸŸåçš„æ—¶å€™å‡ºç°äº†é—®é¢˜ï¼Œä»å¼€å§‹çš„åŸŸåè§£æè®¾ç½® åœ¨é˜¿é‡Œäº‘ä¸Šæˆ‘æ”¹äº†å¾ˆå¤šæ¬¡(æ­¤æ—¶æŠŠDNSè§£ææ”¹å›äº†é˜¿é‡Œçš„)ï¼Œ</p><p>å‘ç°è¿˜æ˜¯ä¸è¡Œï¼Œæˆ‘å°±æƒ³æ˜¯ä¸æ˜¯æˆ‘è¿™ä¸ªæ²¡æœ‰å¤‡æ¡ˆå‘¢ï¼Ÿ æˆ‘å°±å¼€å§‹æ”¹å›äº† cloudfare çš„DNSè§£æï¼Œå¼€å§‹åœ¨cloudfare ä¸Šå¼€å§‹é¼“æ£ï¼Œå¯æ˜¯é¼“æ£äº†å¾ˆä¹…è¿˜æ˜¯ä¸è¡Œ</p><p>åæ¥ï¼Œæˆ‘å°±å¼€å§‹åœ¨ç½‘ä¸ŠæŸ¥èµ„æ–™ï¼ŒæŸ¥äº†å¥½ä¹…ä¹Ÿæ²¡æŸ¥åˆ°ä¸ºä»€ä¹ˆéƒ¨åˆ†è¯·æ±‚æ˜¯404ï¼Œè¿™å°±èŠ±è´¹äº†æˆ‘å°†è¿‘1å¤©çš„æ—¶é—´åœ¨ä¸Šé¢ï¼</p><h2 id="çªç„¶çš„çµæ„Ÿæ¥ä¸´"><a href="#çªç„¶çš„çµæ„Ÿæ¥ä¸´" class="headerlink" title="çªç„¶çš„çµæ„Ÿæ¥ä¸´"></a>çªç„¶çš„çµæ„Ÿæ¥ä¸´</h2><p>ç¬¬äºŒå¤©æ—©ä¸Šï¼Œæˆ‘è¿˜æ˜¯æ‰“å¼€äº†æˆ‘çš„ç½‘ç«™çœ‹404çš„è¯·æ±‚ï¼Œçªç„¶æƒ³æ˜¯ä¸æ˜¯å› ä¸ºæˆ‘çš„åŸŸååé¢ä¸èƒ½åŒ…å«æˆ‘çš„å­ä»“åº“åœ°å€å‘¢ï¼Ÿ </p><p>ä¹‹å‰æˆ‘çš„è®¿é—®è·¯å¾„æ˜¯: <a href="https://8888666.top/xingblog.github.io/css/main.css">https://8888666.top/xingblog.github.io/css/main.css</a></p><p>ç„¶åå¤åˆ¶åˆ°æµè§ˆå™¨ æ”¹æˆäº†: <a href="https://8888666.top/css/main.css">https://8888666.top/css/main.css</a></p><p>å“ï¼Œæ‚¨çŒœæ€ä¹ˆç€ï¼Œ è®¿é—®åˆ°äº†ï¼ å¯ä»¥ï¼Œç¬é—´æˆ‘æ˜ç™½äº†ï¼ğŸ¤ªğŸ¤ªğŸ¤ªï¼Œ è¿™ä¸èƒ½å¸¦æˆ‘çš„å­ä»“åº“åœ°å€å•Šï¼</p><h2 id="ä¿®æ”¹hexo-çš„é…ç½®"><a href="#ä¿®æ”¹hexo-çš„é…ç½®" class="headerlink" title="ä¿®æ”¹hexo çš„é…ç½®"></a>ä¿®æ”¹hexo çš„é…ç½®</h2><p>é©¬ä¸Šæ‰¾æˆ‘çš„é…ç½®æ–‡ä»¶å‘ç°äº†é—®é¢˜ï¼Œä¹‹å‰åœ¨ _config.yml ä¸­ æˆ‘é…ç½®çš„æ˜¯æˆ‘çš„è·¯å¾„ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-comment">#URL</span><br><span class="hljs-comment">## Set your site url here. For example, if you use GitHub Page, set url as &#x27;https://username.github.io/project&#x27;</span><br><span class="hljs-attr">url:</span> <span class="hljs-string">https://dreamshao.github.io/xingblog.github.io/</span><br><span class="hljs-attr">permalink:</span> <span class="hljs-string">:year/:month/:day/:title/</span><br><span class="hljs-attr">permalink_defaults:</span><br><span class="hljs-attr">pretty_urls:</span><br>  <span class="hljs-attr">trailing_index:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># Set to false to remove trailing &#x27;index.html&#x27; from permalinks</span><br>  <span class="hljs-attr">trailing_html:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># Set to false to remove trailing &#x27;.html&#x27; from permalinks</span><br></code></pre></td></tr></table></figure><p>ç„¶åä¿®æ”¹ä¸ºï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-comment">#URL</span><br><span class="hljs-comment">## Set your site url here. For example, if you use GitHub Page, set url as &#x27;https://username.github.io/project&#x27;</span><br><span class="hljs-attr">url:</span> <span class="hljs-string">https://dreamshao.github.io/</span><br><span class="hljs-attr">permalink:</span> <span class="hljs-string">:year/:month/:day/:title/</span><br><span class="hljs-attr">permalink_defaults:</span><br><span class="hljs-attr">pretty_urls:</span><br>  <span class="hljs-attr">trailing_index:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># Set to false to remove trailing &#x27;index.html&#x27; from permalinks</span><br>  <span class="hljs-attr">trailing_html:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># Set to false to remove trailing &#x27;.html&#x27; from permalinks</span><br></code></pre></td></tr></table></figure><p>ç„¶åæ¸…ç©ºå·²ç»ç”Ÿæˆçš„ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯åœ¨public æ–‡ä»¶å¤¹ä¸‹ï¼Œæ¸…ç©ºå®Œæ¯•åæ‰§è¡Œå‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">hexo clean<br>hexo g -d<br></code></pre></td></tr></table></figure><p>ç»“æœåœ¨åŸŸåä¸Šè®¿é—®å°±å‘ç°å¯ä»¥äº†ï¼ŒåŸæ¥å°±æ˜¯è¿™ç‚¹é—®é¢˜å¯¼è‡´äº†ï¼Œè¿˜æ˜¯è‡ªå·±çš„é…ç½®é—®é¢˜ï¼</p><h2 id="å¾—åˆ°äº†ä»€ä¹ˆï¼Ÿ"><a href="#å¾—åˆ°äº†ä»€ä¹ˆï¼Ÿ" class="headerlink" title="å¾—åˆ°äº†ä»€ä¹ˆï¼Ÿ"></a>å¾—åˆ°äº†ä»€ä¹ˆï¼Ÿ</h2><p>é€šè¿‡è¿™æ¬¡è‡ªå·±æŠŠåšå®¢é€šè¿‡è‡ªå®šä¹‰åŸŸåè®¿é—®ï¼Œç¡®å®æ”¶è·äº†å¾ˆå¤šéƒ¨ç½²æ–¹é¢çš„çŸ¥è¯†ï¼Œ æ¯”å¦‚ä»€ä¹ˆæ˜¯ CNAMEï¼Œä»€ä¹ˆæ˜¯ A æ¨¡å¼ ç­‰ç­‰ã€‚</p><p>è¿˜æœ‰æ›´åŠ äº†è§£DNSè§£æçš„æ¨¡å¼ï¼Œä¹‹å‰åªæ˜¯ç®€å•çš„äº†è§£ï¼Œé€šè¿‡è¿™æ¬¡æ“ä½œç¡®å®æ›´åŠ æ˜ç™½äº†ï¼</p><h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><p>å¦‚æœä½ åœ¨éƒ¨ç½²åšå®¢åˆ°ç§äººåŸŸåä¸‹æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå¯ä»¥ç•™è¨€å“¦ï¼Œä¸€å®šçŸ¥æ— ä¸è¨€ï¼Œè¨€æ— ä¸å°½ï¼</p>]]></content>
    
    
    <categories>
      
      <category>gitpages è‡ªå®šä¹‰åŸŸå</category>
      
      <category>éƒ¨åˆ†è¯·æ±‚404</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>hexo åšå®¢</tag>
      
      <tag>è‡ªå®šä¹‰åŸŸåè®¿é—®gitpages</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Windows ä¸‹å®ç°IOSè‡ªåŠ¨åŒ–æµ‹è¯•</title>
    <link href="/2024/06/28/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    <url>/2024/06/28/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/</url>
    
    <content type="html"><![CDATA[<h1 id="Windows-ä¸‹å®ç°IOSè‡ªåŠ¨åŒ–æµ‹è¯•"><a href="#Windows-ä¸‹å®ç°IOSè‡ªåŠ¨åŒ–æµ‹è¯•" class="headerlink" title="Windows ä¸‹å®ç°IOSè‡ªåŠ¨åŒ–æµ‹è¯•"></a>Windows ä¸‹å®ç°IOSè‡ªåŠ¨åŒ–æµ‹è¯•</h1><p>æœ€è¿‘å…¬å¸è¦å®ç°Iosçš„è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œä½†æ˜¯å±€é™æ˜¯æµ‹è¯•è¿™è¾¹å¹¶æ²¡ç»™é…å¤‡MACç”µè„‘ï¼Œå…¬å¸æˆ–è€…ä¸ªäººæœ‰MACçš„ä¸œè¥¿å¯ä»¥æ½‡æ´’çš„åˆ’èµ°äº†ğŸ˜‚ğŸ˜‚ğŸ˜‚</p><h2 id="å‰æœŸå‡†å¤‡"><a href="#å‰æœŸå‡†å¤‡" class="headerlink" title="å‰æœŸå‡†å¤‡"></a>å‰æœŸå‡†å¤‡</h2><h3 id="WebDriverAgent-ä»‹ç»åŠå®‰è£…"><a href="#WebDriverAgent-ä»‹ç»åŠå®‰è£…" class="headerlink" title="WebDriverAgent ä»‹ç»åŠå®‰è£…"></a>WebDriverAgent ä»‹ç»åŠå®‰è£…</h3><p>WebDriverAgent æ˜¯ facebook æ¨å‡ºçš„ä¸€æ¬¾ ios è‡ªåŠ¨åŒ–æµ‹è¯•çš„é€šä¿¡å·¥å…·ï¼Œç›®å‰facebook çš„é¡¹ç›®å·²ç»åœæ­¢ç»´æŠ¤ï¼Œç°åœ¨ä½¿ç”¨çš„æ˜¯ appium å®˜æ–¹ç»´æŠ¤çš„ç‰ˆæœ¬ï¼Œä¸‹è½½åœ°å€ï¼š<a href="https://github.com/appium/WebDriverAgent%E3%80%82">https://github.com/appium/WebDriverAgentã€‚</a></p><p>ä½†æ˜¯ç”±äº WebDriverAgent å®‰è£…éœ€è¦ä½¿ç”¨åˆ° Mac ç”µè„‘ï¼Œæ­¤å¤„ä¹Ÿæ˜¯å”¯ä¸€éœ€è¦ macç”µè„‘çš„ï¼Œä½¿ç”¨ xcode è¿›è¡Œç¼–è¯‘å®‰è£…åˆ°æ‰‹æœºç«¯ï¼Œå…·ä½“æ“ä½œå¯ä»¥è‡ªè¡Œç™¾åº¦ï¼</p><p>ç›®å‰æˆ‘æ‰¾ ios å¼€å‘åŒå­¦å¸®æˆ‘ç¼–è¯‘å®‰è£…ã€‚</p><h3 id="Tidevice-ä»‹ç»åŠå®‰è£…"><a href="#Tidevice-ä»‹ç»åŠå®‰è£…" class="headerlink" title="Tidevice ä»‹ç»åŠå®‰è£…"></a>Tidevice ä»‹ç»åŠå®‰è£…</h3><p>ä¸€ç›´ä»¥æ¥ï¼ŒiOS è‡ªåŠ¨åŒ–çš„å®ç°&amp;æ‰§è¡Œéƒ½ä¾èµ– Mac ç³»ç»Ÿï¼Œå…¶ä¸»è¦åŸå› æ˜¯å› ä¸ºéœ€è¦é€šè¿‡ Xcodebuild ç¼–è¯‘&amp;å®‰è£… WDA (WebDriverAgent) åˆ° iOS è®¾å¤‡ä¸­ï¼Œ</p><p>é€šè¿‡ WDA å®ç°å¯¹è¢«æµ‹åº”ç”¨è¿›è¡Œæ“ä½œã€‚è€Œ Windows ç³»ç»Ÿæ— æ³•è¿è¡Œ Xcode å·¥å…·ï¼Œæ‰€ä»¥æ— æ³•è¿è¡Œ iOS è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚</p><p>é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œé˜¿é‡Œå›¢é˜Ÿå¼€æºäº†ä¸€ä¸ªå†…éƒ¨ä½¿ç”¨çš„iOSè‡ªåŠ¨åŒ–å·¥å…· tideviceï¼ˆ<a href="https://github.com/alibaba/taobao-iphone-device%EF%BC%89">https://github.com/alibaba/taobao-iphone-deviceï¼‰</a></p><p>è®©æˆ‘ä»¬å¯ä»¥æ›´æ–¹ä¾¿ã€ç®€å•çš„è„±ç¦» Mac çš„é™åˆ¶ï¼Œè¯¥å·¥å…·èƒ½å¤Ÿç”¨äºä¸ iOS è®¾å¤‡è¿›è¡Œé€šä¿¡, æä¾›ä»¥ä¸‹åŠŸèƒ½ </p><ol><li><p>æˆªå›¾</p></li><li><p>   è·å–æ‰‹æœºä¿¡æ¯</p></li><li><p>   ipa åŒ…çš„å®‰è£…å’Œå¸è½½</p></li><li><p>   æ ¹æ® bundleID å¯åŠ¨å’Œåœæ­¢åº”ç”¨ </p></li><li><p>åˆ—å‡ºå®‰è£…åº”ç”¨ä¿¡æ¯</p></li><li><p>   æ¨¡æ‹Ÿ Xcode è¿è¡ŒXCTestï¼Œå¸¸ç”¨çš„å¦‚å¯åŠ¨ WebDriverAgent æµ‹è¯•(æ­¤æ–¹æ³•ä¸ä¾èµ–xcodebuild)</p></li><li><p>   è·å–æŒ‡å®šåº”ç”¨æ€§èƒ½(CPU,MEM,FPS)</p></li><li><p>   æ”¯æŒè¿è¡Œåœ¨Macï¼ŒLinuxï¼ŒWindows ä¸Š Tidevice å®‰è£…</p></li></ol><h4 id="ç‰ˆæœ¬è¦æ±‚"><a href="#ç‰ˆæœ¬è¦æ±‚" class="headerlink" title="ç‰ˆæœ¬è¦æ±‚"></a>ç‰ˆæœ¬è¦æ±‚</h4><p>Python 3.6+å‘½ä»¤ pip install tidevice</p><h4 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h4><p>æŸ¥çœ‹ç‰ˆæœ¬å· tidevice versionåˆ—å‡ºè®¾å¤‡ tidevice list</p><p>æŸ¥çœ‹å®‰è£…åŒ… tidevice applistæ›´å¤šåŠŸèƒ½è¯·è‡ªå·±æŸ¥è¯¢å®˜æ–¹æ–‡æ¡£</p><h2 id="Tideviceæ“ä½œæ­¥éª¤"><a href="#Tideviceæ“ä½œæ­¥éª¤" class="headerlink" title="Tideviceæ“ä½œæ­¥éª¤"></a>Tideviceæ“ä½œæ­¥éª¤</h2><p>cmd æ‰§è¡Œtidevice list æŸ¥çœ‹ç‰ˆæœ¬å·,å¯ä»¥çœ‹åˆ°ä¸‹é¢çš„ä¿¡æ¯</p><img src="/2024/06/28/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/cmd.png" class=""><p>Udidï¼šæ‰‹æœºå”¯ä¸€ idåé¢éœ€è¦ç”¨åˆ°</p><p>ç„¶åæ‰§è¡Œ tidevice applist æŸ¥çœ‹æˆ‘ä»¬çš„ webdriveragent å…·ä½“ä¿¡æ¯</p><img src="/2024/06/28/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/id.png" class=""><p>è¿™ä¸ªç­¾åæ˜¯è‡ªå·±å†™çš„ï¼Œéœ€è¦æ‰¾å¯¹åº”å®‰è£…åŒå­¦ç¡®è®¤ä¸€ä¸‹ï¼</p><p>å†ç„¶åæˆ‘ä»¬æ‰§è¡Œï¼š tidevice -u ä½ çš„è®¾å¤‡ id -B ä½ çš„webdriveraget â€“port 8100çœ‹åˆ°å¯åŠ¨æˆåŠŸçš„å­—çœ¼å°±å¯ä»¥äº†ï¼</p><p>ç„¶åæµè§ˆå™¨è®¿é—® 127.0.0.1:8100&#x2F;status æŸ¥çœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯å³å¯</p><img src="/2024/06/28/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/infor.png" class=""><p>è¡¨ç¤ºå½“å‰æœåŠ¡æ­£å¸¸ï¼Œæ­¤æ—¶ä¸å¯å…³é—­å½“å‰ cmd å¼¹çª—ï¼Œéœ€è¦ä¸€ç›´ä¿æŒï¼</p><h2 id="Appium-ä½¿ç”¨"><a href="#Appium-ä½¿ç”¨" class="headerlink" title="Appium ä½¿ç”¨"></a>Appium ä½¿ç”¨</h2><p>æ‰“å¼€ appium ç‰ˆæœ¬é€‰æ‹© 1.20 ä»¥ä¸Šçš„ï¼Œæˆ‘è¿™é‡Œåªæ˜¯æè¿°</p><p>ç„¶åç‚¹å‡»start server V1.15.1</p><img src="/2024/06/28/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/appium.png" class=""><p>ç„¶åç‚¹å‡» å¦‚ä¸Šå›¾åœˆä½çš„</p><img src="/2024/06/28/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/appium1.png" class=""><p>åœ¨ JSON Representation è¾“å…¥</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs Json"><span class="hljs-punctuation">&#123;</span><br><span class="hljs-attr">&quot;deviceName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;iPhone XS Max&quot;</span><span class="hljs-punctuation">,</span> <br><span class="hljs-attr">&quot;platformName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ios&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;udid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;00008020-001604901A01002E&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;bundleId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ä½ çš„åŒ…å&quot;</span><span class="hljs-punctuation">,</span> <br><span class="hljs-attr">&quot;platformVersion&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;14.6&quot;</span><span class="hljs-punctuation">,</span> <br><span class="hljs-attr">&quot;webDriverAgentUrl&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;http://localhost:8100&quot;</span><span class="hljs-punctuation">,</span> <br><span class="hljs-attr">&quot;noReset&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;usePrebuiltWDA&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span> <br><span class="hljs-attr">&quot;useXctestrunFile&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span> <br><span class="hljs-attr">&quot;skipLogCapture&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span> <br><span class="hljs-attr">&quot;appium:automationName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;XCUITest&quot;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>ä¸Šé¢éœ€è¦æ›¿æ¢çš„ä¿¡æ¯åŒ…å« deviceName udid platformVersion bundleId å¯¹åº”çš„å†™è‡ªå·±çš„ä¿¡æ¯å³å¯ï¼</p><p>ç„¶åç‚¹å‡» start session å°±å¯ä»¥æŸ¥çœ‹å…ƒç´ äº†</p><h2 id="ä»£ç æ“ä½œ"><a href="#ä»£ç æ“ä½œ" class="headerlink" title="ä»£ç æ“ä½œ"></a>ä»£ç æ“ä½œ</h2><p>è¿™é‡Œçš„ä»£ç å®šä½å•Šä»€ä¹ˆçš„å’Œandroidä¸€æ ·ï¼Œè¿™é‡Œå°±ä¸å†™è¿™äº›åŸºæœ¬å‘½ä»¤äº†ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>è‡ªåŠ¨åŒ–æµ‹è¯•</category>
      
      <category>Ios</category>
      
      <category>Windows ä¸‹å®ç°IOSè‡ªåŠ¨åŒ–æµ‹è¯•</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Appium</tag>
      
      <tag>windows ä¸‹å®ç°iosè‡ªåŠ¨åŒ–æµ‹è¯•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pythonå¸¸è§å‡½æ•°ä¹‹yieldå‡½æ•°</title>
    <link href="/2024/06/28/yield%E5%87%BD%E6%95%B0/"/>
    <url>/2024/06/28/yield%E5%87%BD%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="Pythonå¸¸è§å‡½æ•°ä¹‹yieldå‡½æ•°"><a href="#Pythonå¸¸è§å‡½æ•°ä¹‹yieldå‡½æ•°" class="headerlink" title="Pythonå¸¸è§å‡½æ•°ä¹‹yieldå‡½æ•°"></a>Pythonå¸¸è§å‡½æ•°ä¹‹yieldå‡½æ•°</h1><p><code>yield</code> åœ¨ Python ä¸­æ˜¯ä¸€ä¸ªç”¨äºå®šä¹‰ç”Ÿæˆå™¨çš„å…³é”®å­—ï¼Œå®ƒå…è®¸å‡½æ•°åœ¨è¿­ä»£è¿‡ç¨‹ä¸­äº§ç”Ÿå€¼ï¼Œè€Œä¸éœ€è¦ä¸€æ¬¡æ€§è®¡ç®—æ‰€æœ‰å€¼ã€‚ä»¥ä¸‹æ˜¯å…³äº <code>yield</code> çš„æ›´è¯¦ç»†ä»‹ç»ï¼š</p><h3 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h3><ol><li><p><strong>å®šä¹‰ç”Ÿæˆå™¨å‡½æ•°</strong>ï¼šå½“ä¸€ä¸ªå‡½æ•°ä¸­åŒ…å«äº† <code>yield</code> è¯­å¥æ—¶ï¼Œè¿™ä¸ªå‡½æ•°å°±è¢«ç§°ä¸ºç”Ÿæˆå™¨å‡½æ•°ã€‚è°ƒç”¨ç”Ÿæˆå™¨å‡½æ•°æ—¶ï¼Œå®ƒä¸ä¼šç«‹å³æ‰§è¡Œå‡½æ•°ä½“ä¸­çš„å…¨éƒ¨ä»£ç ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªç”Ÿæˆå™¨å¯¹è±¡ã€‚</p></li><li><p><strong>ç”Ÿæˆå™¨çš„å·¥ä½œåŸç†</strong>ï¼šç”Ÿæˆå™¨æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„è¿­ä»£å™¨ï¼Œç”±ç”Ÿæˆå™¨å‡½æ•°åˆ›å»ºã€‚å½“ç”Ÿæˆå™¨å‡½æ•°æ‰§è¡Œåˆ° <code>yield</code> è¯­å¥æ—¶ï¼Œå®ƒä¼šç”Ÿæˆä¸€ä¸ªå€¼ï¼Œå¹¶ä¿å­˜å…¶å½“å‰çŠ¶æ€ï¼Œç„¶åç­‰å¾…ä¸‹ä¸€æ¬¡è°ƒç”¨æ¥ç»§ç»­æ‰§è¡Œã€‚</p></li></ol><h3 id="ä¸»è¦ç‰¹ç‚¹"><a href="#ä¸»è¦ç‰¹ç‚¹" class="headerlink" title="ä¸»è¦ç‰¹ç‚¹"></a>ä¸»è¦ç‰¹ç‚¹</h3><ol><li><p><strong>æš‚åœå’Œæ¢å¤</strong>ï¼š<code>yield</code> å…è®¸å‡½æ•°åœ¨è¿­ä»£è¿‡ç¨‹ä¸­æš‚åœå’Œæ¢å¤ï¼Œä»è€Œé€ä¸ªç”Ÿæˆå€¼ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§è®¡ç®—æ‰€æœ‰å€¼ã€‚</p></li><li><p><strong>å†…å­˜æ•ˆç‡</strong>ï¼šä½¿ç”¨ <code>yield</code> å¯ä»¥é¿å…åˆ›å»ºå¤§å‹çš„åˆ—è¡¨æ¥ä¿å­˜æ•°æ®ï¼Œä»è€ŒèŠ‚çº¦å†…å­˜ã€‚ç‰¹åˆ«æ˜¯å½“å¤„ç†å¤§é‡æ•°æ®æ—¶ï¼Œè¿™ç§ä¼˜åŠ¿å°¤ä¸ºæ˜æ˜¾ã€‚</p></li><li><p><strong>çŠ¶æ€ä¿æŒ</strong>ï¼šç”Ÿæˆå™¨èƒ½å¤Ÿè®°ä½ä¸Šä¸€æ¬¡è¿”å›æ—¶çš„çŠ¶æ€ï¼ŒåŒ…æ‹¬å±€éƒ¨å˜é‡å’Œå †æ ˆä¿¡æ¯ç­‰ã€‚è¿™ä½¿å¾—ç”Ÿæˆå™¨èƒ½å¤Ÿåœ¨ä¸‹æ¬¡è¿­ä»£æ—¶ä»ä¸Šæ¬¡ç¦»å¼€çš„ä½ç½®ç»§ç»­æ‰§è¡Œã€‚</p></li></ol><h3 id="yield-çš„åº”ç”¨åœºæ™¯"><a href="#yield-çš„åº”ç”¨åœºæ™¯" class="headerlink" title="yield çš„åº”ç”¨åœºæ™¯"></a>yield çš„åº”ç”¨åœºæ™¯</h3><ol><li><p><strong>èŠ‚çœå†…å­˜</strong>ï¼šç”Ÿæˆå™¨åœ¨ç”Ÿæˆå€¼æ—¶ä¼šâ€œæš‚åœâ€å‡½æ•°ï¼Œè€Œä¸æ˜¯åƒåˆ—è¡¨æ¨å¯¼å¼é‚£æ ·ä¸€æ¬¡æ€§ç”Ÿæˆæ‰€æœ‰å€¼ã€‚è¿™å¯¹äºå¤„ç†å¤§é‡æ•°æ®æˆ–æ— é™åºåˆ—æ—¶éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºå®ƒå…è®¸ä½ æŒ‰éœ€ç”Ÿæˆå€¼ï¼Œä»è€ŒèŠ‚çœå†…å­˜ã€‚</p></li><li><p><strong>ç®€åŒ–ä»£ç </strong>ï¼šç”Ÿæˆå™¨å¯ä»¥ç”¨äºç®€åŒ–å¤æ‚çš„è¿­ä»£é€»è¾‘ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ç”Ÿæˆå™¨æ¥æ¨¡æ‹Ÿä¸€ä¸ªæ— é™åºåˆ—ï¼ˆå¦‚æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼‰ï¼Œè€Œæ— éœ€åœ¨å†…å­˜ä¸­å­˜å‚¨æ•´ä¸ªåºåˆ—ã€‚</p></li><li><p><strong>ååŒç¨‹åº</strong>ï¼šè™½ç„¶è¿™ä¸æ˜¯ Python çš„æ ‡å‡†ç”¨æ³•ï¼Œä½† <code>yield</code> ä¹Ÿå¯ä»¥ç”¨äºå®ç°ååŒç¨‹åºï¼ˆcoroutinesï¼‰ï¼Œè¿™æ˜¯ä¸€ç§å¯ä»¥æš‚åœå’Œæ¢å¤æ‰§è¡Œçš„å‡½æ•°ã€‚åœ¨ Python 3.5 åŠæ›´é«˜ç‰ˆæœ¬ä¸­ï¼Œ<code>async</code> å’Œ <code>await</code> å…³é”®å­—è¢«å¼•å…¥ä»¥æ›´ç›´æ¥åœ°æ”¯æŒå¼‚æ­¥ç¼–ç¨‹ï¼Œä½† <code>yield</code> ä»ç„¶åœ¨æŸäº›åœºæ™¯ä¸­ç”¨äºæ­¤ç›®çš„ã€‚</p></li><li><p><strong>æ•°æ®æµæ°´çº¿</strong>ï¼šåœ¨æ•°æ®åˆ†æå’Œæœºå™¨å­¦ä¹ ç­‰é¢†åŸŸä¸­ï¼Œç”Ÿæˆå™¨å¸¸ç”¨äºåˆ›å»ºæ•°æ®æµæ°´çº¿ã€‚ä½ å¯ä»¥ä½¿ç”¨ç”Ÿæˆå™¨å‡½æ•°ä»æ•°æ®æºä¸­è¯»å–æ•°æ®ï¼Œå¯¹æ•°æ®è¿›è¡Œé¢„å¤„ç†ï¼Œç„¶åå°†å¤„ç†åçš„æ•°æ®ä¼ é€’ç»™ä¸‹ä¸€ä¸ªé˜¶æ®µã€‚ç”±äºç”Ÿæˆå™¨æŒ‰éœ€ç”Ÿæˆæ•°æ®ï¼Œå› æ­¤è¿™ç§æµæ°´çº¿å¯ä»¥éå¸¸é«˜æ•ˆåœ°å¤„ç†å¤§é‡æ•°æ®ã€‚</p></li><li><p><strong>æƒ°æ€§æ±‚å€¼</strong>ï¼šç”Ÿæˆå™¨å…è®¸ä½ å®ç°æƒ°æ€§æ±‚å€¼ï¼ˆlazy evaluationï¼‰ï¼Œå³åªæœ‰åœ¨éœ€è¦æ—¶æ‰è®¡ç®—å€¼ã€‚è¿™åœ¨å¤„ç†å¤æ‚è®¡ç®—æˆ–å¤§å‹æ•°æ®é›†æ—¶éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºå®ƒå¯ä»¥é¿å…ä¸å¿…è¦çš„è®¡ç®—å¹¶èŠ‚çœèµ„æºã€‚</p></li><li><p><strong>ä¸è¿­ä»£å™¨çš„äº¤äº’</strong>ï¼šç”Ÿæˆå™¨ä¹Ÿæ˜¯è¿­ä»£å™¨çš„ä¸€ç§ï¼Œå› æ­¤å®ƒä»¬å¯ä»¥ä¸ä»»ä½•æ¥å—è¿­ä»£å™¨çš„ Python ç»“æ„ï¼ˆå¦‚ <code>for</code> å¾ªç¯ã€åˆ—è¡¨æ¨å¯¼å¼ã€<code>map()</code>ã€<code>filter()</code> ç­‰ï¼‰ä¸€èµ·ä½¿ç”¨ã€‚è¿™ä½¿å¾—ç”Ÿæˆå™¨åœ¨ Python ä¸­éå¸¸çµæ´»å’Œå¼ºå¤§ã€‚</p></li></ol><h3 id="ä»£ç è§£é‡Š"><a href="#ä»£ç è§£é‡Š" class="headerlink" title="ä»£ç è§£é‡Š"></a>ä»£ç è§£é‡Š</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">simple_generator</span>():<br>    <span class="hljs-keyword">yield</span> <span class="hljs-number">1</span><br>    <span class="hljs-keyword">yield</span> <span class="hljs-number">2</span><br>    <span class="hljs-keyword">yield</span> <span class="hljs-number">3</span><br><br><span class="hljs-comment"># åˆ›å»ºç”Ÿæˆå™¨å¯¹è±¡</span><br>generator = simple_generator()<br><br><span class="hljs-comment"># é€šè¿‡ for å¾ªç¯è¿­ä»£ç”Ÿæˆå™¨</span><br><span class="hljs-keyword">for</span> value <span class="hljs-keyword">in</span> generator:<br>    <span class="hljs-built_in">print</span>(value)  <span class="hljs-comment"># è¾“å‡º: 1, 2, 3</span><br><br><span class="hljs-comment"># ä¹Ÿå¯ä»¥ä½¿ç”¨ next() å‡½æ•°è¿­ä»£ç”Ÿæˆå™¨</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(generator))  <span class="hljs-comment"># è¾“å‡º: StopIterationï¼ˆå› ä¸ºç”Ÿæˆå™¨å·²ç»è¿­ä»£å®Œæ¯•ï¼‰</span><br></code></pre></td></tr></table></figure><h3 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><ul><li><p>å½“ç”Ÿæˆå™¨å‡½æ•°æ‰§è¡Œåˆ° <code>yield</code> è¯­å¥æ—¶ï¼Œå®ƒä¼šç”Ÿæˆä¸€ä¸ªå€¼å¹¶æš‚åœæ‰§è¡Œã€‚æ­¤æ—¶ï¼Œç”Ÿæˆå™¨çš„çŠ¶æ€ä¼šè¢«ä¿å­˜ä¸‹æ¥ï¼ŒåŒ…æ‹¬å±€éƒ¨å˜é‡å’Œå †æ ˆä¿¡æ¯ç­‰ã€‚</p></li><li><p>è°ƒç”¨ç”Ÿæˆå™¨å¯¹è±¡çš„ <code>__next__()</code> æ–¹æ³•ï¼ˆæˆ–è€…åœ¨ for å¾ªç¯ä¸­è¿­ä»£ï¼‰ä¼šä½¿ç”Ÿæˆå™¨æ¢å¤æ‰§è¡Œï¼Œç›´åˆ°é‡åˆ°ä¸‹ä¸€ä¸ª <code>yield</code> è¯­å¥æˆ–å‡½æ•°ç»“æŸã€‚</p></li><li><p>å¦‚æœç”Ÿæˆå™¨å‡½æ•°ä¸­æ²¡æœ‰æ›´å¤šçš„ <code>yield</code> è¯­å¥æˆ–å·²ç»æ‰§è¡Œå®Œæ¯•ï¼Œå†æ¬¡è°ƒç”¨ <code>__next__()</code> æ–¹æ³•ä¼šå¼•å‘ <code>StopIteration</code> å¼‚å¸¸ã€‚</p></li></ul>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
      <category>Python å¸¸è§å‡½æ•°</category>
      
      <category>Python yieldå‡½æ•°</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>python</tag>
      
      <tag>yield</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pythonå¸¸è§å‡½æ•°ä¹‹ç”Ÿæˆå¼</title>
    <link href="/2024/06/28/python%E7%94%9F%E6%88%90%E5%BC%8F/"/>
    <url>/2024/06/28/python%E7%94%9F%E6%88%90%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<h1 id="Pythonå¸¸è§å‡½æ•°ä¹‹ç”Ÿæˆå¼"><a href="#Pythonå¸¸è§å‡½æ•°ä¹‹ç”Ÿæˆå¼" class="headerlink" title="Pythonå¸¸è§å‡½æ•°ä¹‹ç”Ÿæˆå¼"></a>Pythonå¸¸è§å‡½æ•°ä¹‹ç”Ÿæˆå¼</h1><p>åœ¨Pythonä¸­ï¼Œç”Ÿæˆå¼ï¼ˆGenerator Expressionsï¼‰æ˜¯ä¸€ç§ç®€æ´çš„åˆ›å»ºè¿­ä»£å™¨çš„æ–¹å¼ï¼Œå®ƒä»¬ç±»ä¼¼äºåˆ—è¡¨æ¨å¯¼å¼ï¼ˆList Comprehensionsï¼‰ï¼Œä½†æ˜¯ç”Ÿæˆå¼è¿”å›çš„æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªåˆ—è¡¨ã€‚è¿™æ„å‘³ç€ç”Ÿæˆå¼åªä¼šåœ¨è¿­ä»£æ—¶ç”Ÿæˆå€¼ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§ç”Ÿæˆæ‰€æœ‰å€¼ï¼Œä»è€ŒèŠ‚çœäº†å†…å­˜ã€‚</p><p>ç”Ÿæˆå¼çš„åŸºæœ¬è¯­æ³•æ˜¯ä½¿ç”¨åœ†æ‹¬å· <code>()</code> è€Œä¸æ˜¯æ–¹æ‹¬å· <code>[]</code> æˆ–èŠ±æ‹¬å· <code>&#123;&#125;</code>ï¼ˆå¯¹äºé›†åˆæˆ–å­—å…¸æ¨å¯¼å¼ï¼‰ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€äº›ç”Ÿæˆå¼çš„ç¤ºä¾‹ï¼š</p><ol><li>åˆ›å»ºä¸€ä¸ªç”Ÿæˆå¶æ•°ï¼ˆä»0åˆ°18ï¼‰çš„ç”Ÿæˆå¼ï¼š</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">even_numbers = (i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">19</span>) <span class="hljs-keyword">if</span> i % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>)<br><span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> even_numbers:<br>    <span class="hljs-built_in">print</span>(num)<br></code></pre></td></tr></table></figure><ol start="2"><li>åˆ›å»ºä¸€ä¸ªä»å­—ç¬¦ä¸²ä¸­æå–å¤§å†™å­—æ¯çš„ç”Ÿæˆå¼ï¼š</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">text = <span class="hljs-string">&quot;Hello, World!&quot;</span><br>uppercase_letters = (char <span class="hljs-keyword">for</span> char <span class="hljs-keyword">in</span> text <span class="hljs-keyword">if</span> char.isupper())<br><span class="hljs-keyword">for</span> letter <span class="hljs-keyword">in</span> uppercase_letters:<br>    <span class="hljs-built_in">print</span>(letter)<br></code></pre></td></tr></table></figure><ol start="3"><li>åˆ›å»ºä¸€ä¸ªç”Ÿæˆæ–æ³¢é‚£å¥‘æ•°åˆ—çš„ç”Ÿæˆå¼ï¼ˆæ³¨æ„ï¼šè¿™åªæ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå› ä¸ºç”Ÿæˆå¼æœ¬èº«å¹¶ä¸é€‚åˆç”Ÿæˆæ— é™åºåˆ—ï¼Œä½†æˆ‘ä»¬å¯ä»¥é™åˆ¶å…¶é•¿åº¦ï¼‰ï¼š</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">fibonacci</span>(<span class="hljs-params">n</span>):<br>    a, b = <span class="hljs-number">0</span>, <span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        <span class="hljs-keyword">yield</span> a<br>        a, b = b, a + b<br><br>fib_sequence = fibonacci(<span class="hljs-number">10</span>)  <span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªç”Ÿæˆå‰10ä¸ªæ–æ³¢é‚£å¥‘æ•°çš„ç”Ÿæˆå™¨</span><br><span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> fib_sequence:<br>    <span class="hljs-built_in">print</span>(num)<br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªæ–æ³¢é‚£å¥‘æ•°åˆ—çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®é™…ä¸Šä½¿ç”¨äº†ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°ï¼ˆé€šè¿‡<code>yield</code>å…³é”®å­—å®šä¹‰ï¼‰ï¼Œä½†ä½ ä¹Ÿå¯ä»¥å°†å…¶è§†ä¸ºä¸€ä¸ªæ›´å¤æ‚çš„ç”Ÿæˆå¼ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¦‚æœä½ éœ€è¦ç”Ÿæˆä¸€ä¸ªå¤æ‚çš„ã€å¯èƒ½æ˜¯æ— é™çš„åºåˆ—ï¼Œé‚£ä¹ˆä½¿ç”¨ç”Ÿæˆå™¨å‡½æ•°ä¼šæ›´ä¸ºåˆé€‚ã€‚</p><p>æ€»çš„æ¥è¯´ï¼Œç”Ÿæˆå¼æ˜¯Pythonä¸­ä¸€ç§éå¸¸å¼ºå¤§ä¸”å†…å­˜é«˜æ•ˆçš„å·¥å…·ï¼Œç”¨äºåœ¨è¿­ä»£æ—¶åŠ¨æ€ç”Ÿæˆå€¼ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
      <category>Python å¸¸è§å‡½æ•°</category>
      
      <category>Python ç”Ÿæˆå¼</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>çª—å¤–</title>
    <link href="/2024/06/27/%E7%AA%97%E5%A4%96/"/>
    <url>/2024/06/27/%E7%AA%97%E5%A4%96/</url>
    
    <content type="html"><![CDATA[<h1 id="çª—å¤–"><a href="#çª—å¤–" class="headerlink" title="çª—å¤–"></a>çª—å¤–</h1><p>å› ä¸ºæˆ‘çš„å·¥ä½æŒ¨ç€çª—å£</p><p>ç´¯äº†å°±ä¼šè½¬å¤´çœ‹ä¸€ä¸‹çª—å¤–çš„æ™¯è‰²</p><p>æœ‰å½¢å½¢è‰²è‰²çš„è¡Œäººèµ°æ¥èµ°å»</p><p>å¿ƒé‡Œæƒ³å¤§å®¶éƒ½ä¸€æ ·å§</p><p>å—¯ï¼å¤§å®¶éƒ½ä¸€æ ·ï¼</p><p>è½¬è¿‡å¤´</p><p>ä¸è¿˜å¾—è¿‡è¿™æ“è›‹çš„æ—¥å­ï¼</p><img src="/2024/06/27/%E7%AA%97%E5%A4%96/%E6%93%8D%E8%9B%8B.jpeg" class="">]]></content>
    
    
    <categories>
      
      <category>éšç¬”</category>
      
      <category>2024å¹´éšç¬”</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>éšç¬”</tag>
      
      <tag>ç”Ÿæ´»</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pythonå¸¸è§å‡½æ•°ä¹‹reduceå‡½æ•°ç”¨æ³•</title>
    <link href="/2024/06/27/reduce%E5%87%BD%E6%95%B0%E7%94%A8%E6%B3%95/"/>
    <url>/2024/06/27/reduce%E5%87%BD%E6%95%B0%E7%94%A8%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h1 id="Pythonå¸¸è§å‡½æ•°ä¹‹reduceå‡½æ•°ç”¨æ³•"><a href="#Pythonå¸¸è§å‡½æ•°ä¹‹reduceå‡½æ•°ç”¨æ³•" class="headerlink" title="Pythonå¸¸è§å‡½æ•°ä¹‹reduceå‡½æ•°ç”¨æ³•"></a>Pythonå¸¸è§å‡½æ•°ä¹‹reduceå‡½æ•°ç”¨æ³•</h1><p>å¯èƒ½çªç„¶æåˆ°reduceå‡½æ•°ä½ è§‰å¾—ä¸è®¤è¯†ï¼Œä½†æ˜¯ç»™ä½ è¿™ä¹ˆä¸€ä¸ªåœºæ™¯ï¼Œå‡å¦‚æˆ‘è¦ä½ å®ç°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">str_to_number</span>(<span class="hljs-params">order</span>):<br>    digits = &#123;<span class="hljs-string">&#x27;0&#x27;</span>: <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;1&#x27;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;2&#x27;</span>: <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;3&#x27;</span>: <span class="hljs-number">3</span>, <span class="hljs-string">&#x27;4&#x27;</span>: <span class="hljs-number">4</span>, <span class="hljs-string">&#x27;5&#x27;</span>: <span class="hljs-number">5</span>, <span class="hljs-string">&#x27;6&#x27;</span>: <span class="hljs-number">6</span>, <span class="hljs-string">&#x27;7&#x27;</span>: <span class="hljs-number">7</span>, <span class="hljs-string">&#x27;8&#x27;</span>: <span class="hljs-number">8</span>, <span class="hljs-string">&#x27;9&#x27;</span>: <span class="hljs-number">9</span>&#125;<br>    <span class="hljs-keyword">return</span> digits[order]<br></code></pre></td></tr></table></figure><p>æˆ‘æƒ³è®©ä½ åˆ©ç”¨ä¸Šé¢çš„å‡½æ•°ç»™æˆ‘è¿”å›ä¸€ä¸ª 12345</p><p>æœ‰äººè¯´å¯ä»¥å•Š å¼„ä¸ªåˆ—è¡¨æ¯æ¬¡ä¼ é€’ä¸€ä¸ªå¯¹åº”çš„keyè·å–value ç„¶åappendåˆ°åˆ—è¡¨é‡Œé¢ã€‚ç¡®å®å¯ä»¥ä½†æ˜¯æœ‰ç‚¹è¿‡äºéº»çƒ¦äº†ï¼Œé‚£ä¹ˆä»Šå¤©ä»‹ç»çš„è¿™ä¸ªreduceå‡½æ•°ç»æ•ˆç‡å˜å˜çš„ï¼</p><h2 id="reduceå‡½æ•°"><a href="#reduceå‡½æ•°" class="headerlink" title="reduceå‡½æ•°"></a>reduceå‡½æ•°</h2><p>reduceæŠŠä¸€ä¸ªå‡½æ•°ä½œç”¨åœ¨ä¸€ä¸ªåºåˆ—[x1, x2, x3, â€¦]ä¸Šï¼Œè¿™ä¸ªå‡½æ•°å¿…é¡»æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼ŒreduceæŠŠç»“æœç»§ç»­å’Œåºåˆ—çš„ä¸‹ä¸€ä¸ªå…ƒç´ åšç´¯ç§¯è®¡ç®—ï¼Œå…¶æ•ˆæœå°±æ˜¯ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">reduce(f, [x1, x2, x3, x4]) = f(f(f(x1, x2), x3), x4)<br></code></pre></td></tr></table></figure><p>è¿™ä¹ˆçœ‹å¯èƒ½ä¸æ˜ç™½ï¼Œä¸‹é¢è®©æˆ‘æ¥ä¸¾ä¸ªä¾‹å­ï¼</p><p>å¯¹ä¸€ä¸ªåºåˆ—æ±‚å’Œï¼Œå°±å¯ä»¥ç”¨reduceå®ç°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> reduce<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>):<br>    <span class="hljs-keyword">return</span> a + b<br><br><span class="hljs-built_in">print</span>(reduce(add, [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>])) <span class="hljs-comment"># 15</span><br></code></pre></td></tr></table></figure><p>è¿™å°±å®ç°äº†å°† 1,2,3,4,5 åˆ©ç”¨add å‡½æ•°æ±‚å’Œ</p><p>äº¦æˆ–è€… æˆ‘ä»¬å¯ä»¥å®ç° å°†è¾“å…¥çš„å†…å®¹æŒ‰ç…§æ•´æ•°è¾“å‡º</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> reduce<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params">a, b</span>):<br>    <span class="hljs-keyword">return</span> a * <span class="hljs-number">10</span> + b<br><br><span class="hljs-built_in">print</span>(reduce(fn, [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]))  <span class="hljs-comment"># 12345</span><br></code></pre></td></tr></table></figure><p>è¿™ä¸‹åº”èƒ½çœ‹æ˜ç™½é‡Œé¢çš„å¥¥å¦™äº†å§ï¼</p><p>åº”ç”¨åˆ°æœ€å¼€å§‹çš„é‚£ä¸ªé—®é¢˜é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥è¿™ä¹ˆæ¥åš</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> reduce<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">str_to_number</span>(<span class="hljs-params">order</span>):<br>    digits = &#123;<span class="hljs-string">&#x27;0&#x27;</span>: <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;1&#x27;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;2&#x27;</span>: <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;3&#x27;</span>: <span class="hljs-number">3</span>, <span class="hljs-string">&#x27;4&#x27;</span>: <span class="hljs-number">4</span>, <span class="hljs-string">&#x27;5&#x27;</span>: <span class="hljs-number">5</span>, <span class="hljs-string">&#x27;6&#x27;</span>: <span class="hljs-number">6</span>, <span class="hljs-string">&#x27;7&#x27;</span>: <span class="hljs-number">7</span>, <span class="hljs-string">&#x27;8&#x27;</span>: <span class="hljs-number">8</span>, <span class="hljs-string">&#x27;9&#x27;</span>: <span class="hljs-number">9</span>&#125;<br>    <span class="hljs-keyword">return</span> digits[order]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">str_to_number_reduce</span>(<span class="hljs-params">order</span>):<br>    <span class="hljs-keyword">return</span> reduce(<span class="hljs-keyword">lambda</span> x, y: x * <span class="hljs-number">10</span> + y, <span class="hljs-built_in">map</span>(str_to_number, order))<br><br><span class="hljs-built_in">print</span>(str_to_number_reduce([<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-string">&#x27;2&#x27;</span>,<span class="hljs-string">&#x27;3&#x27;</span>,<span class="hljs-string">&#x27;4&#x27;</span>,<span class="hljs-string">&#x27;5&#x27;</span>])) <span class="hljs-comment"># 12345</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
      <category>Python å¸¸è§å‡½æ•°</category>
      
      <category>Python reduceå‡½æ•°ç”¨æ³•</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pythonå¸¸è§å‡½æ•°ä¹‹å‡½æ•°å›ºå®šå½¢å‚</title>
    <link href="/2024/06/27/python%E5%87%BD%E6%95%B0%E5%9B%BA%E5%AE%9A%E5%BD%A2%E5%8F%82/"/>
    <url>/2024/06/27/python%E5%87%BD%E6%95%B0%E5%9B%BA%E5%AE%9A%E5%BD%A2%E5%8F%82/</url>
    
    <content type="html"><![CDATA[<h1 id="Pythonå¸¸è§å‡½æ•°ä¹‹å›ºå®šå½¢å‚"><a href="#Pythonå¸¸è§å‡½æ•°ä¹‹å›ºå®šå½¢å‚" class="headerlink" title="Pythonå¸¸è§å‡½æ•°ä¹‹å›ºå®šå½¢å‚"></a>Pythonå¸¸è§å‡½æ•°ä¹‹å›ºå®šå½¢å‚</h1><p>å¦‚æœæœ‰è¿™æ ·ä¸€ä¸ªå‡½æ•° add(a, b), æ­¤æ—¶ä½ è¿›è¡Œè°ƒç”¨çš„æ—¶å€™è‚¯å®šçŸ¥é“éœ€è¦ä¼ é€’ä¸¤ä¸ªå½¢å‚ æ¯”å¦‚ add(1,2)ï¼Œ ä½†æ˜¯å¦‚æœæˆ‘åªæƒ³å®ç°1çš„åŠ æ³•æ€ä¹ˆåŠï¼Œæœ‰äººè¯´å¯ä»¥å•Š æ¯æ¬¡éƒ½ä¼ é€’add(1,x) å°±è¡Œä½†æ˜¯è¿™æ ·å¯èƒ½è¿˜æ˜¯ä¼šè®©åˆ«äººè¯¯è§£ï¼</p><p>é‚£ä¹ˆï¼Œ å¦‚æœæˆ‘è¿™æ ·åªéœ€è¦ä¼ é€’add(2)æˆ–add(5) å°±å¯ä»¥å®ç°åˆšåˆšçš„ç®—æ³•ï¼Œé‚£ä¹ˆè¿™æ ·å°±ç®—æ˜¯å°†æˆ‘ä»¬å…¶ä¸­ä¸€ä¸ªå‚æ•°å›ºå®šäº†ï¼Œé‚£ä¹ˆä¸€èµ·æ¥çœ‹çœ‹æ€ä¹ˆå®ç°å§ï¼</p><h2 id="functools-partial"><a href="#functools-partial" class="headerlink" title="functools.partial"></a>functools.partial</h2><p>partialç”¨äºéƒ¨åˆ†åº”ç”¨ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒåŸºäºä¸€ä¸ªå‡½æ•°åˆ›å»ºä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡ï¼ŒæŠŠåŸå‡½æ•°çš„æŸäº›å‚æ•°å›ºå®šï¼Œè°ƒç”¨æ—¶åªéœ€è¦ä¼ é€’æœªå›ºå®šçš„å‚æ•°å³å¯ã€‚</p><h2 id="ä»£ç è§£é‡Š"><a href="#ä»£ç è§£é‡Š" class="headerlink" title="ä»£ç è§£é‡Š"></a>ä»£ç è§£é‡Š</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> functools<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>):<br>    <span class="hljs-built_in">print</span>(a + b)<br><br><br>add = functools.partial(add, <span class="hljs-number">1</span>)<br>add(<span class="hljs-number">2</span>)  <span class="hljs-comment"># è¾“å‡ºï¼š3</span><br></code></pre></td></tr></table></figure><p>addå‡½æ•°åŸæœ¬æ¥æ”¶ä¸¤ä¸ªå‚æ•°aå’Œbï¼Œç»è¿‡partialåŒ…è£…ä¹‹åï¼Œaå‚æ•°çš„å€¼è¢«å›ºå®šä¸ºäº†1ï¼Œæ–°çš„addå¯¹è±¡ï¼ˆæ³¨æ„æ­¤å¤„addå·²ç»æ˜¯ä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡ï¼Œè€Œéå‡½æ•°ï¼Œä¸‹æ–‡åˆ†ææºç ä¼šçœ‹åˆ°ï¼‰åªéœ€è¦æ¥æ”¶ä¸€ä¸ªå‚æ•°å³å¯ã€‚</p><p>é€šä¿—ç‚¹è¯´ï¼šå°±æ˜¯æŠŠåŸå‡½æ•°çš„éƒ¨åˆ†å‚æ•°å›ºå®šäº†åˆå§‹å€¼ï¼Œæ–°çš„è°ƒç”¨åªéœ€è¦ä¼ é€’å…¶å®ƒå‚æ•°ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
      <category>Python å¸¸è§å‡½æ•°</category>
      
      <category>Python å‡½æ•°å›ºå®šå½¢å‚</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LocustFileç¼–å†™</title>
    <link href="/2024/06/27/locustfile%E7%BC%96%E5%86%99/"/>
    <url>/2024/06/27/locustfile%E7%BC%96%E5%86%99/</url>
    
    <content type="html"><![CDATA[<h1 id="LocustFileç¼–å†™"><a href="#LocustFileç¼–å†™" class="headerlink" title="LocustFileç¼–å†™"></a>LocustFileç¼–å†™</h1><p>ç¼–å†™LocustFile å¯ä»¥ä½¿å¾—æˆ‘ä»¬çš„æ€§èƒ½æµ‹è¯•åŠŸèƒ½æ›´åŠ å¼ºå¤§å®ç°æˆ‘ä»¬è‡ªå®šä¹‰çš„æµ‹è¯•è·¯å¾„åŠåˆ¤æ–­é”™è¯¯ç­‰æ–¹æ³•ï¼</p><h2 id="LocustFile-Demo"><a href="#LocustFile-Demo" class="headerlink" title="LocustFile Demo"></a>LocustFile Demo</h2><p>æ¥è‡ª LousctFile å®˜ç½‘ä¾‹å­</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">from</span> locust <span class="hljs-keyword">import</span> HttpUser, task, between<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">QuickstartUser</span>(<span class="hljs-title class_ inherited__">HttpUser</span>):<br>    wait_time = between(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>)<br><br><span class="hljs-meta">    @task</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">hello_world</span>(<span class="hljs-params">self</span>):<br>        self.client.get(<span class="hljs-string">&quot;/hello&quot;</span>)<br>        self.client.get(<span class="hljs-string">&quot;/world&quot;</span>)<br><br><span class="hljs-meta">    @task(<span class="hljs-params"><span class="hljs-number">3</span></span>)</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">view_items</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">for</span> item_id <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):<br>            self.client.get(<span class="hljs-string">f&quot;/item?id=<span class="hljs-subst">&#123;item_id&#125;</span>&quot;</span>, name=<span class="hljs-string">&quot;/item&quot;</span>)<br>            time.sleep(<span class="hljs-number">1</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">on_start</span>(<span class="hljs-params">self</span>):<br>        self.client.post(<span class="hljs-string">&quot;/login&quot;</span>, json=&#123;<span class="hljs-string">&quot;username&quot;</span>:<span class="hljs-string">&quot;foo&quot;</span>, <span class="hljs-string">&quot;password&quot;</span>:<span class="hljs-string">&quot;bar&quot;</span>&#125;)<br></code></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘æƒ³è¿˜æ˜¯é‡‡ç”¨å®˜ç½‘çš„ä¾‹å­ä»‹ç»ï¼Œä¸ºäº†é˜²æ­¢æˆ‘è®²çš„ä¸å¤Ÿæ¸…æ™° å¤§å®¶ä¹Ÿå¯ä»¥è®¿é—®ä¸‹é¢çš„é“¾æ¥å»å®˜ç½‘æŸ¥çœ‹</p><p><a href="https://docs.locust.io/en/stable/writing-a-locustfile.html">https://docs.locust.io/en/stable/writing-a-locustfile.html</a></p><h2 id="è§£é‡Šï¼ˆæˆ‘çš„ç†è§£ï¼‰"><a href="#è§£é‡Šï¼ˆæˆ‘çš„ç†è§£ï¼‰" class="headerlink" title="è§£é‡Šï¼ˆæˆ‘çš„ç†è§£ï¼‰"></a>è§£é‡Šï¼ˆæˆ‘çš„ç†è§£ï¼‰</h2><p>å…¶å®ä»ä¸­å¯ä»¥çœ‹åˆ°è¿™ä¸ªæ¡ˆä¾‹å’Œæˆ‘ä»¬å¹³å¸¸å†™çš„ç±»å¥½åƒæ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œé™¤äº†ç»§æ‰¿äº†<font color=green >HttpUser</font>,ä»¥åŠç”¨ä¾‹<font color=green >@task</font> è£…é¥°å™¨</p><p>é‚£ä¹ˆé¦–å…ˆæ¥çœ‹ä¸€ä¸‹å…·ä½“å®ç°äº†ä»€ä¹ˆåŠŸèƒ½å‘¢ï¼Ÿ</p><h3 id="on-start"><a href="#on-start" class="headerlink" title="on_start()"></a>on_start()</h3><p>è¿™ä¸ªç±»å®ç°äº†ä¸€ä¸ªæ€§èƒ½æµ‹è¯•è„šæœ¬ï¼Œåœ¨æ¯ä¸ªæ¨¡æ‹Ÿç”¨æˆ·å¯åŠ¨æ—¶ï¼Œéƒ½ä¼šè°ƒç”¨æ­¤åç§°çš„æ–¹æ³• ä¼šå…ˆè¿è¡Œ <font color=green >on_start</font>è¿™ä¸ªå‡½æ•°,ç„¶åè¿›è¡Œäº†è¯·æ±‚è¿™é‡Œçš„host å¯ä»¥åœ¨shellä¸­æŒ‡å®šä¹Ÿå¯ä»¥åœ¨web uiçš„é‚£ä¸ªç•Œé¢ä¸­è¾“å…¥ï¼Œå¯ä»¥çœ‹åˆ°è¿›è¡Œäº†ä¸€ä¸ªpostè¯·æ±‚ï¼Œè·¯å¾„æ˜¯ &#x2F;login, è¯·æ±‚ä½“æ˜¯ä¸€ä¸ªjsonå¯¹è±¡</p><p>ç„¶åä¼šåœ¨ç»§ç»­æ‰§è¡Œ è¿™é‡Œçš„<font color=green >@task</font> ç€é‡è®²ä¸€ä¸‹</p><h3 id="task-è£…é¥°å™¨"><a href="#task-è£…é¥°å™¨" class="headerlink" title="task è£…é¥°å™¨"></a>task è£…é¥°å™¨</h3><p>@task è£…é¥°å™¨ è¡¨æ˜å½“å‰æ–¹æ³•æ˜¯ä¸€ä¸ªä»»åŠ¡</p><p>@task æ˜¯locustæ–‡ä»¶çš„æ ¸å¿ƒã€‚å¯¹äºæ¯ä¸ªæ­£åœ¨è¿è¡Œçš„ç”¨æˆ·ï¼ŒLocust éƒ½ä¼šåˆ›å»ºä¸€ä¸ªgreenletï¼ˆåç¨‹æˆ–â€œå¾®çº¿ç¨‹â€ï¼‰ï¼Œç„¶åè¿›è¡Œè¯·æ±‚ï¼Œè¦æ³¨æ„æ­¤æ—¶ä¸æ˜¯å¹¶å‘è¯·æ±‚ï¼Œæ˜¯åœ¨&#x2F;hello å“åº”è¿”å›åæ‰ä¼šç»§ç»­è¯·æ±‚&#x2F;world</p><p>@task(3) å…¶ä¸­3æ˜¯æŒ‡æƒé‡ï¼Œè™½ç„¶ç¨‹åºè¿è¡Œæ˜¯éšæœºé€‰æ‹©ä»»åŠ¡å•æ˜¯ä½ ç»™äºˆäº†æ›´å¤§çš„æƒé‡çš„è¯è¿è¡Œçš„æ¬¡æ•°ä¼šæ›´åŠ å¤š</p><h3 id="wait-time"><a href="#wait-time" class="headerlink" title="wait_time"></a>wait_time</h3><p>wait_time æ–¹æ³•åœ¨æ¯æ¬¡ä»»åŠ¡æ‰§è¡Œåå¼•å…¥å»¶è¿Ÿã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šwait_timeï¼Œåˆ™ä¸‹ä¸€ä¸ªä»»åŠ¡å°†åœ¨ä¸Šä¸€ä¸ªä»»åŠ¡å®Œæˆåç«‹å³æ‰§è¡Œã€‚</p><p>æœ‰å››ä¸ªå‡½æ•° åˆ†åˆ«æ˜¯ï¼šconstantã€ bettwenã€ constant_throughputã€constant_pacing</p><p>constant: åœ¨å›ºå®šçš„æ—¶é—´å†…</p><p>è®©æ¯ä¸ªç”¨æˆ·æ¯æ¬¡æ‰§è¡Œå›ºå®šçš„æ—¶é—´ 1ç§’ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">wait_time = constant(<span class="hljs-number">0.5</span>, <span class="hljs-number">10</span>)<br></code></pre></td></tr></table></figure><p>bettwen: åœ¨æœ€å°å€¼å’Œæœ€å¤§å€¼ä¹‹é—´çš„éšæœºæ—¶é—´</p><p>è®©æ¯ä¸ªç”¨æˆ·åœ¨æ¯æ¬¡æ‰§è¡Œä»»åŠ¡ä¹‹é—´ç­‰å¾… 1 åˆ° 4 :</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">wait_time = between(<span class="hljs-number">0.5</span>, <span class="hljs-number">10</span>)<br></code></pre></td></tr></table></figure><p>constant_throughputï¼šè¿”å›ä¸€ä¸ªè·Ÿè¸ªä»»åŠ¡è¿è¡Œæ—¶é—´çš„å‡½æ•°ï¼Œæ¯æ¬¡è°ƒç”¨æ—¶ï¼Œå®ƒå°†è¿”å›ä¸€ä¸ªç­‰å¾…æ—¶é—´ï¼Œè¯¥ç­‰å¾…æ—¶é—´å°†å°è¯•ä½¿æ¯ç§’æ‰§è¡Œçš„ä»»åŠ¡è¿è¡Œæ¬¡æ•°ç­‰äº task_runs_per_second å‚æ•°æŒ‡å®šçš„æ—¶é—´</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼šä»¥æ’å®šçš„é€Ÿç‡æ‰§è¡Œä»»åŠ¡ã€‚å®ƒå…è®¸ç”¨æˆ·è®¾ç½®æ¯ç§’æˆ–æ¯åˆ†é’Ÿéœ€è¦æ‰§è¡Œçš„ä»»åŠ¡æ•°ï¼Œä»¥ç¡®ä¿æ€§èƒ½æµ‹è¯•çš„ç¨³å®šæ€§ã€‚</p><p>åº”ç”¨åœºæ™¯ï¼š</p><pre><code class="hljs">åœ¨æ€§èƒ½æµ‹è¯•ä¸­ï¼Œå¯èƒ½éœ€è¦æ¨¡æ‹Ÿä¸åŒçš„ç”¨æˆ·è¡Œä¸ºï¼Œå¦‚ç™»å½•ã€æœç´¢ã€è´­ä¹°ç­‰ã€‚constant_throughput å¯ä»¥ç¡®ä¿è¿™äº›ä»»åŠ¡ä»¥æ’å®šçš„é€Ÿç‡æ‰§è¡Œï¼Œä»è€Œæ›´å‡†ç¡®åœ°è¯„ä¼°ç³»ç»Ÿçš„æ€§èƒ½å’Œç¨³å®šæ€§ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæœ‰æ—¶éœ€è¦æ ¹æ®å®¢æˆ·çš„éœ€æ±‚è®¾ç½®åº”ç”¨çš„ååé‡ã€‚constant_throughput å¯ä»¥å¸®åŠ©ç¡®ä¿åº”ç”¨èƒ½å¤Ÿæ»¡è¶³ç”¨æˆ·çš„éœ€æ±‚ï¼ŒåŒæ—¶ä¿æŒç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚</code></pre><p>ä¹Ÿæ˜¯ constant_pacing çš„å€’æ•°</p><p>æ— è®ºä»»åŠ¡æ‰§è¡Œæ—¶é—´å¦‚ä½•ï¼Œä»»åŠ¡å°†å§‹ç»ˆæ¯ 10 ç§’æ‰§è¡Œä¸€æ¬¡ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">wait_time = constant_throughput(<span class="hljs-number">0.1</span>)<br></code></pre></td></tr></table></figure><p>constant_pacingï¼šè¿”å›ä¸€ä¸ªè·Ÿè¸ªä»»åŠ¡è¿è¡Œæ—¶é—´çš„å‡½æ•°ï¼Œæ¯æ¬¡è°ƒç”¨æ—¶å®ƒå°†è¿”å›ä¸€ä¸ªç­‰å¾…æ—¶é—´ï¼Œè¯¥ç­‰å¾…æ—¶é—´å°†å°è¯•ä½¿ä»»åŠ¡æ‰§è¡Œä¹‹é—´çš„æ€»æ—¶é—´ç­‰äº wait_time å‚æ•°æŒ‡å®šçš„æ—¶é—´ã€‚</p><p>åº”ç”¨åœºæ™¯ï¼š</p><p>   æ¨¡æ‹ŸçœŸå®ç”¨æˆ·è¡Œä¸ºï¼š</p><pre><code class="hljs">å½“è¿›è¡Œæ€§èƒ½æµ‹è¯•æ—¶ï¼Œæœ‰æ—¶éœ€è¦æ¨¡æ‹ŸçœŸå®ç”¨æˆ·çš„æ“ä½œè¡Œä¸ºã€‚è¿™äº›ç”¨æˆ·è¡Œä¸ºå¯èƒ½ä¸æ˜¯å‡åŒ€åˆ†å¸ƒçš„ï¼Œä½†æŸäº›ç‰¹å®šè¡Œä¸ºï¼ˆå¦‚å®šæœŸæŸ¥è¯¢ã€å®šæ—¶ä»»åŠ¡ç­‰ï¼‰éœ€è¦æŒ‰ç…§å›ºå®šçš„æ—¶é—´é—´éš”æ¥æ‰§è¡Œã€‚ä½¿ç”¨ constant_pacing å¯ä»¥ç¡®ä¿è¿™äº›ä»»åŠ¡æŒ‰ç…§é¢„å®šçš„æ—¶é—´é—´éš”æ‰§è¡Œï¼Œä»è€Œæ›´å‡†ç¡®åœ°æ¨¡æ‹ŸçœŸå®ç”¨æˆ·çš„è¡Œä¸ºã€‚</code></pre><p>  ç³»ç»Ÿç¨³å®šæ€§æµ‹è¯•ï¼š</p><pre><code class="hljs">åœ¨æµ‹è¯•ç³»ç»Ÿçš„ç¨³å®šæ€§æ—¶ï¼Œå¯èƒ½éœ€è¦é•¿æ—¶é—´è¿è¡Œä»»åŠ¡ï¼Œå¹¶è§‚å¯Ÿç³»ç»Ÿåœ¨ä¸åŒè´Ÿè½½ä¸‹çš„è¡¨ç°ã€‚ä½¿ç”¨ constant_pacing å¯ä»¥ç¡®ä¿ä»»åŠ¡ä»¥æ’å®šçš„é—´éš”æ‰§è¡Œï¼Œä»è€ŒæŒç»­å‘ç³»ç»Ÿæ–½åŠ ç¨³å®šçš„è´Ÿè½½ï¼Œå¸®åŠ©å‘ç°æ½œåœ¨çš„ç¨³å®šæ€§å’Œæ€§èƒ½é—®é¢˜ã€‚</code></pre><p>  èµ„æºåˆ†é…å’Œé™åˆ¶ï¼š</p><pre><code class="hljs">åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œå¯èƒ½éœ€è¦é™åˆ¶ç³»ç»Ÿèµ„æºçš„ä½¿ç”¨ï¼Œä»¥ç¡®ä¿ä¸ä¼šè¶…å‡ºç‰¹å®šçš„é™åˆ¶ã€‚ä¾‹å¦‚ï¼Œåœ¨æµ‹è¯•ä¸€ä¸ªAPIæ¥å£æ—¶ï¼Œå¯èƒ½éœ€è¦é™åˆ¶æ¯åˆ†é’Ÿçš„è¯·æ±‚æ•°ä»¥é¿å…å¯¹åç«¯æœåŠ¡é€ æˆè¿‡å¤§çš„å‹åŠ›ã€‚è™½ç„¶ constant_throughput å¯ä»¥ç”¨æ¥æ§åˆ¶æ¯ç§’çš„è¯·æ±‚æ•°ï¼Œä½† constant_pacing å¯ä»¥æä¾›æ›´ç»†ç²’åº¦çš„æ§åˆ¶ï¼Œç¡®ä¿è¯·æ±‚æŒ‰ç…§ç‰¹å®šçš„æ—¶é—´é—´éš”å‘é€ï¼Œä»è€Œæ›´æœ‰æ•ˆåœ°ç®¡ç†èµ„æºä½¿ç”¨ã€‚</code></pre><p>  å®šæ—¶ä»»åŠ¡çš„æ€§èƒ½æµ‹è¯•ï¼š</p><pre><code class="hljs">è®¸å¤šç³»ç»Ÿéƒ½åŒ…å«å®šæ—¶ä»»åŠ¡ï¼Œè¿™äº›ä»»åŠ¡éœ€è¦æŒ‰ç…§é¢„å®šçš„æ—¶é—´é—´éš”æ‰§è¡Œã€‚åœ¨è¿›è¡Œè¿™äº›å®šæ—¶ä»»åŠ¡çš„æ€§èƒ½æµ‹è¯•æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ constant_pacing æ¥æ¨¡æ‹Ÿå®šæ—¶ä»»åŠ¡çš„æ‰§è¡Œé—´éš”ï¼Œå¹¶è¯„ä¼°ç³»ç»Ÿåœ¨ä¸åŒè´Ÿè½½ä¸‹çš„æ€§èƒ½è¡¨ç°ã€‚</code></pre><p>  å®æ—¶æ•°æ®æ”¶é›†å’Œå¤„ç†ï¼š</p><p>   å¯¹äºéœ€è¦å®æ—¶æ”¶é›†å’Œå¤„ç†æ•°æ®çš„ç³»ç»Ÿï¼ˆå¦‚ç›‘æ§ç³»ç»Ÿã€æ—¥å¿—åˆ†æç³»ç»Ÿç­‰ï¼‰ï¼Œå¯èƒ½éœ€è¦æŒ‰ç…§å›ºå®šçš„æ—¶é—´é—´éš”æ¥æ‰§è¡Œæ•°æ®æ”¶é›†å’Œå¤„ç†ä»»åŠ¡ã€‚ä½¿ç”¨ </p><p>   constant_pacing å¯ä»¥ç¡®ä¿è¿™äº›ä»»åŠ¡æŒ‰ç…§é¢„å®šçš„æ—¶é—´é—´éš”æ‰§è¡Œï¼Œä»è€Œç¡®ä¿æ•°æ®çš„å‡†ç¡®æ€§å’Œå®æ—¶æ€§ã€‚</p><p>æ€»çš„æ¥è¯´ï¼Œconstant_pacing é€‚ç”¨äºé‚£äº›éœ€è¦ç²¾ç¡®æ§åˆ¶ä»»åŠ¡æ‰§è¡Œé—´éš”çš„åœºæ™¯ï¼Œæ— è®ºæ˜¯åœ¨æ€§èƒ½æµ‹è¯•ã€èµ„æºåˆ†é…è¿˜æ˜¯å®æ—¶æ•°æ®å¤„ç†ä¸­éƒ½å¯ä»¥å‘æŒ¥å…¶ç‹¬ç‰¹çš„ä½œç”¨ã€‚</p><p>å¯ä»¥ç†è§£ä¸ºï¼šå°±åƒä¸€ä¸ªå®šæ—¶å™¨ä¸€æ · ä»–ä¸å…³å¿ƒä½ å…·ä½“è¿”å›äº†æ²¡æœ‰ åˆ°äº†ç‚¹å°±è¦æ‰§è¡Œ</p><p>æ— è®ºä»»åŠ¡æ‰§è¡Œæ—¶é—´å¦‚ä½•ï¼Œä»»åŠ¡å°†å§‹ç»ˆæ¯ 10 ç§’æ‰§è¡Œä¸€æ¬¡ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">wait_time = constant_pacing(<span class="hljs-number">10</span>)<br></code></pre></td></tr></table></figure><h3 id="HttpUser"><a href="#HttpUser" class="headerlink" title="HttpUser"></a>HttpUser</h3><p> HttpUseræ¯ä¸ªç”¨æˆ·æä¾›ä¸€ä¸ªclientå±æ€§ï¼Œå³ çš„ä¸€ä¸ªå®ä¾‹HttpSessionï¼Œå¯ç”¨äºå‘æˆ‘ä»¬æƒ³è¦åŠ è½½æµ‹è¯•çš„ç›®æ ‡ç³»ç»Ÿå‘å‡º HTTP è¯·æ±‚ã€‚</p><p> HttpUseré‡Œé¢ä¹Ÿæ˜¯å°è£…äº†ä¸€ç³»åˆ—çš„è¯·æ±‚æ–¹å¼ï¼Œä¾‹å¦‚ POST, GET , DELETE, PUT ç­‰ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æµ‹è¯•å¼€å‘å·¥å…·/æ¡†æ¶</category>
      
      <category>Locust</category>
      
      <category>Locust Fileç¼–å†™</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Locust</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Locust å…¥é—¨å®‰è£…åŠç•Œé¢ä»‹ç»</title>
    <link href="/2024/06/27/locust%E5%AD%A6%E4%B9%A0/"/>
    <url>/2024/06/27/locust%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<h1 id="Locust-å…¥é—¨å®‰è£…åŠç•Œé¢ä»‹ç»"><a href="#Locust-å…¥é—¨å®‰è£…åŠç•Œé¢ä»‹ç»" class="headerlink" title="Locust å…¥é—¨å®‰è£…åŠç•Œé¢ä»‹ç»"></a>Locust å…¥é—¨å®‰è£…åŠç•Œé¢ä»‹ç»</h1><h2 id="ä»€ä¹ˆæ˜¯-Locustï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Locustï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Locustï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ Locustï¼Ÿ</h2><p>Locust æ˜¯ä¸€æ¬¾é’ˆå¯¹ HTTP å’Œå…¶ä»–åè®®çš„å¼€æºæ€§èƒ½&#x2F;è´Ÿè½½æµ‹è¯•å·¥å…·ï¼Œ ç›¸æ¯”äºJmeter æˆ–è€… LoadRunner æ¥è¯´ç›¸å¯¹æ›´åŠ è½»ä¾¿ï¼Œåœ¨å•æœºä¸‹çš„æ€§èƒ½æ›´åŠ å¼ºæ‚ï¼</p><p>Locust æµ‹è¯•å¯é€šè¿‡å‘½ä»¤è¡Œæˆ–åŸºäº Web çš„ UI è¿è¡Œã€‚å¯ä»¥å®æ—¶æŸ¥çœ‹ååé‡ã€å“åº”æ—¶é—´å’Œé”™è¯¯ï¼Œå¹¶&#x2F;æˆ–å¯¼å‡ºä»¥ä¾›æ—¥ååˆ†æã€‚</p><p>ä¹Ÿå¯ä»¥å°†å¸¸è§„ Python åº“å¯¼å…¥åˆ°æµ‹è¯•ä¸­ï¼Œå€ŸåŠ© Locust çš„å¯æ’å…¥å¼æ¶æ„ï¼Œå®ƒå¯ä»¥æ— é™æ‰©å±•ã€‚ä¸ä½¿ç”¨å¤§å¤šæ•°å…¶ä»–å·¥å…·ä¸åŒï¼Œæ‚¨çš„æµ‹è¯•è®¾è®¡æ°¸è¿œä¸ä¼šå—åˆ° GUI æˆ–ç‰¹å®šé¢†åŸŸè¯­è¨€çš„é™åˆ¶ã€‚</p><p>ä»–ä¹‹æ‰€ä»¥æ€§èƒ½å¼ºæ‚æ˜¯å› ä¸ºLocust å¯è½»æ¾åœ¨å¤šå°æœºå™¨ä¸Šåˆ†å¸ƒè¿è¡Œè´Ÿè½½æµ‹è¯•ã€‚å®ƒåŸºäºäº‹ä»¶ï¼ˆä½¿ç”¨geventï¼‰ï¼Œè¿™ä½¿å¾—å•ä¸ªè¿›ç¨‹å¯ä»¥å¤„ç†æ•°åƒä¸ªå¹¶å‘ç”¨æˆ·ã€‚è™½ç„¶å¯èƒ½è¿˜æœ‰å…¶ä»–å·¥å…·èƒ½å¤Ÿåœ¨ç»™å®šç¡¬ä»¶ä¸Šæ¯ç§’å¤„ç†æ›´å¤šè¯·æ±‚ï¼Œä½† Locust æ¯ä¸ªç”¨æˆ·çš„ä½å¼€é”€ä½¿å…¶éå¸¸é€‚åˆæµ‹è¯•é«˜åº¦å¹¶å‘çš„å·¥ä½œè´Ÿè½½ã€‚</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pip3 install locust<br></code></pre></td></tr></table></figure><h2 id="éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ"><a href="#éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ" class="headerlink" title="éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ"></a>éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">locust -V<br>locust <span class="hljs-number">2.29</span><span class="hljs-number">.1</span> <span class="hljs-keyword">from</span> /usr/local/lib/python3<span class="hljs-number">.10</span>/site-packages/locust (python <span class="hljs-number">3.10</span><span class="hljs-number">.6</span>)<br></code></pre></td></tr></table></figure><h2 id="locust-çš„å¯åŠ¨"><a href="#locust-çš„å¯åŠ¨" class="headerlink" title="locust çš„å¯åŠ¨"></a>locust çš„å¯åŠ¨</h2><p>å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">locust<br></code></pre></td></tr></table></figure><p>è¿è¡ŒæˆåŠŸå¯ä»¥çœ‹åˆ°</p><p>æ‰“å¼€ <a href="http://localhost:8089/">http://localhost:8089/</a></p><p>å¯ä»¥çœ‹åˆ°</p><img src="/2024/06/27/locust%E5%AD%A6%E4%B9%A0/locust%E7%95%8C%E9%9D%A2.png" class=""><p>æ­¤æ—¶å°±å·²ç»å¯åŠ¨æˆåŠŸäº†ï¼</p><h2 id="åè¯è§£é‡Š"><a href="#åè¯è§£é‡Š" class="headerlink" title="åè¯è§£é‡Š"></a>åè¯è§£é‡Š</h2><p>ç•Œé¢ä¸­çš„ Number of usersï¼šç”¨æˆ·æ•°é‡ä¹Ÿå°±æ˜¯ä½ å¹¶å‘çš„ç”¨æˆ·é‡</p><p>ç•Œé¢ä¸­çš„ Spawn rateï¼šç”¨æˆ·é‡çš„ç”Ÿæˆé€Ÿç‡æŒ‰ç§’</p><p>ç•Œé¢ä¸­çš„ Hostï¼šä¸»æœºåœ°å€ ä¹Ÿå°±æ˜¯åŸŸååœ°å€</p>]]></content>
    
    
    <categories>
      
      <category>æµ‹è¯•å¼€å‘å·¥å…·/æ¡†æ¶</category>
      
      <category>Locust</category>
      
      <category>Locust ä»‹ç»</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Locust</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>é¢è¯•é¢˜ç›®ä¹‹SQLé¢è¯•é¢˜ç›®ä¹‹å¯ä»¥ä¸¾ä¸€åä¸‰çš„SQLé—®é¢˜</title>
    <link href="/2024/06/27/SQL%E9%9D%A2%E8%AF%95%E9%A2%98%E7%9B%AE/"/>
    <url>/2024/06/27/SQL%E9%9D%A2%E8%AF%95%E9%A2%98%E7%9B%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="é¢è¯•é¢˜ç›®ä¹‹SQLé¢è¯•é¢˜ç›®å¯ä»¥ä¸¾ä¸€åä¸‰çš„SQLé—®é¢˜"><a href="#é¢è¯•é¢˜ç›®ä¹‹SQLé¢è¯•é¢˜ç›®å¯ä»¥ä¸¾ä¸€åä¸‰çš„SQLé—®é¢˜" class="headerlink" title="é¢è¯•é¢˜ç›®ä¹‹SQLé¢è¯•é¢˜ç›®å¯ä»¥ä¸¾ä¸€åä¸‰çš„SQLé—®é¢˜"></a>é¢è¯•é¢˜ç›®ä¹‹SQLé¢è¯•é¢˜ç›®å¯ä»¥ä¸¾ä¸€åä¸‰çš„SQLé—®é¢˜</h1><h1 id="ç»å…¸çš„sqlé¢˜ç›®å¯ä»¥ä¸¾ä¸€åä¸‰"><a href="#ç»å…¸çš„sqlé¢˜ç›®å¯ä»¥ä¸¾ä¸€åä¸‰" class="headerlink" title="ç»å…¸çš„sqlé¢˜ç›®å¯ä»¥ä¸¾ä¸€åä¸‰"></a>ç»å…¸çš„sqlé¢˜ç›®å¯ä»¥ä¸¾ä¸€åä¸‰</h1><p>è¡¨ç»“æ„ï¼š</p><ul><li>å­¦ç”Ÿè¡¨student(id,name)</li><li>è¯¾ç¨‹è¡¨course(id,name)</li><li>å­¦ç”Ÿæˆç»©è¡¨student_course(sid,cid,score)</li></ul><h2 id="ç¼–å†™åˆ›å»ºè¡¨çš„sql"><a href="#ç¼–å†™åˆ›å»ºè¡¨çš„sql" class="headerlink" title="ç¼–å†™åˆ›å»ºè¡¨çš„sql"></a>ç¼–å†™åˆ›å»ºè¡¨çš„sql</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> student( id <span class="hljs-type">int</span> unsigned <span class="hljs-keyword">primary</span> key auto_increment, <br>name <span class="hljs-type">char</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> ); <br><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> student(name) <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;å¼ ä¸‰&#x27;</span>),(<span class="hljs-string">&#x27;æå››&#x27;</span>); <br> <br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> course( id <span class="hljs-type">int</span> unsigned <span class="hljs-keyword">primary</span> key auto_increment, name <span class="hljs-type">char</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> ); <br><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> course(name) <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;è¯­æ–‡&#x27;</span>),(<span class="hljs-string">&#x27;æ•°å­¦&#x27;</span>);  <br><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> student_course( sid <span class="hljs-type">int</span> unsigned, cid <span class="hljs-type">int</span> unsigned, score <span class="hljs-type">int</span> unsigned <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span>, <br><span class="hljs-keyword">foreign</span> key (sid) <span class="hljs-keyword">references</span> student(id), <span class="hljs-keyword">foreign</span> key (cid) <span class="hljs-keyword">references</span> course(id), <span class="hljs-keyword">primary</span> key(sid, cid) ); <br><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> student_course <span class="hljs-keyword">values</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">80</span>),(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">90</span>),(<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">90</span>),(<span class="hljs-number">2</span>,<span class="hljs-number">2</span>,<span class="hljs-number">70</span>);<br></code></pre></td></tr></table></figure><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><h3 id="æŸ¥è¯¢studentè¡¨ä¸­é‡åçš„å­¦ç”Ÿï¼Œç»“æœåŒ…å«idå’Œnameï¼ŒæŒ‰name-idå‡åº"><a href="#æŸ¥è¯¢studentè¡¨ä¸­é‡åçš„å­¦ç”Ÿï¼Œç»“æœåŒ…å«idå’Œnameï¼ŒæŒ‰name-idå‡åº" class="headerlink" title="æŸ¥è¯¢studentè¡¨ä¸­é‡åçš„å­¦ç”Ÿï¼Œç»“æœåŒ…å«idå’Œnameï¼ŒæŒ‰name,idå‡åº"></a>æŸ¥è¯¢studentè¡¨ä¸­é‡åçš„å­¦ç”Ÿï¼Œç»“æœåŒ…å«idå’Œnameï¼ŒæŒ‰name,idå‡åº</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> id,name<br><span class="hljs-keyword">from</span> student<br><span class="hljs-keyword">where</span> name <span class="hljs-keyword">in</span> (<br><span class="hljs-keyword">select</span> name <span class="hljs-keyword">from</span> student <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> name <span class="hljs-keyword">having</span>(<span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-operator">&gt;</span> <span class="hljs-number">1</span>)<br>) <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> name;<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬ç»å¸¸éœ€è¦æŸ¥è¯¢æŸä¸€åˆ—é‡å¤çš„è¡Œï¼Œä¸€èˆ¬é€šè¿‡group by(æœ‰é‡å¤çš„åˆ—)ç„¶åå–count&gt;1çš„å€¼ã€‚ å…³ç³»å‹æ•°æ®åº“æœ‰ä»–çš„å±€é™æ€§ï¼Œ æœ‰äº›çœ‹ä¼¼ç®€å•çš„æŸ¥è¯¢å†™å‡ºæ¥çš„sqlå¾ˆå¤æ‚ï¼Œè€Œä¸”æ•ˆç‡ä¹Ÿä¼šå¾ˆä½ã€‚</p><h3 id="åœ¨student-courseè¡¨ä¸­æŸ¥è¯¢å¹³å‡åˆ†ä¸åŠæ ¼çš„å­¦ç”Ÿï¼Œåˆ—å‡ºå­¦ç”Ÿidå’Œå¹³å‡åˆ†"><a href="#åœ¨student-courseè¡¨ä¸­æŸ¥è¯¢å¹³å‡åˆ†ä¸åŠæ ¼çš„å­¦ç”Ÿï¼Œåˆ—å‡ºå­¦ç”Ÿidå’Œå¹³å‡åˆ†" class="headerlink" title="åœ¨student_courseè¡¨ä¸­æŸ¥è¯¢å¹³å‡åˆ†ä¸åŠæ ¼çš„å­¦ç”Ÿï¼Œåˆ—å‡ºå­¦ç”Ÿidå’Œå¹³å‡åˆ†"></a>åœ¨student_courseè¡¨ä¸­æŸ¥è¯¢å¹³å‡åˆ†ä¸åŠæ ¼çš„å­¦ç”Ÿï¼Œåˆ—å‡ºå­¦ç”Ÿidå’Œå¹³å‡åˆ†</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> sid,<span class="hljs-built_in">avg</span>(score) <span class="hljs-keyword">as</span> avg_score<br><span class="hljs-keyword">from</span> student_course<br><span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> sid <span class="hljs-keyword">having</span>(avg_score<span class="hljs-operator">&lt;</span><span class="hljs-number">60</span>);<br></code></pre></td></tr></table></figure><p>group byå’Œhavingæ˜¯æœ€å¸¸è€ƒçš„Â whereå­å¥ä¸­ä¸èƒ½ç”¨èšé›†å‡½æ•°ä½œä¸ºæ¡ä»¶è¡¨è¾¾å¼ï¼Œä½†æ˜¯havingçŸ­è¯­å¯ä»¥ï¼Œwhereå’Œhavingçš„åŒºåˆ«åœ¨äºå¯¹ç”¨å¯¹è±¡ä¸åŒï¼Œwhereä½œç”¨äºè®°å½•ï¼Œhavingä½œç”¨äºç»„ã€‚</p><h3 id="åœ¨student-courseè¡¨ä¸­æŸ¥è¯¢æ¯é—¨è¯¾æˆç»©éƒ½ä¸ä½äº80çš„å­¦ç”Ÿid"><a href="#åœ¨student-courseè¡¨ä¸­æŸ¥è¯¢æ¯é—¨è¯¾æˆç»©éƒ½ä¸ä½äº80çš„å­¦ç”Ÿid" class="headerlink" title="åœ¨student_courseè¡¨ä¸­æŸ¥è¯¢æ¯é—¨è¯¾æˆç»©éƒ½ä¸ä½äº80çš„å­¦ç”Ÿid"></a>åœ¨student_courseè¡¨ä¸­æŸ¥è¯¢æ¯é—¨è¯¾æˆç»©éƒ½ä¸ä½äº80çš„å­¦ç”Ÿid</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-keyword">distinct</span> sid<br><span class="hljs-keyword">from</span> student_course<br><span class="hljs-keyword">where</span> sid <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> (<br><span class="hljs-keyword">select</span> sid <span class="hljs-keyword">from</span> student_course<br><span class="hljs-keyword">where</span> score <span class="hljs-operator">&lt;</span> <span class="hljs-number">80</span>);<br></code></pre></td></tr></table></figure><p>ç”¨åˆ°åå‘æ€æƒ³ï¼Œå…¶å®å°±æ˜¯æ•°ç†é€»è¾‘ä¸­çš„âˆ€x:På’ŒÂ¬âˆƒx:Â¬Pæ˜¯ç­‰ä»·çš„ã€‚</p><h3 id="æŸ¥è¯¢æ¯ä¸ªå­¦ç”Ÿçš„æ€»æˆç»©ï¼Œç»“æœåˆ—å‡ºå­¦ç”Ÿå§“åå’Œæ€»æˆç»©-å¦‚æœä½¿ç”¨ä¸‹é¢çš„sqlä¼šè¿‡æ»¤æ‰æ²¡æœ‰æˆç»©çš„äºº"><a href="#æŸ¥è¯¢æ¯ä¸ªå­¦ç”Ÿçš„æ€»æˆç»©ï¼Œç»“æœåˆ—å‡ºå­¦ç”Ÿå§“åå’Œæ€»æˆç»©-å¦‚æœä½¿ç”¨ä¸‹é¢çš„sqlä¼šè¿‡æ»¤æ‰æ²¡æœ‰æˆç»©çš„äºº" class="headerlink" title="æŸ¥è¯¢æ¯ä¸ªå­¦ç”Ÿçš„æ€»æˆç»©ï¼Œç»“æœåˆ—å‡ºå­¦ç”Ÿå§“åå’Œæ€»æˆç»© å¦‚æœä½¿ç”¨ä¸‹é¢çš„sqlä¼šè¿‡æ»¤æ‰æ²¡æœ‰æˆç»©çš„äºº"></a>æŸ¥è¯¢æ¯ä¸ªå­¦ç”Ÿçš„æ€»æˆç»©ï¼Œç»“æœåˆ—å‡ºå­¦ç”Ÿå§“åå’Œæ€»æˆç»© å¦‚æœä½¿ç”¨ä¸‹é¢çš„sqlä¼šè¿‡æ»¤æ‰æ²¡æœ‰æˆç»©çš„äºº</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> name,<span class="hljs-built_in">sum</span>(score) total<br><span class="hljs-keyword">from</span> student,student_course<br><span class="hljs-keyword">where</span> student.id<span class="hljs-operator">=</span>student_course.sid<br><span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> sid;<br></code></pre></td></tr></table></figure><p>æ›´ä¿é™©çš„åšæ³•åº”è¯¥æ˜¯ä½¿ç”¨Â å·¦å¤–è¿æ¥</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> name,<span class="hljs-built_in">sum</span>(score)<br><span class="hljs-keyword">from</span> student <span class="hljs-keyword">left</span> <span class="hljs-keyword">join</span> student_course<br><span class="hljs-keyword">on</span> student.id<span class="hljs-operator">=</span>student_course.sid<br><span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> sid;<br></code></pre></td></tr></table></figure><h3 id="æ€»æˆç»©æœ€é«˜çš„å­¦ç”Ÿï¼Œç»“æœåˆ—å‡ºå­¦ç”Ÿidå’Œæ€»æˆç»©-ä¸‹é¢çš„sqlæ•ˆç‡å¾ˆä½ï¼Œå› ä¸ºè¦é‡å¤è®¡ç®—æ‰€æœ‰çš„æ€»æˆç»©ã€‚"><a href="#æ€»æˆç»©æœ€é«˜çš„å­¦ç”Ÿï¼Œç»“æœåˆ—å‡ºå­¦ç”Ÿidå’Œæ€»æˆç»©-ä¸‹é¢çš„sqlæ•ˆç‡å¾ˆä½ï¼Œå› ä¸ºè¦é‡å¤è®¡ç®—æ‰€æœ‰çš„æ€»æˆç»©ã€‚" class="headerlink" title="æ€»æˆç»©æœ€é«˜çš„å­¦ç”Ÿï¼Œç»“æœåˆ—å‡ºå­¦ç”Ÿidå’Œæ€»æˆç»© ä¸‹é¢çš„sqlæ•ˆç‡å¾ˆä½ï¼Œå› ä¸ºè¦é‡å¤è®¡ç®—æ‰€æœ‰çš„æ€»æˆç»©ã€‚"></a>æ€»æˆç»©æœ€é«˜çš„å­¦ç”Ÿï¼Œç»“æœåˆ—å‡ºå­¦ç”Ÿidå’Œæ€»æˆç»© ä¸‹é¢çš„sqlæ•ˆç‡å¾ˆä½ï¼Œå› ä¸ºè¦é‡å¤è®¡ç®—æ‰€æœ‰çš„æ€»æˆç»©ã€‚</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> sid,<span class="hljs-built_in">sum</span>(score) <span class="hljs-keyword">as</span> sum_score<br><span class="hljs-keyword">from</span> student_course <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> sid <span class="hljs-keyword">having</span> sum_score<span class="hljs-operator">&gt;=</span><span class="hljs-keyword">all</span><br>(<span class="hljs-keyword">select</span> <span class="hljs-built_in">sum</span>(score) <span class="hljs-keyword">from</span> student_course <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> sid);<br></code></pre></td></tr></table></figure><p>å› ä¸ºorder byä¸­å¯ä»¥ä½¿ç”¨èšé›†å‡½æ•°ï¼Œæœ€ç®€å•çš„æ–¹æ³•æ˜¯ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> sid,<span class="hljs-built_in">sum</span>(score) <span class="hljs-keyword">as</span> sum_score<br><span class="hljs-keyword">from</span> student_course <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> sid<br><span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> sum_score <span class="hljs-keyword">desc</span> limit <span class="hljs-number">1</span>;<br></code></pre></td></tr></table></figure><p>åŒç†å¯ä»¥æŸ¥æ€»æˆç»©çš„å‰ä¸‰åã€‚</p>]]></content>
    
    
    <categories>
      
      <category>é¢è¯•é¢˜ç›®æœé›†</category>
      
      <category>SQLé¢è¯•é¢˜ç›®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>SQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>é¢è¯•é¢˜ç›®æœé›†ä¹‹Python ç®—æ³•é¢˜ç›®åŠ¨æ€è§„åˆ’é—®é¢˜</title>
    <link href="/2024/06/27/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%9B%AE%E6%90%9C%E9%9B%86/"/>
    <url>/2024/06/27/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%9B%AE%E6%90%9C%E9%9B%86/</url>
    
    <content type="html"><![CDATA[<h1 id="é¢è¯•é¢˜ç›®æœé›†ä¹‹Python-ç®—æ³•é¢˜ç›®åŠ¨æ€è§„åˆ’é—®é¢˜"><a href="#é¢è¯•é¢˜ç›®æœé›†ä¹‹Python-ç®—æ³•é¢˜ç›®åŠ¨æ€è§„åˆ’é—®é¢˜" class="headerlink" title="é¢è¯•é¢˜ç›®æœé›†ä¹‹Python ç®—æ³•é¢˜ç›®åŠ¨æ€è§„åˆ’é—®é¢˜"></a>é¢è¯•é¢˜ç›®æœé›†ä¹‹Python ç®—æ³•é¢˜ç›®åŠ¨æ€è§„åˆ’é—®é¢˜</h1><h2 id="æ¥è‡ªæŸå¤§å‚"><a href="#æ¥è‡ªæŸå¤§å‚" class="headerlink" title="æ¥è‡ªæŸå¤§å‚"></a>æ¥è‡ªæŸå¤§å‚</h2><p>ä¸€ä¸ªæœºå™¨äººäººä½äºä¸€ä¸ª m x n ç½‘æ ¼çš„å·¦ä¸Šè§’ï¼ˆèµ·å§‹ç‚¹åœ¨ä¸‹å›¾ä¸­æ ‡è®°ä¸ºâ€œStartâ€ï¼‰ï¼Œæœºå™¨äººæ¯æ¬¡åªèƒ½å‘ä¸‹æˆ–è€…å‘å³ç§»åŠ¨ä¸€æ­¥ï¼Œæœºå™¨äººè¯•å›¾è¾¾åˆ°ç½‘æ ¼çš„å³ä¸‹è§’(åœ¨ä¸‹å›¾ä¸­æ ‡è®°ä¸ºâ€œFinishâ€),é—®æ€»å…±æœ‰å¤šå°‘æ¡ä¸åŒçš„è·¯å¾„ï¼Ÿ</p><h2 id="é€»è¾‘åˆ†æ"><a href="#é€»è¾‘åˆ†æ" class="headerlink" title="é€»è¾‘åˆ†æ"></a>é€»è¾‘åˆ†æ</h2><p>è¿™æ˜¯ä¸€ä¸ªç»å…¸çš„åŠ¨æ€è§„åˆ’é—®é¢˜ã€‚æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªäºŒç»´æ•°ç»„dpï¼Œå…¶ä¸­dp[i][j]è¡¨ç¤ºä»å·¦ä¸Šè§’åˆ°è¾¾(i, j)è¿™ä¸ªæ ¼å­çš„ä¸åŒè·¯å¾„æ•°é‡ã€‚</p><p>ç”±äºæœºå™¨äººåªèƒ½å‘å³æˆ–å‘ä¸‹ç§»åŠ¨ï¼Œå› æ­¤åˆ°è¾¾(i, j)çš„è·¯å¾„æ•°é‡ç­‰äºåˆ°è¾¾å…¶ä¸Šæ–¹æ ¼å­(i-1, j)çš„è·¯å¾„æ•°é‡åŠ ä¸Šåˆ°è¾¾å…¶å·¦æ–¹æ ¼å­(i, j-1)çš„è·¯å¾„æ•°é‡ã€‚</p><p>ï¼ˆi &#x3D; 0ï¼‰å’Œç¬¬ä¸€åˆ—ï¼ˆj &#x3D; 0ï¼‰çš„æ ¼å­ï¼Œç”±äºå®ƒä»¬åªèƒ½ä»ä¸€ä¸ªæ–¹å‘ï¼ˆåˆ†åˆ«æ˜¯å·¦æ–¹å’Œä¸Šæ–¹ï¼‰åˆ°è¾¾ï¼Œå› æ­¤è·¯å¾„æ•°é‡éƒ½æ˜¯1ã€‚</p><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">uniquePaths</span>(<span class="hljs-params">self, m: <span class="hljs-built_in">int</span>, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        result = [[<span class="hljs-number">1</span>] * m <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>        <span class="hljs-keyword">for</span> index1 <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n):<br>            <span class="hljs-keyword">for</span> index2 <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,m):<br>                result[index1][index2] = result[index1 - <span class="hljs-number">1</span>][index2] + result[index1][index2 - <span class="hljs-number">1</span>]<br>        output = result[-<span class="hljs-number">1</span>][-<span class="hljs-number">1</span>]<br>        <span class="hljs-keyword">return</span> output<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    re = Solution()<br>    m=<span class="hljs-number">2</span><br>    n=<span class="hljs-number">3</span><br>    result=re.uniquePaths(m,n)<br>    <span class="hljs-built_in">print</span>(result)<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>é¢è¯•é¢˜ç›®æœé›†</category>
      
      <category>Python ç®—æ³•é¢˜ç›®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pythonå¸¸è§å‡½æ•°ä¹‹RSAç®—æ³•åŠ å¯†</title>
    <link href="/2024/06/27/RSA%E5%8A%A0%E5%AF%86/"/>
    <url>/2024/06/27/RSA%E5%8A%A0%E5%AF%86/</url>
    
    <content type="html"><![CDATA[<h1 id="Pythonå¸¸è§å‡½æ•°ä¹‹RSAåŠ å¯†"><a href="#Pythonå¸¸è§å‡½æ•°ä¹‹RSAåŠ å¯†" class="headerlink" title="Pythonå¸¸è§å‡½æ•°ä¹‹RSAåŠ å¯†"></a>Pythonå¸¸è§å‡½æ•°ä¹‹RSAåŠ å¯†</h1><p>æ¥è‡ªç»´åŸºç™¾ç§‘ï¼šRSAåŠ å¯†ç®—æ³•æ˜¯ä¸€ç§éå¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œåœ¨å…¬å¼€å¯†é’¥åŠ å¯†å’Œç”µå­å•†ä¸šä¸­è¢«å¹¿æ³›ä½¿ç”¨ã€‚RSAæ˜¯ç”±ç½—çº³å¾·Â·æç»´æ–¯ç‰¹ã€é˜¿è¿ªÂ·è¨è«å°”å’Œä¼¦çº³å¾·Â·é˜¿å¾·æ›¼åœ¨1977å¹´ä¸€èµ·æå‡ºçš„ã€‚å½“æ—¶ä»–ä»¬ä¸‰äººéƒ½åœ¨éº»çœç†å·¥å­¦é™¢å·¥ä½œã€‚RSA å°±æ˜¯ä»–ä»¬ä¸‰äººå§“æ°å¼€å¤´å­—æ¯æ‹¼åœ¨ä¸€èµ·ç»„æˆçš„ã€‚</p><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> base64<br><span class="hljs-keyword">from</span> Crypto.Cipher <span class="hljs-keyword">import</span> PKCS1_v1_5 <span class="hljs-keyword">as</span> Cipher_pkcs1_v1_5<br><span class="hljs-keyword">from</span> Crypto.Signature <span class="hljs-keyword">import</span> PKCS1_v1_5<br><span class="hljs-keyword">from</span> Crypto.PublicKey <span class="hljs-keyword">import</span> RSA<br><span class="hljs-keyword">from</span> Crypto.Hash <span class="hljs-keyword">import</span> SHA<br><span class="hljs-keyword">import</span> json<br><span class="hljs-keyword">import</span> Crypto<br><span class="hljs-keyword">import</span> secrets<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">rsa_long_encrypt</span>(<span class="hljs-params">pub_key_str, msg</span>):<br>    msg = msg.encode(<span class="hljs-string">&#x27;utf-8&#x27;</span>)<br>    length = <span class="hljs-built_in">len</span>(msg)<br>    default_length = <span class="hljs-number">117</span><br>    <span class="hljs-comment">#å…¬é’¥åŠ å¯†</span><br>    pubobj = Cipher_pkcs1_v1_5.new(RSA.importKey(pub_key_str))<br>    <span class="hljs-comment">#é•¿åº¦ä¸ç”¨åˆ†æ®µ</span><br>    <span class="hljs-keyword">if</span> length &lt; default_length:<br>        <span class="hljs-keyword">return</span> base64.b64encode(pubobj.encrypt(msg))<br>    <span class="hljs-comment">#éœ€è¦åˆ†æ®µ</span><br>    offset = <span class="hljs-number">0</span><br>    res = []<br>    <span class="hljs-keyword">while</span> length - offset &gt; <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">if</span> length - offset &gt; default_length:<br>            res.append(pubobj.encrypt(msg[offset:offset+default_length]))<br>        <span class="hljs-keyword">else</span>:<br>            res.append(pubobj.encrypt(msg[offset:]))<br>        offset += default_length<br>    byte_data = <span class="hljs-string">b&#x27;&#x27;</span>.join(res)<br>    <span class="hljs-built_in">print</span>(base64.b64encode(byte_data))<br>    <span class="hljs-keyword">return</span> base64.b64encode(byte_data)<br><br>publickey = <span class="hljs-string">&#x27;your publick key&#x27;</span><br>public_key = <span class="hljs-string">&#x27;-----BEGIN PUBLIC KEY-----\n&#x27;</span>+ publickey +<span class="hljs-string">&#x27;\n-----END PUBLIC KEY-----&#x27;</span><br><br>data = &#123;<br>    <span class="hljs-string">&quot;payAmount&quot;</span>: <span class="hljs-number">1000000</span>,<br>    <span class="hljs-string">&quot;payChId&quot;</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-string">&quot;bankAssetId&quot;</span>: <span class="hljs-number">1001</span><br>&#125;<br><br>first = secrets.token_bytes(<span class="hljs-number">16</span>)<br>result = base64.b64encode(first).decode()<br><span class="hljs-built_in">print</span>(result)<br><span class="hljs-comment">#password = &#x27;password=&#x27;+result</span><br>password=<span class="hljs-string">&#x27;password=WBAPfpP5ph2MrWSOkznJGA==&#x27;</span><br><span class="hljs-built_in">print</span>(password)<br>infor = json.dumps(data)<br><span class="hljs-built_in">print</span>(infor)<br>infor=rsa_long_encrypt(public_key,password)<br><span class="hljs-built_in">print</span>(infor)<br><span class="hljs-built_in">print</span>(infor.decode(<span class="hljs-string">&#x27;utf-8&#x27;</span>))<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
      <category>Python å¸¸è§å‡½æ•°</category>
      
      <category>Python RSAç®—æ³•åŠ å¯†</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>python</tag>
      
      <tag>RSAç®—æ³•åŠ å¯†</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Fiddlerä¹‹è¿‡æ»¤åŠŸèƒ½</title>
    <link href="/2024/06/27/fillder%E8%BF%87%E6%BB%A4%E5%8A%9F%E8%83%BD/"/>
    <url>/2024/06/27/fillder%E8%BF%87%E6%BB%A4%E5%8A%9F%E8%83%BD/</url>
    
    <content type="html"><![CDATA[<h1 id="Fillderè¿‡æ»¤åŠŸèƒ½"><a href="#Fillderè¿‡æ»¤åŠŸèƒ½" class="headerlink" title="Fillderè¿‡æ»¤åŠŸèƒ½"></a>Fillderè¿‡æ»¤åŠŸèƒ½</h1><p>Fillder æ”¯æŒè¿‡æ»¤HTTPè¯·æ±‚ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ ‡è®°ä¸åŒçš„sessions èµ‹äºˆä¸åŒçš„é¢œè‰²è¿›è¡ŒåŒºåˆ†ã€‚</p><h2 id="è¿‡æ»¤sessions"><a href="#è¿‡æ»¤sessions" class="headerlink" title="è¿‡æ»¤sessions"></a>è¿‡æ»¤sessions</h2><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡Find Sessionså»å‘ç°æˆ‘ä»¬æƒ³è¦çš„sessionsä¼šä»¥é»„è‰²é«˜äº®æ˜¾ç¤ºï¼Œç„¶åå¯ä»¥è¿›è¡Œä¿å­˜Fiddlerä¸­ä¿å­˜åŒ…ï¼Œ<br>é€‰æ‹©ä½ æƒ³ä¿å­˜çš„ä¼šè¯ï¼Œç„¶åå•å‡»File-&gt;Save-&gt;Selected Sessionsï¼Œä¿å­˜åçš„æ–‡ä»¶åç¼€æ˜¯.sazã€‚</p><p>æ–‡ä»¶ä¸­ä¼šä¿å­˜å®Œæ•´çš„HTTPè¯·æ±‚å’ŒHTTPå“åº”ï¼ŒåŒå‡».sazæ–‡ä»¶ï¼Œæˆ–è€…å•å‡»Fiddlerèœå•æ ä¸­çš„File-&gt;Load Archive,å°±èƒ½æ‰“å¼€.sazæ–‡ä»¶ã€‚</p><h2 id="Fiddlerä¸­ç¼–è¾‘ä¼šè¯"><a href="#Fiddlerä¸­ç¼–è¾‘ä¼šè¯" class="headerlink" title="Fiddlerä¸­ç¼–è¾‘ä¼šè¯"></a>Fiddlerä¸­ç¼–è¾‘ä¼šè¯</h2><p>é»˜è®¤çš„æƒ…å†µä¸‹ï¼ŒFiddlerä¸­çš„sessionæ˜¯ä¸å¯ä»¥ä¿®æ”¹çš„ï¼Œé€‰æ‹©ä¸€ä¸ªsession,ç”¨é¼ æ ‡å³é”®é€‰æ‹©â€œUnlock For Editingâ€ï¼ˆå¿«æ·é”®æ˜¯[F12]),è¿™æ ·å°±å¯ä»¥åœ¨Inspectorsçš„Rawæ¨¡å¼ä¸‹ç¼–è¾‘HTTPè¯·æ±‚å“åº”</p><h2 id="è¿‡æ»¤ä¼šè¯"><a href="#è¿‡æ»¤ä¼šè¯" class="headerlink" title="è¿‡æ»¤ä¼šè¯"></a>è¿‡æ»¤ä¼šè¯</h2><p>æ¯æ¬¡å¯åŠ¨Fiddlerï¼Œæ‰“å¼€ä¸€ä¸ªç½‘é¡µï¼Œéƒ½èƒ½çœ‹åˆ°åå‡ ä¸ªä¼šè¯ï¼Œçœ‹å¾—äººçœ¼èŠ±ç¼­ä¹±ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨fiddleråŠŸèƒ½æ¥è¿‡æ»¤ã€‚<br>åœ¨Fiddlerä¸­æ‰¾åˆ°Filtersé€‰é¡¹å¡ï¼Œé€‰ä¸­â€Use Filtersâ€ï¼Œå°±å¯ä»¥å¯åŠ¨è¿‡æ»¤åŠŸèƒ½ã€‚</p><img src="/2024/06/27/fillder%E8%BF%87%E6%BB%A4%E5%8A%9F%E8%83%BD/%E8%BF%87%E6%BB%A4.png" class=""><p>Filtersçš„Actionsä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä¿å­˜å½“å‰çš„è¿‡æ»¤è®¾ç½®ï¼Œä¹Ÿå¯ä»¥åŠ è½½å·²ç»ä¿å­˜å¥½çš„è¿‡æ»¤è®¾ç½®ã€‚</p><img src="/2024/06/27/fillder%E8%BF%87%E6%BB%A4%E5%8A%9F%E8%83%BD/%E4%BF%9D%E5%AD%98%E8%BF%87%E6%BB%A4.png" class=""><h1 id="å¸¸ç”¨å¿«æ·é”®"><a href="#å¸¸ç”¨å¿«æ·é”®" class="headerlink" title="å¸¸ç”¨å¿«æ·é”®"></a>å¸¸ç”¨å¿«æ·é”®</h1><p>å¿«é€Ÿå¸®åŠ©æˆ‘ä»¬é€‰æ‹©sessionçš„å¿«æ·é”®</p><table><thead><tr><th>å¿«æ·é”®</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td>CTRL+X</td><td>åˆ é™¤æ‰€æœ‰çš„Session</td></tr><tr><td>CTRL+A</td><td>é€‰æ‹©æ‰€æœ‰çš„Session</td></tr><tr><td>ESC</td><td>ä¸é€‰æ‹©ä»»ä½•çš„Session</td></tr><tr><td>CTRL+I</td><td>åé€‰Session</td></tr><tr><td>Delete</td><td>åˆ é™¤é€‰æ‹©çš„Session</td></tr><tr><td>Shift+Delete</td><td>åˆ é™¤æœªé€‰æ‹©çš„Session</td></tr><tr><td>R</td><td>é‡æ”¾é€‰æ‹©çš„Sessionï¼ˆå¯ä»¥é‡æ”¾å¤šä¸ªSessionï¼‰</td></tr><tr><td>SHIFT+R</td><td>å¤šæ¬¡é‡æ”¾é€‰æ‹©çš„Session(éšåä¼šæç¤ºä½ è¾“å…¥ï¼Œé‡æ”¾å‡ æ¬¡)</td></tr><tr><td>U</td><td>æ— æ¡ä»¶åœ°é‡æ”¾é€‰æ‹©çš„Sessionï¼ˆä¸ä¼šå‘é€IF-Modified-Sinceå’ŒIF-None-Match Headers)</td></tr><tr><td>SHIFT+U</td><td>æ— æ¡ä»¶çš„é‡æ”¾é€‰æ‹©çš„Sessionï¼ˆéšåä¼šæç¤ºä½ è¾“å…¥ï¼Œé‡æ”¾å‡ æ¬¡)</td></tr><tr><td>P</td><td>é€‰æ‹©â€œå½“å‰Seesionâ€çš„â€çˆ¶Sessionâ€ï¼ˆè¿™ä¸ªåŠŸèƒ½å–å†³äºReferer Header)</td></tr><tr><td>C</td><td>é€‰æ‹©â€œå½“å‰Sessionâ€çš„â€å­Sessionâ€</td></tr><tr><td>D</td><td>é€‰æ‹©â€œé‡å¤çš„Sessionâ€(æœ‰ç›¸åŒçš„URLå’Œç›¸åŒçš„methodï¼‰</td></tr><tr><td>BackSpaceæˆ–é¼ æ ‡ä¸Šçš„â€Backâ€</td><td>é€‰æ‹©â€œä¸Šæ¬¡é€‰æ‹©çš„Sessionâ€</td></tr><tr><td>Insert</td><td></td></tr><tr><td>CTRL+1CTRL+2CTRL+3CTRL+4CTRL+5CTRL+6</td><td>ç”¨ç²—ä½“å’Œé¢œè‰²æ ‡è®°é€‰æ‹©çš„Session</td></tr><tr><td>M</td><td>ç»™é€‰æ‹©çš„Sessionæ·»åŠ æ³¨é‡Š</td></tr></tbody></table><h2 id="QuickExecå‘½ä»¤è¡Œçš„ä½¿ç”¨"><a href="#QuickExecå‘½ä»¤è¡Œçš„ä½¿ç”¨" class="headerlink" title="QuickExecå‘½ä»¤è¡Œçš„ä½¿ç”¨"></a>QuickExecå‘½ä»¤è¡Œçš„ä½¿ç”¨</h2><p>Fiddlerçš„å·¦ä¸‹è§’æœ‰ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·å«åšQuickExec,å…è®¸ä½ ç›´æ¥è¾“å…¥å‘½ä»¤</p><img src="/2024/06/27/fillder%E8%BF%87%E6%BB%A4%E5%8A%9F%E8%83%BD/quickseck.png" class=""><p>å¸¸è§å‘½ä»¤å¦‚ä¸‹ï¼š</p><p>help: å¤§åŠ›å®˜æ–¹çš„ä½¿ç”¨é¡µé¢çš„ä»‹ç»ï¼Œæ‰€æœ‰çš„å‘½ä»¤éƒ½ä¼šåˆ—å‡ºæ¥</p><p>Cls: æ¸…å±ï¼ˆCTRL+Xï¼‰å¿«æ·é”®ä¹Ÿå¯ä»¥æ¸…å±)</p><p>Select:é€‰æ‹©ä¼šè¯çš„å‘½ä»¤</p><p>?.png:ç”¨æ¥é€‰æ‹©.pngåç¼€çš„å›¾ç‰‡</p><p>Bpu:æ•è·request</p><p>Urlreplace:æ›¿æ¢æ‰host</p>]]></content>
    
    
    <categories>
      
      <category>æµ‹è¯•å¼€å‘å·¥å…·/æ¡†æ¶</category>
      
      <category>Fillder</category>
      
      <category>Fillder è¿‡æ»¤åŠŸèƒ½</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Fillder</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Fillderçš„Decode/Encodeå°å·¥å…·</title>
    <link href="/2024/06/27/fillder%E8%A7%A3%E7%A0%81%E5%B7%A5%E5%85%B7/"/>
    <url>/2024/06/27/fillder%E8%A7%A3%E7%A0%81%E5%B7%A5%E5%85%B7/</url>
    
    <content type="html"><![CDATA[<h1 id="Fillderçš„Decode-Encodeå°å·¥å…·"><a href="#Fillderçš„Decode-Encodeå°å·¥å…·" class="headerlink" title="Fillderçš„Decode&#x2F;Encodeå°å·¥å…·"></a>Fillderçš„Decode&#x2F;Encodeå°å·¥å…·</h1><p>å¯ä»¥é€šè¿‡å•å‡»å·¥å…·æ ä¸­çš„â€TextWizardâ€ï¼Œå°±å¯ä»¥å¯åŠ¨TextWizardå°å·¥å…·ï¼Œå¯ä»¥æ”¯æŒå¾ˆå¤šä¸åŒçš„ç®—æ³•</p><img src="/2024/06/27/fillder%E8%A7%A3%E7%A0%81%E5%B7%A5%E5%85%B7/%E8%A7%A3%E7%A0%81.png" class="">]]></content>
    
    
    <categories>
      
      <category>æµ‹è¯•å¼€å‘å·¥å…·/æ¡†æ¶</category>
      
      <category>Fillder</category>
      
      <category>Fillder çš„Decode/Encodeå°å·¥å…·</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Fillder</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Fillderæ–­ç‚¹ä¿®æ”¹HTTPæŠ¥æ–‡</title>
    <link href="/2024/06/27/fillder%E6%96%AD%E7%82%B9%E4%BF%AE%E6%94%B9HTTP%E6%8A%A5%E6%96%87/"/>
    <url>/2024/06/27/fillder%E6%96%AD%E7%82%B9%E4%BF%AE%E6%94%B9HTTP%E6%8A%A5%E6%96%87/</url>
    
    <content type="html"><![CDATA[<h1 id="Fillder-æ–­ç‚¹ä¿®æ”¹HTTPæŠ¥æ–‡"><a href="#Fillder-æ–­ç‚¹ä¿®æ”¹HTTPæŠ¥æ–‡" class="headerlink" title="Fillder æ–­ç‚¹ä¿®æ”¹HTTPæŠ¥æ–‡"></a>Fillder æ–­ç‚¹ä¿®æ”¹HTTPæŠ¥æ–‡</h1><p>Fiddlerå¯ä»¥ä¿®æ”¹ä»»ä½•HTTPè¯·æ±‚çš„ä¿¡æ¯ã€‚</p><h2 id="å…¨å±€æ–­ç‚¹"><a href="#å…¨å±€æ–­ç‚¹" class="headerlink" title="å…¨å±€æ–­ç‚¹"></a>å…¨å±€æ–­ç‚¹</h2><p>å¯åŠ¨Fiddlerï¼Œå•å‡»èœå•æ ç§çš„Rules-&gt;Automatics Breakpoint-&gt;Before Requestsï¼Œæˆ–è€…ä½¿ç”¨å¿«æ·é”®ã€F11ã€‘,è¿™ç§æ–¹æ³•ä¼šæ‹¦æˆªæ‰€æœ‰çš„å¯¹è¯ã€‚</p><img src="/2024/06/27/fillder%E6%96%AD%E7%82%B9%E4%BF%AE%E6%94%B9HTTP%E6%8A%A5%E6%96%87/%E5%85%A8%E5%B1%80%E6%96%AD%E7%82%B9.png" class=""><p>æƒ³è¦å–æ¶ˆå…¨å±€æ–­ç‚¹ï¼Œå¯ä»¥å•å‡»Rules-&gt;Automatic Breakpoint -&gt; Disabledï¼Œæˆ–è€…å¿«æ·é”®ã€shift+F11ã€‘ã€‚</p><h2 id="å•ä¸ªæ–­ç‚¹"><a href="#å•ä¸ªæ–­ç‚¹" class="headerlink" title="å•ä¸ªæ–­ç‚¹"></a>å•ä¸ªæ–­ç‚¹</h2><p>å·²çŸ¥æŸä¸ªè¯·æ±‚URLåœ°å€ï¼Œè¿™ä¸ªæ—¶å€™åªéœ€è¦é’ˆå¯¹ä¸€ä¸ªè¯·æ±‚æ‰“æ–­ç‚¹è°ƒè¯•ï¼Œå…¶ä»–çš„è¯·æ±‚ä¸æ‹¦æˆªã€‚</p><p>åœ¨fiddler å·¦ä¸‹è§’çš„QuickExecå‘½ä»¤ä¸­è¾“å…¥å‘½ä»¤â€ bpuÂ  æ‹¦æˆªçš„ç½‘å€â€œå°±å¯ä»¥å®ç°æ‹¦æˆªæ•ˆæœ,å–ä¿®æ”¹æ‹¦æˆªçš„ä¿¡æ¯ã€‚</p><img src="/2024/06/27/fillder%E6%96%AD%E7%82%B9%E4%BF%AE%E6%94%B9HTTP%E6%8A%A5%E6%96%87/%E5%8D%95%E4%B8%AA%E6%96%AD%E7%82%B9.png" class=""><h2 id="Fiddlerä¿®æ”¹HTTPè¯·æ±‚"><a href="#Fiddlerä¿®æ”¹HTTPè¯·æ±‚" class="headerlink" title="Fiddlerä¿®æ”¹HTTPè¯·æ±‚"></a>Fiddlerä¿®æ”¹HTTPè¯·æ±‚</h2><img src="/2024/06/27/fillder%E6%96%AD%E7%82%B9%E4%BF%AE%E6%94%B9HTTP%E6%8A%A5%E6%96%87/%E4%BF%AE%E6%94%B9HTTP%E6%8A%A5%E6%96%87.png" class=""><p>å¦‚æœæƒ³ç»§ç»­æ‹¦æˆªå¯ä»¥ç‚¹å‡»é»„è‰²æŒ‰é’®â€Break on Responseâ€è¿™ä¸ªæŒ‰é’®ï¼Œä¼šç»§ç»­æ‹¦æˆªè¿™ä¸ªHTTPè¯·æ±‚çš„å“åº”ã€‚</p><p>Fiddlerä¸­è®¾ç½®æ–­ç‚¹ä¿®æ”¹HTTPå“åº” ç”¨æ³•åŒä¸Šè¿°å…¨å±€æ–­ç‚¹ï¼Œ å•ä¸ªæ–­ç‚¹<br>Â <br>ç¬¬ä¸€ç§æ˜¯å…¨å±€æ–­ç‚¹ï¼Œå¯åŠ¨fiddlerï¼Œå•å‡»Rulers-&gt;Automatic Breakpoint-&gt;After Responseè¿™ç§æ–¹æ³•ä¼šä¸­æ–­æ‰€æœ‰çš„ä¼šè¯ã€‚<br>æƒ³è¦å–æ¶ˆæ–­ç‚¹ ï¼Œå¯ä»¥å•å‡»Rules-&gt;Automatic Breakpoint-&gt;Disabledã€‚<br>ç¬¬äºŒç§æ˜¯å•ä¸ªæ–­ç‚¹ï¼Œåœ¨å‘½ä»¤è¡Œâ€œbpafter <a href="http://www.baidu.comâ€/">www.baidu.comâ€</a> è¿™ç§æ–¹æ³•åªä¼šä¸­æ–­<a href="http://www.baidu.com./">www.baidu.comã€‚</a><br>æƒ³è¦æ¶ˆé™¤å•ä¸ªæ–­ç‚¹ï¼Œå¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥å‘½ä»¤â€bpafterâ€ã€‚</p><h2 id="ä¼ªé€ Referer"><a href="#ä¼ªé€ Referer" class="headerlink" title="ä¼ªé€ Referer"></a>ä¼ªé€ Referer</h2><img src="/2024/06/27/fillder%E6%96%AD%E7%82%B9%E4%BF%AE%E6%94%B9HTTP%E6%8A%A5%E6%96%87/%E4%BF%AE%E6%94%B9refer.png" class=""><p>æ‹¦æˆªåæˆ‘ä»¬å¯ä»¥åœ¨Rawä¸­å†™å…¥Refereï¼šww.dddddr.cnå°±å¯ä»¥Â </p>]]></content>
    
    
    <categories>
      
      <category>æµ‹è¯•å¼€å‘å·¥å…·/æ¡†æ¶</category>
      
      <category>Fillder</category>
      
      <category>Fillder æ–­ç‚¹ä¿®æ”¹HTTPæŠ¥æ–‡</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Fillder</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Fillderç®€å•çš„æ€§èƒ½æµ‹è¯•</title>
    <link href="/2024/06/27/fillder%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/"/>
    <url>/2024/06/27/fillder%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/</url>
    
    <content type="html"><![CDATA[<h1 id="Fillder-ç®€å•çš„æ€§èƒ½æµ‹è¯•"><a href="#Fillder-ç®€å•çš„æ€§èƒ½æµ‹è¯•" class="headerlink" title="Fillder ç®€å•çš„æ€§èƒ½æµ‹è¯•"></a>Fillder ç®€å•çš„æ€§èƒ½æµ‹è¯•</h1><h2 id="é€šè¿‡æŸ¥çœ‹statisticsé¢æ¿æŸ¥çœ‹"><a href="#é€šè¿‡æŸ¥çœ‹statisticsé¢æ¿æŸ¥çœ‹" class="headerlink" title="é€šè¿‡æŸ¥çœ‹statisticsé¢æ¿æŸ¥çœ‹"></a>é€šè¿‡æŸ¥çœ‹statisticsé¢æ¿æŸ¥çœ‹</h2><img src="/2024/06/27/fillder%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/fillder%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95.png" class=""><p>æˆ‘ä»¬æ‰“å¼€ä¸€ä¸ªç½‘é¡µçš„è¯·æ±‚ï¼Œé€šè¿‡æŸ¥çœ‹Statisticsé¢æ¿å¯ä»¥æ¸…æ¥šçš„çœ‹åˆ°æ¯ä¸ªHTTPè¯·æ±‚çš„å“åº”æ—¶é—´ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æµ‹è¯•å¼€å‘å·¥å…·/æ¡†æ¶</category>
      
      <category>Fillder</category>
      
      <category>Fillder ç®€å•çš„æ€§èƒ½æµ‹è¯•</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Fillder</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pythonå¸¸è§å‡½æ•°ä¹‹ pythonæ—¶é—´æˆ³</title>
    <link href="/2024/06/27/python%E6%97%B6%E9%97%B4%E6%88%B3/"/>
    <url>/2024/06/27/python%E6%97%B6%E9%97%B4%E6%88%B3/</url>
    
    <content type="html"><![CDATA[<h1 id="Pythonå¸¸è§å‡½æ•°ä¹‹-Python-æ—¶é—´æˆ³"><a href="#Pythonå¸¸è§å‡½æ•°ä¹‹-Python-æ—¶é—´æˆ³" class="headerlink" title="Pythonå¸¸è§å‡½æ•°ä¹‹ Python æ—¶é—´æˆ³"></a>Pythonå¸¸è§å‡½æ•°ä¹‹ Python æ—¶é—´æˆ³</h1><p>æ¥è‡ªç™¾åº¦ç™¾ç§‘ï¼š æ—¶é—´æˆ³ï¼Œæ˜¯æŒ‡ç”¨æˆ·åº”ç”¨æ•°å­—ç­¾åæŠ€æœ¯æ—¶ï¼Œäº§ç”Ÿçš„æ¶µç›–åŸå§‹æ–‡ä»¶ä¿¡æ¯ã€ç­¾åæ—¶é—´ã€ç­¾åå‚æ•°ç­‰ä¿¡æ¯ã€‚ å…¶ä¸»è¦ç›®çš„æ˜¯åœ¨äºï¼Œèƒ½å¤Ÿé€šè¿‡ä¸€å®šçš„æŠ€æœ¯æ‰‹æ®µè®¤è¯æ•°æ®äº§ç”Ÿçš„æ—¶é—´ï¼Œä»è€Œå¾—çŸ¥è¿™æ®µæ•°æ®åœ¨äº§ç”Ÿä¹‹åï¼Œæ˜¯å¦æœ‰è¢«ç¯¡æ”¹ã€‚</p><p>ä¸ªäººç›®å‰æ¥è§¦åˆ°ä½¿ç”¨é¢†åŸŸï¼šåœ¨åšå…¨çƒåŒ–äº§å“çš„æ—¶å€™ä¾èµ–äºæ—¶é—´æˆ³åœ¨ä¸åŒæ—¶åŒºè¿›è¡Œå±•ç¤º</p><h2 id="time-æ—¶é—´æˆ³ç­‰ç›¸å…³è½¬æ¢"><a href="#time-æ—¶é—´æˆ³ç­‰ç›¸å…³è½¬æ¢" class="headerlink" title="time æ—¶é—´æˆ³ç­‰ç›¸å…³è½¬æ¢"></a>time æ—¶é—´æˆ³ç­‰ç›¸å…³è½¬æ¢</h2><h3 id="datetimeä¸æ—¶é—´æˆ³æ ¼å¼ç›¸äº’è½¬æ¢"><a href="#datetimeä¸æ—¶é—´æˆ³æ ¼å¼ç›¸äº’è½¬æ¢" class="headerlink" title="datetimeä¸æ—¶é—´æˆ³æ ¼å¼ç›¸äº’è½¬æ¢"></a>datetimeä¸æ—¶é—´æˆ³æ ¼å¼ç›¸äº’è½¬æ¢</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> datetime<br><span class="hljs-keyword">import</span> time<br><br><span class="hljs-comment"># å°†datetimeè½¬æ¢ä¸ºunixæ—¶é—´æˆ³</span><br>dtime = datetime.date.today()<br>unix_time = time.mktime(dtime.timetuple())<br><span class="hljs-built_in">print</span>(dtime, unix_time)   <span class="hljs-comment"># 2019-09-02 1567353600.0</span><br><br><span class="hljs-comment"># å°†unixæ—¶é—´æˆ³è½¬æ¢æˆdatetime</span><br>dtime2 = datetime.datetime.fromtimestamp(unix_time)<br><span class="hljs-built_in">print</span>(dtime2)<br><span class="hljs-number">1234567891011</span><br></code></pre></td></tr></table></figure><h3 id="æ ¹æ®æ—¶é—´å·®è·å¾—æ—¶é—´"><a href="#æ ¹æ®æ—¶é—´å·®è·å¾—æ—¶é—´" class="headerlink" title="æ ¹æ®æ—¶é—´å·®è·å¾—æ—¶é—´"></a>æ ¹æ®æ—¶é—´å·®è·å¾—æ—¶é—´</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">yestoday = datetime.date.today() + datetime.timedelta(days=-<span class="hljs-number">1</span>)  <span class="hljs-comment"># days=-1ï¼Œä»£è¡¨æ˜¨å¤©ï¼Œ-2ä»£è¡¨å‰å¤©ï¼Œ1ä»£è¡¨æ˜å¤©...</span><br></code></pre></td></tr></table></figure><h3 id="datetime-æ ¼å¼ä¸å­—ç¬¦ä¸²æ ¼å¼çš„ç›¸äº’è½¬æ¢"><a href="#datetime-æ ¼å¼ä¸å­—ç¬¦ä¸²æ ¼å¼çš„ç›¸äº’è½¬æ¢" class="headerlink" title="datetime æ ¼å¼ä¸å­—ç¬¦ä¸²æ ¼å¼çš„ç›¸äº’è½¬æ¢"></a>datetime æ ¼å¼ä¸å­—ç¬¦ä¸²æ ¼å¼çš„ç›¸äº’è½¬æ¢</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># datetime æ ¼å¼ä¸å­—ç¬¦ä¸²æ ¼å¼çš„ç›¸äº’è½¬æ¢</span><br>today_str =datetime.date.today().strftime(<span class="hljs-string">&quot;%Y-%m-%d&quot;</span>)  <span class="hljs-comment"># è½¬æ¢ä¸ºå­—ç¬¦ä¸²</span><br>today_datetime = datetime.datetime.strptime(<span class="hljs-string">&quot;2019-09-01 00:00:00&quot;</span>, <span class="hljs-string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>)  <span class="hljs-comment"># è½¬æ¢ä¸ºdatetime</span><br><span class="hljs-built_in">print</span>(today_str,<span class="hljs-built_in">type</span>(today_str)) <br><span class="hljs-built_in">print</span>(today_datetime,<span class="hljs-built_in">type</span>(today_datetime))<br><span class="hljs-number">12345</span><br></code></pre></td></tr></table></figure><h3 id="å®šæ—¶æ—¶é—´è¡¨"><a href="#å®šæ—¶æ—¶é—´è¡¨" class="headerlink" title="å®šæ—¶æ—¶é—´è¡¨"></a>å®šæ—¶æ—¶é—´è¡¨</h3><p>æ¯”å¦‚è·å¾—24ä¸ªå°æ—¶çš„åˆ—è¡¨ï¼ˆä»¥ä¸‹æ˜¯æ¯éš”åŠä¸ªå°æ—¶ï¼‰</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_time_list</span>(<span class="hljs-params">self</span>):<br>     start_time = datetime.datetime.strptime(<span class="hljs-string">&quot;2019-08-28 14:00:00&quot;</span>, <span class="hljs-string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>)<br>     unix_start_time = time.mktime(start_time.timetuple())  <span class="hljs-comment"># è½¬æ¢æˆæ—¶é—´æˆ³</span><br>     un_timelist = [(unix_start_time+i) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-number">86400</span>+<span class="hljs-number">1</span>, <span class="hljs-number">1800</span>)]  <br>     timelist = [datetime.datetime.fromtimestamp(un_time) <span class="hljs-keyword">for</span> un_time <span class="hljs-keyword">in</span> un_timelist]  <span class="hljs-comment"># å†è½¬æ¢æˆdatetimeæ ¼å¼</span><br>     <span class="hljs-keyword">return</span> timelist<br></code></pre></td></tr></table></figure><h3 id="å„ä¸ªçº§åˆ«çš„æ—¶é—´æˆ³è·å–"><a href="#å„ä¸ªçº§åˆ«çš„æ—¶é—´æˆ³è·å–" class="headerlink" title="å„ä¸ªçº§åˆ«çš„æ—¶é—´æˆ³è·å–"></a>å„ä¸ªçº§åˆ«çš„æ—¶é—´æˆ³è·å–</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">import</span> datetime<br><br>original=time.time()   <span class="hljs-comment"># åŸå§‹æ—¶é—´æˆ³</span><br>Secondlevel =<span class="hljs-built_in">int</span>(original)       <span class="hljs-comment"># ç§’çº§åˆ«æ—¶é—´æˆ³</span><br>millisecondlevel=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">round</span>(original*<span class="hljs-number">1000</span>)   <span class="hljs-comment"># æ¯«ç§’çº§åˆ«æ—¶é—´æˆ³</span><br>microsecondlevel=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">round</span>(original*<span class="hljs-number">1000000</span>)  <span class="hljs-comment"># å¾®ç§’çº§åˆ«æ—¶é—´æˆ³</span><br></code></pre></td></tr></table></figure><h3 id="æ¯«ç§’çº§åˆ«æ—¶é—´æˆ³è½¬æ¢æ—¶é—´"><a href="#æ¯«ç§’çº§åˆ«æ—¶é—´æˆ³è½¬æ¢æ—¶é—´" class="headerlink" title="æ¯«ç§’çº§åˆ«æ—¶é—´æˆ³è½¬æ¢æ—¶é—´"></a>æ¯«ç§’çº§åˆ«æ—¶é—´æˆ³è½¬æ¢æ—¶é—´</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> time<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">timeStamp</span>(<span class="hljs-params">timeNum</span>):<br>    timeStamp = <span class="hljs-built_in">float</span>(timeNum / <span class="hljs-number">1000</span>)<br>    timeArray = time.localtime(timeStamp)<br>    otherStyleTime = time.strftime(<span class="hljs-string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>, timeArray)<br>    <span class="hljs-built_in">print</span>(otherStyleTime)<br><br><br>timeStamp(<span class="hljs-number">1622674800000</span>)  <span class="hljs-comment"># 2021-06-02 23:00:00</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
      <category>Python å¸¸è§å‡½æ•°</category>
      
      <category>Python æ—¶é—´æˆ³å‡½æ•°</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>python</tag>
      
      <tag>python æ—¶é—´æˆ³</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2024å¹´ç¬¬äºŒæ¬¡åœ¨åŒ—äº¬å‚åŠ æ²¹è½¦æ‘‡å·</title>
    <link href="/2024/06/27/%E9%9A%8F%E7%AC%94/"/>
    <url>/2024/06/27/%E9%9A%8F%E7%AC%94/</url>
    
    <content type="html"><![CDATA[<h1 id="2024å¹´ç¬¬äºŒæ¬¡åœ¨åŒ—äº¬å‚åŠ æ²¹è½¦æ‘‡å·"><a href="#2024å¹´ç¬¬äºŒæ¬¡åœ¨åŒ—äº¬å‚åŠ æ²¹è½¦æ‘‡å·" class="headerlink" title="2024å¹´ç¬¬äºŒæ¬¡åœ¨åŒ—äº¬å‚åŠ æ²¹è½¦æ‘‡å·"></a>2024å¹´ç¬¬äºŒæ¬¡åœ¨åŒ—äº¬å‚åŠ æ²¹è½¦æ‘‡å·</h1><p>æˆ‘æ˜¯ä»2023å¹´æ‰æ»¡è¶³äº†å‚åŠ åŒ—äº¬æ‘‡å·çš„èµ„æ ¼ï¼Œä¸¤æ¬¡ç»“æœå¯èƒ½ä¸ç”¨æƒ³ä¹ŸçŸ¥é“æ²¡ä¸­ï¼Œçœ‹ç€åŒ—äº¬æ‘‡å·è´´å§å“ªäº›äººåœ¨ç–¯ç‹‚åæ§½è¿™äº›æ‘‡å·æ”¿ç­–ï¼Œæˆ‘å¿ƒé‡Œåªæƒ³å“ï¼Œè¿™ç ´äº¬ç‰Œæœ‰å•¥ç”¨ï¼</p><p>ç„¶åè½¬å¤´å°±è®¸æ„¿ 2024ä¸‹åŠå¹´è®©æˆ‘ä¸­ï¼ğŸ˜‚ğŸ˜‚ğŸ˜‚</p><img src="/2024/06/27/%E9%9A%8F%E7%AC%94/%E4%B8%AD%E7%AD%BE.jpeg" class="">]]></content>
    
    
    <categories>
      
      <category>éšç¬”</category>
      
      <category>2024å¹´éšç¬”</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>éšç¬”</tag>
      
      <tag>ç”Ÿæ´»</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pythonå¸¸è§å‡½æ•°ä¹‹ iså’Œ==çš„åŒºåˆ«</title>
    <link href="/2024/06/27/is%E5%92%8C==%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
    <url>/2024/06/27/is%E5%92%8C==%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
    
    <content type="html"><![CDATA[<h1 id="python-å¸¸è§å‡½æ•°ä¹‹-is-ä¸-çš„åŒºåˆ«"><a href="#python-å¸¸è§å‡½æ•°ä¹‹-is-ä¸-çš„åŒºåˆ«" class="headerlink" title="python å¸¸è§å‡½æ•°ä¹‹ is ä¸ &#x3D;&#x3D; çš„åŒºåˆ«"></a>python å¸¸è§å‡½æ•°ä¹‹ is ä¸ &#x3D;&#x3D; çš„åŒºåˆ«</h1><h2 id="is"><a href="#is" class="headerlink" title="is"></a>is</h2><p>is æ¯”è¾ƒ id()</p><h2 id=""><a href="#" class="headerlink" title="&#x3D;&#x3D;"></a>&#x3D;&#x3D;</h2><p>&#x3D;&#x3D; æ¯”è¾ƒ å˜é‡å€¼</p><h2 id="ä»£ç è§£é‡Š"><a href="#ä»£ç è§£é‡Š" class="headerlink" title="ä»£ç è§£é‡Š"></a>ä»£ç è§£é‡Š</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># is, æœ¬è´¨ id(a) ä¸ id(b) æ¯”è¾ƒ</span><br><span class="hljs-comment"># = å³è¾¹ä¸ºå¯¹è±¡æ—¶ï¼Œè¡¨ç¤ºç”Ÿæˆæ–°å¯¹è±¡ </span><br><br>a = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>] <br>b = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>] <br><span class="hljs-built_in">print</span>(a <span class="hljs-keyword">is</span> b)   <span class="hljs-comment"># False, è¯´æ˜ id ä¸åŒ</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">id</span>(a), <span class="hljs-built_in">id</span>(b))<br><span class="hljs-built_in">print</span>(a == b)   <span class="hljs-comment"># True, å€¼ç›¸åŒï¼Œå†…éƒ¨ __eq__ é­”æ³•å‡½æ•°</span><br><br><span class="hljs-comment"># å°æ•´æ•°ã€å°å­—ç¬¦ä¸² å…¨å±€å”¯ä¸€ internæœºåˆ¶</span><br><br>a1 = <span class="hljs-number">1</span> a2 = <span class="hljs-number">1</span> <br><span class="hljs-built_in">print</span>(a1 <span class="hljs-keyword">is</span> a2)     <span class="hljs-comment"># True  </span><br>s1 = <span class="hljs-string">&#x27;abc&#x27;</span> <br>s2 = <span class="hljs-string">&#x27;abc&#x27;</span> <br><span class="hljs-built_in">print</span>(s1 <span class="hljs-keyword">is</span> s2)     <span class="hljs-comment"># True</span><br><br><span class="hljs-comment"># ç±»</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">People</span>:    <br>    <span class="hljs-keyword">pass</span>   <br><br><span class="hljs-comment"># People å…¨å±€å”¯ä¸€ </span><br>person = People() <br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(person) <span class="hljs-keyword">is</span> People)   <span class="hljs-comment"># True</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
      <category>Python å¸¸è§å‡½æ•°</category>
      
      <category>Python iså’Œ==çš„åŒºåˆ«</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>pythonå¸¸è§å‡½æ•°ä¹‹ isinstanceå’Œtypeçš„åŒºåˆ«</title>
    <link href="/2024/06/27/isinstance%E5%92%8Ctype%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
    <url>/2024/06/27/isinstance%E5%92%8Ctype%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
    
    <content type="html"><![CDATA[<h1 id="pythonå¸¸è§å‡½æ•°ä¹‹-isinstanceå’Œtypeçš„åŒºåˆ«"><a href="#pythonå¸¸è§å‡½æ•°ä¹‹-isinstanceå’Œtypeçš„åŒºåˆ«" class="headerlink" title="pythonå¸¸è§å‡½æ•°ä¹‹ isinstanceå’Œtypeçš„åŒºåˆ«"></a>pythonå¸¸è§å‡½æ•°ä¹‹ isinstanceå’Œtypeçš„åŒºåˆ«</h1><h2 id="isinstance"><a href="#isinstance" class="headerlink" title="isinstance"></a>isinstance</h2><p>isinstance ä¼šå»æŸ¥æ‰¾ç»§æ‰¿é“¾</p><h2 id="type"><a href="#type" class="headerlink" title="type"></a>type</h2><p>type åªåˆ¤æ–­å˜é‡çš„å†…å­˜åœ°å€</p><h2 id="ä»£ç è§£é‡Š"><a href="#ä»£ç è§£é‡Š" class="headerlink" title="ä»£ç è§£é‡Š"></a>ä»£ç è§£é‡Š</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span>:<br>    <span class="hljs-keyword">pass</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span>(<span class="hljs-title class_ inherited__">A</span>):<br>    <span class="hljs-keyword">pass</span><br><br>b = B()<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">isinstance</span>(b, B)) <span class="hljs-comment"># True</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">isinstance</span>(b, A)) <span class="hljs-comment"># True</span><br><br><span class="hljs-comment"># is åˆ¤æ–­ id çš„æ„æ€</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(b) <span class="hljs-keyword">is</span> B) <span class="hljs-comment"># True</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(b) <span class="hljs-keyword">is</span> A)     <span class="hljs-comment"># False</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
      <category>Python å¸¸è§å‡½æ•°</category>
      
      <category>Python isinstanceå’Œtypeçš„åŒºåˆ«</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Jmeter åˆ‡æ¢è¯­è¨€</title>
    <link href="/2024/06/26/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7JMETER/"/>
    <url>/2024/06/26/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7JMETER/</url>
    
    <content type="html"><![CDATA[<h1 id="Jmeter-ä»‹ç»"><a href="#Jmeter-ä»‹ç»" class="headerlink" title="Jmeter ä»‹ç»"></a>Jmeter ä»‹ç»</h1><p>Jmeter æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æ€§èƒ½æµ‹è¯•å·¥å…·ï¼Œæ˜¯é€šè¿‡javaå¼€å‘ï¼Œè¿™é‡Œç®€å•çš„å®‰è£…è¿‡ç¨‹ä¸åœ¨ä»‹ç»ï¼Œä¸»è¦ä»‹ç»ä¸€ä¸‹ä½¿ç”¨æŠ€å·§ã€‚</p><h2 id="åˆ‡æ¢è¯­è¨€"><a href="#åˆ‡æ¢è¯­è¨€" class="headerlink" title="åˆ‡æ¢è¯­è¨€"></a>åˆ‡æ¢è¯­è¨€</h2><p>å¯ä»¥é€šè¿‡å•å‡»options-&gt;Choose Languageæ¥é€‰æ‹©è¯­è¨€</p><img src="/2024/06/26/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7JMETER/Jmeter%E5%88%87%E6%8D%A2%E8%AF%AD%E8%A8%80.png" class="">]]></content>
    
    
    <categories>
      
      <category>æµ‹è¯•å¼€å‘å·¥å…·/æ¡†æ¶</category>
      
      <category>Jmeter</category>
      
      <category>Jmeter åˆ‡æ¢è¯­è¨€</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Jmeter</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Fiddlerä¹‹é¢æ¿ä¿¡æ¯ä»‹ç»</title>
    <link href="/2024/06/26/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7Fiddler/"/>
    <url>/2024/06/26/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7Fiddler/</url>
    
    <content type="html"><![CDATA[<h1 id="Fillder"><a href="#Fillder" class="headerlink" title="Fillder"></a>Fillder</h1><p>Fillderæ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŠ“åŒ…è½¯ä»¶ï¼Œä¸ç®¡æ˜¯åœ¨windowsï¼Œlinuxï¼Œ macä¸‹éƒ½å¯ä»¥ä½¿ç”¨ï¼å…³äºåŸºæœ¬çš„å®‰è£…è¿™è¾¹å°±è·³è¿‡äº†ï¼Œä¸‹é¢æˆ‘ä»¬ä¸»è¦æ¥çœ‹ä¸€ä¸‹ä½¿ç”¨è¿‡ç¨‹ä¸­çš„ä¸€äº›æŠ€å·§</p><h2 id="Fillder-é¢æ¿ä¿¡æ¯ç»„æˆ"><a href="#Fillder-é¢æ¿ä¿¡æ¯ç»„æˆ" class="headerlink" title="Fillder é¢æ¿ä¿¡æ¯ç»„æˆ"></a>Fillder é¢æ¿ä¿¡æ¯ç»„æˆ</h2><img src="/2024/06/26/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7Fiddler/fillder%E9%9D%A2%E6%9D%BF%E7%BB%84%E6%88%90%E4%BF%A1%E6%81%AF.png" class=""><h3 id="HTTPæŠ¥æ–‡æ€»ä½“ä»‹ç»"><a href="#HTTPæŠ¥æ–‡æ€»ä½“ä»‹ç»" class="headerlink" title="HTTPæŠ¥æ–‡æ€»ä½“ä»‹ç»"></a>HTTPæŠ¥æ–‡æ€»ä½“ä»‹ç»</h3><p>HTTPåè®®æŠ¥æ–‡çš„ç»“æ„</p><p>HTTPæŠ¥æ–‡åˆ†2ä¸ªï¼šä¸€ä¸ªæ˜¯HTTPè¯·æ±‚æŠ¥æ–‡ï¼Œä¸€ä¸ªæ˜¯HTTPå“åº”æŠ¥æ–‡</p><p>HTTPè¯·æ±‚æŠ¥æ–‡åˆ†ä¸º3éƒ¨åˆ†ï¼šç¬¬ä¸€éƒ¨åˆ†å«å…¶å®è¡Œ(Request line),ç¬¬äºŒéƒ¨åˆ†å«é¦–éƒ¨ï¼ˆRequest Header),ç¬¬ä¸‰éƒ¨åˆ†å«ä¸»ä½“(Body)</p><p>ç¬¬ä¸€è¡Œä¸­Methodè¡¨ç¤ºè¯·æ±‚æ–¹æ³•ï¼Œæ¯”å¦‚â€œPOSTâ€æˆ–è€…â€œGETâ€ç°åœ¨ä½¿ç”¨çš„HTTPåè®®ç‰ˆæœ¬æ˜¯1.1</p><p>ç¬¬äºŒéƒ¨åˆ†æ˜¯é¦–éƒ¨ï¼ˆHeader)</p><p>ç¬¬ä¸‰éƒ¨åˆ†æ˜¯body</p><p>ç‰¹åˆ«è¦æ³¨æ„ï¼ŒHeaderä¸Bodyä¹‹é—´æœ‰ä¸€ä¸ªç©ºè¡Œ</p><h3 id="Fillder-è¯·æ±‚ç•Œé¢"><a href="#Fillder-è¯·æ±‚ç•Œé¢" class="headerlink" title="Fillder è¯·æ±‚ç•Œé¢"></a>Fillder è¯·æ±‚ç•Œé¢</h3><img src="/2024/06/26/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7Fiddler/fillder%E8%AF%B7%E6%B1%82%E7%95%8C%E9%9D%A2.png" class=""><h3 id="Fillder-å“åº”ç•Œé¢"><a href="#Fillder-å“åº”ç•Œé¢" class="headerlink" title="Fillder å“åº”ç•Œé¢"></a>Fillder å“åº”ç•Œé¢</h3><img src="/2024/06/26/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7Fiddler/fillder%E5%93%8D%E5%BA%94%E7%95%8C%E9%9D%A2.png" class=""><h3 id="HTTPåè®®è¯·æ±‚æ–¹æ³•å’ŒçŠ¶æ€ç "><a href="#HTTPåè®®è¯·æ±‚æ–¹æ³•å’ŒçŠ¶æ€ç " class="headerlink" title="HTTPåè®®è¯·æ±‚æ–¹æ³•å’ŒçŠ¶æ€ç "></a>HTTPåè®®è¯·æ±‚æ–¹æ³•å’ŒçŠ¶æ€ç </h3><p>HTTPåè®®å®šä¹‰äº†å¾ˆå¤šä¸æœåŠ¡å™¨äº¤äº’çš„æ–¹æ³•ï¼Œæœ€åŸºæœ¬æœ‰5ç§ï¼Œåˆ†åˆ«æ˜¯GET HEAD POST PUT DELETEã€‚å¯¹åº”çš„å°±æ˜¯æŸ¥æ”¹å¢åˆ çš„4ä¸ªæ“ä½œï¼Œæœ€å¸¸è§çš„æ˜¯POSTå’ŒGETï¼ŒGETä¸€èˆ¬ç”¨äºè·å–&#x2F;æŸ¥è¯¢èµ„æºä¿¡æ¯ï¼Œè€ŒPOSTä¸€èˆ¬ç”¨äºæ›´æ–°èµ„æºä¿¡æ¯ã€‚</p><p>GETå’ŒPOSTæ–¹æ³•çš„åŒºåˆ«</p><p>GETæäº¤çš„æ•°æ®ä¼šæ”¾åœ¨URLä¹‹åï¼Œä»¥é—®å·ï¼ˆï¼Ÿï¼‰åˆ†å‰²URLå’Œä¼ è¾“æ•°æ®ï¼Œå‚æ•°ä¹‹é—´ä»¥&amp;ç›¸è¿ï¼Œè€ŒPOSTæ˜¯æŠŠæäº¤çš„æ•°æ®æ”¾åœ¨HTTPåŒ…çš„Bodyä¸­</p><p>GETæäº¤æ•°æ®å¤§å°æœ‰é™åˆ¶ï¼ˆå› ä¸ºæµè§ˆå™¨å¯¹URLçš„é•¿åº¦æœ‰é™åˆ¶ï¼‰ï¼Œè€ŒPOSTæ–¹æ³•æäº¤çš„æ•°æ®å¤§å°æ²¡æœ‰é™åˆ¶</p><p>GETæ–¹å¼éœ€è¦ä½¿ç”¨Request.QueryStringæ¥å–å¾—å˜é‡çš„å€¼ï¼Œè€ŒPOSTæ–¹æ³•é€šè¿‡Request.Formæ¥è·å–å˜é‡çš„å€¼</p><p>GETæ–¹å¼æäº¤æ•°æ®ä¼šå¸¦æ¥å®‰å…¨é—®é¢˜ï¼Œæ¯”å¦‚ç™»å½•ä¸€ä¸ªé¡µé¢é€šè¿‡GETçš„æ–¹å¼æäº¤æ•°æ®æ—¶å€™ï¼Œç”¨æˆ·åå’Œå¯†ç éƒ½ä¼šæ˜¾ç¤ºåœ¨URLä¸­ï¼Œå¦‚æœé¡µé¢å¯ä»¥è¢«ç¼“å­˜æˆ–è€…å…¶ä»–äººå¯ä»¥è®¿é—®è¿™å°æœºå™¨ï¼Œå°±å¯ä»¥ä»å†å²è®°å½•è·å¾—è¯¥ç”¨æˆ·çš„è´¦å·å’Œå¯†ç </p><h3 id="HTTP-æŠ¥æ–‡å“åº”ä»‹ç»"><a href="#HTTP-æŠ¥æ–‡å“åº”ä»‹ç»" class="headerlink" title="HTTP æŠ¥æ–‡å“åº”ä»‹ç»"></a>HTTP æŠ¥æ–‡å“åº”ä»‹ç»</h3><p>Responseæ¶ˆæ¯çš„ç»“æ„å’ŒRequestæ¶ˆæ¯çš„ç»“æ„åŸºæœ¬ä¸€æ ·ï¼ŒåŒæ ·ä¹Ÿåˆ†ä¸º3éƒ¨åˆ†ï¼›ç¬¬ä¸€éƒ¨åˆ†å«å“åº”è¡Œï¼ˆResponse Line)ï¼Œç¬¬äºŒéƒ¨åˆ†å«å“åº”é¦–éƒ¨ï¼ˆResponse Header)ï¼Œç¬¬ä¸‰éƒ¨åˆ†æ˜¯ä¸»ä½“(Body)</p><p>ç¬¬ä¸€éƒ¨åˆ†æ˜¯èµ·å§‹è¡Œï¼Œæœ‰çŠ¶æ€ç å’ŒçŠ¶æ€ç æ¶ˆæ¯</p><p>ç¬¬äºŒéƒ¨åˆ†æ˜¯é¦–éƒ¨ï¼Œ</p><p>ç¬¬ä¸‰éƒ¨åˆ†æ˜¯ä¸»ä½“</p><p>ç‰¹åˆ«æ³¨æ„ Headeré¦–éƒ¨å’ŒBody(ä¸»ä½“)ä¹‹é—´æœ‰ä¸€ä¸ªç©ºè¡Œ</p><h4 id="HTTP-çŠ¶æ€ç "><a href="#HTTP-çŠ¶æ€ç " class="headerlink" title="HTTP çŠ¶æ€ç "></a>HTTP çŠ¶æ€ç </h4><table><thead><tr><th>çŠ¶æ€ç </th><th>å·²å®šä¹‰èŒƒå›´</th><th>åˆ†ç±»</th></tr></thead><tbody><tr><td>1XX</td><td>100-101</td><td>ä¿¡æ¯æç¤ºï¼šè¡¨ç¤ºè¯·æ±‚å·²æˆåŠŸæ¥æ”¶ã€ç»§ç»­å¤„ç†</td></tr><tr><td>2XX</td><td>200-206</td><td>æˆåŠŸã€è¡¨ç¤ºè¯·æ±‚å·²è¢«æˆåŠŸæ¥æ”¶ï¼Œç†è§£ã€æ¥å—</td></tr><tr><td>3XX</td><td>300-305</td><td>é‡å®šå‘ï¼Œå®Œæˆè¯·æ±‚ï¼Œå¿…é¡»è¿›è¡Œæ›´è¿›ä¸€æ­¥çš„å¤„ç†</td></tr><tr><td>4XX</td><td>400-415</td><td>å®¢æˆ·ç«¯é”™è¯¯ï¼Œè¯·æ±‚æœ‰è¯­æ³•é”™è¯¯æˆ–è€…æ— æ³•å®ç°è¯·æ±‚</td></tr><tr><td>5XX</td><td>500-505</td><td>æœåŠ¡å™¨é”™è¯¯ï¼ŒæœåŠ¡å™¨æœªèƒ½å®ç°åˆæ³•çš„è¯·æ±‚</td></tr></tbody></table><h4 id="HTTP-åè®®Headerä»‹ç»"><a href="#HTTP-åè®®Headerä»‹ç»" class="headerlink" title="HTTP åè®®Headerä»‹ç»"></a>HTTP åè®®Headerä»‹ç»</h4><p>Headerçš„è¯­æ³•æ ¼å¼æ˜¯â€key:valueâ€ï¼Œä¸€è¡Œä¸€ä¸ªHeaderã€‚æ¯ä¸€ä¸ªHeaderéƒ½æœ‰ç‰¹æ®Šçš„ä½œç”¨ï¼Œåœ¨Finddlerä¸­å¯ä»¥æŸ¥çœ‹å®Œæ•´çš„Headerã€‚</p><p>Fiddlerèƒ½æ–¹ä¾¿çš„æŸ¥çœ‹HTTPè¯·æ±‚Header,é€‰ä¸­ä¸€ä¸ªHTTPè¯·æ±‚ï¼Œå•å‡»Inspectors tabâ€“&gt;Request tabâ€“&gt;Headers</p><h4 id="Cacheç›¸å…³çš„Header"><a href="#Cacheç›¸å…³çš„Header" class="headerlink" title="Cacheç›¸å…³çš„Header"></a>Cacheç›¸å…³çš„Header</h4><h5 id="COOKIE"><a href="#COOKIE" class="headerlink" title="COOKIE"></a>COOKIE</h5><p>Cookieæ˜¯ä¸€ç§HTTP Header,æ˜¯HTTPä¸­éå¸¸é‡è¦çš„å†…å®¹ï¼Œå®ƒç”±key&#x3D;&#x3D;valueå½¢å¼ç»„æˆ</p><p>Accept</p><p>Acceptè¡¨ç¤ºæµè§ˆå™¨å®¢æˆ·ç«¯å¯ä»¥æ¥å—çš„åª’ä½“ç±»å‹</p><p>ä¾‹å¦‚ Accept:text&#x2F;htmlä»£è¡¨æµè§ˆå™¨å¯ä»¥æ¥å—æœåŠ¡å™¨è¿”å›htmlï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬é€šå¸¸è¯´çš„htmlæ–‡æ¡£ã€‚</p><p>é€šé…ç¬¦&#x2F;*ä»£è¡¨ä»»æ„ç±»å‹ï¼Œ\<em>&#x2F;\</em>è¡¨ç¤ºå¯ä»¥æ¥å—ä»»ä½•ç±»å‹ã€‚</p><h5 id="Accept-Encoding"><a href="#Accept-Encoding" class="headerlink" title="Accept-Encoding"></a>Accept-Encoding</h5><p>Accept-Encodingè·Ÿå‹ç¼©æœ‰å…³ï¼Œæµè§ˆå™¨å‘é€HTTPè¯·æ±‚ç»™webæœåŠ¡å™¨ï¼ŒHTTPè¯·æ±‚ä¸­çš„Headeræœ‰Accept-Encoding:gizp,deflate(å‘Šè¯‰æœåŠ¡å™¨ï¼Œæµè§ˆå™¨æ”¯æŒgizpå‹ç¼©)</p><h5 id="Accept-Language"><a href="#Accept-Language" class="headerlink" title="Accept-Language"></a>Accept-Language</h5><p>Accept-Languageçš„ä½œç”¨æ˜¯å£°æ˜è‡ªå·±æ¥å—çš„è¯­è¨€</p><p>ä¹Ÿå°±æ˜¯ç¼–ç æ ¼å¼ UTF-8 GB2312 ZH-CN</p><h5 id="User-Agent"><a href="#User-Agent" class="headerlink" title="User-Agent"></a>User-Agent</h5><p>Use-Agentçš„ä½œç”¨æ˜¯æµè§ˆå™¨ç”¨æ¥å‘Šè¯‰æœåŠ¡å™¨ï¼Œå®¢æˆ·ç«¯ä½¿ç”¨çš„æ“ä½œç³»ç»ŸåŠç‰ˆæœ¬ï¼ŒCPUç±»å‹ã€æµè§ˆå™¨åŠç‰ˆæœ¬ã€æµè§ˆå™¨æ¸²æŸ“å¼•æ“ã€æµè§ˆå™¨è¯­è¨€ã€æµè§ˆå™¨æ’ä»¶</p><p>ä¿®æ”¹User-Agentå¯ä»¥ä¼ªè£…ä¸åŒçš„å®¢æˆ·ç«¯</p><img src="/2024/06/26/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7Fiddler/fillder%E4%BF%AE%E6%94%B9Useragent.png" class=""><p>å•å‡»Rules-&gt;User-Agentsç„¶åå¯ä»¥é€‰æ‹©æˆ‘ä»¬æƒ³è¦åˆ‡æ¢çš„ç³»ç»Ÿ</p><h5 id="Referer"><a href="#Referer" class="headerlink" title="Referer"></a>Referer</h5><p>HTTPåè®®å¤´ä¸­çš„Referä¸»è¦æ¥è®©æœåŠ¡å™¨æ¥åˆ¤æ–­æ¥æºé¡µé¢ï¼Œå³ç”¨æˆ·æ˜¯ä»å“ªä¸ªé¡µé¢è¿‡æ¥çš„ç½‘ç«™é€šå¸¸ç”¨æ¥ç»Ÿè®¡ç”¨æˆ·çš„æ¥æºï¼Œçœ‹ç”¨æˆ·æ˜¯ä»æœç´¢é¡µé¢æ¥çš„ï¼Œè¿˜æ˜¯ä»å…¶ä»–ç½‘ç«™é“¾æ¥è¿‡æ¥çš„ï¼Œæˆ–æ˜¯ä»ä¹¦ç­¾ç­‰è®¿é—®è¿‡æ¥çš„ï¼Œä»¥ä¾¿åˆç†çš„å®šä½ç½‘ç«™</p><p>Refereræœ‰æ—¶ä¹Ÿè¢«ç”¨ä½œé˜²ç›—é“¾ï¼Œå³ä¸‹è½½æ—¶å€™åˆ¤æ–­æ¥æºåœ°å€æ˜¯ä¸æ˜¯åœ¨ç½‘ç«™åŸŸåä¹‹å†…ï¼Œå¦åˆ™å°±ä¸èƒ½ä¸‹è½½æˆ–æ˜¾ç¤º</p><h5 id="Connection"><a href="#Connection" class="headerlink" title="Connection"></a>Connection</h5><p>ä»HTTP1.1èµ·ï¼Œç³»ç»Ÿé»˜è®¤å¼€å¯äº†Connection:Keep-Aliveï¼Œä¿æŒè¿æ¥ç‰¹æ€§</p><h5 id="Host"><a href="#Host" class="headerlink" title="Host"></a>Host</h5><p>ä¸»è¦æ˜¯æŒ‡å®šè¢«è¯·æ±‚çš„ä¸»æœºç«¯å£å·ï¼Œå®ƒé€šå¸¸ä»HTTP URLä¸­æå–å‡ºæ¥</p><p>Webç½‘é¡µæŠ“åŒ…å’Œfiddlerä¿®æ”¹åŒ…</p><p>é€šè¿‡fiddlerå¯ä»¥ä¿®æ”¹æ•°æ®ä¼ªé€ æ•°æ®</p><p>ç¬¬ä¸€ä¸ªHTTPè¯·æ±‚æ˜¯è·å–é¡µé¢å¸ƒå±€çš„HTML ä¹Ÿå«åšâ€œçˆ¶è¯·æ±‚â€</p><p>éšåçš„HTTPè¯·æ±‚ä¼šæ ¹æ®ä¹‹å‰é¡µé¢çš„è¯·æ±‚å»å†æ¬¡è¯·æ±‚ï¼Œå«åšâ€œå­è¯·æ±‚â€</p><img src="/2024/06/26/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7Fiddler/%E7%88%B6%E5%AD%90%E8%AF%B7%E6%B1%82.png" class=""><p>é€‰ä¸­æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªçˆ¶è¯·æ±‚ç„¶åå³å‡»é€‰æ‹©seletcâ€“&gt;Child Request å°±å¯ä»¥æ‰¾åˆ°å¯¹åº”çš„å­</p><p>æ‰¾çˆ¶è¯·æ±‚çš„è¯æˆ‘ä»¬é€‰ä¸­å­å­è¯·æ±‚å³å‡»é€‰æ‹©select-&gt;Parent Requestå°±å¯ä»¥æ‰¾åˆ°å¯¹åº”çš„çˆ¶è¯·æ±‚ã€‚</p><p>æŸ¥æ‰¾ç›¸åŒçš„è¯·æ±‚ï¼Œå³å‡»é€‰æ‹©selectâ€“&gt;Duplicate Requestså°±å¯ä»¥é€‰ä¸­äº†ç›¸åŒçš„è¯·æ±‚äº†ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æµ‹è¯•å¼€å‘å·¥å…·/æ¡†æ¶</category>
      
      <category>Fillder</category>
      
      <category>Fillder é¢æ¿ä¿¡æ¯ä»‹ç»</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Fillder</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>pythonå¸¸è§å‡½æ•°ä¹‹ Python åˆ‡ç‰‡æ“ä½œè¯¦è§£</title>
    <link href="/2024/06/25/%E6%B5%8B%E8%AF%95%E6%96%87%E7%AB%A0/"/>
    <url>/2024/06/25/%E6%B5%8B%E8%AF%95%E6%96%87%E7%AB%A0/</url>
    
    <content type="html"><![CDATA[<h1 id="Pythonå¸¸è§å‡½æ•°ä¹‹-Python-åˆ‡ç‰‡æ“ä½œè¯¦è§£"><a href="#Pythonå¸¸è§å‡½æ•°ä¹‹-Python-åˆ‡ç‰‡æ“ä½œè¯¦è§£" class="headerlink" title="Pythonå¸¸è§å‡½æ•°ä¹‹ Python åˆ‡ç‰‡æ“ä½œè¯¦è§£"></a>Pythonå¸¸è§å‡½æ•°ä¹‹ Python åˆ‡ç‰‡æ“ä½œè¯¦è§£</h1><p>åœ¨ Python ä¸­ï¼Œåˆ‡ç‰‡ï¼ˆslicingï¼‰æ˜¯ä¸€ç§å¼ºå¤§çš„å·¥å…·ï¼Œå®ƒå…è®¸æˆ‘ä»¬è®¿é—®åºåˆ—ç±»å‹ï¼ˆå¦‚åˆ—è¡¨ã€å…ƒç»„ã€å­—ç¬¦ä¸²ç­‰ï¼‰ä¸­çš„ä¸€éƒ¨åˆ†å…ƒç´ ã€‚åˆ‡ç‰‡çš„åŸºæœ¬è¯­æ³•æ˜¯ <code>[start:stop:step]</code>ï¼Œå…¶ä¸­ <code>start</code> æ˜¯èµ·å§‹ç´¢å¼•ï¼ˆåŒ…å«ï¼‰ï¼Œ<code>stop</code> æ˜¯ç»“æŸç´¢å¼•ï¼ˆä¸åŒ…å«ï¼‰ï¼Œ<code>step</code> æ˜¯æ­¥é•¿ã€‚  </p><h2 id="ä¸»è¦å†…å®¹"><a href="#ä¸»è¦å†…å®¹" class="headerlink" title="ä¸»è¦å†…å®¹"></a>ä¸»è¦å†…å®¹</h2><p>ç¬¬ä¸€ä¸ªæ•°å­— start è¡¨ç¤ºåˆ‡ç‰‡å¼€å§‹ä½ç½®ï¼Œé»˜è®¤ 0</p><p>ç¬¬äºŒä¸ªæ•°å­— end è¡¨ç¤ºåˆ‡ç‰‡æˆªæ­¢(ä½†ä¸åŒ…å«)ä½ç½®ï¼Œé»˜è®¤åˆ—è¡¨é•¿åº¦</p><p>ç¬¬ä¸‰ä¸ªæ•°å­— step è¡¨ç¤ºåˆ‡ç‰‡çš„æ­¥éª¤ï¼Œé»˜è®¤ä¸º 1</p><p>å½“ start ä¸º 0 æ—¶å¯ä»¥çœç•¥</p><p>å½“ end ä¸ºåˆ—è¡¨é•¿åº¦æ—¶å¯ä»¥çœç•¥</p><p>å½“ step ä¸º 1 æ—¶å¯ä»¥çœç•¥ï¼Œå¹¶ä¸”çœç•¥æ­¥é•¿æ—¶å¯ä»¥åŒæ—¶çœç•¥æœ€åä¸€ä¸ªå†’å·</p><p>å½“ step ä¸ºè´Ÿæ•°æ—¶ï¼Œè¡¨ç¤ºåå‘åˆ‡ç‰‡ï¼Œè¿™æ—¶ start åº”è¯¥æ¯” end çš„å€¼è¦å¤§æ‰è¡Œ</p><h3 id="ä»£ç ç¤ºä¾‹"><a href="#ä»£ç ç¤ºä¾‹" class="headerlink" title="ä»£ç ç¤ºä¾‹"></a>ä»£ç ç¤ºä¾‹</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs python">a_list = [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>, <span class="hljs-number">11</span>, <span class="hljs-number">13</span>, <span class="hljs-number">15</span>, <span class="hljs-number">17</span>]<br><br>a_list[::]      <span class="hljs-comment"># è¿”å›åŒ…å«åŸåˆ—è¡¨ä¸­æ‰€æœ‰å…ƒç´ çš„æ–°åˆ—è¡¨</span><br><br>a_list[::-<span class="hljs-number">1</span>]    <span class="hljs-comment"># è¿”å›åŒ…å«åŸåˆ—è¡¨ä¸­æ‰€æœ‰å…ƒç´ çš„é€†å‘æ–°åˆ—è¡¨</span><br><br>a_list[::<span class="hljs-number">2</span>]     <span class="hljs-comment"># éš”ä¸€ä¸ªå…ƒç´ å–ä¸€ä¸ªï¼Œè·å–å¶æ•°ä½ç½®çš„å…ƒç´ </span><br><br>a_list[<span class="hljs-number">1</span>::<span class="hljs-number">2</span>]    <span class="hljs-comment"># éš”ä¸€ä¸ªå…ƒç´ å–ä¸€ä¸ªï¼Œè·å–å¥‡æ•°ä½ç½®çš„å…ƒç´ </span><br><br>a_list[<span class="hljs-number">3</span>:<span class="hljs-number">6</span>]     <span class="hljs-comment"># æŒ‡å®šåˆ‡ç‰‡çš„å¼€å§‹å’Œç»“æŸä½ç½®</span><br><br>a_list[<span class="hljs-number">0</span>:<span class="hljs-number">100</span>]   <span class="hljs-comment"># åˆ‡ç‰‡ç»“æŸä½ç½®å¤§äºåˆ—è¡¨é•¿åº¦æ˜¯ï¼Œä»åˆ—è¡¨å°¾éƒ¨æˆªæ–­</span><br><br>a_list[<span class="hljs-number">100</span>:]    <span class="hljs-comment"># åˆ‡ç‰‡å¼€å§‹ä½ç½®å¤§äºåˆ—è¡¨é•¿åº¦æ—¶ï¼Œè¿”å›ç©ºåˆ—è¡¨</span><br><br><br><br>a_list[<span class="hljs-built_in">len</span>(a_list):<span class="hljs-number">0</span>] = [<span class="hljs-number">9</span>]     <span class="hljs-comment"># åœ¨åˆ—è¡¨å°¾éƒ¨å¢åŠ å…ƒç´ </span><br><br>a_list[:<span class="hljs-number">0</span>] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>]             <span class="hljs-comment"># åœ¨åˆ—è¡¨å¤´éƒ¨å¢åŠ å…ƒç´ </span><br><br>a_list[<span class="hljs-number">3</span>:<span class="hljs-number">3</span>] = [<span class="hljs-number">100</span>]             <span class="hljs-comment"># åœ¨åˆ—è¡¨ä¸­é—´ä½ç½®æ’å…¥å…ƒç´ </span><br><br>a_list[:<span class="hljs-number">2</span>] = [<span class="hljs-number">100</span>, <span class="hljs-number">200</span>]         <span class="hljs-comment"># æ›¿æ¢åˆ—è¡¨å…ƒç´ ï¼Œç­‰å·ä¸¤è¾¹é•¿åº¦ç›¸ç­‰</span><br><br>a_list[<span class="hljs-number">3</span>:] = [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]          <span class="hljs-comment"># æ›¿æ¢åˆ—è¡¨å…ƒç´ ï¼Œç­‰å·ä¸¤è¾¹é•¿åº¦å¯ä»¥ä¸ç›¸ç­‰</span><br><br>a_list[:<span class="hljs-number">3</span>] = []                 <span class="hljs-comment"># åˆ é™¤åˆ—è¡¨ä¸­å‰ 3 ä¸ªå…ƒç´ </span><br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
      <category>Python å¸¸è§å‡½æ•°</category>
      
      <category>Python å¸¸è§åˆ‡ç‰‡æ“ä½œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
